// scss-lint:disable QualifyingElement

// Base typography
// -------------------------
h1,
h2,
h3,
h4,
h5,
h6 {
  @apply font-medium text-n-slate-12;
}

p {
  text-rendering: optimizeLegibility;
  @apply mb-2 leading-[1.65] text-sm;

  a {
    @apply text-purple-600 dark:text-purple-400 cursor-pointer hover:text-purple-700 dark:hover:text-purple-300 transition-colors duration-200;
  }
}

a {
  @apply text-sm text-purple-600 hover:text-purple-700 transition-colors duration-200;
}

hr {
  @apply clear-both max-w-full h-0 my-5 mx-0 border-purple-200 dark:border-purple-700;
}

ul,
ol,
dl {
  @apply list-disc list-outside leading-[1.65];
}

ul:not(.reset-base),
ol:not(.reset-base),
dl:not(.reset-base) {
  @apply mb-0;
}

// Button base - Tema roxo elegante
button {
  font-family: inherit;
  @apply inline-block text-center align-middle cursor-pointer text-sm m-0 py-2 px-4 transition-all duration-200 ease-in-out border-none rounded-xl disabled:opacity-50 font-medium;
}

// Form elements - Bordas arredondadas
// -------------------------
label {
  @apply text-n-slate-12 block m-0 leading-7 text-sm font-medium;
}

.input-wrap,
.help-text {
  @apply text-n-slate-11 text-sm font-medium;
}

// Focus outline removal
.button,
textarea {
  outline: none;
}

// Field base styles (Input, TextArea, Select) - Estilo moderno com bordas arredondadas
@layer components {
  .field-base {
    @apply block box-border w-full transition-all duration-200 ease-in-out focus:outline-none appearance-none mx-0 mt-0 mb-4 py-3 px-4 rounded-lg text-base font-normal bg-white placeholder:text-n-slate-10 dark:placeholder:text-n-slate-10 text-n-slate-12 border-2 border-purple-200 dark:border-purple-600 hover:border-purple-300 dark:hover:border-purple-500 focus:border-purple-500 dark:focus:border-purple-400 focus:ring-4 focus:ring-purple-100 dark:focus:ring-purple-900 focus:ring-opacity-50 shadow-sm;
  }

  .field-disabled {
    @apply opacity-50 border-gray-300 dark:border-gray-600 cursor-not-allowed bg-gray-50 dark:bg-gray-800;
  }

  .field-error {
    @apply border-red-400 dark:border-red-500 hover:border-red-500 dark:hover:border-red-400 focus:border-red-500 dark:focus:border-red-400 focus:ring-red-100 dark:focus:ring-red-900;
  }

  // Cards elegantes
  .elegant-card {
    @apply bg-white dark:bg-gray-800 rounded-xl shadow-elegant border border-purple-100 dark:border-purple-800 p-6 transition-all duration-200 hover:shadow-modern;
  }

  // Containers modernos
  .modern-container {
    @apply bg-gradient-to-br from-purple-50 to-white dark:from-gray-900 dark:to-gray-800 rounded-2xl p-8 shadow-luxury;
  }

  // Glass effect
  .glass-effect {
    @apply bg-white/10 backdrop-blur-lg border border-white/20 rounded-xl;
  }
}

$form-input-selector: "input[type]:not([type='file']):not([type='checkbox']):not([type='radio']):not([type='range']):not([type='button']):not([type='submit']):not([type='reset']):not([type='color']):not([type='image']):not([type='hidden']):not(.reset-base):not(.multiselect__input):not(.no-margin)";

#{$form-input-selector} {
  @apply field-base h-12; // Aumentado para melhor proporção

  &[disabled] {
    @apply field-disabled;
  }

  &.error {
    @apply field-error mb-1;
  }

  // Estados hover e focus aprimorados
  &:hover:not(:disabled) {
    @apply transform scale-[1.01] transition-transform duration-200;
  }

  &:focus {
    @apply transform scale-[1.02];
  }
}

input[type='file']:not(.multiselect__input) {
  @apply leading-[1.15] mb-4 bg-transparent text-sm rounded-lg p-2 border-2 border-dashed border-purple-300 hover:border-purple-400 transition-colors duration-200;
}

// Select - Estilo moderno
select {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='32' height='24' viewBox='0 0 32 24'><polygon points='0,0 32,0 16,24' style='fill: rgb%28107, 70, 193%29'></polygon></svg>");
  background-size: 12px 8px;

  @apply field-base h-12 bg-origin-content bg-no-repeat py-3 ltr:bg-[right_1rem_center] rtl:bg-[left_1rem_center] ltr:pr-10 rtl:pl-10 rtl:pr-4 ltr:pl-4;

  &[disabled] {
    @apply field-disabled;
  }
}

// Textarea - Estilo moderno
textarea {
  @apply field-base min-h-[6rem] resize-y;

  &[disabled] {
    @apply field-disabled;
  }
}

// Add mb-1 when .help-text exists within the same label container
label:has(.help-text) {
  input,
  textarea,
  select {
    margin-bottom: 0.25rem !important;
  }
}

// Error handling - Estilo aprimorado
.has-multi-select-error {
  div.multiselect {
    @apply mb-1 border-red-400 rounded-lg;
  }
}

// FormKit support
.formkit-outer[data-invalid='true'] {
  #{$form-input-selector},
  textarea,
  select {
    @apply field-error;
  }

  .formkit-message {
    @apply text-red-500 dark:text-red-400 block text-sm mb-2.5 w-full font-medium;
  }
}

.error {
  #{$form-input-selector},
  input:not([type]),
  textarea,
  select,
  .multiselect > .multiselect__tags,
  .multiselect:not(.no-margin) {
    @apply field-error;
  }

  // Only add mb-1 when .message exists within the same .error container
  // And exclude no-margin from the margin-bottom
  &:has(.message) {
    input:not(.no-margin),
    textarea,
    select {
      margin-bottom: 0.25rem !important;
    }
  }

  .message {
    @apply text-red-500 dark:text-red-400 block text-sm mb-2.5 w-full font-medium;
  }
}

.input-group.small {
  input {
    @apply text-sm h-10;
  }

  .error {
    @apply text-red-500 dark:text-red-400;
  }
}

// Code styling - Tema roxo
code {
  font-family: 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas',
    '"Liberation Mono"', '"Courier New"', 'monospace';
  @apply text-xs border-0 bg-purple-50 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-2 py-1 rounded-md;

  &.hljs {
    @apply bg-purple-50 dark:bg-purple-900 text-purple-900 dark:text-purple-100 rounded-xl p-6 shadow-inner;

    .hljs-number,
    .hljs-string {
      @apply text-amber-600 dark:text-amber-400;
    }

    .hljs-name,
    .hljs-tag {
      @apply text-purple-700 dark:text-purple-300;
    }

    .hljs-keyword {
      @apply text-purple-800 dark:text-purple-200 font-semibold;
    }

    .hljs-comment {
      @apply text-gray-500 dark:text-gray-400 italic;
    }
  }
}

// Table - Estilo moderno
table {
  @apply border-spacing-0 text-sm w-full rounded-lg overflow-hidden shadow-soft;

  th {
    @apply bg-purple-50 dark:bg-purple-900 text-purple-900 dark:text-purple-100 font-semibold p-4 border-b border-purple-200 dark:border-purple-700;
  }

  td {
    @apply p-4 border-b border-purple-100 dark:border-purple-800;
  }

  tr:hover {
    @apply bg-purple-25 dark:bg-purple-950 transition-colors duration-200;
  }
}

// Animações suaves globais
* {
  @apply transition-colors duration-200;
}

// Scrollbar personalizada
::-webkit-scrollbar {
  @apply w-2;
}

::-webkit-scrollbar-track {
  @apply bg-purple-50 dark:bg-purple-900 rounded-lg;
}

::-webkit-scrollbar-thumb {
  @apply bg-purple-300 dark:bg-purple-600 rounded-lg hover:bg-purple-400 dark:hover:bg-purple-500;
}

// Classes utilitárias adicionais
.text-gradient {
  background: linear-gradient(135deg, #6b46c1, #9f7aea);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.border-gradient {
  border: 2px solid transparent;
  background: linear-gradient(white, white) padding-box,
              linear-gradient(135deg, #6b46c1, #9f7aea) border-box;
}

// Efeitos hover globais
.hover-lift {
  @apply transition-transform duration-200 hover:transform hover:scale-105;
}

.hover-glow {
  @apply transition-shadow duration-200 hover:shadow-purple-glow;
}
