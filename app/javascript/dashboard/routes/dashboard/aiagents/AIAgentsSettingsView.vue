<script setup>
import { useRoute } from 'vue-router';
import AiAgentGeneralSettingsView from './AiAgentGeneralSettingsView.vue'
import { onMounted, ref } from 'vue';
import aiAgents from '../../../api/aiAgents';

const tabs = [{
  key: '0',
  index: 0,
  name: 'General',
}, {
  key: '1',
  index: 1,
  name: 'Knowledge Sources',
}, {
  key: '2',
  index: 2,
  name: 'Integrations',
}, {
  key: '3',
  index: 3,
  name: 'Followups',
}]
const activeIndex = ref(0)

const route = useRoute()

const loadingData = ref(false)
const data = ref()
async function showData() {
  try {
    loadingData.value = true

    data.value = await aiAgents.detailAgent(route.params.aiAgentId).then(v => v?.data)
  } finally {
    loadingData.value = false
  }
}

onMounted(() => {
  showData()
})
</script>

<template>
  <div class="w-full px-8 py-8 bg-n-background">
    <div class="">
      <center v-if="loadingData">
        <span class="mt-4 mb-4 spinner" />
      </center>
      <div class="mb-3 mt-6">
        <h1 class="text-2xl font-semibold font-interDisplay tracking-[0.3px] text-slate-900 dark:text-slate-25">
          {{ data?.name }}
        </h1>
      </div>
    </div>
    <woot-tabs :index="activeIndex" class="mb-3 tabs-rm-margin" @change="(i) => {
      activeIndex = i
    }">
      <woot-tabs-item v-for="tab in tabs" :key="tab.key" :index="tab.index" :name="tab.name" :show-badge="false" />
    </woot-tabs>
    <div v-show="activeIndex === 0">
      <AiAgentGeneralSettingsView :data="data" />
    </div>
  </div>
</template>

<style>
.tabs-rm-margin .tabs {
  padding-left: 0px !important;
}
</style>