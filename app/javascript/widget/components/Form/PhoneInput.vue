<script setup>
import { ref } from 'vue';

const activeCountryCode = ref('IR'); // Ú©Ø´ÙˆØ± Ø«Ø§Ø¨Øª
const activeDialCode = ref('+98'); // Ú©Ø¯ Ø«Ø§Ø¨Øª
const phoneNumber = ref(''); // ÙˆØ±ÙˆØ¯ÛŒ Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†


const countriesList = [
  {
    name: 'United States',
    dial_code: '+1',
    emoji: 'ğŸ‡ºğŸ‡¸',
    id: 'US',
  },
];

const countries = computed(() => countriesList); // ÙÙ‚Ø· Ù‡Ù…Ø§Ù† Ú©Ø´ÙˆØ± Ø±Ø§ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯

// ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¬Ø³ØªØ¬Ùˆ Ùˆ Ù†Ù…Ø§ÛŒØ´ Ù…Ù†Ùˆ
const showDropdown = ref(false); // Ù…Ù†ÙˆÛŒ Ú©Ø´ÙˆØ±Ù‡Ø§ Ø¯ÛŒÚ¯Ø± Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯

// Ø­Ø°Ù Ø¬Ø³ØªØ¬Ùˆ Ø§Ø² Ù„ÛŒØ³Øª
function toggleCountryDropdown() {
  // Ù‡ÛŒÚ†â€ŒÚ©Ø§Ø±ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú†ÙˆÙ† Ù…Ù†Ùˆ ØºÛŒØ± ÙØ¹Ø§Ù„ Ø§Ø³Øª
}</script>

<template>
<div class="relative mt-2 phone-input--wrap">
  <div
    class="flex items-center justify-start w-full border border-solid rounded outline-none phone-input"
    :class="inputHasError"
  >
    <div
      class="flex items-center justify-between h-full px-2 py-2 country-emoji--wrap"
      :class="dropdownClass"
    >
      <h5 v-if="activeCountry.emoji" class="mb-0 text-xl">
        {{ activeCountry.emoji }}
      </h5>
      <span
        v-if="activeDialCode"
        class="py-2 pl-2 pr-0 text-base"
        :class="$dm('text-slate-700', 'dark:text-slate-50')"
      >
        {{ activeDialCode }}
      </span>
    </div>
    <input
      :value="phoneNumber"
      type="phoneInput"
      class="w-full h-full py-2 pl-2 pr-3 leading-tight border-0 rounded-r outline-none"
      name="phoneNumber"
      :placeholder="placeholder"
      :class="inputLightAndDarkModeColor"
      @input="onChange"
      @blur="context.blurHandler"
    />
  </div>
</div>
</template>

<style lang="scss" scoped>
@import 'widget/assets/scss/variables.scss';

.phone-input--wrap {
  .phone-input {
    height: 2.8rem;

    input:placeholder-shown {
      text-overflow: ellipsis;
      direction: rtl;
    }
  }

  .country-emoji--wrap {
    border-bottom-left-radius: 0.18rem;
    border-top-left-radius: 0.18rem;
    min-width: 3.6rem;
    width: 3.6rem;
  }

  .country-dropdown {
    min-width: 6rem;
    max-width: 14.8rem;
    width: 100%;
  }
}
</style>
