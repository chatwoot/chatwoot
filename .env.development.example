# GP Bikes AI Assistant - Development Environment Variables
# Copy this file to .env.development and update with your values
# NEVER commit .env.development to version control!
#
# Quick Start:
#   1. cp .env.development.example .env.development
#   2. Run: ./bin/generate-secrets
#   3. Add your OpenAI API key (Week 2)
#   4. docker-compose up -d
#
# Last Updated: 2025-09-30

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL Connection
DATABASE_URL=postgresql://postgres:chatwoot_dev_password@postgres:5432/chatwoot_dev
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DATABASE=chatwoot_dev
POSTGRES_USERNAME=postgres
POSTGRES_PASSWORD=chatwoot_dev_password

# For production, use a strong password:
# POSTGRES_PASSWORD=$(openssl rand -base64 32)

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

# Redis Connection
REDIS_URL=redis://redis:6379
REDIS_HOST=redis
REDIS_PORT=6379

# Redis Password (optional for development, required for production)
# REDIS_PASSWORD=your-redis-password-here

# ============================================================================
# RAILS CONFIGURATION
# ============================================================================

# Environment
RAILS_ENV=development
RACK_ENV=development
NODE_ENV=development

# Secret Key Base (REQUIRED - generate with: rails secret)
# For development, this can be a placeholder
# For production, MUST be a cryptographically secure random string
SECRET_KEY_BASE=development_secret_key_base_replace_in_production_with_output_from_rails_secret

# Logging
RAILS_LOG_TO_STDOUT=true
RAILS_LOG_LEVEL=debug  # Options: debug, info, warn, error, fatal

# Threading
RAILS_MAX_THREADS=5

# Force SSL (set to true in production)
FORCE_SSL=false

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================

# Frontend URL (where the app is accessible)
FRONTEND_URL=http://localhost:3000

# Enable public account signup (disable in production if using invites only)
ENABLE_ACCOUNT_SIGNUP=true

# Webpacker Dev Server (for hot module reload)
WEBPACKER_DEV_SERVER_HOST=0.0.0.0
WEBPACKER_DEV_SERVER_PUBLIC=localhost:3035

# Action Cable (WebSocket) URL
ACTION_CABLE_URL=ws://localhost:3000/cable

# ============================================================================
# STORAGE CONFIGURATION
# ============================================================================

# Active Storage Service (local, amazon, google, azure)
ACTIVE_STORAGE_SERVICE=local

# For production with AWS S3:
# ACTIVE_STORAGE_SERVICE=amazon
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_REGION=us-east-1
# AWS_BUCKET_NAME=gp-bikes-production

# Rails Inbound Email Service
RAILS_INBOUND_EMAIL_SERVICE=local

# ============================================================================
# SIDEKIQ CONFIGURATION
# ============================================================================

# Number of concurrent Sidekiq threads
SIDEKIQ_CONCURRENCY=10

# Enable periodic jobs (scheduled background tasks)
SIDEKIQ_ENABLE_PERIODIC=true

# ============================================================================
# GP BIKES SPECIFIC CONFIGURATION
# ============================================================================

# Enable GP Bikes customizations
GP_BIKES_ENABLED=true

# Enable AI Workers (set to true after Week 2 implementation)
AI_WORKERS_ENABLED=false

# Business Details
GP_BIKES_BUSINESS_NAME="GP Bikes Yamaha"
GP_BIKES_PHONE="+593-XX-XXX-XXXX"
GP_BIKES_EMAIL="ventas@gpbikes.com.ec"
GP_BIKES_ADDRESS="Quito, Ecuador"

# Operating Hours (for AI responses)
GP_BIKES_HOURS_OPEN="09:00"
GP_BIKES_HOURS_CLOSE="18:00"
GP_BIKES_DAYS_OPEN="Monday-Saturday"

# ============================================================================
# OPENAI API CONFIGURATION (Week 2 - AI Workers)
# ============================================================================

# OpenAI API Credentials
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-your-openai-api-key-here
OPENAI_ORG_ID=org-your-openai-organization-id-here

# Model Selection
# Options: gpt-4, gpt-4-turbo, gpt-3.5-turbo
# Recommendation: gpt-4 for production, gpt-3.5-turbo for development
OPENAI_MODEL=gpt-4

# Model Parameters
OPENAI_TEMPERATURE=0.7  # 0.0 = deterministic, 1.0 = creative
OPENAI_MAX_TOKENS=500   # Maximum response length
OPENAI_TIMEOUT=30       # API timeout in seconds

# Cost Control
OPENAI_MAX_REQUESTS_PER_MINUTE=50
OPENAI_MAX_TOKENS_PER_DAY=100000

# ============================================================================
# WHATSAPP BUSINESS API (Sprint 2)
# ============================================================================

# WhatsApp Cloud API Credentials
# Get from: https://developers.facebook.com/apps
WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id-here
WHATSAPP_ACCESS_TOKEN=your-whatsapp-access-token-here
WHATSAPP_WEBHOOK_VERIFY_TOKEN=your-custom-verify-token-here
WHATSAPP_BUSINESS_ACCOUNT_ID=your-business-account-id-here

# WhatsApp Configuration
WHATSAPP_API_VERSION=v21.0
WHATSAPP_CLOUD_API_BASE_URL=https://graph.facebook.com

# ============================================================================
# EMAIL CONFIGURATION (Optional)
# ============================================================================

# SMTP Settings (for transactional emails)
# Leave blank to disable email features in development

# For Gmail (requires app-specific password):
# SMTP_ADDRESS=smtp.gmail.com
# SMTP_PORT=587
# SMTP_DOMAIN=gmail.com
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-specific-password
# SMTP_ENABLE_STARTTLS_AUTO=true

# For SendGrid:
# SMTP_ADDRESS=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_DOMAIN=sendgrid.net
# SMTP_USERNAME=apikey
# SMTP_PASSWORD=your-sendgrid-api-key

# Generic SMTP Configuration:
SMTP_ADDRESS=
SMTP_PORT=587
SMTP_DOMAIN=
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_AUTHENTICATION=plain
SMTP_ENABLE_STARTTLS_AUTO=true

# Sender Email
MAILER_SENDER_EMAIL=noreply@gpbikes.local
MAILER_INBOUND_EMAIL_DOMAIN=

# ============================================================================
# MONITORING & ERROR TRACKING (Optional)
# ============================================================================

# Sentry (Error Tracking)
# Get DSN from: https://sentry.io/settings/projects/
SENTRY_DSN=

# Datadog (APM & Monitoring)
DATADOG_API_KEY=
DATADOG_APP_KEY=

# New Relic (APM)
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_APP_NAME=gp-bikes-ai-assistant-dev

# ============================================================================
# FEATURE FLAGS (Optional)
# ============================================================================

# Enable/disable features for testing
FEATURE_FLAG_AI_CONVERSATION_SUMMARY=false
FEATURE_FLAG_AI_LEAD_SCORING=false
FEATURE_FLAG_AI_APPOINTMENT_BOOKING=false
FEATURE_FLAG_VEHICLE_CATALOG_INTEGRATION=false

# ============================================================================
# DEVELOPMENT TOOLS (Optional)
# ============================================================================

# Bullet (N+1 query detection)
BULLET_ENABLED=true

# Rack Mini Profiler
RACK_MINI_PROFILER_ENABLED=false

# Debug Logging
LOG_LEVEL=debug

# Seed Data
SEED_SUPER_ADMIN_EMAIL=admin@gpbikes.local
SEED_SUPER_ADMIN_PASSWORD=password123

# ============================================================================
# TESTING CONFIGURATION
# ============================================================================

# Test Database (only used when RAILS_ENV=test)
TEST_DATABASE_URL=postgresql://postgres:chatwoot_dev_password@postgres:5432/chatwoot_test

# ============================================================================
# NOTES
# ============================================================================
#
# Security Best Practices:
# - NEVER commit .env.development to Git
# - Use strong random passwords in production
# - Rotate API keys regularly
# - Use different credentials for dev/staging/production
#
# Required Variables (Minimum to run):
# - DATABASE_URL
# - REDIS_URL
# - SECRET_KEY_BASE
# - FRONTEND_URL
#
# Optional Variables (Enable as needed):
# - OPENAI_API_KEY (Week 2+)
# - WHATSAPP credentials (Sprint 2+)
# - SMTP settings (for email features)
# - Monitoring tools (production)
#
# For help:
# - See docs/development/SETUP.md
# - Check docker-compose.yml for service defaults
# - Ask in #gp-bikes-dev Slack channel
