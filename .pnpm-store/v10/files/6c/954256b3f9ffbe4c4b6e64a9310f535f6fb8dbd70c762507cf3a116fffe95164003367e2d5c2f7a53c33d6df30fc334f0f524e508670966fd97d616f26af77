{"version":3,"file":"components.js","sources":["../../../src/vendor/components.ts"],"sourcesContent":["import type { ViewModel } from '../types';\n\n// Vendored from https://github.com/vuejs/vue/blob/612fb89547711cacb030a3893a0065b785802860/src/core/util/debug.js\n// with types only changes.\n\n// The MIT License (MIT)\n\n// Copyright (c) 2013-present, Yuxi (Evan) You\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nconst classifyRE = /(?:^|[-_])(\\w)/g;\nconst classify = (str: string): string => str.replace(classifyRE, c => c.toUpperCase()).replace(/[-_]/g, '');\n\nconst ROOT_COMPONENT_NAME = '<Root>';\nconst ANONYMOUS_COMPONENT_NAME = '<Anonymous>';\n\nconst repeat = (str: string, n: number): string => {\n  return str.repeat(n);\n};\n\nexport const formatComponentName = (vm?: ViewModel, includeFile?: boolean): string => {\n  if (!vm) {\n    return ANONYMOUS_COMPONENT_NAME;\n  }\n\n  if (vm.$root === vm) {\n    return ROOT_COMPONENT_NAME;\n  }\n\n  // https://github.com/getsentry/sentry-javascript/issues/5204 $options can be undefined\n  if (!vm.$options) {\n    return ANONYMOUS_COMPONENT_NAME;\n  }\n\n  const options = vm.$options;\n\n  let name = options.name || options._componentTag || options.__name;\n  const file = options.__file;\n  if (!name && file) {\n    const match = file.match(/([^/\\\\]+)\\.vue$/);\n    if (match) {\n      name = match[1];\n    }\n  }\n\n  return (\n    (name ? `<${classify(name)}>` : ANONYMOUS_COMPONENT_NAME) + (file && includeFile !== false ? ` at ${file}` : '')\n  );\n};\n\nexport const generateComponentTrace = (vm?: ViewModel): string => {\n  if (vm && (vm._isVue || vm.__isVue) && vm.$parent) {\n    const tree = [];\n    let currentRecursiveSequence = 0;\n    while (vm) {\n      if (tree.length > 0) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const last = tree[tree.length - 1] as any;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        if (last.constructor === vm.constructor) {\n          currentRecursiveSequence++;\n          vm = vm.$parent; // eslint-disable-line no-param-reassign\n          continue;\n        } else if (currentRecursiveSequence > 0) {\n          tree[tree.length - 1] = [last, currentRecursiveSequence];\n          currentRecursiveSequence = 0;\n        }\n      }\n      tree.push(vm);\n      vm = vm.$parent; // eslint-disable-line no-param-reassign\n    }\n\n    const formattedTree = tree\n      .map(\n        (vm, i) =>\n          `${\n            (i === 0 ? '---> ' : repeat(' ', 5 + i * 2)) +\n            (Array.isArray(vm)\n              ? `${formatComponentName(vm[0])}... (${vm[1]} recursive calls)`\n              : formatComponentName(vm))\n          }`,\n      )\n      .join('\\n');\n\n    return `\\n\\nfound in\\n\\n${formattedTree}`;\n  }\n\n  return `\\n\\n(found in ${formatComponentName(vm)})`;\n};\n"],"names":[],"mappings":"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"}