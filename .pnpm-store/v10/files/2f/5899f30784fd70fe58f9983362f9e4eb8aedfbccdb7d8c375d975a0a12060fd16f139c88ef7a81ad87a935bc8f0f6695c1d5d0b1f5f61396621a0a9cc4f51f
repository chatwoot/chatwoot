import{d as q,i as T,p as x,q as S,Y as j,o as r,g as u,h as B,w as K,u as w,I as V,n as z,a as i,Z as R,t as $,F as _,s as D,c as L,v as N,_ as A,f as O,C as M,$ as U,e as I,a0 as Y}from"./vendor.70a554f6.js";import{o as Z,B as G,_ as H,u as J}from"./index.58f51dd0.js";import{B as Q}from"./BaseEmpty.a84c14c8.js";import"./global-components.84d0ab22.js";const W={class:"htw-flex-1"},X={class:"htw-flex"},tt={class:"htw-ml-auto htw-opacity-40"},et={key:0,class:"htw-flex htw-items-center htw-gap-0.5 htw-opacity-60"},E=q({props:{result:{type:Object,required:!0},selected:{type:Boolean,default:!1}},emits:{close:()=>!0},setup(s,{emit:b}){const v=s;T(h=>({"60f23e5c":s.result.iconColor}));const d=x();S(()=>v.selected,h=>{h&&d.value.scrollIntoView()});const f=j();Z(["enter"],()=>{!v.selected||(f.push(v.result.route),b("close"))});const p={story:"carbon:cube",variant:"carbon:cube"},c={story:"Story",variant:"Variant"};return(h,y)=>(r(),u("div",{ref_key:"el",ref:d},[B(G,{to:s.result.route,"is-active":s.selected,class:"htw-px-6 htw-py-4 htw-gap-4",onNavigate:y[0]||(y[0]=m=>h.$emit("close"))},{default:K(()=>{var m,n;return[B(w(V),{icon:(m=s.result.icon)!=null?m:p[s.result.kind],class:z(["htw-w-5 htw-h-5",[s.selected?[]:[s.result.iconColor?"bind-icon-color":{"htw-text-primary-500":s.result.kind==="story","htw-text-gray-500":s.result.kind==="variant"}]]])},null,8,["icon","class"]),i("div",W,[i("div",X,[R($(s.result.title)+" ",1),i("span",tt,$(c[s.result.kind]),1)]),((n=s.result.path)==null?void 0:n.length)?(r(),u("div",et,[(r(!0),u(_,null,D(s.result.path,(a,g)=>(r(),u("div",{key:g,class:"htw-flex htw-items-center htw-gap-0.5"},[g>0?(r(),L(w(V),{key:0,icon:"carbon:chevron-right",class:"htw-w-4 htw-h-4 htw-mt-0.5 htw-opacity-50"})):N("v-if",!0),i("span",null,$(a),1)]))),128))])):N("v-if",!0)])]}),_:1},8,["to","is-active"])],512))}});E.__file="../histoire/dist/client/app/components/search/SearchItem.vue";var st=H(E,[["__scopeId","data-v-a2fcf75c"]]);const ot={class:"htw-fixed htw-inset-0 htw-bg-white/80 dark:htw-bg-gray-700/80"},at={class:"htw-bg-white dark:htw-bg-gray-700 md:htw-mt-16 md:htw-mx-auto htw-w-screen htw-max-w-[512px] htw-shadow-xl htw-border htw-border-gray-200 dark:htw-border-gray-850 htw-rounded-lg htw-relative htw-divide-y htw-divide-gray-200 dark:htw-divide-gray-850"},rt=R(" No results "),nt={key:1,class:"htw-max-h-[400px] htw-overflow-y-auto htw-rounded-b-lg"},lt=q({props:{shown:{type:Boolean,default:!1}},emits:{close:()=>!0},setup(s,{emit:b}){const v=s;function d(){b("close")}const f=x(),{focused:p}=A({target:f,initialValue:!0});S(()=>v.shown,o=>{o&&requestAnimationFrame(()=>{p.value=!0,f.value.select()})});const c=x(""),h=J();function y(o,t){return{kind:"story",rank:t,id:o.id,title:o.title,route:{name:"story",params:{storyId:o.id}},path:o.file.path.slice(0,-1),icon:o.icon,iconColor:o.iconColor}}function m(o,t,e){var l;return{kind:"variant",rank:e,id:t.id,title:t.title,route:{name:"story",params:{storyId:o.id},query:{variantId:t.id}},path:[...(l=o.file.path)!=null?l:[],o.title],icon:t.icon,iconColor:t.iconColor}}const n=O(()=>{const o=[];if(c.value){const t=c.value.toLowerCase();for(const e of h.stories){const l=e.title.toLowerCase().includes(t);let C=!1;(l||(C=e.file.path.some(k=>k.toLowerCase().includes(t))))&&o.push(y(e,l?1:4));for(const k of e.variants){const F=k.title.toLowerCase().includes(t);(l||C||F)&&o.push(m(e,k,F?2:l?3:5))}}}return o.sort((t,e)=>t.rank-e.rank)}),a=x(0);S(n,()=>{a.value=0});function g(){a.value++,a.value>n.value.length-1&&(a.value=0)}function P(){a.value--,a.value<0&&(a.value=n.value.length-1)}return(o,t)=>M((r(),u("div",ot,[i("div",{class:"htw-absolute htw-inset-0",onClick:t[0]||(t[0]=e=>d())}),i("div",at,[i("div",{class:"htw-flex htw-items-center htw-gap-4 htw-pl-6 htw-border htw-border-transparent focus-visible:htw-border-primary-500",onClick:t[5]||(t[5]=e=>p.value=!0)},[B(w(V),{icon:"carbon:search",class:"flex-none htw-w-5 htw-h-5"}),M(i("input",{ref_key:"input",ref:f,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),placeholder:"Search for stories, variants...",class:"htw-bg-transparent htw-w-full htw-flex-1 htw-pl-0 htw-pr-6 htw-py-4 htw-outline-none",onKeydown:[t[2]||(t[2]=I(e=>g(),["down"])),t[3]||(t[3]=I(e=>P(),["up"])),t[4]||(t[4]=I(e=>d(),["escape"]))]},null,544),[[Y,c.value]])]),c.value&&!w(n).length?(r(),L(Q,{key:0},{default:K(()=>[rt]),_:1})):w(n).length?(r(),u("div",nt,[(r(!0),u(_,null,D(w(n),(e,l)=>(r(),L(st,{key:`${e.kind}-${e.id}`,result:e,selected:l===a.value,onClose:t[6]||(t[6]=C=>d())},null,8,["result","selected"]))),128))])):N("v-if",!0)])],512)),[[U,s.shown]])}});lt.__file="../histoire/dist/client/app/components/search/SearchModal.vue";export{lt as default};
