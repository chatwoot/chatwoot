{"version":3,"file":"index.min.js","sources":["../src/build-country.js","../src/build-timezone.js","../src/index.js"],"sourcesContent":["let timezonesMap;\n\nexport default function buildCountry(data, id) {\n  const name = data.countries[id];\n  if (!name) return null;\n\n  const tzMap = getTimezonesMap(data)[id] || {};\n\n  return {\n    id,\n    name,\n    timezones: tzMap.current || [],\n    allTimezones: tzMap.all || [],\n  };\n}\n\nfunction getTimezonesMap(data) {\n  if (!timezonesMap) timezonesMap = buildTimezonesMap(data);\n  return timezonesMap;\n}\n\nfunction buildTimezonesMap(data) {\n  return Object.keys(data.timezones).reduce((result, id) => {\n    const tz = data.timezones[id];\n    const { c, a } = tz;\n    const aliasTz = data.timezones[a] || {};\n    const countries = c || aliasTz.c;\n\n    if (!countries) return result;\n\n    countries.forEach((country) => {\n      if (!result[country]) Object.assign(result, { [country]: { current: [], all: [] } });\n      if (tz.r === undefined) result[country].current.push(id);\n      result[country].all.push(id);\n    });\n\n    return result;\n  }, {});\n}\n","export default function buildTimezone(data, name) {\n  const timezone = data.timezones[name];\n  if (!timezone) return null;\n\n  const { a: aliasOf = null } = timezone;\n  const aliasTz = aliasOf ? data.timezones[aliasOf] : {};\n  const tz = {\n    ...aliasTz,\n    ...data.timezones[name],\n  };\n\n  const countries = tz.c || [];\n  const utcOffset = tz.u;\n  const dstOffset = Number.isInteger(tz.d) ? tz.d : utcOffset;\n\n  const result = {\n    name,\n    countries,\n    utcOffset,\n    utcOffsetStr: getOffsetStr(utcOffset),\n    dstOffset,\n    dstOffsetStr: getOffsetStr(dstOffset),\n    aliasOf,\n  };\n  if (timezone.r) result.deprecated = true;\n  return result;\n}\n\nfunction getOffsetStr(offset) {\n  const hours = Math.floor(Math.abs(offset) / 60);\n  const min = offset % 60;\n  const sign = offset < 0 ? '-' : '+';\n\n  return `${sign}${getNumStr(hours)}:${getNumStr(min)}`;\n}\n\nfunction getNumStr(input) {\n  const num = Math.abs(input);\n  const prefix = num < 10 ? '0' : '';\n  return `${prefix}${num}`;\n}\n","import data from './data.json';\nimport buildCountry from './build-country';\nimport buildTimezone from './build-timezone';\n\nconst totalTimezones = Object.keys(data.timezones).length;\nconst countries = {};\nconst timezones = {};\nlet memoizedTimezones = 0;\n\nexport function getAllCountries(options = {}) {\n  return Object.keys(data.countries).reduce((prev, id) => {\n    return Object.assign(prev, { [id]: getCountry(id, options) });\n  }, {});\n}\n\nexport function getAllTimezones(options = {}) {\n  if (totalTimezones !== memoizedTimezones) Object.keys(data.timezones).forEach(getTimezone);\n  return deliverTimezones(timezones, options);\n}\n\nexport function getCountry(id, options = {}) {\n  if (!countries[id]) memoizeCountry(buildCountry(data, id));\n  return deliverCountry(countries[id], options);\n}\n\nfunction memoizeCountry(country) {\n  if (!country) return;\n  countries[country.id] = country;\n}\n\nexport function getTimezone(name) {\n  if (!timezones[name]) memoizeTimezone(buildTimezone(data, name));\n  return timezones[name] ? { ...timezones[name] } : null;\n}\n\nfunction memoizeTimezone(timezone) {\n  if (!timezone) return;\n  timezones[timezone.name] = timezone;\n  memoizedTimezones = Object.keys(timezone).length;\n}\n\nexport function getCountriesForTimezone(tzName, options = {}) {\n  const timezone = getTimezone(tzName) || {};\n  const values = timezone.countries || [];\n  return values.map((c) => getCountry(c, options));\n}\n\nexport function getCountryForTimezone(tzName, options = {}) {\n  const [main] = getCountriesForTimezone(tzName, options);\n  return main || null;\n}\n\nexport function getTimezonesForCountry(countryId, options = {}) {\n  const country = getCountry(countryId, options);\n  if (!country) return null;\n  const values = country.timezones || [];\n  return values.map(getTimezone);\n}\n\nfunction deliverTimezones(tzs, options) {\n  const { deprecated } = options || {};\n  if (deprecated === true) return tzs;\n  return Object.keys(tzs).reduce((prev, key) => {\n    if (!tzs[key].deprecated) Object.assign(prev, { [key]: tzs[key] });\n    return prev;\n  }, {});\n}\n\nfunction deliverCountry(country, options) {\n  if (!country) return null;\n  const { deprecated } = options || {};\n  const { allTimezones, ...other } = country;\n  const tz = deprecated ? country.allTimezones : country.timezones;\n  return { ...other, timezones: tz };\n}\n\nexport default {\n  getCountry,\n  getTimezone,\n  getAllCountries,\n  getAllTimezones,\n  getTimezonesForCountry,\n  getCountriesForTimezone,\n  getCountryForTimezone,\n};\n"],"names":["timezonesMap","buildCountry","data","id","name","countries","tzMap","Object","keys","timezones","reduce","result","tz","c","a","aliasTz","forEach","country","assign","_defineProperty","current","all","undefined","r","push","buildTimezonesMap","getTimezonesMap","allTimezones","getOffsetStr","offset","hours","Math","floor","abs","min","concat","getNumStr","input","num","totalTimezones","length","memoizedTimezones","getAllCountries","options","arguments","prev","getCountry","getAllTimezones","getTimezone","tzs","_ref","deprecated","key","deliverTimezones","memoizeCountry","_ref2","other","_objectWithoutProperties","_excluded","_objectSpread","deliverCountry","timezone","memoizeTimezone","_timezone$a","aliasOf","utcOffset","u","dstOffset","Number","isInteger","d","utcOffsetStr","dstOffsetStr","buildTimezone","getCountriesForTimezone","tzName","map","getCountryForTimezone","_slicedToArray","getTimezonesForCountry","countryId","index"],"mappings":"woFAAIA,w93BAEW,SAASC,EAAaC,EAAMC,GACzC,IAAMC,EAAOF,EAAKG,UAAUF,GAC5B,IAAKC,EAAM,OAAO,KAElB,IAAME,EAUR,SAAyBJ,GAClBF,IAAcA,EAIrB,SAA2BE,GACzB,OAAOK,OAAOC,KAAKN,EAAKO,WAAWC,QAAO,SAACC,EAAQR,GACjD,IAAMS,EAAKV,EAAKO,UAAUN,GAClBU,EAASD,EAATC,EAAGC,EAAMF,EAANE,EACLC,EAAUb,EAAKO,UAAUK,IAAM,CAAA,EAC/BT,EAAYQ,GAAKE,EAAQF,EAE/B,OAAKR,GAELA,EAAUW,SAAQ,SAACC,GACZN,EAAOM,IAAUV,OAAOW,OAAOP,EAAMQ,EAAA,CAAA,EAAKF,EAAU,CAAEG,QAAS,GAAIC,IAAK,WAChEC,IAATV,EAAGW,GAAiBZ,EAAOM,GAASG,QAAQI,KAAKrB,GACrDQ,EAAOM,GAASI,IAAIG,KAAKrB,EAC3B,IAEOQ,GARgBA,CASxB,GAAE,CAAE,EACP,CArBoCc,CAAkBvB,IACpD,OAAOF,CACT,CAbgB0B,CAAgBxB,GAAMC,IAAO,CAAA,EAE3C,MAAO,CACLA,GAAAA,EACAC,KAAAA,EACAK,UAAWH,EAAMc,SAAW,GAC5BO,aAAcrB,EAAMe,KAAO,GAE/B,CCcA,SAASO,EAAaC,GACpB,IAAMC,EAAQC,KAAKC,MAAMD,KAAKE,IAAIJ,GAAU,IACtCK,EAAML,EAAS,GAGrB,MAAA,GAAAM,OAFaN,EAAS,EAAI,IAAM,KAElBM,OAAGC,EAAUN,QAAMK,OAAIC,EAAUF,GACjD,CAEA,SAASE,EAAUC,GACjB,IAAMC,EAAMP,KAAKE,IAAII,GAErB,MAAA,GAAAF,OADeG,EAAM,GAAK,IAAM,IAChBH,OAAGG,EACrB,wBCpCMC,EAAiBhC,OAAOC,KAAKN,EAAKO,WAAW+B,OAC7CnC,EAAY,CAAA,EACZI,EAAY,CAAA,EACdgC,EAAoB,EAEjB,SAASC,IAA8B,IAAdC,EAAOC,UAAAJ,OAAA,QAAAlB,IAAAsB,UAAA,GAAAA,UAAA,GAAG,CAAA,EACxC,OAAOrC,OAAOC,KAAKN,EAAKG,WAAWK,QAAO,SAACmC,EAAM1C,GAC/C,OAAOI,OAAOW,OAAO2B,EAAI1B,EAAA,CAAA,EAAKhB,EAAK2C,EAAW3C,EAAIwC,IACnD,GAAE,CAAE,EACP,CAEO,SAASI,IAA8B,IAAdJ,EAAOC,UAAAJ,OAAA,QAAAlB,IAAAsB,UAAA,GAAAA,UAAA,GAAG,CAAA,EAExC,OADIL,IAAmBE,GAAmBlC,OAAOC,KAAKN,EAAKO,WAAWO,QAAQgC,GA2ChF,SAA0BC,EAAKN,GAC7B,IAAAO,EAAuBP,GAAW,CAAE,EACpC,OAAmB,IADDO,EAAVC,WACwBF,EACzB1C,OAAOC,KAAKyC,GAAKvC,QAAO,SAACmC,EAAMO,GAEpC,OADKH,EAAIG,GAAKD,YAAY5C,OAAOW,OAAO2B,EAAI1B,EAAA,CAAA,EAAKiC,EAAMH,EAAIG,KACpDP,CACR,GAAE,CAAE,EACP,CAjDSQ,CAAiB5C,EAAWkC,EACrC,CAEO,SAASG,EAAW3C,GAAkB,IAAdwC,EAAOC,UAAAJ,OAAA,QAAAlB,IAAAsB,UAAA,GAAAA,UAAA,GAAG,CAAA,EAEvC,OADKvC,EAAUF,IAIjB,SAAwBc,GACtB,IAAKA,EAAS,OACdZ,EAAUY,EAAQd,IAAMc,CAC1B,CAPsBqC,CAAerD,EAAaC,EAAMC,IA+CxD,SAAwBc,EAAS0B,GAC/B,IAAK1B,EAAS,OAAO,KACrB,IAAAsC,EAAuBZ,GAAW,CAAE,EAA5BQ,EAAUI,EAAVJ,WAC2BlC,EAA3BU,aAAiB6B,IAAAA,EAAKC,EAAKxC,EAAOyC,GACpC9C,EAAKuC,EAAalC,EAAQU,aAAeV,EAAQR,UACvD,OAAAkD,EAAAA,EAAA,CAAA,EAAYH,GAAK,CAAA,EAAA,CAAE/C,UAAWG,GAChC,CApDSgD,CAAevD,EAAUF,GAAKwC,EACvC,CAOO,SAASK,EAAY5C,GAE1B,OADKK,EAAUL,IAIjB,SAAyByD,GACvB,IAAKA,EAAU,OACfpD,EAAUoD,EAASzD,MAAQyD,EAC3BpB,EAAoBlC,OAAOC,KAAKqD,GAAUrB,MAC5C,CARwBsB,CD/BT,SAAuB5D,EAAME,GAC1C,IAAMyD,EAAW3D,EAAKO,UAAUL,GAChC,IAAKyD,EAAU,OAAO,KAEtB,IAAAE,EAA8BF,EAAtB/C,EAAGkD,OAAU,IAAHD,EAAG,KAAIA,EAEnBnD,EAAE+C,EAAAA,EACH5C,CAAAA,EAFWiD,EAAU9D,EAAKO,UAAUuD,GAAW,IAG/C9D,EAAKO,UAAUL,IAGdC,EAAYO,EAAGC,GAAK,GACpBoD,EAAYrD,EAAGsD,EACfC,EAAYC,OAAOC,UAAUzD,EAAG0D,GAAK1D,EAAG0D,EAAIL,EAE5CtD,EAAS,CACbP,KAAAA,EACAC,UAAAA,EACA4D,UAAAA,EACAM,aAAc3C,EAAaqC,GAC3BE,UAAAA,EACAK,aAAc5C,EAAauC,GAC3BH,QAAAA,GAGF,OADIH,EAAStC,IAAGZ,EAAOwC,YAAa,GAC7BxC,CACT,CCKwC8D,CAAcvE,EAAME,IACnDK,EAAUL,GAAKuD,EAAQlD,CAAAA,EAAAA,EAAUL,IAAU,IACpD,CAQO,SAASsE,EAAwBC,GAAsB,IAAdhC,EAAOC,UAAAJ,OAAA,QAAAlB,IAAAsB,UAAA,GAAAA,UAAA,GAAG,CAAA,EAGxD,QAFiBI,EAAY2B,IAAW,CAAA,GAChBtE,WAAa,IACvBuE,KAAI,SAAC/D,GAAC,OAAKiC,EAAWjC,EAAG8B,KACzC,CAEO,SAASkC,EAAsBF,GAEpC,OADuDG,EAAxCJ,EAAwBC,EADY/B,UAAAJ,OAAA,QAAAlB,IAAAsB,UAAA,GAAAA,UAAA,GAAG,CAAA,GACC,GAA5C,IACI,IACjB,CAEO,SAASmC,EAAuBC,GAAyB,IACxD/D,EAAU6B,EAAWkC,EAD4BpC,UAAAJ,OAAA,QAAAlB,IAAAsB,UAAA,GAAAA,UAAA,GAAG,CAAA,GAE1D,OAAK3B,GACUA,EAAQR,WAAa,IACtBmE,IAAI5B,GAFG,IAGvB,CAmBe,IAAAiC,EAAA,CACbnC,WAAAA,EACAE,YAAAA,EACAN,gBAAAA,EACAK,gBAAAA,EACAgC,uBAAAA,EACAL,wBAAAA,EACAG,sBAAAA"}