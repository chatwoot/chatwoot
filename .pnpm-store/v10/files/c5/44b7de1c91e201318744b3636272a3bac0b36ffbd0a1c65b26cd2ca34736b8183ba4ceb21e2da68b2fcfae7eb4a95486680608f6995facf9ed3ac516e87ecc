{"version":3,"file":"index.js","sources":["sha256.js"],"sourcesContent":["// See \"precomputation\" in notes\nvar i = 18,\n  j,\n  K = [],\n  H = [];\n\n// Construct list of primes < 320\n// K[x] === 1 if x is composite, unset if prime\nfor (;i > 1; i--) {\n  for (j = i; j < 320;) {\n    K[j += i] = 1;\n  }\n}\n\n// See \"`a` reassignment\" in notes\nfunction a(num, root) {\n  return (Math.pow(num, 1 / root) /* % 1 */) * 4294967296|0;\n}\n\n// i === 1\nfor (j = 0; j < 64;) {\n  if (!K[++i]) {\n    H[j] = a(i, 2);\n    K[j++] = a(i, 3);\n  }\n}\n\nfunction S(X, n) {\n  return (X >>> n) | (X << (-n));\n}\n\nexport default function sha256(b) {\n  var\n    h = H.slice(i = j = 0, 8),\n    words = [],\n    s = unescape(encodeURI(b)) + '\\x80',\n    W = s.length;\n\n  // See \"Length bits\" in notes\n  words[b = (--W / 4 + 2) | 15] = W * 8;\n\n  for (; ~W;) { // W !== -1\n    words[W >> 2] |= s.charCodeAt(W) << 8 * ~W--;\n    // words[W >> 2] |= s.charCodeAt(W) << 24 - 8 * W--;\n  }\n\n\n  for (W = []; i < b; i += 16) {\n    // See \"`a` reassignment\" in notes\n    a = h.slice();\n\n    for (; j < 64;\n      a.unshift(\n        s +\n        (S(s = a[0], 2) ^ S(s, 13) ^ S(s, 22)) +\n        ((s & a[1]) ^ (a[1] & a[2]) ^ (a[2] & s))\n      )\n    ) {\n      a[3] += (\n        s = 0 |\n            (\n              W[j] =\n                (j < 16)\n                  ? ~~words[j + i]\n                  : (S(s = W[j - 2], 17) ^ S(s, 19) ^ (s >>> 10)) +\n                    W[j - 7] +\n                    (S(s = W[j - 15], 7) ^ S(s, 18) ^ (s >>> 3)) +\n                    W[j - 16]\n\n            ) +\n            a.pop() +\n            (S(s = a[4], 6) ^ S(s, 11) ^ S(s, 25)) +\n            ((s & a[5]) ^ (~s & a[6])) +\n            K[j++]\n      );\n    }\n\n    // See \"Integer safety\" in notes\n    for (j = 8; j;) h[--j] += a[j];\n\n    // j === 0\n  }\n\n  for (s = ''; j < 64;) {\n    // s += ((h[j >> 3] >> 4 * ~j++) & 15).toString(16);\n    s += ((h[j >> 3] >> 4 * (7 - j++)) & 15).toString(16);\n    // s += ((h[j >> 3] >> -4 * ++j) & 15).toString(16);\n  }\n\n  return s;\n}\n"],"names":["j","i","K","H","a","num","root","Math","pow","S","X","n","b","h","slice","words","s","unescape","encodeURI","W","length","charCodeAt","unshift","pop","toString"],"mappings":"AAQA,IAPA,IACEA,EADEC,EAAI,GAENC,EAAI,GACJC,EAAI,GAIAF,EAAI,EAAGA,QACND,EAAIC,EAAGD,EAAI,KACdE,EAAEF,GAAKC,GAAK,EAKhB,SAASG,EAAEC,EAAKC,UAC+B,WAArCC,KAAKC,IAAIH,EAAK,EAAIC,GAA8B,EAI1D,IAAKN,EAAI,EAAGA,EAAI,IACTE,IAAID,KACPE,EAAEH,GAAKI,EAAEH,EAAG,GACZC,EAAEF,KAAOI,EAAEH,EAAG,IAIlB,SAASQ,EAAEC,EAAGC,UACJD,IAAMC,EAAMD,IAAOC,iBAGd,SAAgBC,OAE3BC,EAAIV,EAAEW,MAAMb,EAAID,EAAI,EAAG,GACvBe,EAAQ,GACRC,EAAIC,SAASC,UAAUN,IAAM,IAC7BO,EAAIH,EAAEI,WAGRL,EAAMH,IAAOO,EAAI,EAAI,EAAK,IAAU,EAAJA,GAExBA,GACNJ,EAAMI,GAAK,IAAMH,EAAEK,WAAWF,IAAM,GAAKA,QAKtCA,EAAI,GAAIlB,EAAIW,EAAGX,GAAK,GAAI,KAE3BG,EAAIS,EAAEC,QAECd,EAAI,GACTI,EAAEkB,QACAN,GACCP,EAAEO,EAAIZ,EAAE,GAAI,GAAKK,EAAEO,EAAG,IAAMP,EAAEO,EAAG,MAChCA,EAAIZ,EAAE,GAAOA,EAAE,GAAKA,EAAE,GAAOA,EAAE,GAAKY,IAGxCZ,EAAE,IACAY,EAAI,GAEEG,EAAEnB,GACCA,EAAI,KACCe,EAAMf,EAAIC,IACXQ,EAAEO,EAAIG,EAAEnB,EAAI,GAAI,IAAMS,EAAEO,EAAG,IAAOA,IAAM,IACzCG,EAAEnB,EAAI,IACLS,EAAEO,EAAIG,EAAEnB,EAAI,IAAK,GAAKS,EAAEO,EAAG,IAAOA,IAAM,GACzCG,EAAEnB,EAAI,KAGdI,EAAEmB,OACDd,EAAEO,EAAIZ,EAAE,GAAI,GAAKK,EAAEO,EAAG,IAAMP,EAAEO,EAAG,MAChCA,EAAIZ,EAAE,IAAQY,EAAIZ,EAAE,IACtBF,EAAEF,SAKLA,EAAI,EAAGA,GAAIa,IAAIb,IAAMI,EAAEJ,OAKzBgB,EAAI,GAAIhB,EAAI,IAEfgB,IAAOH,EAAEb,GAAK,IAAM,GAAK,EAAIA,KAAQ,IAAIwB,SAAS,WAI7CR"}