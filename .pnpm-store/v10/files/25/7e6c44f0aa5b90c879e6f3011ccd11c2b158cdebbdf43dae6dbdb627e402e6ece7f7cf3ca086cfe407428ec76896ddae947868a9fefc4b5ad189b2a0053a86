{"version":3,"file":"unfetch.es.js","sources":["../src/index.js"],"sourcesContent":["export default typeof fetch=='function' ? fetch.bind() : function(url, options) {\n\toptions = options || {};\n\treturn new Promise( (resolve, reject) => {\n\t\tlet request = new XMLHttpRequest();\n\n\t\trequest.open(options.method || 'get', url, true);\n\n\t\tfor (let i in options.headers) {\n\t\t\trequest.setRequestHeader(i, options.headers[i]);\n\t\t}\n\n\t\trequest.withCredentials = options.credentials=='include';\n\n\t\trequest.onload = () => {\n\t\t\tresolve(response());\n\t\t};\n\n\t\trequest.onerror = reject;\n\n\t\trequest.send(options.body || null);\n\n\t\tfunction response() {\n\t\t\tlet keys = [],\n\t\t\t\tall = [],\n\t\t\t\theaders = {},\n\t\t\t\theader;\n\n\t\t\trequest.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm, (m, key, value) => {\n\t\t\t\tkeys.push(key = key.toLowerCase());\n\t\t\t\tall.push([key, value]);\n\t\t\t\theader = headers[key];\n\t\t\t\theaders[key] = header ? `${header},${value}` : value;\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\tok: (request.status/100|0) == 2,\t\t// 200-299\n\t\t\t\tstatus: request.status,\n\t\t\t\tstatusText: request.statusText,\n\t\t\t\turl: request.responseURL,\n\t\t\t\tclone: response,\n\t\t\t\ttext: () => Promise.resolve(request.responseText),\n\t\t\t\tjson: () => Promise.resolve(request.responseText).then(JSON.parse),\n\t\t\t\tblob: () => Promise.resolve(new Blob([request.response])),\n\t\t\t\theaders: {\n\t\t\t\t\tkeys: () => keys,\n\t\t\t\t\tentries: () => all,\n\t\t\t\t\tget: n => headers[n.toLowerCase()],\n\t\t\t\t\thas: n => n.toLowerCase() in headers\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n}\n"],"names":["let"],"mappings":"AAAA,YAAe,OAAO,KAAK,EAAE,UAAU,GAAG,KAAK,CAAC,IAAI,EAAE,GAAG,SAAS,GAAG,EAAE,OAAO,EAAE;CAC/E,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC;CACxB,OAAO,IAAI,OAAO,EAAE,UAAC,OAAO,EAAE,MAAM,EAAE;EACrCA,IAAI,OAAO,GAAG,IAAI,cAAc,EAAE,CAAC;;EAEnC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;;EAEjD,KAAKA,IAAI,CAAC,IAAI,OAAO,CAAC,OAAO,EAAE;GAC9B,OAAO,CAAC,gBAAgB,CAAC,CAAC,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;GAChD;;EAED,OAAO,CAAC,eAAe,GAAG,OAAO,CAAC,WAAW,EAAE,SAAS,CAAC;;EAEzD,OAAO,CAAC,MAAM,GAAG,YAAG;GACnB,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;GACpB,CAAC;;EAEF,OAAO,CAAC,OAAO,GAAG,MAAM,CAAC;;EAEzB,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC;;EAEnC,SAAS,QAAQ,GAAG;GACnBA,IAAI,IAAI,GAAG,EAAE;IACZ,GAAG,GAAG,EAAE;IACR,OAAO,GAAG,EAAE;IACZ,MAAM,CAAC;;GAER,OAAO,CAAC,qBAAqB,EAAE,CAAC,OAAO,CAAC,8BAA8B,EAAE,UAAC,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE;IACvF,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC,CAAC;IACnC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC;IACvB,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;IACtB,OAAO,CAAC,GAAG,CAAC,GAAG,MAAM,IAAG,MAAS,MAAE,GAAE,KAAK,IAAK,KAAK,CAAC;IACrD,CAAC,CAAC;;GAEH,OAAO;IACN,EAAE,EAAE,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC;IAC/B,MAAM,EAAE,OAAO,CAAC,MAAM;IACtB,UAAU,EAAE,OAAO,CAAC,UAAU;IAC9B,GAAG,EAAE,OAAO,CAAC,WAAW;IACxB,KAAK,EAAE,QAAQ;IACf,IAAI,EAAE,YAAG,SAAG,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,GAAA;IACjD,IAAI,EAAE,YAAG,SAAG,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAA;IAClE,IAAI,EAAE,YAAG,SAAG,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAA;IACzD,OAAO,EAAE;KACR,IAAI,EAAE,YAAG,SAAG,IAAI,GAAA;KAChB,OAAO,EAAE,YAAG,SAAG,GAAG,GAAA;KAClB,GAAG,EAAE,UAAA,CAAC,EAAC,SAAG,OAAO,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,GAAA;KAClC,GAAG,EAAE,UAAA,CAAC,EAAC,SAAG,CAAC,CAAC,WAAW,EAAE,IAAI,OAAO,GAAA;KACpC;IACD,CAAC;GACF;EACD,CAAC,CAAC;CACH,CAAA;;"}