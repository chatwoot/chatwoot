{"version":3,"file":"comlink.min.js","sources":["../../src/comlink.ts"],"sourcesContent":[null],"names":["proxyMarker","Symbol","createEndpoint","releaseProxy","finalizer","throwMarker","isObject","val","transferHandlers","Map","canHandle","serialize","obj","port1","port2","MessageChannel","expose","deserialize","port","start","wrap","value","serialized","Error","isError","message","name","stack","Object","assign","ep","globalThis","allowedOrigins","addEventListener","callback","ev","data","origin","allowedOrigin","RegExp","test","isAllowedOrigin","console","warn","id","type","path","argumentList","map","fromWireValue","returnValue","parent","slice","reduce","prop","rawValue","apply","proxy","transfer","undefined","Promise","resolve","catch","then","wireValue","transferables","toWireValue","postMessage","removeEventListener","closeEndPoint","error","TypeError","endpoint","constructor","isMessagePort","close","target","createProxy","throwIfProxyReleased","isReleased","releaseEndpoint","requestResponseMessage","proxyCounter","WeakMap","proxyFinalizers","FinalizationRegistry","newCount","get","set","isProxyReleased","Proxy","_target","unregister","unregisterProxy","length","r","p","toString","bind","_thisArg","rawArgumentList","last","processArguments","construct","register","registerProxy","processed","v","arr","Array","prototype","concat","transferCache","transfers","windowEndpoint","w","context","targetOrigin","msg","handler","serializedValue","fill","Math","floor","random","Number","MAX_SAFE_INTEGER","join","l"],"mappings":"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"}