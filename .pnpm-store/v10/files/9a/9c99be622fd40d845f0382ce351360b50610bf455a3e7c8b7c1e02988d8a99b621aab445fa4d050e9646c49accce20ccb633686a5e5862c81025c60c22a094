{"version":3,"file":"ninja-keys.js","sourceRoot":"","sources":["../src/ninja-keys.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, html, TemplateResult, PropertyValues} from 'lit';\nimport {customElement, property, state} from 'lit/decorators.js';\nimport {repeat} from 'lit/directives/repeat.js';\nimport {live} from 'lit/directives/live.js';\nimport {createRef, ref} from 'lit-html/directives/ref.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport hotkeys from 'hotkeys-js';\n\nimport './ninja-header.js';\nimport './ninja-action.js';\nimport {INinjaAction} from './interfaces/ininja-action.js';\nimport {NinjaHeader} from './ninja-header.js';\nimport {NinjaAction} from './ninja-action.js';\nimport {footerHtml} from './ninja-footer.js';\nimport {baseStyles} from './base-styles.js';\n\n@customElement('ninja-keys')\nexport class NinjaKeys extends LitElement {\n  static override styles = [baseStyles];\n\n  /**\n   * Search placeholder text\n   */\n  @property({type: String}) placeholder = 'Type a command or search...';\n\n  /**\n   * If true will register all hotkey for all actions\n   */\n  @property({type: Boolean}) disableHotkeys = false;\n\n  /**\n   * Show or hide breadcrumbs on header\n   */\n  @property({type: Boolean}) hideBreadcrumbs = false;\n\n  /**\n   * Open or hide shorcut\n   */\n  @property() openHotkey = 'cmd+k,ctrl+k';\n\n  /**\n   * Navigation Up hotkey\n   */\n  @property() navigationUpHotkey = 'up,shift+tab';\n\n  /**\n   * Navigation Down hotkey\n   */\n  @property() navigationDownHotkey = 'down,tab';\n\n  /**\n   * Close hotkey\n   */\n  @property() closeHotkey = 'esc';\n\n  /**\n   * Go back on one level if has parent menu\n   */\n  @property() goBackHotkey = 'backspace';\n\n  /**\n   * Select action and execute handler or open submenu\n   */\n  @property() selectHotkey = 'enter'; // enter,space\n\n  /**\n   * Show or hide breadcrumbs on header\n   */\n  @property({type: Boolean}) hotKeysJoinedView = false;\n\n  /**\n   * Disable load material icons font on connect\n   * If you use custom icons.\n   * Set this attribute to prevent load default icons font\n   */\n  @property({type: Boolean}) noAutoLoadMdIcons = false;\n\n  /**\n   * Array of actions\n   */\n  @property({\n    type: Array,\n    hasChanged() {\n      // Forced to trigger changed event always.\n      // Because of a lot of framework pattern wrap object with an Observer, like vue2.\n      // That's why object passed to web component always same and no render triggered. Issue #9\n      return true;\n    },\n  })\n  data = [] as Array<INinjaAction>;\n\n  /**\n   * Public methods\n   */\n\n  /**\n   * Show a modal\n   */\n  open(options: {parent?: string} = {}) {\n    this._bump = true;\n    this.visible = true;\n    this._headerRef.value!.focusSearch();\n    if (this._actionMatches.length > 0) {\n      this._selected = this._actionMatches[0];\n    }\n    this.setParent(options.parent);\n  }\n\n  /**\n   * Close modal\n   */\n  close() {\n    this._bump = false;\n    this.visible = false;\n    // Dispatch close event\n    this.dispatchEvent(new CustomEvent('closed', {bubbles: true, composed: true}));\n  }\n\n  /**\n   * Navigate to group of actions\n   * @param parent id of parent group/action\n   */\n  setParent(parent?: string) {\n    if (!parent) {\n      this._currentRoot = undefined;\n      // this.breadcrumbs = [];\n    } else {\n      this._currentRoot = parent;\n    }\n    this._selected = undefined;\n    this._search = '';\n    this._headerRef.value!.setSearch('');\n  }\n\n  /**\n   * Show or hide element\n   */\n  @state() visible = false;\n  /**\n   * Temproray used for animation effect. TODO: change to animate logic\n   */\n  @state()\n  private _bump = true;\n\n  @state()\n  private _actionMatches = [] as Array<INinjaAction>;\n\n  @state()\n  private _search = '';\n\n  @state()\n  private _currentRoot?: string;\n\n  /**\n   * Array of actions in flat structure\n   */\n  @state() _flatData = [] as Array<INinjaAction>;\n\n  @state()\n  private get breadcrumbs() {\n    const path: string[] = [];\n    let parentAction = this._selected?.parent;\n    if (parentAction) {\n      path.push(parentAction);\n      while (parentAction) {\n        const action = this._flatData.find((a) => a.id === parentAction);\n        if (action?.parent) {\n          path.push(action.parent);\n        }\n        parentAction = action ? action.parent : undefined;\n      }\n    }\n    return path.reverse();\n  }\n\n  @state()\n  private _selected?: INinjaAction;\n\n  override connectedCallback() {\n    super.connectedCallback();\n\n    if (!this.noAutoLoadMdIcons) {\n      document.fonts.load('24px Material Icons', 'apps').then(() => {});\n    }\n\n    this._registerInternalHotkeys();\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this._unregisterInternalHotkeys();\n  }\n\n  private _flattern(members: INinjaAction[], parent?: string): INinjaAction[] {\n    let children = [] as Array<any>;\n    if (!members) {\n      members = [];\n    }\n    return members\n      .map((mem) => {\n        const alreadyFlatternByUser =\n          mem.children &&\n          mem.children.some((value: any) => {\n            return typeof value == 'string';\n          });\n        const m = {...mem, parent: mem.parent || parent};\n        if (alreadyFlatternByUser) {\n          return m;\n        } else {\n          if (m.children && m.children.length) {\n            parent = mem.id;\n            children = [...children, ...m.children];\n          }\n          m.children = m.children ? m.children.map((c: any) => c.id) : [];\n          return m;\n        }\n      })\n      .concat(children.length ? this._flattern(children, parent) : children);\n  }\n\n  override update(changedProperties: PropertyValues<this>) {\n    if (changedProperties.has('data') && !this.disableHotkeys) {\n      this._flatData = this._flattern(this.data);\n\n      this._flatData\n        .filter((action) => !!action.hotkey)\n        .forEach((action) => {\n          hotkeys(action.hotkey!, (event) => {\n            event.preventDefault();\n            if (action.handler) {\n              action.handler(action);\n            }\n          });\n        });\n    }\n    super.update(changedProperties);\n  }\n\n  private _registerInternalHotkeys() {\n    if (this.openHotkey) {\n      hotkeys(this.openHotkey, (event) => {\n        event.preventDefault();\n        this.visible ? this.close() : this.open();\n      });\n    }\n\n    if (this.selectHotkey) {\n      hotkeys(this.selectHotkey, (event) => {\n        if (!this.visible) {\n          return;\n        }\n        event.preventDefault();\n        this._actionSelected(this._actionMatches[this._selectedIndex]);\n      });\n    }\n\n    if (this.goBackHotkey) {\n      hotkeys(this.goBackHotkey, (event) => {\n        if (!this.visible) {\n          return;\n        }\n        if (!this._search) {\n          event.preventDefault();\n          this._goBack();\n        }\n      });\n    }\n\n    if (this.navigationDownHotkey) {\n      hotkeys(this.navigationDownHotkey, (event) => {\n        if (!this.visible) {\n          return;\n        }\n        event.preventDefault();\n        if (this._selectedIndex >= this._actionMatches.length - 1) {\n          this._selected = this._actionMatches[0];\n        } else {\n          this._selected = this._actionMatches[this._selectedIndex + 1];\n        }\n      });\n    }\n\n    if (this.navigationUpHotkey) {\n      hotkeys(this.navigationUpHotkey, (event) => {\n        if (!this.visible) {\n          return;\n        }\n        event.preventDefault();\n        if (this._selectedIndex === 0) {\n          this._selected = this._actionMatches[this._actionMatches.length - 1];\n        } else {\n          this._selected = this._actionMatches[this._selectedIndex - 1];\n        }\n      });\n    }\n\n    if (this.closeHotkey) {\n      hotkeys(this.closeHotkey, () => {\n        if (!this.visible) {\n          return;\n        }\n        this.close();\n      });\n    }\n  }\n\n  private _unregisterInternalHotkeys() {\n    if (this.openHotkey) {\n      hotkeys.unbind(this.openHotkey)\n    }\n\n    if (this.selectHotkey) {\n      hotkeys.unbind(this.selectHotkey)\n    }\n\n    if (this.goBackHotkey) {\n      hotkeys.unbind(this.goBackHotkey)\n    }\n\n    if (this.navigationDownHotkey) {\n      hotkeys.unbind(this.navigationDownHotkey)\n    }\n\n    if (this.navigationUpHotkey) {\n      hotkeys.unbind(this.navigationUpHotkey)\n    }\n\n    if (this.closeHotkey) {\n      hotkeys.unbind(this.closeHotkey)\n    }\n  }\n\n\n  private _actionFocused(index: INinjaAction, $event: MouseEvent) {\n    // this.selectedIndex = index;\n    this._selected = index;\n    ($event.target as NinjaAction).ensureInView();\n  }\n\n  private _onTransitionEnd() {\n    this._bump = false;\n  }\n\n  private _goBack() {\n    const parent =\n      this.breadcrumbs.length > 1\n        ? this.breadcrumbs[this.breadcrumbs.length - 2]\n        : undefined;\n    this.setParent(parent);\n  }\n\n  private _headerRef = createRef<NinjaHeader>();\n\n  override render() {\n    const classes = {\n      bump: this._bump,\n      'modal-content': true,\n    };\n\n    const menuClasses = {\n      visible: this.visible,\n      modal: true,\n    };\n\n    const actionMatches = this._flatData.filter((action) => {\n      const regex = new RegExp(this._search, 'gi');\n      const matcher =\n        action.title.match(regex) || action.keywords?.match(regex);\n\n      if (!this._currentRoot && this._search) {\n        // global search for items on root\n        return matcher;\n      }\n\n      return action.parent === this._currentRoot && matcher;\n    });\n\n    const sections = actionMatches.reduce(\n      (entryMap, e) =>\n        entryMap.set(e.section, [...(entryMap.get(e.section) || []), e]),\n      new Map()\n    );\n\n    this._actionMatches = [...sections.values()].flat();\n\n    if (this._actionMatches.length > 0 && this._selectedIndex === -1) {\n      this._selected = this._actionMatches[0];\n    }\n    if (this._actionMatches.length === 0) {\n      this._selected = undefined;\n    }\n\n    const actionsList = (actions: INinjaAction[]) =>\n      html` ${repeat(\n        actions,\n        (action) => action.id,\n        (action) =>\n          html`<ninja-action\n            exportparts=\"ninja-action,ninja-selected,ninja-icon\"\n            .selected=${live(action.id === this._selected?.id)}\n            .hotKeysJoinedView=${this.hotKeysJoinedView}\n            @mouseover=${(event: MouseEvent) =>\n              this._actionFocused(action, event)}\n            @actionsSelected=${(event: CustomEvent<INinjaAction>) =>\n              this._actionSelected(event.detail)}\n            .action=${action}\n          ></ninja-action>`\n      )}`;\n\n    const itemTemplates: TemplateResult[] = [];\n    sections.forEach((actions, section) => {\n      const header = section\n        ? html`<div class=\"group-header\">${section}</div>`\n        : undefined;\n      itemTemplates.push(html`${header}${actionsList(actions)}`);\n    });\n\n    return html`\n      <div @click=${this._overlayClick} class=${classMap(menuClasses)}>\n        <div class=${classMap(classes)} @animationend=${this._onTransitionEnd}>\n          <ninja-header\n            exportparts=\"ninja-input,ninja-input-wrapper\"\n            ${ref(this._headerRef)}\n            .placeholder=${this.placeholder}\n            .hideBreadcrumbs=${this.hideBreadcrumbs}\n            .breadcrumbs=${this.breadcrumbs}\n            @change=${this._handleInput}\n            @setParent=${(event: CustomEvent<INinjaAction>) =>\n              this.setParent(event.detail.parent)}\n            @close=${this.close}\n          >\n          </ninja-header>\n          <div class=\"modal-body\">\n            <div class=\"actions-list\" part=\"actions-list\">${itemTemplates}</div>\n          </div>\n          <slot name=\"footer\"> ${footerHtml} </slot>\n        </div>\n      </div>\n    `;\n  }\n\n  private get _selectedIndex(): number {\n    if (!this._selected) {\n      return -1;\n    }\n    return this._actionMatches.indexOf(this._selected);\n  }\n\n  private _actionSelected(action?: INinjaAction) {\n    // fire selected event even when action is empty/not selected,\n    // so possible handle api search for example\n    this.dispatchEvent(\n      new CustomEvent('selected', {\n        detail: {search: this._search, action},\n        bubbles: true,\n        composed: true,\n      })\n    );\n\n    if (!action) {\n      return;\n    }\n\n    if (action.children && action.children?.length > 0) {\n      this._currentRoot = action.id;\n      this._search = '';\n    }\n\n    this._headerRef.value!.setSearch('');\n    this._headerRef.value!.focusSearch();\n\n    if (action.handler) {\n      const result = action.handler(action);\n      if (!result?.keepOpen) {\n        this.close();\n      }\n    }\n\n    this._bump = true;\n  }\n\n  private async _handleInput(event: CustomEvent<{search: string}>) {\n    this._search = event.detail.search;\n    await this.updateComplete;\n    this.dispatchEvent(\n      new CustomEvent('change', {\n        detail: {search: this._search, actions: this._actionMatches},\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  private _overlayClick(event: Event) {\n    if ((event.target as HTMLElement)?.classList.contains('modal')) {\n      this.close();\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'ninja-keys': NinjaKeys;\n  }\n}\n"]}