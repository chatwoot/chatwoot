{"version":3,"file":"ninja-action.js","sourceRoot":"","sources":["../src/ninja-action.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, html, css} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {unsafeHTML} from 'lit/directives/unsafe-html.js';\nimport {join} from 'lit/directives/join.js';\nimport '@material/mwc-icon';\n\nimport {INinjaAction} from './interfaces/ininja-action.js';\n\n@customElement('ninja-action')\nexport class NinjaAction extends LitElement {\n  static override styles = css`\n    :host {\n      display: flex;\n      width: 100%;\n    }\n    .ninja-action {\n      padding: 0.75em 1em;\n      display: flex;\n      border-left: 2px solid transparent;\n      align-items: center;\n      justify-content: start;\n      outline: none;\n      transition: color 0s ease 0s;\n      width: 100%;\n    }\n    .ninja-action.selected {\n      cursor: pointer;\n      color: var(--ninja-selected-text-color);\n      background-color: var(--ninja-selected-background);\n      border-left: 2px solid var(--ninja-accent-color);\n      outline: none;\n    }\n    .ninja-action.selected .ninja-icon {\n      color: var(--ninja-selected-text-color);\n    }\n    .ninja-icon {\n      font-size: var(--ninja-icon-size);\n      max-width: var(--ninja-icon-size);\n      max-height: var(--ninja-icon-size);\n      margin-right: 1em;\n      color: var(--ninja-icon-color);\n      margin-right: 1em;\n      position: relative;\n    }\n\n    .ninja-title {\n      flex-shrink: 0.01;\n      margin-right: 0.5em;\n      flex-grow: 1;\n      font-size: 0.8125em;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    .ninja-hotkeys {\n      flex-shrink: 0;\n      width: min-content;\n      display: flex;\n    }\n\n    .ninja-hotkeys kbd {\n      font-family: inherit;\n    }\n    .ninja-hotkey {\n      background: var(--ninja-secondary-background-color);\n      padding: 0.06em 0.25em;\n      border-radius: var(--ninja-key-border-radius);\n      text-transform: capitalize;\n      color: var(--ninja-secondary-text-color);\n      font-size: 0.75em;\n      font-family: inherit;\n    }\n\n    .ninja-hotkey + .ninja-hotkey {\n      margin-left: 0.5em;\n    }\n    .ninja-hotkeys + .ninja-hotkeys {\n      margin-left: 1em;\n    }\n  `;\n\n  @property({type: Object})\n  action!: INinjaAction;\n\n  @property({type: Boolean})\n  selected = false;\n\n  /**\n   * Display hotkey as separate buttons on UI or as is\n   */\n  @property({type: Boolean})\n  hotKeysJoinedView = true;\n\n  /**\n   * Scroll to show element\n   */\n  ensureInView() {\n    requestAnimationFrame(() => this.scrollIntoView({block: 'nearest'}));\n  }\n\n  override click() {\n    this.dispatchEvent(\n      new CustomEvent('actionsSelected', {\n        detail: this.action,\n        bubbles: true,\n        composed: true,\n      })\n    );\n  }\n\n  constructor() {\n    super();\n    this.addEventListener('click', this.click);\n  }\n\n  override updated(changedProperties: Map<string, unknown>) {\n    if (changedProperties.has('selected')) {\n      if (this.selected) {\n        this.ensureInView();\n      }\n    }\n  }\n\n  override render() {\n    let icon;\n    if (this.action.mdIcon) {\n      icon = html`<mwc-icon part=\"ninja-icon\" class=\"ninja-icon\"\n        >${this.action.mdIcon}</mwc-icon\n      >`;\n    } else if (this.action.icon) {\n      icon = unsafeHTML(this.action.icon || '');\n    }\n\n    // const hotkey = this.action.hotkey\n    //   ? html`<div class=\"ninja-hotkey\">${this.action.hotkey}</div>`\n    //   : '';\n    let hotkey;\n    if (this.action.hotkey) {\n      if (this.hotKeysJoinedView) {\n        hotkey = this.action.hotkey.split(',').map((hotkeys) => {\n          const keys = hotkeys.split('+');\n          const joinedKeys = html`${join(\n            keys.map((key) => html`<kbd>${key}</kbd>`),\n            '+'\n          )}`;\n\n          return html`<div class=\"ninja-hotkey ninja-hotkeys\">\n            ${joinedKeys}\n          </div>`;\n        });\n      } else {\n        hotkey = this.action.hotkey.split(',').map((hotkeys) => {\n          const keys = hotkeys.split('+');\n          const keyElements = keys.map(\n            (key) => html`<kbd class=\"ninja-hotkey\">${key}</kbd>`\n          );\n          return html`<kbd class=\"ninja-hotkeys\">${keyElements}</kbd>`;\n        });\n      }\n    }\n\n    const classes = {\n      selected: this.selected,\n      'ninja-action': true,\n    };\n\n    return html`\n      <div\n        class=\"ninja-action\"\n        part=\"ninja-action ${this.selected ? 'ninja-selected' : ''}\"\n        class=${classMap(classes)}\n      >\n        ${icon}\n        <div class=\"ninja-title\">${this.action.title}</div>\n        ${hotkey}\n      </div>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'ninja-action': NinjaAction;\n  }\n}\n"]}