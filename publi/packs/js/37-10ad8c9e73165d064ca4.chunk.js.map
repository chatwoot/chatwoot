{"version":3,"sources":["webpack:///./app/javascript/shared/helpers/markdownIt/link.js","webpack:///./app/javascript/shared/helpers/MessageFormatter.js","webpack:///./app/javascript/shared/mixins/messageFormatterMixin.js","webpack:///./app/javascript/dashboard/mixins/time.js","webpack:///./app/javascript/shared/helpers/FileHelper.js","webpack:///./app/javascript/shared/components/ResizableTextArea.vue?95b6","webpack:///./app/javascript/shared/components/ResizableTextArea.vue?38b8","webpack:///app/javascript/shared/components/ResizableTextArea.vue","webpack:///./app/javascript/shared/components/ResizableTextArea.vue","webpack:///./app/javascript/shared/components/Button.vue?1617","webpack:///./app/javascript/shared/components/Button.vue?26c2","webpack:///app/javascript/shared/components/Button.vue","webpack:///./app/javascript/shared/components/Button.vue","webpack:///./app/javascript/dashboard/helper/editorHelper.js","webpack:///./app/javascript/dashboard/assets/images/chatwoot_bot.png","webpack:///./app/javascript/shared/helpers/IntegrationHelper.js","webpack:///./app/javascript/widget/components/ChatInputWrap.vue?a6b3","webpack:///./app/javascript/widget/components/ChatFooter.vue?02a2","webpack:///./app/javascript/widget/components/UserMessageBubble.vue?bdc9","webpack:///./app/javascript/widget/components/ImageBubble.vue?1c54","webpack:///./app/javascript/widget/components/FileBubble.vue?d836","webpack:///./app/javascript/shared/components/CardButton.vue?34e1","webpack:///./app/javascript/shared/components/ChatCard.vue?3f91","webpack:///./app/javascript/shared/components/ChatForm.vue?9973","webpack:///./app/javascript/shared/components/ChatOption.vue?b9ff","webpack:///./app/javascript/shared/components/ChatOptions.vue?ee43","webpack:///./app/javascript/shared/components/ChatOptions.vue?6f1b","webpack:///./app/javascript/widget/components/template/Article.vue?3204","webpack:///./app/javascript/widget/components/template/EmailInput.vue?86a9","webpack:///./app/javascript/shared/components/CustomerSatisfaction.vue?92a5","webpack:///./app/javascript/widget/components/template/IntegrationCard.vue?b96d","webpack:///./app/javascript/widget/components/ChatMessage.vue?e16b","webpack:///./app/javascript/widget/components/ChatMessage.vue?b129","webpack:///./app/javascript/widget/assets/images/typing.gif","webpack:///./app/javascript/widget/components/AgentTypingBubble.vue?bba5","webpack:///./app/javascript/shared/components/DateSeparator.vue?be6d","webpack:///./app/javascript/widget/components/ConversationWrap.vue?8b18","webpack:///./app/javascript/widget/views/Messages.vue?bc84","webpack:///app/javascript/widget/components/FooterReplyTo.vue","webpack:///./app/javascript/widget/components/FooterReplyTo.vue?bd25","webpack:///./app/javascript/widget/components/FooterReplyTo.vue","webpack:///./app/javascript/widget/components/FooterReplyTo.vue?58a6","webpack:///app/javascript/widget/components/ChatAttachment.vue","webpack:///./app/javascript/widget/components/ChatAttachment.vue?d672","webpack:///./app/javascript/widget/components/ChatAttachment.vue","webpack:///./app/javascript/widget/components/ChatAttachment.vue?4a40","webpack:///./app/javascript/widget/components/ChatSendButton.vue?711c","webpack:///app/javascript/widget/components/ChatSendButton.vue","webpack:///./app/javascript/widget/components/ChatSendButton.vue","webpack:///./app/javascript/widget/components/ChatSendButton.vue?7574","webpack:///app/javascript/widget/components/ChatInputWrap.vue","webpack:///./app/javascript/widget/components/ChatInputWrap.vue?4cd4","webpack:///./app/javascript/widget/components/ChatInputWrap.vue","webpack:///./app/javascript/widget/components/ChatInputWrap.vue?b147","webpack:///app/javascript/widget/components/ChatFooter.vue","webpack:///./app/javascript/widget/components/ChatFooter.vue?8c6f","webpack:///./app/javascript/widget/components/ChatFooter.vue","webpack:///./app/javascript/widget/components/ChatFooter.vue?0a13","webpack:///./app/javascript/widget/components/UserMessageBubble.vue?0840","webpack:///app/javascript/widget/components/UserMessageBubble.vue","webpack:///./app/javascript/widget/components/UserMessageBubble.vue","webpack:///./app/javascript/widget/components/UserMessageBubble.vue?f7f5","webpack:///./app/javascript/widget/components/MessageReplyButton.vue?532c","webpack:///app/javascript/widget/components/MessageReplyButton.vue","webpack:///./app/javascript/widget/components/MessageReplyButton.vue","webpack:///./app/javascript/widget/components/MessageReplyButton.vue?d3fb","webpack:///./app/javascript/widget/components/ImageBubble.vue?273c","webpack:///app/javascript/widget/components/ImageBubble.vue","webpack:///./app/javascript/widget/components/ImageBubble.vue","webpack:///./app/javascript/widget/components/ImageBubble.vue?0b69","webpack:///./app/javascript/widget/components/FileBubble.vue?c1ef","webpack:///app/javascript/widget/components/FileBubble.vue","webpack:///./app/javascript/widget/components/FileBubble.vue","webpack:///./app/javascript/widget/components/FileBubble.vue?fdea","webpack:///./app/javascript/widget/mixins/messageMixin.js","webpack:///app/javascript/widget/components/ReplyToChip.vue","webpack:///./app/javascript/widget/components/ReplyToChip.vue?92a1","webpack:///./app/javascript/widget/components/ReplyToChip.vue","webpack:///./app/javascript/widget/components/ReplyToChip.vue?f070","webpack:///./app/javascript/widget/components/DragWrapper.vue?5b99","webpack:///app/javascript/widget/components/DragWrapper.vue","webpack:///./app/javascript/widget/components/DragWrapper.vue","webpack:///./app/javascript/widget/components/DragWrapper.vue?f14e","webpack:///app/javascript/widget/components/UserMessage.vue","webpack:///./app/javascript/widget/components/UserMessage.vue?4cf0","webpack:///./app/javascript/widget/components/UserMessage.vue","webpack:///./app/javascript/widget/components/UserMessage.vue?4e69","webpack:///app/javascript/shared/components/CardButton.vue","webpack:///./app/javascript/shared/components/CardButton.vue?2f9c","webpack:///./app/javascript/shared/components/ChatCard.vue?95f7","webpack:///app/javascript/shared/components/ChatCard.vue","webpack:///./app/javascript/shared/components/CardButton.vue","webpack:///./app/javascript/shared/components/CardButton.vue?12fb","webpack:///./app/javascript/shared/components/ChatCard.vue","webpack:///./app/javascript/shared/components/ChatCard.vue?ea53","webpack:///app/javascript/shared/components/ChatForm.vue","webpack:///./app/javascript/shared/components/ChatForm.vue?4553","webpack:///./app/javascript/shared/components/ChatForm.vue","webpack:///./app/javascript/shared/components/ChatForm.vue?9347","webpack:///app/javascript/shared/components/ChatOption.vue","webpack:///./app/javascript/shared/components/ChatOption.vue?240d","webpack:///./app/javascript/shared/components/ChatOptions.vue?22d1","webpack:///app/javascript/shared/components/ChatOptions.vue","webpack:///./app/javascript/shared/components/ChatOption.vue","webpack:///./app/javascript/shared/components/ChatOption.vue?869a","webpack:///./app/javascript/shared/components/ChatOptions.vue","webpack:///./app/javascript/shared/components/ChatOptions.vue?4901","webpack:///./app/javascript/widget/components/template/Article.vue?6f75","webpack:///app/javascript/widget/components/template/Article.vue","webpack:///./app/javascript/widget/components/template/Article.vue","webpack:///./app/javascript/widget/components/template/Article.vue?5f07","webpack:///app/javascript/widget/components/template/EmailInput.vue","webpack:///./app/javascript/widget/components/template/EmailInput.vue?431d","webpack:///./app/javascript/widget/components/template/EmailInput.vue","webpack:///./app/javascript/widget/components/template/EmailInput.vue?22ce","webpack:///app/javascript/shared/components/CustomerSatisfaction.vue","webpack:///./app/javascript/shared/components/CustomerSatisfaction.vue?6856","webpack:///./app/javascript/shared/components/CustomerSatisfaction.vue","webpack:///./app/javascript/shared/components/CustomerSatisfaction.vue?3cd9","webpack:///./app/javascript/widget/api/integration.js","webpack:///app/javascript/widget/components/template/IntegrationCard.vue","webpack:///./app/javascript/widget/components/template/IntegrationCard.vue?bf68","webpack:///./app/javascript/widget/components/AgentMessageBubble.vue?c722","webpack:///app/javascript/widget/components/AgentMessageBubble.vue","webpack:///./app/javascript/widget/components/template/IntegrationCard.vue","webpack:///./app/javascript/widget/components/template/IntegrationCard.vue?ce57","webpack:///./app/javascript/widget/components/AgentMessageBubble.vue","webpack:///./app/javascript/widget/components/AgentMessageBubble.vue?98b5","webpack:///app/javascript/widget/components/AgentMessage.vue","webpack:///./app/javascript/widget/components/AgentMessage.vue?2dd5","webpack:///app/javascript/widget/components/ChatMessage.vue","webpack:///./app/javascript/widget/components/ChatMessage.vue?f3cf","webpack:///./app/javascript/widget/components/AgentMessage.vue","webpack:///./app/javascript/widget/components/AgentMessage.vue?be28","webpack:///./app/javascript/widget/components/ChatMessage.vue","webpack:///./app/javascript/widget/components/ChatMessage.vue?0bd1","webpack:///./app/javascript/widget/components/AgentTypingBubble.vue?0c33","webpack:///app/javascript/widget/components/AgentTypingBubble.vue","webpack:///./app/javascript/widget/components/AgentTypingBubble.vue","webpack:///./app/javascript/widget/components/AgentTypingBubble.vue?24a8","webpack:///./app/javascript/shared/components/DateSeparator.vue?6fd3","webpack:///app/javascript/shared/components/DateSeparator.vue","webpack:///app/javascript/widget/components/ConversationWrap.vue","webpack:///./app/javascript/widget/components/ConversationWrap.vue?3b40","webpack:///./app/javascript/shared/components/DateSeparator.vue","webpack:///./app/javascript/shared/components/DateSeparator.vue?bd5d","webpack:///app/javascript/widget/views/Messages.vue","webpack:///./app/javascript/widget/components/ConversationWrap.vue","webpack:///./app/javascript/widget/components/ConversationWrap.vue?f897","webpack:///./app/javascript/widget/views/Messages.vue?f6df","webpack:///./app/javascript/widget/views/Messages.vue"],"names":["USER_MENTIONS_REGEX","processInlineToken","blockToken","children","forEach","inlineToken","type","imgSrc","attrGet","height","URL","searchParams","get","attrSet","setImageHeight","md","require","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","renderer","rules","mention","tokens","idx","content","inline","ruler","before","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","RegExp","push","core","after","mila","attrs","class","rel","target","TWITTER_USERNAME_REGEX","TWITTER_HASH_REGEX","MessageFormatter","message","isATweet","isAPrivateNote","this","updatedMessage","replace","render","formatMessage","DOMParser","parseFromString","formattedMessage","body","textContent","methods","getPlainText","plainText","truncateMessage","description","length","highlightContent","searchTerm","highlightClass","plainTextContent","escapedSearchTerm","messageStamp","time","dateFormat","unixTime","fromUnixTime","format","messageTimestamp","messageTime","now","Date","messageDate","isSameYear","dynamicTime","formatDistanceToNow","addSuffix","shortTimestamp","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","toFixed","checkFileSizeLimit","file","maximumUploadLimit","fileSize","size","component","_vm","_c","_self","ref","placeholder","rows","domProps","value","on","onInput","onFocus","onKeyup","onBlur","buttonClassName","style","disabled","onClick","_t","SIGNATURE_DELIMITER","cleanSignature","signature","nodes","MessageMarkdownTransformer","messageSchema","parse","MessageMarkdownSerializer","serialize","e","console","warn","Sentry","findSignatureInBody","trimmedBody","trimEnd","cleanedSignature","endsWith","lastIndexOf","appendSignature","appendDelimiter","removeSignature","signatureIndex","newBody","substring","delimiterIndex","replaceSignature","oldSignature","newSignature","extractTextFromMarkdown","markdown","split","map","line","trim","filter","Boolean","join","scrollCursorIntoView","view","selection","head","node","domAtPos","scrollIntoView","behavior","block","insertAtCursor","editorView","from","to","tr","name","childCount","firstChild","replaceWith","insertText","insert","apply","updateState","focus","findNodeToInsertImage","editorState","fileUrl","schema","currentNode","$from","typeName","imageNode","image","create","isInParagraph","needsNewLine","some","n","paragraph","setURLWithQueryAndSize","selectedImageNode","setNodeMarkup","docChanged","dispatch","module","exports","buildDyteURL","roomName","dyteAuthToken","staticClass","_v","_s","inReplyTo","replyToAttachment","$event","$emit","allowedFileTypes","direct_upload_url","direct_upload","onFileUpload","isUploading","_e","loading","color","$dm","indexOf","_k","keyCode","key","hideEmojiPicker","arguments","inputColor","$t","onTypingOff","onTypingOn","model","callback","$$v","userInput","expression","onSendAttachment","toggleEmojiPicker","emojiIconColor","directives","rawName","emojiOnClick","handleButtonClick","widgetColor","hideReplyBox","textColor","startNewConversation","sendTranscript","isWidgetStyleFlat","hasReplyTo","handleSendMessage","handleSendAttachment","background","url","thumb","onImgError","readableTime","titleColor","title","computed","messageContentAttributes","content_attributes","hasAttachments","attachments","navigateTo","replyTo","id","transform","dragDistance","handleTouchStart","handleTouchMove","resetPosition","isInProgress","isFailed","toggleReply","status","backgroundColor","_l","attachment","file_type","hasImageError","data_url","onImageLoadError","retrySendMessage","action","uri","borderColor","text","payload","mediaUrl","preventDefault","onSubmit","item","hasSubmitted","formValues","regex","required","submittedValues","Array","isArray","_i","$$a","$$el","$$c","checked","$$i","$set","concat","_q","composing","pattern","$$selectedVal","prototype","call","options","o","selected","_value","multiple","option","pattern_error","onSubmitClick","buttonLabel","isSelected","hideFields","items","link","modifiers","inputHasError","email","$v","$touch","$forceUpdate","$invalid","isUpdating","rating","buttonClass","selectRating","emoji","isFeedbackSubmitted","feedback","isButtonDisabled","messageId","search","buildSearchParamsWithLocale","window","location","urlData","API","post","message_id","isLoading","joinTheCall","meetingLink","leaveTheRoom","isCards","isOptions","isForm","isArticle","isCSAT","data","submitted_values","onOptionSelect","button_label","onFormSubmit","media_url","actions","hasRecordedResponse","isASubmittedForm","showAvatar","avatarUrl","agentName","contentType","messageType","wrapClass","responseMessage","submittedValue","formattedDate","colorSchemeClass","isAgentTyping","groupedMessage","date","groupedMessages"],"mappings":"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","file":"js/37-10ad8c9e73165d064ca4.chunk.js","sourcesContent":["// Process [@mention](mention://user/1/Pranav)\nconst USER_MENTIONS_REGEX = /mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;\n\nconst buildMentionTokens = () => (state, silent) => {\n  var label;\n  var labelEnd;\n  var labelStart;\n  var pos;\n  var res;\n  var token;\n  var href = '';\n  var max = state.posMax;\n\n  if (state.src.charCodeAt(state.pos) !== 0x5b /* [ */) {\n    return false;\n  }\n\n  labelStart = state.pos + 1;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) {\n    return false;\n  }\n\n  label = state.src.slice(labelStart, labelEnd);\n  pos = labelEnd + 1;\n\n  if (pos < max && state.src.charCodeAt(pos) === 0x28 /* ( */) {\n    pos += 1;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n    pos += 1;\n  }\n\n  if (!href.match(new RegExp(USER_MENTIONS_REGEX))) {\n    return false;\n  }\n\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    token = state.push('mention', '');\n    token.href = href;\n    token.content = label;\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n\n  return true;\n};\n\nconst renderMentions = () => (tokens, idx) => {\n  return `<span class=\"prosemirror-mention-node\">${tokens[idx].content}</span>`;\n};\n\nexport default function mentionPlugin(md) {\n  md.renderer.rules.mention = renderMentions(md);\n  md.inline.ruler.before('link', 'mention', buildMentionTokens(md));\n}\n","import mila from 'markdown-it-link-attributes';\nimport mentionPlugin from './markdownIt/link';\n\nconst setImageHeight = inlineToken => {\n  const imgSrc = inlineToken.attrGet('src');\n  if (!imgSrc) return;\n  const url = new URL(imgSrc);\n  const height = url.searchParams.get('cw_image_height');\n  if (!height) return;\n  inlineToken.attrSet('style', `height: ${height};`);\n};\n\nconst processInlineToken = blockToken => {\n  blockToken.children.forEach(inlineToken => {\n    if (inlineToken.type === 'image') {\n      setImageHeight(inlineToken);\n    }\n  });\n};\n\nconst imgResizeManager = md => {\n  // Custom rule for image resize in markdown\n  // If the image url has a query param cw_image_height, then add a style attribute to the image\n  md.core.ruler.after('inline', 'add-image-height', state => {\n    state.tokens.forEach(blockToken => {\n      if (blockToken.type === 'inline') {\n        processInlineToken(blockToken);\n      }\n    });\n  });\n};\n\nconst md = require('markdown-it')({\n  html: false,\n  xhtmlOut: true,\n  breaks: true,\n  langPrefix: 'language-',\n  linkify: true,\n  typographer: true,\n  quotes: '\\u201c\\u201d\\u2018\\u2019',\n  maxNesting: 20,\n})\n  .use(mentionPlugin)\n  .use(imgResizeManager)\n  .use(mila, {\n    attrs: {\n      class: 'link',\n      rel: 'noreferrer noopener nofollow',\n      target: '_blank',\n    },\n  });\n\nconst TWITTER_USERNAME_REGEX = /(^|[^@\\w])@(\\w{1,15})\\b/g;\nconst TWITTER_USERNAME_REPLACEMENT = '$1[@$2](http://twitter.com/$2)';\nconst TWITTER_HASH_REGEX = /(^|\\s)#(\\w+)/g;\nconst TWITTER_HASH_REPLACEMENT = '$1[#$2](https://twitter.com/hashtag/$2)';\n\nclass MessageFormatter {\n  constructor(message, isATweet = false, isAPrivateNote = false) {\n    this.message = message || '';\n    this.isAPrivateNote = isAPrivateNote;\n    this.isATweet = isATweet;\n  }\n\n  formatMessage() {\n    let updatedMessage = this.message;\n    if (this.isATweet && !this.isAPrivateNote) {\n      updatedMessage = updatedMessage.replace(\n        TWITTER_USERNAME_REGEX,\n        TWITTER_USERNAME_REPLACEMENT\n      );\n      updatedMessage = updatedMessage.replace(\n        TWITTER_HASH_REGEX,\n        TWITTER_HASH_REPLACEMENT\n      );\n    }\n    return md.render(updatedMessage);\n  }\n\n  get formattedMessage() {\n    return this.formatMessage();\n  }\n\n  get plainText() {\n    const strippedOutHtml = new DOMParser().parseFromString(\n      this.formattedMessage,\n      'text/html'\n    );\n    return strippedOutHtml.body.textContent || '';\n  }\n}\n\nexport default MessageFormatter;\n","import MessageFormatter from '../helpers/MessageFormatter';\n\nexport default {\n  methods: {\n    formatMessage(message, isATweet, isAPrivateNote) {\n      const messageFormatter = new MessageFormatter(\n        message,\n        isATweet,\n        isAPrivateNote\n      );\n      return messageFormatter.formattedMessage;\n    },\n    getPlainText(message, isATweet) {\n      const messageFormatter = new MessageFormatter(message, isATweet);\n      return messageFormatter.plainText;\n    },\n    truncateMessage(description = '') {\n      if (description.length < 100) {\n        return description;\n      }\n\n      return `${description.slice(0, 97)}...`;\n    },\n\n    highlightContent(content = '', searchTerm = '', highlightClass = '') {\n      const plainTextContent = this.getPlainText(content);\n\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n      const escapedSearchTerm = searchTerm.replace(\n        /[.*+?^${}()|[\\]\\\\]/g,\n        '\\\\$&'\n      );\n\n      return plainTextContent.replace(\n        new RegExp(`(${escapedSearchTerm})`, 'ig'),\n        `<span class=\"${highlightClass}\">$1</span>`\n      );\n    },\n  },\n};\n","import {\n  format,\n  isSameYear,\n  fromUnixTime,\n  formatDistanceToNow,\n} from 'date-fns';\n\nexport default {\n  methods: {\n    messageStamp(time, dateFormat = 'h:mm a') {\n      const unixTime = fromUnixTime(time);\n      return format(unixTime, dateFormat);\n    },\n    messageTimestamp(time, dateFormat = 'MMM d, yyyy') {\n      const messageTime = fromUnixTime(time);\n      const now = new Date();\n      const messageDate = format(messageTime, dateFormat);\n      if (!isSameYear(messageTime, now)) {\n        return format(messageTime, 'LLL d y, h:mm a');\n      }\n      return messageDate;\n    },\n    dynamicTime(time) {\n      const unixTime = fromUnixTime(time);\n      return formatDistanceToNow(unixTime, { addSuffix: true });\n    },\n    dateFormat(time, dateFormat = 'MMM d, yyyy') {\n      const unixTime = fromUnixTime(time);\n      return format(unixTime, dateFormat);\n    },\n    shortTimestamp(time) {\n      const convertToShortTime = time\n        .replace(/about|over|almost|/g, '')\n        .replace('less than a minute ago', 'now')\n        .replace(' minute ago', 'm')\n        .replace(' minutes ago', 'm')\n        .replace('a minute ago', 'm')\n        .replace('an hour ago', 'h')\n        .replace(' hour ago', 'h')\n        .replace(' hours ago', 'h')\n        .replace(' day ago', 'd')\n        .replace('a day ago', 'd')\n        .replace(' days ago', 'd')\n        .replace('a month ago', 'mo')\n        .replace(' months ago', 'mo')\n        .replace(' month ago', 'mo')\n        .replace('a year ago', 'y')\n        .replace(' year ago', 'y')\n        .replace(' years ago', 'y');\n      return convertToShortTime;\n    },\n  },\n};\n","export const formatBytes = (bytes, decimals = 2) => {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return parseFloat((bytes / k ** i).toFixed(dm)) + ' ' + sizes[i];\n};\n\nexport const fileSizeInMegaBytes = bytes => {\n  return bytes / (1024 * 1024);\n};\n\nexport const checkFileSizeLimit = (file, maximumUploadLimit) => {\n  const fileSize = file?.file?.size || file?.size;\n  const fileSizeInMB = fileSizeInMegaBytes(fileSize);\n  return fileSizeInMB <= maximumUploadLimit;\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('textarea',{ref:\"textarea\",attrs:{\"placeholder\":_vm.placeholder,\"rows\":_vm.rows},domProps:{\"value\":_vm.value},on:{\"input\":_vm.onInput,\"focus\":_vm.onFocus,\"keyup\":_vm.onKeyup,\"blur\":_vm.onBlur}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResizableTextArea.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResizableTextArea.vue?vue&type=script&lang=js&\"","<template>\n  <textarea\n    ref=\"textarea\"\n    :placeholder=\"placeholder\"\n    :rows=\"rows\"\n    :value=\"value\"\n    @input=\"onInput\"\n    @focus=\"onFocus\"\n    @keyup=\"onKeyup\"\n    @blur=\"onBlur\"\n  />\n</template>\n\n<script>\nimport {\n  appendSignature,\n  removeSignature,\n  extractTextFromMarkdown,\n} from 'dashboard/helper/editorHelper';\n\nconst TYPING_INDICATOR_IDLE_TIME = 4000;\nexport default {\n  props: {\n    placeholder: {\n      type: String,\n      default: '',\n    },\n    value: {\n      type: String,\n      default: '',\n    },\n    minHeight: {\n      type: Number,\n      default: 2,\n    },\n    signature: {\n      type: String,\n      default: '',\n    },\n    rows: {\n      type: Number,\n      default: 2,\n    },\n    // add this as a prop, so that we won't have to include uiSettingsMixin\n    sendWithSignature: {\n      type: Boolean,\n      default: false,\n    },\n    // allowSignature is a kill switch, ensuring no signature methods are triggered except when this flag is true\n    allowSignature: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      idleTimer: null,\n    };\n  },\n  computed: {\n    cleanedSignature() {\n      // clean the signature, this will ensure that we don't have\n      // any markdown formatted text in the signature\n      return extractTextFromMarkdown(this.signature);\n    },\n  },\n  watch: {\n    value() {\n      this.resizeTextarea();\n      //  watch triggers every time the value is changed, we cannot set this to focus then\n      // when this runs, it sets the cursor to the end of the body, ignoring the signature\n      // Suppose if someone manually set the cursor to the middle of the body\n      // and starts typing, the cursor will be set to the end of the body\n      // A surprise cursor jump? Definitely not user-friendly.\n      if (document.activeElement !== this.$refs.textarea) {\n        this.$nextTick(() => {\n          this.setCursor();\n        });\n      }\n    },\n    sendWithSignature(newValue) {\n      if (this.allowSignature) {\n        this.toggleSignatureInEditor(newValue);\n      }\n    },\n  },\n  mounted() {\n    this.$nextTick(() => {\n      if (this.value) {\n        this.resizeTextarea();\n        this.setCursor();\n      } else {\n        this.focus();\n      }\n    });\n  },\n  methods: {\n    resizeTextarea() {\n      this.$el.style.height = 'auto';\n      if (!this.value) {\n        this.$el.style.height = `${this.minHeight}rem`;\n      } else {\n        this.$el.style.height = `${this.$el.scrollHeight}px`;\n      }\n    },\n    // The toggleSignatureInEditor gets the new value from the\n    // watcher, this means that if the value is true, the signature\n    // is supposed to be added, else we remove it.\n    toggleSignatureInEditor(signatureEnabled) {\n      const valueWithSignature = signatureEnabled\n        ? appendSignature(this.value, this.cleanedSignature)\n        : removeSignature(this.value, this.cleanedSignature);\n\n      this.$emit('input', valueWithSignature);\n\n      this.$nextTick(() => {\n        this.resizeTextarea();\n        this.setCursor();\n      });\n    },\n    setCursor() {\n      const bodyWithoutSignature = removeSignature(\n        this.value,\n        this.cleanedSignature\n      );\n\n      // only trim at end, so if there are spaces at the start, those are not removed\n      const bodyEndsAt = bodyWithoutSignature.trimEnd().length;\n      const textarea = this.$refs.textarea;\n\n      if (textarea) {\n        textarea.focus();\n        textarea.setSelectionRange(bodyEndsAt, bodyEndsAt);\n      }\n    },\n    onInput(event) {\n      this.$emit('input', event.target.value);\n      this.resizeTextarea();\n    },\n    resetTyping() {\n      this.$emit('typing-off');\n      this.idleTimer = null;\n    },\n    turnOffIdleTimer() {\n      if (this.idleTimer) {\n        clearTimeout(this.idleTimer);\n      }\n    },\n    onKeyup() {\n      if (!this.idleTimer) {\n        this.$emit('typing-on');\n      }\n      this.turnOffIdleTimer();\n      this.idleTimer = setTimeout(\n        () => this.resetTyping(),\n        TYPING_INDICATOR_IDLE_TIME\n      );\n    },\n    onBlur() {\n      this.turnOffIdleTimer();\n      this.resetTyping();\n      this.$emit('blur');\n    },\n    onFocus() {\n      this.$emit('focus');\n    },\n    focus() {\n      if (this.$refs.textarea) this.$refs.textarea.focus();\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./ResizableTextArea.vue?vue&type=template&id=c1d0710a&\"\nimport script from \"./ResizableTextArea.vue?vue&type=script&lang=js&\"\nexport * from \"./ResizableTextArea.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('button',{class:_vm.buttonClassName,style:(_vm.buttonStyles),attrs:{\"disabled\":_vm.disabled},on:{\"click\":_vm.onClick}},[_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Button.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Button.vue?vue&type=script&lang=js&\"","<template>\n  <button\n    :class=\"buttonClassName\"\n    :style=\"buttonStyles\"\n    :disabled=\"disabled\"\n    @click=\"onClick\"\n  >\n    <slot />\n  </button>\n</template>\n<script>\nexport default {\n  props: {\n    block: {\n      type: Boolean,\n      default: false,\n    },\n    type: {\n      type: String,\n      default: 'blue',\n    },\n    bgColor: {\n      type: String,\n      default: '',\n    },\n    textColor: {\n      type: String,\n      default: '',\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    buttonClassName() {\n      let className = 'text-white py-3 px-4 rounded shadow-sm leading-4';\n      if (this.type === 'clear') {\n        className = 'flex mx-auto mt-4 text-xs leading-3 w-auto text-black-600';\n      }\n\n      if (this.type === 'blue' && !Object.keys(this.buttonStyles).length) {\n        className = `${className} bg-woot-500 hover:bg-woot-700`;\n      }\n      if (this.block) {\n        className = `${className} w-full`;\n      }\n      return className;\n    },\n    buttonStyles() {\n      const styles = {};\n      if (this.bgColor) {\n        styles.backgroundColor = this.bgColor;\n      }\n      if (this.textColor) {\n        styles.color = this.textColor;\n      }\n      return styles;\n    },\n  },\n  methods: {\n    onClick(e) {\n      this.$emit('click', e);\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./Button.vue?vue&type=template&id=05075a0e&\"\nimport script from \"./Button.vue?vue&type=script&lang=js&\"\nexport * from \"./Button.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {\n  messageSchema,\n  MessageMarkdownTransformer,\n  MessageMarkdownSerializer,\n} from '@chatwoot/prosemirror-schema';\nimport * as Sentry from '@sentry/browser';\n\n/**\n * The delimiter used to separate the signature from the rest of the body.\n * @type {string}\n */\nexport const SIGNATURE_DELIMITER = '--';\n\n/**\n * Parse and Serialize the markdown text to remove any extra spaces or new lines\n */\nexport function cleanSignature(signature) {\n  try {\n    // remove any horizontal rule tokens\n    signature = signature\n      .replace(/^( *\\* *){3,} *$/gm, '')\n      .replace(/^( *- *){3,} *$/gm, '')\n      .replace(/^( *_ *){3,} *$/gm, '');\n\n    const nodes = new MessageMarkdownTransformer(messageSchema).parse(\n      signature\n    );\n    return MessageMarkdownSerializer.serialize(nodes);\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.warn(e);\n    Sentry.captureException(e);\n    // The parser can break on some cases\n    // for example, Token type `hr` not supported by Markdown parser\n    return signature;\n  }\n}\n\n/**\n * Adds the signature delimiter to the beginning of the signature.\n *\n * @param {string} signature - The signature to add the delimiter to.\n * @returns {string} - The signature with the delimiter added.\n */\nfunction appendDelimiter(signature) {\n  return `${SIGNATURE_DELIMITER}\\n\\n${cleanSignature(signature)}`;\n}\n\n/**\n * Check if there's an unedited signature at the end of the body\n * If there is, return the index of the signature, If there isn't, return -1\n *\n * @param {string} body - The body to search for the signature.\n * @param {string} signature - The signature to search for.\n * @returns {number} - The index of the last occurrence of the signature in the body, or -1 if not found.\n */\nexport function findSignatureInBody(body, signature) {\n  const trimmedBody = body.trimEnd();\n  const cleanedSignature = cleanSignature(signature);\n\n  // check if body ends with signature\n  if (trimmedBody.endsWith(cleanedSignature)) {\n    return body.lastIndexOf(cleanedSignature);\n  }\n\n  return -1;\n}\n\n/**\n * Appends the signature to the body, separated by the signature delimiter.\n *\n * @param {string} body - The body to append the signature to.\n * @param {string} signature - The signature to append.\n * @returns {string} - The body with the signature appended.\n */\nexport function appendSignature(body, signature) {\n  const cleanedSignature = cleanSignature(signature);\n  // if signature is already present, return body\n  if (findSignatureInBody(body, cleanedSignature) > -1) {\n    return body;\n  }\n\n  return `${body.trimEnd()}\\n\\n${appendDelimiter(cleanedSignature)}`;\n}\n\n/**\n * Removes the signature from the body, along with the signature delimiter.\n *\n * @param {string} body - The body to remove the signature from.\n * @param {string} signature - The signature to remove.\n * @returns {string} - The body with the signature removed.\n */\nexport function removeSignature(body, signature) {\n  // this will find the index of the signature if it exists\n  // Regardless of extra spaces or new lines after the signature, the index will be the same if present\n  const cleanedSignature = cleanSignature(signature);\n  const signatureIndex = findSignatureInBody(body, cleanedSignature);\n\n  // no need to trim the ends here, because it will simply be removed in the next method\n  let newBody = body;\n\n  // if signature is present, remove it and trim it\n  // trimming will ensure any spaces or new lines before the signature are removed\n  // This means we will have the delimiter at the end\n  if (signatureIndex > -1) {\n    newBody = newBody.substring(0, signatureIndex).trimEnd();\n  }\n\n  // let's find the delimiter and remove it\n  const delimiterIndex = newBody.lastIndexOf(SIGNATURE_DELIMITER);\n  if (\n    delimiterIndex !== -1 &&\n    delimiterIndex === newBody.length - SIGNATURE_DELIMITER.length // this will ensure the delimiter is at the end\n  ) {\n    // if the delimiter is at the end, remove it\n    newBody = newBody.substring(0, delimiterIndex);\n  }\n\n  // return the value\n  return newBody;\n}\n\n/**\n * Replaces the old signature with the new signature.\n * If the old signature is not present, it will append the new signature.\n *\n * @param {string} body - The body to replace the signature in.\n * @param {string} oldSignature - The signature to replace.\n * @param {string} newSignature - The signature to replace the old signature with.\n * @returns {string} - The body with the old signature replaced with the new signature.\n *\n */\nexport function replaceSignature(body, oldSignature, newSignature) {\n  const withoutSignature = removeSignature(body, oldSignature);\n  return appendSignature(withoutSignature, newSignature);\n}\n\n/**\n * Extract text from markdown, and remove all images, code blocks, links, headers, bold, italic, lists etc.\n * Links will be converted to text, and not removed.\n *\n * @param {string} markdown - markdown text to be extracted\n * @returns\n */\nexport function extractTextFromMarkdown(markdown) {\n  return markdown\n    .replace(/```[\\s\\S]*?```/g, '') // Remove code blocks\n    .replace(/`.*?`/g, '') // Remove inline code\n    .replace(/!\\[.*?\\]\\(.*?\\)/g, '') // Remove images before removing links\n    .replace(/\\[([^\\]]+)\\]\\([^)]+\\)/g, '$1') // Remove links but keep the text\n    .replace(/#+\\s*|[*_-]{1,3}/g, '') // Remove headers, bold, italic, lists etc.\n    .split('\\n')\n    .map(line => line.trim())\n    .filter(Boolean)\n    .join('\\n') // Trim each line & remove any lines only having spaces\n    .replace(/\\n{2,}/g, '\\n') // Remove multiple consecutive newlines (blank lines)\n    .trim(); // Trim any extra space\n}\n\n/**\n * Scrolls the editor view into current cursor position\n *\n * @param {EditorView} view - The Prosemirror EditorView\n *\n */\nexport const scrollCursorIntoView = view => {\n  // Get the current selection's head position (where the cursor is).\n  const pos = view.state.selection.head;\n\n  // Get the corresponding DOM node for that position.\n  const domAtPos = view.domAtPos(pos);\n  const node = domAtPos.node;\n\n  // Scroll the node into view.\n  if (node && node.scrollIntoView) {\n    node.scrollIntoView({ behavior: 'smooth', block: 'center' });\n  }\n};\n\n/**\n * Returns a transaction that inserts a node into editor at the given position\n * Has an optional param 'content' to check if the\n *\n * @param {Node} node - The prosemirror node that needs to be inserted into the editor\n * @param {number} from - Position in the editor where the node needs to be inserted\n * @param {number} to - Position in the editor where the node needs to be replaced\n *\n */\nexport function insertAtCursor(editorView, node, from, to) {\n  if (!editorView) {\n    return undefined;\n  }\n\n  // This is a workaround to prevent inserting content into new line rather than on the exiting line\n  // If the node is of type 'doc' and has only one child which is a paragraph,\n  // then extract its inline content to be inserted as inline.\n  const isWrappedInParagraph =\n    node.type.name === 'doc' &&\n    node.childCount === 1 &&\n    node.firstChild.type.name === 'paragraph';\n\n  if (isWrappedInParagraph) {\n    node = node.firstChild.content;\n  }\n\n  let tr;\n  if (to) {\n    tr = editorView.state.tr.replaceWith(from, to, node).insertText(` `);\n  } else {\n    tr = editorView.state.tr.insert(from, node);\n  }\n  const state = editorView.state.apply(tr);\n  editorView.updateState(state);\n  editorView.focus();\n\n  return state;\n}\n\n/**\n * Determines the appropriate node and position to insert an image in the editor.\n *\n * Based on the current editor state and the provided image URL, this function finds out the correct node (either\n * a standalone image node or an image wrapped in a paragraph) and its respective position in the editor.\n *\n * 1. If the current node is a paragraph and doesn't contain an image or text, the image is inserted directly into it.\n * 2. If the current node isn't a paragraph or it's a paragraph containing text, the image will be wrapped\n *    in a new paragraph and then inserted.\n * 3. If the current node is a paragraph containing an image, the new image will be inserted directly into it.\n *\n * @param {Object} editorState - The current state of the editor. It provides necessary details like selection, schema, etc.\n * @param {string} fileUrl - The URL of the image to be inserted into the editor.\n * @returns {Object|null} An object containing details about the node to be inserted and its position. It returns null if no image node can be created.\n * @property {Node} node - The ProseMirror node to be inserted (either an image node or a paragraph containing the image).\n * @property {number} pos - The position where the new node should be inserted in the editor.\n */\n\nexport const findNodeToInsertImage = (editorState, fileUrl) => {\n  const { selection, schema } = editorState;\n  const { nodes } = schema;\n  const currentNode = selection.$from.node();\n  const {\n    type: { name: typeName },\n    content: { size, content },\n  } = currentNode;\n\n  const imageNode = nodes.image.create({ src: fileUrl });\n\n  if (!imageNode) return null;\n\n  const isInParagraph = typeName === 'paragraph';\n  const needsNewLine =\n    !content.some(n => n.type.name === 'image') && size !== 0 ? 1 : 0;\n\n  return {\n    node: isInParagraph ? imageNode : nodes.paragraph.create({}, imageNode),\n    pos: selection.from + needsNewLine,\n  };\n};\n\n/**\n * Set URL with query and size.\n *\n * @param {Object} selectedImageNode - The current selected node.\n * @param {Object} size - The size to set.\n * @param {Object} editorView - The editor view.\n */\nexport function setURLWithQueryAndSize(selectedImageNode, size, editorView) {\n  if (selectedImageNode) {\n    // Create and apply the transaction\n    const tr = editorView.state.tr.setNodeMarkup(\n      editorView.state.selection.from,\n      null,\n      {\n        src: selectedImageNode.src,\n        height: size.height,\n      }\n    );\n\n    if (tr.docChanged) {\n      editorView.dispatch(tr);\n    }\n  }\n}\n","module.exports = __webpack_public_path__ + \"media/dashboard/assets/images/chatwoot_bot-905112376e6493b37e2cecea8f9dc50c.png\";","const DYTE_MEETING_LINK = 'https://app.dyte.in/meeting/stage/';\n\nexport const buildDyteURL = (roomName, dyteAuthToken) => {\n  return `${DYTE_MEETING_LINK}${roomName}?authToken=${dyteAuthToken}&showSetupScreen=true&disableVideoBackground=true`;\n};\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatInputWrap.vue?vue&type=style&index=0&id=17dc3314&prod&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatFooter.vue?vue&type=style&index=0&id=7145e03c&prod&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessageBubble.vue?vue&type=style&index=0&id=3309eefb&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageBubble.vue?vue&type=style&index=0&id=674f83bd&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileBubble.vue?vue&type=style&index=0&id=3fc1205c&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CardButton.vue?vue&type=style&index=0&id=4071c27e&prod&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatCard.vue?vue&type=style&index=0&id=6cf511a6&prod&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatForm.vue?vue&type=style&index=0&id=28b9fbb6&prod&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatOption.vue?vue&type=style&index=0&id=dddfa04c&prod&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatOptions.vue?vue&type=style&index=0&id=323cba20&prod&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatOptions.vue?vue&type=style&index=1&id=323cba20&prod&scoped=true&lang=scss&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=style&index=0&id=feefd62e&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailInput.vue?vue&type=style&index=0&id=11b045aa&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerSatisfaction.vue?vue&type=style&index=0&id=7b924d1d&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IntegrationCard.vue?vue&type=style&index=0&id=eb06e41e&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessage.vue?vue&type=style&index=0&id=ecf74328&prod&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessage.vue?vue&type=style&index=1&id=ecf74328&prod&lang=scss&\"","module.exports = __webpack_public_path__ + \"media/widget/assets/images/typing-6027d21b24f45e3377a729a55158f948.gif\";","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentTypingBubble.vue?vue&type=style&index=0&id=49502ac0&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateSeparator.vue?vue&type=style&index=0&id=0619d2c7&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationWrap.vue?vue&type=style&index=0&id=dd2501de&prod&scoped=true&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex flex-col flex-1 overflow-hidden rounded-b-lg bg-slate-25 dark:bg-slate-800\"},[_c('div',{staticClass:\"flex flex-1 overflow-auto\"},[_c('conversation-wrap',{attrs:{\"grouped-messages\":_vm.groupedMessages}})],1),_vm._v(\" \"),_c('chat-footer',{staticClass:\"px-5\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"mb-2.5 rounded-[7px] dark:bg-slate-900 dark:text-slate-100 bg-slate-100 px-2 py-1.5 text-sm text-slate-700 flex items-center gap-2\"\n  >\n    <div class=\"items-center flex-grow truncate\">\n      <strong>Replying to:</strong>\n      {{ inReplyTo.content || replyToAttachment }}\n    </div>\n    <button\n      class=\"items-end flex-shrink-0 p-1 rounded-md hover:bg-slate-200 dark:hover:bg-slate-800\"\n      @click=\"$emit('dismiss')\"\n    >\n      <fluent-icon icon=\"dismiss\" size=\"12\" />\n    </button>\n  </div>\n</template>\n\n<script>\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\n\nexport default {\n  name: 'FooterReplyTo',\n  components: { FluentIcon },\n  props: {\n    inReplyTo: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  computed: {\n    replyToAttachment() {\n      if (!this.inReplyTo?.attachments?.length) {\n        return '';\n      }\n\n      const [{ file_type: fileType } = {}] = this.inReplyTo.attachments;\n      return this.$t(`ATTACHMENTS.${fileType}.CONTENT`);\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FooterReplyTo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FooterReplyTo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FooterReplyTo.vue?vue&type=template&id=261beedb&\"\nimport script from \"./FooterReplyTo.vue?vue&type=script&lang=js&\"\nexport * from \"./FooterReplyTo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mb-2.5 rounded-[7px] dark:bg-slate-900 dark:text-slate-100 bg-slate-100 px-2 py-1.5 text-sm text-slate-700 flex items-center gap-2\"},[_c('div',{staticClass:\"items-center flex-grow truncate\"},[_c('strong',[_vm._v(\"Replying to:\")]),_vm._v(\"\\n    \"+_vm._s(_vm.inReplyTo.content || _vm.replyToAttachment)+\"\\n  \")]),_vm._v(\" \"),_c('button',{staticClass:\"items-end flex-shrink-0 p-1 rounded-md hover:bg-slate-200 dark:hover:bg-slate-800\",on:{\"click\":function($event){return _vm.$emit('dismiss')}}},[_c('fluent-icon',{attrs:{\"icon\":\"dismiss\",\"size\":\"12\"}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <file-upload\n    ref=\"upload\"\n    :size=\"4096 * 2048\"\n    :accept=\"allowedFileTypes\"\n    :data=\"{\n      direct_upload_url: '/api/v1/widget/direct_uploads',\n      direct_upload: true,\n    }\"\n    @input-file=\"onFileUpload\"\n  >\n    <button class=\"icon-button flex items-center justify-center\">\n      <fluent-icon v-if=\"!isUploading.image\" icon=\"attach\" />\n      <spinner v-if=\"isUploading\" size=\"small\" />\n    </button>\n  </file-upload>\n</template>\n\n<script>\nimport FileUpload from 'vue-upload-component';\nimport Spinner from 'shared/components/Spinner.vue';\nimport { checkFileSizeLimit } from 'shared/helpers/FileHelper';\nimport {\n  MAXIMUM_FILE_UPLOAD_SIZE,\n  ALLOWED_FILE_TYPES,\n} from 'shared/constants/messages';\nimport { BUS_EVENTS } from 'shared/constants/busEvents';\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\nimport { DirectUpload } from 'activestorage';\nimport { mapGetters } from 'vuex';\n\nexport default {\n  components: { FluentIcon, FileUpload, Spinner },\n  props: {\n    onAttach: {\n      type: Function,\n      default: () => {},\n    },\n  },\n  data() {\n    return { isUploading: false };\n  },\n  computed: {\n    ...mapGetters({ globalConfig: 'globalConfig/get' }),\n    fileUploadSizeLimit() {\n      return MAXIMUM_FILE_UPLOAD_SIZE;\n    },\n    allowedFileTypes() {\n      return ALLOWED_FILE_TYPES;\n    },\n  },\n  mounted() {\n    document.addEventListener('paste', this.handleClipboardPaste);\n  },\n  destroyed() {\n    document.removeEventListener('paste', this.handleClipboardPaste);\n  },\n  methods: {\n    handleClipboardPaste(e) {\n      const items = (e.clipboardData || e.originalEvent.clipboardData).items;\n      items.forEach(item => {\n        if (item.kind === 'file') {\n          e.preventDefault();\n          const file = item.getAsFile();\n          this.$refs.upload.add(file);\n        }\n      });\n    },\n    getFileType(fileType) {\n      return fileType.includes('image') ? 'image' : 'file';\n    },\n    async onFileUpload(file) {\n      if (this.globalConfig.directUploadsEnabled) {\n        await this.onDirectFileUpload(file);\n      } else {\n        await this.onIndirectFileUpload(file);\n      }\n    },\n    async onDirectFileUpload(file) {\n      if (!file) {\n        return;\n      }\n      this.isUploading = true;\n      try {\n        if (checkFileSizeLimit(file, MAXIMUM_FILE_UPLOAD_SIZE)) {\n          const { websiteToken } = window.chatwootWebChannel;\n          const upload = new DirectUpload(\n            file.file,\n            `/api/v1/widget/direct_uploads?website_token=${websiteToken}`,\n            {\n              directUploadWillCreateBlobWithXHR: xhr => {\n                xhr.setRequestHeader('X-Auth-Token', window.authToken);\n              },\n            }\n          );\n\n          upload.create((error, blob) => {\n            if (error) {\n              window.bus.$emit(BUS_EVENTS.SHOW_ALERT, {\n                message: error,\n              });\n            } else {\n              this.onAttach({\n                file: blob.signed_id,\n                ...this.getLocalFileAttributes(file),\n              });\n            }\n          });\n        } else {\n          window.bus.$emit(BUS_EVENTS.SHOW_ALERT, {\n            message: this.$t('FILE_SIZE_LIMIT', {\n              MAXIMUM_FILE_UPLOAD_SIZE: this.fileUploadSizeLimit,\n            }),\n          });\n        }\n      } catch (error) {\n        // Error\n      }\n      this.isUploading = false;\n    },\n    async onIndirectFileUpload(file) {\n      if (!file) {\n        return;\n      }\n      this.isUploading = true;\n      try {\n        if (checkFileSizeLimit(file, MAXIMUM_FILE_UPLOAD_SIZE)) {\n          await this.onAttach({\n            file: file.file,\n            ...this.getLocalFileAttributes(file),\n          });\n        } else {\n          window.bus.$emit(BUS_EVENTS.SHOW_ALERT, {\n            message: this.$t('FILE_SIZE_LIMIT', {\n              MAXIMUM_FILE_UPLOAD_SIZE: this.fileUploadSizeLimit,\n            }),\n          });\n        }\n      } catch (error) {\n        // Error\n      }\n      this.isUploading = false;\n    },\n    getLocalFileAttributes(file) {\n      return {\n        thumbUrl: window.URL.createObjectURL(file.file),\n        fileType: this.getFileType(file.type),\n      };\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAttachment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAttachment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatAttachment.vue?vue&type=template&id=7f84e220&\"\nimport script from \"./ChatAttachment.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatAttachment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('file-upload',{ref:\"upload\",attrs:{\"size\":4096 * 2048,\"accept\":_vm.allowedFileTypes,\"data\":{\n    direct_upload_url: '/api/v1/widget/direct_uploads',\n    direct_upload: true,\n  }},on:{\"input-file\":_vm.onFileUpload}},[_c('button',{staticClass:\"icon-button flex items-center justify-center\"},[(!_vm.isUploading.image)?_c('fluent-icon',{attrs:{\"icon\":\"attach\"}}):_vm._e(),_vm._v(\" \"),(_vm.isUploading)?_c('spinner',{attrs:{\"size\":\"small\"}}):_vm._e()],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatSendButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatSendButton.vue?vue&type=script&lang=js&\"","<template>\n  <button\n    type=\"submit\"\n    :disabled=\"disabled\"\n    class=\"icon-button flex items-center justify-center ml-1\"\n    @click=\"onClick\"\n  >\n    <fluent-icon v-if=\"!loading\" icon=\"send\" :style=\"`color: ${color}`\" />\n    <spinner v-else size=\"small\" />\n  </button>\n</template>\n\n<script>\nimport Spinner from 'shared/components/Spinner.vue';\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\n\nexport default {\n  components: {\n    FluentIcon,\n    Spinner,\n  },\n  props: {\n    loading: {\n      type: Boolean,\n      default: false,\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    onClick: {\n      type: Function,\n      default: () => {},\n    },\n    color: {\n      type: String,\n      default: '#6e6f73',\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./ChatSendButton.vue?vue&type=template&id=34835494&\"\nimport script from \"./ChatSendButton.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatSendButton.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('button',{staticClass:\"icon-button flex items-center justify-center ml-1\",attrs:{\"type\":\"submit\",\"disabled\":_vm.disabled},on:{\"click\":_vm.onClick}},[(!_vm.loading)?_c('fluent-icon',{style:(`color: ${_vm.color}`),attrs:{\"icon\":\"send\"}}):_c('spinner',{attrs:{\"size\":\"small\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"chat-message--input is-focused\"\n    :class=\"$dm('bg-white ', 'dark:bg-slate-600')\"\n    @keydown.esc=\"hideEmojiPicker\"\n  >\n    <resizable-text-area\n      id=\"chat-input\"\n      ref=\"chatInput\"\n      v-model=\"userInput\"\n      :rows=\"1\"\n      :aria-label=\"$t('CHAT_PLACEHOLDER')\"\n      :placeholder=\"$t('CHAT_PLACEHOLDER')\"\n      class=\"form-input user-message-input is-focused\"\n      :class=\"inputColor\"\n      @typing-off=\"onTypingOff\"\n      @typing-on=\"onTypingOn\"\n      @focus=\"onFocus\"\n      @blur=\"onBlur\"\n    />\n    <div class=\"button-wrap\">\n      <chat-attachment-button\n        v-if=\"showAttachment\"\n        :class=\"$dm('text-black-900', 'dark:text-slate-100')\"\n        :on-attach=\"onSendAttachment\"\n      />\n      <button\n        v-if=\"hasEmojiPickerEnabled\"\n        class=\"flex items-center justify-center icon-button\"\n        aria-label=\"Emoji picker\"\n        @click=\"toggleEmojiPicker\"\n      >\n        <fluent-icon icon=\"emoji\" :class=\"emojiIconColor\" />\n      </button>\n      <emoji-input\n        v-if=\"showEmojiPicker\"\n        v-on-clickaway=\"hideEmojiPicker\"\n        :on-click=\"emojiOnClick\"\n        @keydown.esc=\"hideEmojiPicker\"\n      />\n      <chat-send-button\n        v-if=\"showSendButton\"\n        :on-click=\"handleButtonClick\"\n        :color=\"widgetColor\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport { mixin as clickaway } from 'vue-clickaway';\n\nimport ChatAttachmentButton from 'widget/components/ChatAttachment.vue';\nimport ChatSendButton from 'widget/components/ChatSendButton.vue';\nimport configMixin from '../mixins/configMixin';\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\nimport ResizableTextArea from 'shared/components/ResizableTextArea.vue';\nimport darkModeMixin from 'widget/mixins/darkModeMixin.js';\n\nconst EmojiInput = () => import('shared/components/emoji/EmojiInput');\n\nexport default {\n  name: 'ChatInputWrap',\n  components: {\n    ChatAttachmentButton,\n    ChatSendButton,\n    EmojiInput,\n    FluentIcon,\n    ResizableTextArea,\n  },\n  mixins: [clickaway, configMixin, darkModeMixin],\n  props: {\n    onSendMessage: {\n      type: Function,\n      default: () => {},\n    },\n    onSendAttachment: {\n      type: Function,\n      default: () => {},\n    },\n  },\n\n  data() {\n    return {\n      userInput: '',\n      showEmojiPicker: false,\n      isFocused: false,\n    };\n  },\n\n  computed: {\n    ...mapGetters({\n      widgetColor: 'appConfig/getWidgetColor',\n      isWidgetOpen: 'appConfig/getIsWidgetOpen',\n    }),\n    showAttachment() {\n      return this.hasAttachmentsEnabled && this.userInput.length === 0;\n    },\n    showSendButton() {\n      return this.userInput.length > 0;\n    },\n    inputColor() {\n      return `${this.$dm('bg-white', 'dark:bg-slate-600')}\n        ${this.$dm('text-black-900', 'dark:text-slate-50')}`;\n    },\n    emojiIconColor() {\n      return this.showEmojiPicker\n        ? `text-woot-500 ${this.$dm('text-black-900', 'dark:text-slate-100')}`\n        : `${this.$dm('text-black-900', 'dark:text-slate-100')}`;\n    },\n  },\n  watch: {\n    isWidgetOpen(isWidgetOpen) {\n      if (isWidgetOpen) {\n        this.focusInput();\n      }\n    },\n  },\n  destroyed() {\n    document.removeEventListener('keypress', this.handleEnterKeyPress);\n  },\n  mounted() {\n    document.addEventListener('keypress', this.handleEnterKeyPress);\n    if (this.isWidgetOpen) {\n      this.focusInput();\n    }\n  },\n\n  methods: {\n    onBlur() {\n      this.isFocused = false;\n    },\n    onFocus() {\n      this.isFocused = true;\n    },\n    handleButtonClick() {\n      if (this.userInput && this.userInput.trim()) {\n        this.onSendMessage(this.userInput);\n      }\n      this.userInput = '';\n      this.focusInput();\n    },\n    handleEnterKeyPress(e) {\n      if (e.keyCode === 13 && !e.shiftKey) {\n        e.preventDefault();\n        this.handleButtonClick();\n      }\n    },\n    toggleEmojiPicker() {\n      this.showEmojiPicker = !this.showEmojiPicker;\n    },\n    hideEmojiPicker(e) {\n      if (this.showEmojiPicker) {\n        e.stopPropagation();\n        this.toggleEmojiPicker();\n      }\n    },\n    emojiOnClick(emoji) {\n      this.userInput = `${this.userInput}${emoji} `;\n    },\n    onTypingOff() {\n      this.toggleTyping('off');\n    },\n    onTypingOn() {\n      this.toggleTyping('on');\n    },\n    toggleTyping(typingStatus) {\n      this.$store.dispatch('conversation/toggleUserTyping', { typingStatus });\n    },\n    focusInput() {\n      this.$refs.chatInput.focus();\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '~widget/assets/scss/variables.scss';\n@import '~widget/assets/scss/mixins.scss';\n\n.chat-message--input {\n  align-items: center;\n  display: flex;\n  padding: 0 $space-small 0 $space-slab;\n  border-radius: 7px;\n\n  &.is-focused {\n    box-shadow:\n      0 0 0 1px $color-woot,\n      0 0 2px 3px $color-primary-light;\n  }\n}\n\n.emoji-dialog {\n  right: 20px;\n  top: -302px;\n  max-width: 100%;\n\n  &::before {\n    right: $space-one;\n  }\n}\n\n.button-wrap {\n  display: flex;\n  align-items: center;\n  padding-left: $space-small;\n}\n\n.user-message-input {\n  border: 0;\n  height: $space-large;\n  min-height: $space-large;\n  max-height: 2.4 * $space-mega;\n  resize: none;\n  padding: $space-smaller 0;\n  margin-top: $space-small;\n  margin-bottom: $space-small;\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatInputWrap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatInputWrap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatInputWrap.vue?vue&type=template&id=17dc3314&scoped=true&\"\nimport script from \"./ChatInputWrap.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatInputWrap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatInputWrap.vue?vue&type=style&index=0&id=17dc3314&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17dc3314\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-message--input is-focused\",class:_vm.$dm('bg-white ', 'dark:bg-slate-600'),on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"]))return null;return _vm.hideEmojiPicker.apply(null, arguments)}}},[_c('resizable-text-area',{ref:\"chatInput\",staticClass:\"form-input user-message-input is-focused\",class:_vm.inputColor,attrs:{\"id\":\"chat-input\",\"rows\":1,\"aria-label\":_vm.$t('CHAT_PLACEHOLDER'),\"placeholder\":_vm.$t('CHAT_PLACEHOLDER')},on:{\"typing-off\":_vm.onTypingOff,\"typing-on\":_vm.onTypingOn,\"focus\":_vm.onFocus,\"blur\":_vm.onBlur},model:{value:(_vm.userInput),callback:function ($$v) {_vm.userInput=$$v},expression:\"userInput\"}}),_vm._v(\" \"),_c('div',{staticClass:\"button-wrap\"},[(_vm.showAttachment)?_c('chat-attachment-button',{class:_vm.$dm('text-black-900', 'dark:text-slate-100'),attrs:{\"on-attach\":_vm.onSendAttachment}}):_vm._e(),_vm._v(\" \"),(_vm.hasEmojiPickerEnabled)?_c('button',{staticClass:\"flex items-center justify-center icon-button\",attrs:{\"aria-label\":\"Emoji picker\"},on:{\"click\":_vm.toggleEmojiPicker}},[_c('fluent-icon',{class:_vm.emojiIconColor,attrs:{\"icon\":\"emoji\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.showEmojiPicker)?_c('emoji-input',{directives:[{name:\"on-clickaway\",rawName:\"v-on-clickaway\",value:(_vm.hideEmojiPicker),expression:\"hideEmojiPicker\"}],attrs:{\"on-click\":_vm.emojiOnClick},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"]))return null;return _vm.hideEmojiPicker.apply(null, arguments)}}}):_vm._e(),_vm._v(\" \"),(_vm.showSendButton)?_c('chat-send-button',{attrs:{\"on-click\":_vm.handleButtonClick,\"color\":_vm.widgetColor}}):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <footer\n    v-if=\"!hideReplyBox\"\n    class=\"relative z-50 mb-1\"\n    :class=\"{\n      'rounded-lg': !isWidgetStyleFlat,\n      'pt-2.5 shadow-[0px_-20px_20px_1px_rgba(0,_0,_0,_0.05)] dark:shadow-[0px_-20px_20px_1px_rgba(0,_0,_0,_0.15)] rounded-t-none':\n        hasReplyTo,\n    }\"\n  >\n    <footer-reply-to\n      v-if=\"hasReplyTo\"\n      :in-reply-to=\"inReplyTo\"\n      @dismiss=\"inReplyTo = null\"\n    />\n    <chat-input-wrap\n      class=\"shadow-sm\"\n      :on-send-message=\"handleSendMessage\"\n      :on-send-attachment=\"handleSendAttachment\"\n    />\n  </footer>\n  <div v-else>\n    <custom-button\n      class=\"font-medium\"\n      block\n      :bg-color=\"widgetColor\"\n      :text-color=\"textColor\"\n      @click=\"startNewConversation\"\n    >\n      {{ $t('START_NEW_CONVERSATION') }}\n    </custom-button>\n    <custom-button\n      v-if=\"showEmailTranscriptButton\"\n      type=\"clear\"\n      class=\"font-normal\"\n      @click=\"sendTranscript\"\n    >\n      {{ $t('EMAIL_TRANSCRIPT.BUTTON_TEXT') }}\n    </custom-button>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex';\nimport { getContrastingTextColor } from '@chatwoot/utils';\nimport CustomButton from 'shared/components/Button.vue';\nimport FooterReplyTo from 'widget/components/FooterReplyTo.vue';\nimport ChatInputWrap from 'widget/components/ChatInputWrap.vue';\nimport { BUS_EVENTS } from 'shared/constants/busEvents';\nimport { sendEmailTranscript } from 'widget/api/conversation';\nimport routerMixin from 'widget/mixins/routerMixin';\nimport { IFrameHelper } from '../helpers/utils';\nimport { CHATWOOT_ON_START_CONVERSATION } from '../constants/sdkEvents';\n\nexport default {\n  components: {\n    ChatInputWrap,\n    CustomButton,\n    FooterReplyTo,\n  },\n  mixins: [routerMixin],\n  props: {\n    msg: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      inReplyTo: null,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      conversationAttributes: 'conversationAttributes/getConversationParams',\n      widgetColor: 'appConfig/getWidgetColor',\n      conversationSize: 'conversation/getConversationSize',\n      currentUser: 'contacts/getCurrentUser',\n      isWidgetStyleFlat: 'appConfig/isWidgetStyleFlat',\n    }),\n    textColor() {\n      return getContrastingTextColor(this.widgetColor);\n    },\n    hideReplyBox() {\n      const { allowMessagesAfterResolved } = window.chatwootWebChannel;\n      const { status } = this.conversationAttributes;\n      return !allowMessagesAfterResolved && status === 'resolved';\n    },\n    showEmailTranscriptButton() {\n      return this.currentUser && this.currentUser.email;\n    },\n    hasReplyTo() {\n      return (\n        this.inReplyTo && (this.inReplyTo.content || this.inReplyTo.attachments)\n      );\n    },\n  },\n  mounted() {\n    bus.$on(BUS_EVENTS.TOGGLE_REPLY_TO_MESSAGE, this.toggleReplyTo);\n  },\n  methods: {\n    ...mapActions('conversation', [\n      'sendMessage',\n      'sendAttachment',\n      'clearConversations',\n    ]),\n    ...mapActions('conversationAttributes', [\n      'getAttributes',\n      'clearConversationAttributes',\n    ]),\n    async handleSendMessage(content) {\n      await this.sendMessage({\n        content,\n        replyTo: this.inReplyTo ? this.inReplyTo.id : null,\n      });\n      // reset replyTo message after sending\n      this.inReplyTo = null;\n      // Update conversation attributes on new conversation\n      if (this.conversationSize === 0) {\n        this.getAttributes();\n      }\n    },\n    async handleSendAttachment(attachment) {\n      await this.sendAttachment({\n        attachment,\n        replyTo: this.inReplyTo ? this.inReplyTo.id : null,\n      });\n      this.inReplyTo = null;\n    },\n    startNewConversation() {\n      this.clearConversations();\n      this.clearConversationAttributes();\n      this.replaceRoute('prechat-form');\n      IFrameHelper.sendMessage({\n        event: 'onEvent',\n        eventIdentifier: CHATWOOT_ON_START_CONVERSATION,\n        data: { hasConversation: true },\n      });\n    },\n    toggleReplyTo(message) {\n      this.inReplyTo = message;\n    },\n    async sendTranscript() {\n      const { email } = this.currentUser;\n      if (email) {\n        try {\n          await sendEmailTranscript({\n            email,\n          });\n          window.bus.$emit(BUS_EVENTS.SHOW_ALERT, {\n            message: this.$t('EMAIL_TRANSCRIPT.SEND_EMAIL_SUCCESS'),\n            type: 'success',\n          });\n        } catch (error) {\n          window.bus.$emit(BUS_EVENTS.SHOW_ALERT, {\n            message: this.$t('EMAIL_TRANSCRIPT.SEND_EMAIL_ERROR'),\n          });\n        }\n      }\n    },\n  },\n};\n</script>\n<style scoped lang=\"scss\">\n@import '~widget/assets/scss/variables.scss';\n\n.branding {\n  align-items: center;\n  color: $color-body;\n  display: flex;\n  font-size: $font-size-default;\n  justify-content: center;\n  padding: $space-one;\n  text-align: center;\n  text-decoration: none;\n\n  img {\n    margin-right: $space-small;\n    max-width: $space-two;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatFooter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatFooter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatFooter.vue?vue&type=template&id=7145e03c&scoped=true&\"\nimport script from \"./ChatFooter.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatFooter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatFooter.vue?vue&type=style&index=0&id=7145e03c&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7145e03c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (!_vm.hideReplyBox)?_c('footer',{staticClass:\"relative z-50 mb-1\",class:{\n    'rounded-lg': !_vm.isWidgetStyleFlat,\n    'pt-2.5 shadow-[0px_-20px_20px_1px_rgba(0,_0,_0,_0.05)] dark:shadow-[0px_-20px_20px_1px_rgba(0,_0,_0,_0.15)] rounded-t-none':\n      _vm.hasReplyTo,\n  }},[(_vm.hasReplyTo)?_c('footer-reply-to',{attrs:{\"in-reply-to\":_vm.inReplyTo},on:{\"dismiss\":function($event){_vm.inReplyTo = null}}}):_vm._e(),_vm._v(\" \"),_c('chat-input-wrap',{staticClass:\"shadow-sm\",attrs:{\"on-send-message\":_vm.handleSendMessage,\"on-send-attachment\":_vm.handleSendAttachment}})],1):_c('div',[_c('custom-button',{staticClass:\"font-medium\",attrs:{\"block\":\"\",\"bg-color\":_vm.widgetColor,\"text-color\":_vm.textColor},on:{\"click\":_vm.startNewConversation}},[_vm._v(\"\\n    \"+_vm._s(_vm.$t('START_NEW_CONVERSATION'))+\"\\n  \")]),_vm._v(\" \"),(_vm.showEmailTranscriptButton)?_c('custom-button',{staticClass:\"font-normal\",attrs:{\"type\":\"clear\"},on:{\"click\":_vm.sendTranscript}},[_vm._v(\"\\n    \"+_vm._s(_vm.$t('EMAIL_TRANSCRIPT.BUTTON_TEXT'))+\"\\n  \")]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessageBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessageBubble.vue?vue&type=script&lang=js&\"","<template>\n  <div\n    v-dompurify-html=\"formatMessage(message, false)\"\n    class=\"chat-bubble user\"\n    :style=\"{ background: widgetColor, color: textColor }\"\n  />\n</template>\n\n<script>\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\nimport { getContrastingTextColor } from '@chatwoot/utils';\n\nexport default {\n  name: 'UserMessageBubble',\n  mixins: [messageFormatterMixin],\n  props: {\n    message: {\n      type: String,\n      default: '',\n    },\n    status: {\n      type: String,\n      default: '',\n    },\n    widgetColor: {\n      type: String,\n      default: '',\n    },\n  },\n  computed: {\n    textColor() {\n      return getContrastingTextColor(this.widgetColor);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables.scss';\n\n.chat-bubble.user::v-deep {\n  p code {\n    background-color: var(--w-600);\n    color: var(--white);\n  }\n\n  pre {\n    background-color: var(--w-800);\n    border-color: var(--w-700);\n    color: var(--white);\n\n    code {\n      background-color: transparent;\n      color: var(--white);\n    }\n  }\n\n  blockquote {\n    border-left: $space-micro solid var(--w-400);\n    background: var(--s-25);\n    border-color: var(--s-200);\n\n    p {\n      color: var(--s-800);\n    }\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./UserMessageBubble.vue?vue&type=template&id=3309eefb&scoped=true&\"\nimport script from \"./UserMessageBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./UserMessageBubble.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserMessageBubble.vue?vue&type=style&index=0&id=3309eefb&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3309eefb\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.formatMessage(_vm.message, false)),expression:\"formatMessage(message, false)\"}],staticClass:\"chat-bubble user\",style:({ background: _vm.widgetColor, color: _vm.textColor })})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageReplyButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageReplyButton.vue?vue&type=script&lang=js&\"","<template>\n  <button\n    class=\"p-1 mb-1 rounded-full dark:text-slate-500 dark:bg-slate-900 text-slate-600 bg-slate-100 hover:text-slate-800\"\n    @click=\"$emit('click')\"\n  >\n    <FluentIcon icon=\"arrow-reply\" size=\"11\" class=\"flex-shrink-0\" />\n  </button>\n</template>\n\n<script>\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\n\nexport default {\n  name: 'MessageReplyButton',\n  components: { FluentIcon },\n};\n</script>\n","import { render, staticRenderFns } from \"./MessageReplyButton.vue?vue&type=template&id=92e507fa&\"\nimport script from \"./MessageReplyButton.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageReplyButton.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('button',{staticClass:\"p-1 mb-1 rounded-full dark:text-slate-500 dark:bg-slate-900 text-slate-600 bg-slate-100 hover:text-slate-800\",on:{\"click\":function($event){return _vm.$emit('click')}}},[_c('FluentIcon',{staticClass:\"flex-shrink-0\",attrs:{\"icon\":\"arrow-reply\",\"size\":\"11\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageBubble.vue?vue&type=script&lang=js&\"","<template>\n  <a\n    :href=\"url\"\n    target=\"_blank\"\n    rel=\"noreferrer noopener nofollow\"\n    class=\"image\"\n  >\n    <div class=\"wrap\">\n      <img\n        :src=\"thumb\"\n        alt=\"Picture message\"\n        @click=\"onClick\"\n        @error=\"onImgError\"\n      />\n      <span class=\"time\">{{ readableTime }}</span>\n    </div>\n  </a>\n</template>\n\n<script>\nexport default {\n  props: {\n    url: { type: String, default: '' },\n    thumb: { type: String, default: '' },\n    readableTime: { type: String, default: '' },\n  },\n  methods: {\n    onImgError() {\n      this.$emit('error');\n    },\n    onClick() {\n      this.$emit('click');\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables.scss';\n\n.image {\n  display: block;\n\n  .wrap {\n    position: relative;\n    display: flex;\n    max-width: 100%;\n\n    &::before {\n      background-image: linear-gradient(\n        -180deg,\n        transparent 3%,\n        $color-heading 130%\n      );\n      bottom: 0;\n      content: '';\n      height: 20%;\n      left: 0;\n      opacity: 0.8;\n      position: absolute;\n      width: 100%;\n    }\n  }\n\n  img {\n    width: 100%;\n    max-width: 250px;\n  }\n\n  .time {\n    font-size: $font-size-small;\n    bottom: $space-smaller;\n    color: $color-white;\n    position: absolute;\n    right: $space-slab;\n    white-space: nowrap;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./ImageBubble.vue?vue&type=template&id=674f83bd&scoped=true&\"\nimport script from \"./ImageBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./ImageBubble.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImageBubble.vue?vue&type=style&index=0&id=674f83bd&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"674f83bd\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('a',{staticClass:\"image\",attrs:{\"href\":_vm.url,\"target\":\"_blank\",\"rel\":\"noreferrer noopener nofollow\"}},[_c('div',{staticClass:\"wrap\"},[_c('img',{attrs:{\"src\":_vm.thumb,\"alt\":\"Picture message\"},on:{\"click\":_vm.onClick,\"error\":_vm.onImgError}}),_vm._v(\" \"),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.readableTime))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileBubble.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"file flex flex-row items-center p-3 cursor-pointer\">\n    <div class=\"icon-wrap\" :style=\"{ color: textColor }\">\n      <fluent-icon icon=\"document\" size=\"28\" />\n    </div>\n    <div class=\"meta\">\n      <div class=\"title\" :class=\"titleColor\" :style=\"{ color: textColor }\">\n        {{ title }}\n      </div>\n      <div class=\"link-wrap mb-1\">\n        <a\n          class=\"download\"\n          rel=\"noreferrer noopener nofollow\"\n          target=\"_blank\"\n          :style=\"{ color: textColor }\"\n          :href=\"url\"\n        >\n          {{ $t('COMPONENTS.FILE_BUBBLE.DOWNLOAD') }}\n        </a>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\nimport darkModeMixin from 'widget/mixins/darkModeMixin.js';\nimport { getContrastingTextColor } from '@chatwoot/utils';\n\nexport default {\n  components: {\n    FluentIcon,\n  },\n  mixins: [darkModeMixin],\n  props: {\n    url: {\n      type: String,\n      default: '',\n    },\n    isInProgress: {\n      type: Boolean,\n      default: false,\n    },\n    widgetColor: {\n      type: String,\n      default: '',\n    },\n    isUserBubble: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    title() {\n      return this.isInProgress\n        ? this.$t('COMPONENTS.FILE_BUBBLE.UPLOADING')\n        : decodeURI(this.fileName);\n    },\n    fileName() {\n      return this.url.substring(this.url.lastIndexOf('/') + 1);\n    },\n    contrastingTextColor() {\n      return getContrastingTextColor(this.widgetColor);\n    },\n    textColor() {\n      return this.isUserBubble && this.widgetColor\n        ? this.contrastingTextColor\n        : '';\n    },\n    titleColor() {\n      return !this.isUserBubble\n        ? this.$dm('text-black-900', 'dark:text-slate-50')\n        : '';\n    },\n  },\n  methods: {\n    openLink() {\n      const win = window.open(this.url, '_blank');\n      win.focus();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables.scss';\n\n.file {\n  .icon-wrap {\n    font-size: $font-size-mega;\n    color: $color-woot;\n    line-height: 1;\n    margin-left: $space-smaller;\n    margin-right: $space-small;\n  }\n\n  .title {\n    font-weight: $font-weight-medium;\n    font-size: $font-size-default;\n    margin: 0;\n  }\n\n  .download {\n    color: $color-woot;\n    font-weight: $font-weight-medium;\n    padding: 0;\n    margin: 0;\n    font-size: $font-size-small;\n    text-decoration: none;\n  }\n\n  .link-wrap {\n    line-height: 1;\n  }\n  .meta {\n    padding-right: $space-smaller;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./FileBubble.vue?vue&type=template&id=3fc1205c&scoped=true&\"\nimport script from \"./FileBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./FileBubble.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FileBubble.vue?vue&type=style&index=0&id=3fc1205c&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3fc1205c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"file flex flex-row items-center p-3 cursor-pointer\"},[_c('div',{staticClass:\"icon-wrap\",style:({ color: _vm.textColor })},[_c('fluent-icon',{attrs:{\"icon\":\"document\",\"size\":\"28\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"meta\"},[_c('div',{staticClass:\"title\",class:_vm.titleColor,style:({ color: _vm.textColor })},[_vm._v(\"\\n      \"+_vm._s(_vm.title)+\"\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"link-wrap mb-1\"},[_c('a',{staticClass:\"download\",style:({ color: _vm.textColor }),attrs:{\"rel\":\"noreferrer noopener nofollow\",\"target\":\"_blank\",\"href\":_vm.url}},[_vm._v(\"\\n        \"+_vm._s(_vm.$t('COMPONENTS.FILE_BUBBLE.DOWNLOAD'))+\"\\n      \")])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\n  computed: {\n    messageContentAttributes() {\n      const { content_attributes: attribute = {} } = this.message;\n      return attribute;\n    },\n    hasAttachments() {\n      return !!(\n        this.message.attachments && this.message.attachments.length > 0\n      );\n    },\n  },\n};\n","<template>\n  <button\n    class=\"px-1.5 py-0.5 rounded-md text-slate-500 bg-slate-50 dark:bg-slate-900 opacity-60 hover:opacity-100 cursor-pointer flex items-center gap-1.5\"\n    @click=\"navigateTo(replyTo.id)\"\n  >\n    <fluent-icon icon=\"arrow-reply\" size=\"12\" class=\"flex-shrink-0\" />\n    <div class=\"truncate max-w-[8rem]\">\n      {{ replyTo.content || replyToAttachment }}\n    </div>\n  </button>\n</template>\n\n<script>\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\n\nexport default {\n  name: 'AgentMessage',\n  components: {\n    FluentIcon,\n  },\n  props: {\n    replyTo: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  computed: {\n    replyToAttachment() {\n      if (!this.replyTo?.attachments?.length) {\n        return '';\n      }\n\n      const [{ file_type: fileType } = {}] = this.replyTo.attachments;\n      return this.$t(`ATTACHMENTS.${fileType}.CONTENT`);\n    },\n  },\n  methods: {\n    navigateTo(id) {\n      const elementId = `cwmsg-${id}`;\n      this.$nextTick(() => {\n        const el = document.getElementById(elementId);\n        el.scrollIntoView();\n        el.classList.add('bg-slate-100', 'dark:bg-slate-900');\n        setTimeout(() => {\n          el.classList.remove('bg-slate-100', 'dark:bg-slate-900');\n        }, 500);\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReplyToChip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReplyToChip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReplyToChip.vue?vue&type=template&id=47c8542a&\"\nimport script from \"./ReplyToChip.vue?vue&type=script&lang=js&\"\nexport * from \"./ReplyToChip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('button',{staticClass:\"px-1.5 py-0.5 rounded-md text-slate-500 bg-slate-50 dark:bg-slate-900 opacity-60 hover:opacity-100 cursor-pointer flex items-center gap-1.5\",on:{\"click\":function($event){return _vm.navigateTo(_vm.replyTo.id)}}},[_c('fluent-icon',{staticClass:\"flex-shrink-0\",attrs:{\"icon\":\"arrow-reply\",\"size\":\"12\"}}),_vm._v(\" \"),_c('div',{staticClass:\"truncate max-w-[8rem]\"},[_vm._v(\"\\n    \"+_vm._s(_vm.replyTo.content || _vm.replyToAttachment)+\"\\n  \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DragWrapper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DragWrapper.vue?vue&type=script&lang=js&\"","<template>\n  <div\n    :style=\"{ transform: `translateX(${dragDistance}px)` }\"\n    class=\"will-change-transform\"\n    @touchstart=\"handleTouchStart\"\n    @touchmove=\"handleTouchMove\"\n    @touchend=\"resetPosition\"\n  >\n    <slot />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'DragWrapper',\n  props: {\n    direction: {\n      type: String,\n      required: true,\n      validator: value => ['left', 'right'].includes(value),\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      startX: null,\n      dragDistance: 0,\n      threshold: 50, // Threshold value in pixels\n    };\n  },\n  methods: {\n    handleTouchStart(event) {\n      if (this.disabled) return;\n      this.startX = event.touches[0].clientX;\n    },\n    handleTouchMove(event) {\n      if (this.disabled) return;\n      const touchX = event.touches[0].clientX;\n      let deltaX = touchX - this.startX;\n\n      if (this.direction === 'right') {\n        this.dragDistance = Math.min(this.threshold, deltaX);\n      } else if (this.direction === 'left') {\n        this.dragDistance = Math.max(-this.threshold, deltaX);\n      }\n    },\n    resetPosition() {\n      if (\n        (this.dragDistance >= this.threshold && this.direction === 'right') ||\n        (this.dragDistance <= -this.threshold && this.direction === 'left')\n      ) {\n        this.$emit('dragged', this.direction);\n      }\n      this.dragDistance = 0; // Reset the position after releasing the touch\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./DragWrapper.vue?vue&type=template&id=445acf90&\"\nimport script from \"./DragWrapper.vue?vue&type=script&lang=js&\"\nexport * from \"./DragWrapper.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"will-change-transform\",style:({ transform: `translateX(${_vm.dragDistance}px)` }),on:{\"touchstart\":_vm.handleTouchStart,\"touchmove\":_vm.handleTouchMove,\"touchend\":_vm.resetPosition}},[_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user-message-wrap group\">\n    <div class=\"flex gap-1 user-message\">\n      <div\n        class=\"message-wrap\"\n        :class=\"{ 'in-progress': isInProgress, 'is-failed': isFailed }\"\n      >\n        <div v-if=\"hasReplyTo\" class=\"flex justify-end mt-2 mb-1 text-xs\">\n          <reply-to-chip :reply-to=\"replyTo\" />\n        </div>\n        <div class=\"flex justify-end gap-1\">\n          <div class=\"flex flex-col justify-end\">\n            <message-reply-button\n              v-if=\"!isInProgress && !isFailed\"\n              class=\"transition-opacity delay-75 opacity-0 group-hover:opacity-100 sm:opacity-0\"\n              @click=\"toggleReply\"\n            />\n          </div>\n          <drag-wrapper direction=\"left\" @dragged=\"toggleReply\">\n            <user-message-bubble\n              v-if=\"showTextBubble\"\n              :message=\"message.content\"\n              :status=\"message.status\"\n              :widget-color=\"widgetColor\"\n            />\n            <div\n              v-if=\"hasAttachments\"\n              class=\"chat-bubble has-attachment user\"\n              :style=\"{ backgroundColor: widgetColor }\"\n            >\n              <div\n                v-for=\"attachment in message.attachments\"\n                :key=\"attachment.id\"\n              >\n                <image-bubble\n                  v-if=\"attachment.file_type === 'image' && !hasImageError\"\n                  :url=\"attachment.data_url\"\n                  :thumb=\"attachment.data_url\"\n                  :readable-time=\"readableTime\"\n                  @error=\"onImageLoadError\"\n                />\n                <file-bubble\n                  v-else\n                  :url=\"attachment.data_url\"\n                  :is-in-progress=\"isInProgress\"\n                  :widget-color=\"widgetColor\"\n                  is-user-bubble\n                />\n              </div>\n            </div>\n          </drag-wrapper>\n        </div>\n        <div\n          v-if=\"isFailed\"\n          class=\"flex justify-end px-4 py-2 text-red-700 align-middle\"\n        >\n          <button\n            v-if=\"!hasAttachments\"\n            :title=\"$t('COMPONENTS.MESSAGE_BUBBLE.RETRY')\"\n            class=\"inline-flex items-center justify-center ml-2\"\n            @click=\"retrySendMessage\"\n          >\n            <fluent-icon icon=\"arrow-clockwise\" size=\"14\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport UserMessageBubble from 'widget/components/UserMessageBubble.vue';\nimport MessageReplyButton from 'widget/components/MessageReplyButton.vue';\nimport ImageBubble from 'widget/components/ImageBubble.vue';\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\nimport FileBubble from 'widget/components/FileBubble.vue';\nimport timeMixin from 'dashboard/mixins/time';\nimport messageMixin from '../mixins/messageMixin';\nimport ReplyToChip from 'widget/components/ReplyToChip.vue';\nimport DragWrapper from 'widget/components/DragWrapper.vue';\nimport { BUS_EVENTS } from 'shared/constants/busEvents';\n\nimport { mapGetters } from 'vuex';\n\nexport default {\n  name: 'UserMessage',\n  components: {\n    UserMessageBubble,\n    MessageReplyButton,\n    ImageBubble,\n    FileBubble,\n    FluentIcon,\n    ReplyToChip,\n    DragWrapper,\n  },\n  mixins: [timeMixin, messageMixin],\n  props: {\n    message: {\n      type: Object,\n      default: () => {},\n    },\n    replyTo: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      hasImageError: false,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      widgetColor: 'appConfig/getWidgetColor',\n    }),\n\n    isInProgress() {\n      const { status = '' } = this.message;\n      return status === 'in_progress';\n    },\n    showTextBubble() {\n      const { message } = this;\n      return !!message.content;\n    },\n    readableTime() {\n      const { created_at: createdAt = '' } = this.message;\n      return this.messageStamp(createdAt);\n    },\n    isFailed() {\n      const { status = '' } = this.message;\n      return status === 'failed';\n    },\n    errorMessage() {\n      const { meta } = this.message;\n      return meta\n        ? meta.error\n        : this.$t('COMPONENTS.MESSAGE_BUBBLE.ERROR_MESSAGE');\n    },\n    hasReplyTo() {\n      return this.replyTo && (this.replyTo.content || this.replyTo.attachments);\n    },\n  },\n  watch: {\n    message() {\n      this.hasImageError = false;\n    },\n  },\n  mounted() {\n    this.hasImageError = false;\n  },\n  methods: {\n    async retrySendMessage() {\n      await this.$store.dispatch(\n        'conversation/sendMessageWithData',\n        this.message\n      );\n    },\n    onImageLoadError() {\n      this.hasImageError = true;\n    },\n    toggleReply() {\n      bus.$emit(BUS_EVENTS.TOGGLE_REPLY_TO_MESSAGE, this.message);\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserMessage.vue?vue&type=template&id=2c676312&\"\nimport script from \"./UserMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./UserMessage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"user-message-wrap group\"},[_c('div',{staticClass:\"flex gap-1 user-message\"},[_c('div',{staticClass:\"message-wrap\",class:{ 'in-progress': _vm.isInProgress, 'is-failed': _vm.isFailed }},[(_vm.hasReplyTo)?_c('div',{staticClass:\"flex justify-end mt-2 mb-1 text-xs\"},[_c('reply-to-chip',{attrs:{\"reply-to\":_vm.replyTo}})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"flex justify-end gap-1\"},[_c('div',{staticClass:\"flex flex-col justify-end\"},[(!_vm.isInProgress && !_vm.isFailed)?_c('message-reply-button',{staticClass:\"transition-opacity delay-75 opacity-0 group-hover:opacity-100 sm:opacity-0\",on:{\"click\":_vm.toggleReply}}):_vm._e()],1),_vm._v(\" \"),_c('drag-wrapper',{attrs:{\"direction\":\"left\"},on:{\"dragged\":_vm.toggleReply}},[(_vm.showTextBubble)?_c('user-message-bubble',{attrs:{\"message\":_vm.message.content,\"status\":_vm.message.status,\"widget-color\":_vm.widgetColor}}):_vm._e(),_vm._v(\" \"),(_vm.hasAttachments)?_c('div',{staticClass:\"chat-bubble has-attachment user\",style:({ backgroundColor: _vm.widgetColor })},_vm._l((_vm.message.attachments),function(attachment){return _c('div',{key:attachment.id},[(attachment.file_type === 'image' && !_vm.hasImageError)?_c('image-bubble',{attrs:{\"url\":attachment.data_url,\"thumb\":attachment.data_url,\"readable-time\":_vm.readableTime},on:{\"error\":_vm.onImageLoadError}}):_c('file-bubble',{attrs:{\"url\":attachment.data_url,\"is-in-progress\":_vm.isInProgress,\"widget-color\":_vm.widgetColor,\"is-user-bubble\":\"\"}})],1)}),0):_vm._e()],1)],1),_vm._v(\" \"),(_vm.isFailed)?_c('div',{staticClass:\"flex justify-end px-4 py-2 text-red-700 align-middle\"},[(!_vm.hasAttachments)?_c('button',{staticClass:\"inline-flex items-center justify-center ml-2\",attrs:{\"title\":_vm.$t('COMPONENTS.MESSAGE_BUBBLE.RETRY')},on:{\"click\":_vm.retrySendMessage}},[_c('fluent-icon',{attrs:{\"icon\":\"arrow-clockwise\",\"size\":\"14\"}})],1):_vm._e()]):_vm._e()])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a\n    v-if=\"isLink\"\n    :key=\"action.uri\"\n    class=\"action-button button\"\n    :href=\"action.uri\"\n    :style=\"{\n      background: widgetColor,\n      borderColor: widgetColor,\n      color: textColor,\n    }\"\n    target=\"_blank\"\n    rel=\"noopener nofollow noreferrer\"\n  >\n    {{ action.text }}\n  </a>\n  <button\n    v-else\n    :key=\"action.payload\"\n    class=\"action-button button\"\n    :style=\"{ borderColor: widgetColor, color: widgetColor }\"\n    @click=\"onClick\"\n  >\n    {{ action.text }}\n  </button>\n</template>\n<script>\nimport { mapGetters } from 'vuex';\nimport { getContrastingTextColor } from '@chatwoot/utils';\nexport default {\n  components: {},\n  props: {\n    action: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  computed: {\n    ...mapGetters({\n      widgetColor: 'appConfig/getWidgetColor',\n    }),\n    textColor() {\n      return getContrastingTextColor(this.widgetColor);\n    },\n    isLink() {\n      return this.action.type === 'link';\n    },\n  },\n  methods: {\n    onClick() {\n      // Do postback here\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '~widget/assets/scss/variables.scss';\n@import '~dashboard/assets/scss/mixins.scss';\n\n.action-button {\n  align-items: center;\n  border-radius: $space-micro;\n  display: flex;\n  font-weight: $font-weight-medium;\n  justify-content: center;\n  margin-top: $space-smaller;\n  max-height: 34px;\n  padding: 0;\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CardButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CardButton.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatCard.vue?vue&type=script&lang=js&\"","<template>\n  <div\n    class=\"card-message chat-bubble agent\"\n    :class=\"$dm('bg-white', 'dark:bg-slate-700')\"\n  >\n    <img class=\"media\" :src=\"mediaUrl\" />\n    <div class=\"card-body\">\n      <h4 class=\"title\" :class=\"$dm('text-black-900', 'dark:text-slate-50')\">\n        {{ title }}\n      </h4>\n      <p class=\"body\" :class=\"$dm('text-black-700', 'dark:text-slate-100')\">\n        {{ description }}\n      </p>\n      <card-button\n        v-for=\"action in actions\"\n        :key=\"action.id\"\n        :action=\"action\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport CardButton from 'shared/components/CardButton.vue';\nimport darkModeMixin from 'widget/mixins/darkModeMixin.js';\n\nexport default {\n  components: {\n    CardButton,\n  },\n  mixins: [darkModeMixin],\n  props: {\n    title: {\n      type: String,\n      default: '',\n    },\n    description: {\n      type: String,\n      default: '',\n    },\n    mediaUrl: {\n      type: String,\n      default: '',\n    },\n    actions: {\n      type: Array,\n      default: () => [],\n    },\n    showAvatar: Boolean,\n  },\n  computed: {},\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '~widget/assets/scss/variables.scss';\n@import '~dashboard/assets/scss/mixins.scss';\n\n.card-message {\n  max-width: 220px;\n  padding: $space-small;\n  border-radius: $space-small;\n  overflow: hidden;\n\n  .title {\n    font-size: $font-size-default;\n    font-weight: $font-weight-medium;\n    margin-top: $space-smaller;\n    margin-bottom: $space-smaller;\n    line-height: 1.5;\n  }\n\n  .body {\n    margin-bottom: $space-smaller;\n  }\n\n  .media {\n    @include border-light;\n    width: 100%;\n    object-fit: contain;\n    max-height: 150px;\n    border-radius: 5px;\n  }\n\n  .action-button + .action-button {\n    background: $color-white;\n    @include thin-border($color-woot);\n    color: $color-woot;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./CardButton.vue?vue&type=template&id=4071c27e&scoped=true&\"\nimport script from \"./CardButton.vue?vue&type=script&lang=js&\"\nexport * from \"./CardButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CardButton.vue?vue&type=style&index=0&id=4071c27e&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4071c27e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isLink)?_c('a',{key:_vm.action.uri,staticClass:\"action-button button\",style:({\n    background: _vm.widgetColor,\n    borderColor: _vm.widgetColor,\n    color: _vm.textColor,\n  }),attrs:{\"href\":_vm.action.uri,\"target\":\"_blank\",\"rel\":\"noopener nofollow noreferrer\"}},[_vm._v(\"\\n  \"+_vm._s(_vm.action.text)+\"\\n\")]):_c('button',{key:_vm.action.payload,staticClass:\"action-button button\",style:({ borderColor: _vm.widgetColor, color: _vm.widgetColor }),on:{\"click\":_vm.onClick}},[_vm._v(\"\\n  \"+_vm._s(_vm.action.text)+\"\\n\")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./ChatCard.vue?vue&type=template&id=6cf511a6&scoped=true&\"\nimport script from \"./ChatCard.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatCard.vue?vue&type=style&index=0&id=6cf511a6&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6cf511a6\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"card-message chat-bubble agent\",class:_vm.$dm('bg-white', 'dark:bg-slate-700')},[_c('img',{staticClass:\"media\",attrs:{\"src\":_vm.mediaUrl}}),_vm._v(\" \"),_c('div',{staticClass:\"card-body\"},[_c('h4',{staticClass:\"title\",class:_vm.$dm('text-black-900', 'dark:text-slate-50')},[_vm._v(\"\\n      \"+_vm._s(_vm.title)+\"\\n    \")]),_vm._v(\" \"),_c('p',{staticClass:\"body\",class:_vm.$dm('text-black-700', 'dark:text-slate-100')},[_vm._v(\"\\n      \"+_vm._s(_vm.description)+\"\\n    \")]),_vm._v(\" \"),_vm._l((_vm.actions),function(action){return _c('card-button',{key:action.id,attrs:{\"action\":action}})})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"form chat-bubble agent\"\n    :class=\"$dm('bg-white', 'dark:bg-slate-700')\"\n  >\n    <form @submit.prevent=\"onSubmit\">\n      <div\n        v-for=\"item in items\"\n        :key=\"item.key\"\n        class=\"form-block\"\n        :class=\"{\n          'has-submitted': hasSubmitted,\n        }\"\n      >\n        <label :class=\"$dm('text-black-900', 'dark:text-slate-50')\">{{\n          item.label\n        }}</label>\n        <input\n          v-if=\"item.type === 'email'\"\n          v-model=\"formValues[item.name]\"\n          :class=\"inputColor\"\n          :type=\"item.type\"\n          :pattern=\"item.regex\"\n          :title=\"item.title\"\n          :required=\"item.required && 'required'\"\n          :name=\"item.name\"\n          :placeholder=\"item.placeholder\"\n          :disabled=\"!!submittedValues.length\"\n        />\n        <input\n          v-else-if=\"item.type === 'text'\"\n          v-model=\"formValues[item.name]\"\n          :class=\"inputColor\"\n          :required=\"item.required && 'required'\"\n          :pattern=\"item.pattern\"\n          :title=\"item.title\"\n          :type=\"item.type\"\n          :name=\"item.name\"\n          :placeholder=\"item.placeholder\"\n          :disabled=\"!!submittedValues.length\"\n        />\n        <textarea\n          v-else-if=\"item.type === 'text_area'\"\n          v-model=\"formValues[item.name]\"\n          :class=\"inputColor\"\n          :required=\"item.required && 'required'\"\n          :title=\"item.title\"\n          :name=\"item.name\"\n          :placeholder=\"item.placeholder\"\n          :disabled=\"!!submittedValues.length\"\n        />\n        <select\n          v-else-if=\"item.type === 'select'\"\n          v-model=\"formValues[item.name]\"\n          :class=\"inputColor\"\n          :required=\"item.required && 'required'\"\n        >\n          <option\n            v-for=\"option in item.options\"\n            :key=\"option.key\"\n            :value=\"option.value\"\n          >\n            {{ option.label }}\n          </option>\n        </select>\n        <span class=\"error-message\">\n          {{ item.pattern_error || $t('CHAT_FORM.INVALID.FIELD') }}\n        </span>\n      </div>\n      <button\n        v-if=\"!submittedValues.length\"\n        class=\"button block\"\n        type=\"submit\"\n        :style=\"{\n          background: widgetColor,\n          borderColor: widgetColor,\n          color: textColor,\n        }\"\n        @click=\"onSubmitClick\"\n      >\n        {{ buttonLabel || $t('COMPONENTS.FORM_BUBBLE.SUBMIT') }}\n      </button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport { getContrastingTextColor } from '@chatwoot/utils';\nimport darkModeMixin from 'widget/mixins/darkModeMixin';\n\nexport default {\n  mixins: [darkModeMixin],\n  props: {\n    buttonLabel: {\n      type: String,\n      default: '',\n    },\n    items: {\n      type: Array,\n      default: () => [],\n    },\n    submittedValues: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data() {\n    return {\n      formValues: {},\n      hasSubmitted: false,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      widgetColor: 'appConfig/getWidgetColor',\n    }),\n    textColor() {\n      return getContrastingTextColor(this.widgetColor);\n    },\n    inputColor() {\n      return `${this.$dm('bg-white', 'dark:bg-slate-600')}\n        ${this.$dm('text-black-900', 'dark:text-slate-50')}`;\n    },\n    isFormValid() {\n      return this.items.reduce((acc, { name }) => {\n        return !!this.formValues[name] && acc;\n      }, true);\n    },\n  },\n  mounted() {\n    if (this.submittedValues.length) {\n      this.updateFormValues();\n    } else {\n      this.setFormDefaults();\n    }\n  },\n  methods: {\n    onSubmitClick() {\n      this.hasSubmitted = true;\n    },\n    onSubmit() {\n      if (!this.isFormValid) {\n        return;\n      }\n      this.$emit('submit', this.formValues);\n    },\n    buildFormObject(formObjectArray) {\n      return formObjectArray.reduce((acc, obj) => {\n        return {\n          ...acc,\n          [obj.name]: obj.value || obj.default,\n        };\n      }, {});\n    },\n    updateFormValues() {\n      this.formValues = this.buildFormObject(this.submittedValues);\n    },\n    setFormDefaults() {\n      this.formValues = this.buildFormObject(this.items);\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '~widget/assets/scss/variables.scss';\n\n.form {\n  padding: $space-normal;\n  width: 80%;\n\n  .form-block {\n    width: 90%;\n    padding-bottom: $space-small;\n  }\n\n  label {\n    display: block;\n    font-weight: $font-weight-medium;\n    padding: $space-smaller 0;\n    text-transform: capitalize;\n  }\n\n  input,\n  textarea {\n    border-radius: $space-smaller;\n    border: 1px solid $color-border;\n    display: block;\n    font-family: inherit;\n    font-size: $font-size-default;\n    line-height: 1.5;\n    padding: $space-one;\n    width: 100%;\n\n    &:disabled {\n      background: $color-background-light;\n    }\n  }\n\n  textarea {\n    resize: none;\n  }\n\n  select {\n    width: 110%;\n    padding: $space-smaller;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    border: 1px solid $color-border;\n    border-radius: $space-smaller;\n    font-family: inherit;\n    font-size: $space-normal;\n    font-weight: normal;\n    line-height: 1.5;\n    background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='32' height='24' viewBox='0 0 32 24'><polygon points='0,0 32,0 16,24' style='fill: rgb%28110, 111, 115%29'></polygon></svg>\");\n    background-origin: content-box;\n    background-position: right -1.6rem center;\n    background-repeat: no-repeat;\n    background-size: 9px 6px;\n    padding-right: 2.4rem;\n  }\n\n  .button {\n    font-size: $font-size-default;\n  }\n\n  .error-message {\n    display: none;\n    margin-top: $space-smaller;\n    color: $color-error;\n  }\n\n  .has-submitted {\n    input:invalid {\n      border: 1px solid $color-error;\n    }\n\n    input:invalid + .error-message {\n      display: block;\n    }\n\n    textarea:invalid {\n      border: 1px solid $color-error;\n    }\n\n    textarea:invalid + .error-message {\n      display: block;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatForm.vue?vue&type=template&id=28b9fbb6&scoped=true&\"\nimport script from \"./ChatForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatForm.vue?vue&type=style&index=0&id=28b9fbb6&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28b9fbb6\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"form chat-bubble agent\",class:_vm.$dm('bg-white', 'dark:bg-slate-700')},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit.apply(null, arguments)}}},[_vm._l((_vm.items),function(item){return _c('div',{key:item.key,staticClass:\"form-block\",class:{\n        'has-submitted': _vm.hasSubmitted,\n      }},[_c('label',{class:_vm.$dm('text-black-900', 'dark:text-slate-50')},[_vm._v(_vm._s(item.label))]),_vm._v(\" \"),((item.type)==='checkbox'&&(item.type === 'email'))?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formValues[item.name]),expression:\"formValues[item.name]\"}],class:_vm.inputColor,attrs:{\"pattern\":item.regex,\"title\":item.title,\"required\":item.required && 'required',\"name\":item.name,\"placeholder\":item.placeholder,\"disabled\":!!_vm.submittedValues.length,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.formValues[item.name])?_vm._i(_vm.formValues[item.name],null)>-1:(_vm.formValues[item.name])},on:{\"change\":function($event){var $$a=_vm.formValues[item.name],$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.formValues, item.name, $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.formValues, item.name, $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.formValues, item.name, $$c)}}}}):((item.type)==='radio'&&(item.type === 'email'))?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formValues[item.name]),expression:\"formValues[item.name]\"}],class:_vm.inputColor,attrs:{\"pattern\":item.regex,\"title\":item.title,\"required\":item.required && 'required',\"name\":item.name,\"placeholder\":item.placeholder,\"disabled\":!!_vm.submittedValues.length,\"type\":\"radio\"},domProps:{\"checked\":_vm._q(_vm.formValues[item.name],null)},on:{\"change\":function($event){return _vm.$set(_vm.formValues, item.name, null)}}}):(item.type === 'email')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formValues[item.name]),expression:\"formValues[item.name]\"}],class:_vm.inputColor,attrs:{\"pattern\":item.regex,\"title\":item.title,\"required\":item.required && 'required',\"name\":item.name,\"placeholder\":item.placeholder,\"disabled\":!!_vm.submittedValues.length,\"type\":item.type},domProps:{\"value\":(_vm.formValues[item.name])},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.formValues, item.name, $event.target.value)}}}):(item.type === 'text')?((item.type)==='checkbox')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formValues[item.name]),expression:\"formValues[item.name]\"}],class:_vm.inputColor,attrs:{\"required\":item.required && 'required',\"pattern\":item.pattern,\"title\":item.title,\"name\":item.name,\"placeholder\":item.placeholder,\"disabled\":!!_vm.submittedValues.length,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.formValues[item.name])?_vm._i(_vm.formValues[item.name],null)>-1:(_vm.formValues[item.name])},on:{\"change\":function($event){var $$a=_vm.formValues[item.name],$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.formValues, item.name, $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.formValues, item.name, $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.formValues, item.name, $$c)}}}}):((item.type)==='radio')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formValues[item.name]),expression:\"formValues[item.name]\"}],class:_vm.inputColor,attrs:{\"required\":item.required && 'required',\"pattern\":item.pattern,\"title\":item.title,\"name\":item.name,\"placeholder\":item.placeholder,\"disabled\":!!_vm.submittedValues.length,\"type\":\"radio\"},domProps:{\"checked\":_vm._q(_vm.formValues[item.name],null)},on:{\"change\":function($event){return _vm.$set(_vm.formValues, item.name, null)}}}):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formValues[item.name]),expression:\"formValues[item.name]\"}],class:_vm.inputColor,attrs:{\"required\":item.required && 'required',\"pattern\":item.pattern,\"title\":item.title,\"name\":item.name,\"placeholder\":item.placeholder,\"disabled\":!!_vm.submittedValues.length,\"type\":item.type},domProps:{\"value\":(_vm.formValues[item.name])},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.formValues, item.name, $event.target.value)}}}):(item.type === 'text_area')?_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formValues[item.name]),expression:\"formValues[item.name]\"}],class:_vm.inputColor,attrs:{\"required\":item.required && 'required',\"title\":item.title,\"name\":item.name,\"placeholder\":item.placeholder,\"disabled\":!!_vm.submittedValues.length},domProps:{\"value\":(_vm.formValues[item.name])},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.formValues, item.name, $event.target.value)}}}):(item.type === 'select')?_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formValues[item.name]),expression:\"formValues[item.name]\"}],class:_vm.inputColor,attrs:{\"required\":item.required && 'required'},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.formValues, item.name, $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((item.options),function(option){return _c('option',{key:option.key,domProps:{\"value\":option.value}},[_vm._v(\"\\n          \"+_vm._s(option.label)+\"\\n        \")])}),0):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"error-message\"},[_vm._v(\"\\n        \"+_vm._s(item.pattern_error || _vm.$t('CHAT_FORM.INVALID.FIELD'))+\"\\n      \")])])}),_vm._v(\" \"),(!_vm.submittedValues.length)?_c('button',{staticClass:\"button block\",style:({\n        background: _vm.widgetColor,\n        borderColor: _vm.widgetColor,\n        color: _vm.textColor,\n      }),attrs:{\"type\":\"submit\"},on:{\"click\":_vm.onSubmitClick}},[_vm._v(\"\\n      \"+_vm._s(_vm.buttonLabel || _vm.$t('COMPONENTS.FORM_BUBBLE.SUBMIT'))+\"\\n    \")]):_vm._e()],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <li\n    class=\"option\"\n    :class=\"{ 'is-selected': isSelected }\"\n    :style=\"{ borderColor: widgetColor }\"\n  >\n    <button class=\"option-button button\" @click=\"onClick\">\n      <span :style=\"{ color: widgetColor }\">{{ action.title }}</span>\n    </button>\n  </li>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\n\nexport default {\n  components: {},\n  props: {\n    action: {\n      type: Object,\n      default: () => {},\n    },\n    isSelected: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    ...mapGetters({\n      widgetColor: 'appConfig/getWidgetColor',\n    }),\n  },\n  methods: {\n    onClick() {\n      this.$emit('click', this.action);\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '~widget/assets/scss/variables.scss';\n\n.option {\n  border-radius: $space-jumbo;\n  border: 1px solid $color-woot;\n  float: left;\n  margin: $space-smaller;\n  max-width: 100%;\n\n  .option-button {\n    background: transparent;\n    border-radius: $space-large;\n    border: 0;\n    cursor: pointer;\n    height: auto;\n    line-height: 1.5;\n    min-height: $space-two * 2;\n    text-align: left;\n    white-space: normal;\n\n    span {\n      display: inline-block;\n      vertical-align: middle;\n    }\n\n    > .icon {\n      margin-right: $space-smaller;\n      font-size: $font-size-medium;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatOption.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatOption.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatOptions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatOptions.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"options-message chat-bubble agent bg-white dark:bg-slate-700\">\n    <div class=\"card-body\">\n      <h4 class=\"title text-black-900 dark:text-slate-50\">\n        <div\n          v-dompurify-html=\"formatMessage(title, false)\"\n          class=\"message-content text-black-900 dark:text-slate-50\"\n        />\n      </h4>\n      <ul\n        v-if=\"!hideFields\"\n        class=\"options\"\n        :class=\"{ 'has-selected': !!selected }\"\n      >\n        <chat-option\n          v-for=\"option in options\"\n          :key=\"option.id\"\n          :action=\"option\"\n          :is-selected=\"isSelected(option)\"\n          @click=\"onClick\"\n        />\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ChatOption from 'shared/components/ChatOption.vue';\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\n\nexport default {\n  components: {\n    ChatOption,\n  },\n  mixins: [messageFormatterMixin],\n  props: {\n    title: {\n      type: String,\n      default: '',\n    },\n    options: {\n      type: Array,\n      default: () => [],\n    },\n    selected: {\n      type: String,\n      default: '',\n    },\n    hideFields: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  methods: {\n    isSelected(option) {\n      return this.selected === option.id;\n    },\n    onClick(selectedOption) {\n      this.$emit('click', selectedOption);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import '~dashboard/assets/scss/variables.scss';\n.has-selected {\n  .option-button:not(.is-selected) {\n    color: $color-light-gray;\n    cursor: initial;\n  }\n}\n</style>\n<style scoped lang=\"scss\">\n@import '~widget/assets/scss/variables.scss';\n\n.options-message {\n  max-width: 17rem;\n  padding: $space-small $space-normal;\n  border-radius: $space-small;\n  overflow: hidden;\n\n  .title {\n    font-size: $font-size-default;\n    font-weight: $font-weight-normal;\n    margin-top: $space-smaller;\n    margin-bottom: $space-smaller;\n    line-height: 1.5;\n  }\n\n  .options {\n    width: 100%;\n\n    > li {\n      list-style: none;\n      padding: 0;\n    }\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./ChatOption.vue?vue&type=template&id=dddfa04c&scoped=true&\"\nimport script from \"./ChatOption.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatOption.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatOption.vue?vue&type=style&index=0&id=dddfa04c&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dddfa04c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('li',{staticClass:\"option\",class:{ 'is-selected': _vm.isSelected },style:({ borderColor: _vm.widgetColor })},[_c('button',{staticClass:\"option-button button\",on:{\"click\":_vm.onClick}},[_c('span',{style:({ color: _vm.widgetColor })},[_vm._v(_vm._s(_vm.action.title))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./ChatOptions.vue?vue&type=template&id=323cba20&scoped=true&\"\nimport script from \"./ChatOptions.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatOptions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatOptions.vue?vue&type=style&index=0&id=323cba20&prod&lang=scss&\"\nimport style1 from \"./ChatOptions.vue?vue&type=style&index=1&id=323cba20&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"323cba20\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"options-message chat-bubble agent bg-white dark:bg-slate-700\"},[_c('div',{staticClass:\"card-body\"},[_c('h4',{staticClass:\"title text-black-900 dark:text-slate-50\"},[_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.formatMessage(_vm.title, false)),expression:\"formatMessage(title, false)\"}],staticClass:\"message-content text-black-900 dark:text-slate-50\"})]),_vm._v(\" \"),(!_vm.hideFields)?_c('ul',{staticClass:\"options\",class:{ 'has-selected': !!_vm.selected }},_vm._l((_vm.options),function(option){return _c('chat-option',{key:option.id,attrs:{\"action\":option,\"is-selected\":_vm.isSelected(option)},on:{\"click\":_vm.onClick}})}),1):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js&\"","<template>\n  <div\n    v-if=\"!!items.length\"\n    class=\"chat-bubble agent\"\n    :class=\"$dm('bg-white', 'dark:bg-slate-700')\"\n  >\n    <div v-for=\"item in items\" :key=\"item.link\" class=\"article-item\">\n      <a :href=\"item.link\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">\n        <span class=\"title flex items-center text-black-900 font-medium\">\n          <fluent-icon\n            icon=\"link\"\n            class=\"mr-1\"\n            :class=\"$dm('text-black-900', 'dark:text-slate-50')\"\n          />\n          <span :class=\"$dm('text-slate-900', 'dark:text-slate-50')\">{{\n            item.title\n          }}</span>\n        </span>\n        <span\n          class=\"description\"\n          :class=\"$dm('text-slate-700', 'dark:text-slate-200')\"\n        >\n          {{ truncateMessage(item.description) }}\n        </span>\n      </a>\n    </div>\n  </div>\n</template>\n\n<script>\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\nimport darkModeMixin from 'widget/mixins/darkModeMixin.js';\n\nexport default {\n  components: {\n    FluentIcon,\n  },\n  mixins: [messageFormatterMixin, darkModeMixin],\n  props: {\n    items: {\n      type: Array,\n      default: () => [],\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables.scss';\n\n.article-item {\n  border-bottom: 1px solid $color-border;\n  font-size: $font-size-default;\n  padding: $space-small 0;\n\n  a {\n    color: $color-body;\n    text-decoration: none;\n  }\n\n  .description {\n    display: block;\n    margin-top: $space-smaller;\n  }\n\n  &:last-child {\n    border-bottom: 0;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./Article.vue?vue&type=template&id=feefd62e&scoped=true&\"\nimport script from \"./Article.vue?vue&type=script&lang=js&\"\nexport * from \"./Article.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Article.vue?vue&type=style&index=0&id=feefd62e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"feefd62e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (!!_vm.items.length)?_c('div',{staticClass:\"chat-bubble agent\",class:_vm.$dm('bg-white', 'dark:bg-slate-700')},_vm._l((_vm.items),function(item){return _c('div',{key:item.link,staticClass:\"article-item\"},[_c('a',{attrs:{\"href\":item.link,\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\"}},[_c('span',{staticClass:\"title flex items-center text-black-900 font-medium\"},[_c('fluent-icon',{staticClass:\"mr-1\",class:_vm.$dm('text-black-900', 'dark:text-slate-50'),attrs:{\"icon\":\"link\"}}),_vm._v(\" \"),_c('span',{class:_vm.$dm('text-slate-900', 'dark:text-slate-50')},[_vm._v(_vm._s(item.title))])],1),_vm._v(\" \"),_c('span',{staticClass:\"description\",class:_vm.$dm('text-slate-700', 'dark:text-slate-200')},[_vm._v(\"\\n        \"+_vm._s(_vm.truncateMessage(item.description))+\"\\n      \")])])])}),0):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <form\n      v-if=\"!hasSubmitted\"\n      class=\"email-input-group\"\n      @submit.prevent=\"onSubmit\"\n    >\n      <input\n        v-model.trim=\"email\"\n        class=\"form-input\"\n        :placeholder=\"$t('EMAIL_PLACEHOLDER')\"\n        :class=\"inputHasError\"\n        @input=\"$v.email.$touch\"\n        @keydown.enter=\"onSubmit\"\n      />\n      <button\n        class=\"button small\"\n        :disabled=\"$v.email.$invalid\"\n        :style=\"{\n          background: widgetColor,\n          borderColor: widgetColor,\n          color: textColor,\n        }\"\n      >\n        <fluent-icon v-if=\"!isUpdating\" icon=\"chevron-right\" />\n        <spinner v-else class=\"mx-2\" />\n      </button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport { required, email } from 'vuelidate/lib/validators';\nimport { getContrastingTextColor } from '@chatwoot/utils';\n\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\nimport Spinner from 'shared/components/Spinner.vue';\nimport darkModeMixin from 'widget/mixins/darkModeMixin.js';\n\nexport default {\n  components: {\n    FluentIcon,\n    Spinner,\n  },\n  mixins: [darkModeMixin],\n  props: {\n    messageId: {\n      type: Number,\n      required: true,\n    },\n    messageContentAttributes: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      email: '',\n      isUpdating: false,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      widgetColor: 'appConfig/getWidgetColor',\n    }),\n    textColor() {\n      return getContrastingTextColor(this.widgetColor);\n    },\n    hasSubmitted() {\n      return (\n        this.messageContentAttributes &&\n        this.messageContentAttributes.submitted_email\n      );\n    },\n    inputColor() {\n      return `${this.$dm('bg-white', 'dark:bg-slate-600')}\n        ${this.$dm('text-black-900', 'dark:text-slate-50')}\n        ${this.$dm('border-black-200', 'dark:border-black-500')}`;\n    },\n    inputHasError() {\n      return this.$v.email.$error\n        ? `${this.inputColor} error`\n        : `${this.inputColor}`;\n    },\n  },\n  validations: {\n    email: {\n      required,\n      email,\n    },\n  },\n  methods: {\n    async onSubmit() {\n      if (this.$v.$invalid) {\n        return;\n      }\n      this.isUpdating = true;\n      try {\n        await this.$store.dispatch('message/update', {\n          email: this.email,\n          messageId: this.messageId,\n        });\n      } catch (error) {\n        // Ignore error\n      } finally {\n        this.isUpdating = false;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables.scss';\n\n.email-input-group {\n  display: flex;\n  margin: $space-small 0;\n  min-width: 200px;\n\n  input {\n    border-bottom-right-radius: 0;\n    border-top-right-radius: 0;\n    padding: $space-one;\n    width: 100%;\n\n    &::placeholder {\n      color: $color-light-gray;\n    }\n\n    &.error {\n      border-color: $color-error;\n    }\n  }\n\n  .button {\n    border-bottom-left-radius: 0;\n    border-top-left-radius: 0;\n    font-size: $font-size-large;\n    height: auto;\n    margin-left: -1px;\n\n    .spinner {\n      display: block;\n      padding: 0;\n      height: auto;\n      width: auto;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EmailInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EmailInput.vue?vue&type=template&id=11b045aa&scoped=true&\"\nimport script from \"./EmailInput.vue?vue&type=script&lang=js&\"\nexport * from \"./EmailInput.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EmailInput.vue?vue&type=style&index=0&id=11b045aa&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11b045aa\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(!_vm.hasSubmitted)?_c('form',{staticClass:\"email-input-group\",on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit.apply(null, arguments)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.email),expression:\"email\",modifiers:{\"trim\":true}}],staticClass:\"form-input\",class:_vm.inputHasError,attrs:{\"placeholder\":_vm.$t('EMAIL_PLACEHOLDER')},domProps:{\"value\":(_vm.email)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.email=$event.target.value.trim()},_vm.$v.email.$touch],\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.onSubmit.apply(null, arguments)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_vm._v(\" \"),_c('button',{staticClass:\"button small\",style:({\n        background: _vm.widgetColor,\n        borderColor: _vm.widgetColor,\n        color: _vm.textColor,\n      }),attrs:{\"disabled\":_vm.$v.email.$invalid}},[(!_vm.isUpdating)?_c('fluent-icon',{attrs:{\"icon\":\"chevron-right\"}}):_c('spinner',{staticClass:\"mx-2\"})],1)]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"customer-satisfaction\"\n    :class=\"$dm('bg-white', 'dark:bg-slate-700')\"\n    :style=\"{ borderColor: widgetColor }\"\n  >\n    <h6 class=\"title\" :class=\"$dm('text-slate-900', 'dark:text-slate-50')\">\n      {{ title }}\n    </h6>\n    <div class=\"ratings\">\n      <button\n        v-for=\"rating in ratings\"\n        :key=\"rating.key\"\n        :class=\"buttonClass(rating)\"\n        @click=\"selectRating(rating)\"\n      >\n        {{ rating.emoji }}\n      </button>\n    </div>\n    <form\n      v-if=\"!isFeedbackSubmitted\"\n      class=\"feedback-form\"\n      @submit.prevent=\"onSubmit()\"\n    >\n      <input\n        v-model=\"feedback\"\n        class=\"form-input\"\n        :class=\"inputColor\"\n        :placeholder=\"$t('CSAT.PLACEHOLDER')\"\n        @keydown.enter=\"onSubmit\"\n      />\n      <button\n        class=\"button small\"\n        :disabled=\"isButtonDisabled\"\n        :style=\"{\n          background: widgetColor,\n          borderColor: widgetColor,\n          color: textColor,\n        }\"\n      >\n        <spinner v-if=\"isUpdating && feedback\" />\n        <fluent-icon v-else icon=\"chevron-right\" />\n      </button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport Spinner from 'shared/components/Spinner.vue';\nimport { CSAT_RATINGS } from 'shared/constants/messages';\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\nimport darkModeMixin from 'widget/mixins/darkModeMixin';\nimport { getContrastingTextColor } from '@chatwoot/utils';\n\nexport default {\n  components: {\n    Spinner,\n    FluentIcon,\n  },\n  mixins: [darkModeMixin],\n  props: {\n    messageContentAttributes: {\n      type: Object,\n      default: () => {},\n    },\n    messageId: {\n      type: Number,\n      required: true,\n    },\n  },\n  data() {\n    return {\n      email: '',\n      ratings: CSAT_RATINGS,\n      selectedRating: null,\n      isUpdating: false,\n      feedback: '',\n    };\n  },\n  computed: {\n    ...mapGetters({ widgetColor: 'appConfig/getWidgetColor' }),\n    isRatingSubmitted() {\n      return this.messageContentAttributes?.csat_survey_response?.rating;\n    },\n    isFeedbackSubmitted() {\n      return this.messageContentAttributes?.csat_survey_response\n        ?.feedback_message;\n    },\n    isButtonDisabled() {\n      return !(this.selectedRating && this.feedback);\n    },\n    inputColor() {\n      return `${this.$dm('bg-white', 'dark:bg-slate-600')}\n        ${this.$dm('text-black-900', 'dark:text-slate-50')}`;\n    },\n    textColor() {\n      return getContrastingTextColor(this.widgetColor);\n    },\n    title() {\n      return this.isRatingSubmitted\n        ? this.$t('CSAT.SUBMITTED_TITLE')\n        : this.$t('CSAT.TITLE');\n    },\n  },\n\n  mounted() {\n    if (this.isRatingSubmitted) {\n      const {\n        csat_survey_response: { rating, feedback_message },\n      } = this.messageContentAttributes;\n      this.selectedRating = rating;\n      this.feedback = feedback_message;\n    }\n  },\n\n  methods: {\n    buttonClass(rating) {\n      return [\n        { selected: rating.value === this.selectedRating },\n        { disabled: this.isRatingSubmitted },\n        { hover: this.isRatingSubmitted },\n        'emoji-button',\n      ];\n    },\n    async onSubmit() {\n      this.isUpdating = true;\n      try {\n        await this.$store.dispatch('message/update', {\n          submittedValues: {\n            csat_survey_response: {\n              rating: this.selectedRating,\n              feedback_message: this.feedback,\n            },\n          },\n          messageId: this.messageId,\n        });\n      } catch (error) {\n        // Ignore error\n      } finally {\n        this.isUpdating = false;\n      }\n    },\n    selectRating(rating) {\n      this.selectedRating = rating.value;\n      this.onSubmit();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables.scss';\n@import '~widget/assets/scss/mixins.scss';\n\n.customer-satisfaction {\n  @include light-shadow;\n\n  border-bottom-left-radius: $space-smaller;\n  border-radius: $space-small;\n  border-top: $space-micro solid $color-woot;\n  color: $color-body;\n  display: inline-block;\n  line-height: 1.5;\n  margin-top: $space-smaller;\n  width: 80%;\n\n  .title {\n    font-size: $font-size-default;\n    font-weight: $font-weight-medium;\n    padding: $space-two $space-one 0;\n    text-align: center;\n  }\n\n  .ratings {\n    display: flex;\n    justify-content: space-around;\n    padding: $space-two $space-normal;\n\n    .emoji-button {\n      box-shadow: none;\n      filter: grayscale(100%);\n      font-size: $font-size-big;\n      outline: none;\n\n      &.selected,\n      &:hover,\n      &:focus,\n      &:active {\n        filter: grayscale(0%);\n        transform: scale(1.32);\n      }\n\n      &.disabled {\n        cursor: default;\n        opacity: 0.5;\n        pointer-events: none;\n      }\n    }\n  }\n  .feedback-form {\n    display: flex;\n\n    input {\n      border-bottom-right-radius: 0;\n      border-top-right-radius: 0;\n      border-bottom-left-radius: $space-small;\n      border: 0;\n      border-top: 1px solid $color-border;\n      padding: $space-one;\n      width: 100%;\n\n      &::placeholder {\n        color: $color-light-gray;\n      }\n    }\n\n    .button {\n      appearance: none;\n      border-bottom-left-radius: 0;\n      border-top-left-radius: 0;\n      border-bottom-right-radius: $space-small;\n      font-size: $font-size-large;\n      height: auto;\n      margin-left: -1px;\n\n      .spinner {\n        display: block;\n        padding: 0;\n        height: auto;\n        width: auto;\n      }\n    }\n  }\n}\n\n@media (prefers-color-scheme: dark) {\n  .customer-satisfaction .feedback-form input {\n    border-top: 1px solid var(--b-500);\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerSatisfaction.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerSatisfaction.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CustomerSatisfaction.vue?vue&type=template&id=7b924d1d&scoped=true&\"\nimport script from \"./CustomerSatisfaction.vue?vue&type=script&lang=js&\"\nexport * from \"./CustomerSatisfaction.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CustomerSatisfaction.vue?vue&type=style&index=0&id=7b924d1d&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b924d1d\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"customer-satisfaction\",class:_vm.$dm('bg-white', 'dark:bg-slate-700'),style:({ borderColor: _vm.widgetColor })},[_c('h6',{staticClass:\"title\",class:_vm.$dm('text-slate-900', 'dark:text-slate-50')},[_vm._v(\"\\n    \"+_vm._s(_vm.title)+\"\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"ratings\"},_vm._l((_vm.ratings),function(rating){return _c('button',{key:rating.key,class:_vm.buttonClass(rating),on:{\"click\":function($event){return _vm.selectRating(rating)}}},[_vm._v(\"\\n      \"+_vm._s(rating.emoji)+\"\\n    \")])}),0),_vm._v(\" \"),(!_vm.isFeedbackSubmitted)?_c('form',{staticClass:\"feedback-form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit()}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.feedback),expression:\"feedback\"}],staticClass:\"form-input\",class:_vm.inputColor,attrs:{\"placeholder\":_vm.$t('CSAT.PLACEHOLDER')},domProps:{\"value\":(_vm.feedback)},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.onSubmit.apply(null, arguments)},\"input\":function($event){if($event.target.composing)return;_vm.feedback=$event.target.value}}}),_vm._v(\" \"),_c('button',{staticClass:\"button small\",style:({\n        background: _vm.widgetColor,\n        borderColor: _vm.widgetColor,\n        color: _vm.textColor,\n      }),attrs:{\"disabled\":_vm.isButtonDisabled}},[(_vm.isUpdating && _vm.feedback)?_c('spinner'):_c('fluent-icon',{attrs:{\"icon\":\"chevron-right\"}})],1)]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { API } from 'widget/helpers/axios';\nimport { buildSearchParamsWithLocale } from '../helpers/urlParamsHelper';\n\nexport default {\n  addParticipantToDyteMeeting: messageId => {\n    const search = buildSearchParamsWithLocale(window.location.search);\n    const urlData = {\n      url: `/api/v1/widget/integrations/dyte/add_participant_to_meeting${search}`,\n    };\n    return API.post(urlData.url, { message_id: messageId });\n  },\n};\n","<template>\n  <div>\n    <button\n      class=\"button join-call-button\"\n      color-scheme=\"secondary\"\n      :is-loading=\"isLoading\"\n      :style=\"{\n        background: widgetColor,\n        borderColor: widgetColor,\n        color: textColor,\n      }\"\n      @click=\"joinTheCall\"\n    >\n      <fluent-icon icon=\"video-add\" class=\"mr-2\" />\n      {{ $t('INTEGRATIONS.DYTE.CLICK_HERE_TO_JOIN') }}\n    </button>\n    <div v-if=\"dyteAuthToken\" class=\"video-call--container\">\n      <iframe\n        :src=\"meetingLink\"\n        allow=\"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;\"\n      />\n      <button\n        class=\"button small join-call-button leave-room-button\"\n        @click=\"leaveTheRoom\"\n      >\n        {{ $t('INTEGRATIONS.DYTE.LEAVE_THE_ROOM') }}\n      </button>\n    </div>\n  </div>\n</template>\n<script>\nimport IntegrationAPIClient from 'widget/api/integration';\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\nimport { buildDyteURL } from 'shared/helpers/IntegrationHelper';\nimport { getContrastingTextColor } from '@chatwoot/utils';\nimport { mapGetters } from 'vuex';\n\nexport default {\n  components: {\n    FluentIcon,\n  },\n  props: {\n    messageId: {\n      type: Number,\n      required: true,\n    },\n    meetingData: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  data() {\n    return { isLoading: false, dyteAuthToken: '', isSDKMounted: false };\n  },\n  computed: {\n    ...mapGetters({ widgetColor: 'appConfig/getWidgetColor' }),\n    textColor() {\n      return getContrastingTextColor(this.widgetColor);\n    },\n    meetingLink() {\n      return buildDyteURL(this.meetingData.room_name, this.dyteAuthToken);\n    },\n  },\n  methods: {\n    async joinTheCall() {\n      this.isLoading = true;\n      try {\n        const { data: { authResponse: { authToken = '' } = {} } = {} } =\n          await IntegrationAPIClient.addParticipantToDyteMeeting(\n            this.messageId\n          );\n        this.dyteAuthToken = authToken;\n      } catch (error) {\n        // Ignore Error for now\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    leaveTheRoom() {\n      this.dyteAuthToken = '';\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables.scss';\n\n.video-call--container {\n  position: fixed;\n  top: 72px;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  z-index: 100;\n\n  iframe {\n    width: 100%;\n    height: calc(100% - 72px);\n\n    border: 0;\n  }\n}\n\n.join-call-button {\n  margin: $space-small 0;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n}\n\n.leave-room-button {\n  position: absolute;\n  top: 0;\n  right: $space-small;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IntegrationCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IntegrationCard.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentMessageBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentMessageBubble.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"chat-bubble-wrap\">\n    <div\n      v-if=\"\n        !isCards && !isOptions && !isForm && !isArticle && !isCards && !isCSAT\n      \"\n      class=\"chat-bubble agent\"\n      :class=\"$dm('bg-white', 'dark:bg-slate-700 has-dark-mode')\"\n    >\n      <div\n        v-dompurify-html=\"formatMessage(message, false)\"\n        class=\"message-content text-slate-900 dark:text-slate-50\"\n      />\n      <email-input\n        v-if=\"isTemplateEmail\"\n        :message-id=\"messageId\"\n        :message-content-attributes=\"messageContentAttributes\"\n      />\n\n      <integration-card\n        v-if=\"isIntegrations\"\n        :message-id=\"messageId\"\n        :meeting-data=\"messageContentAttributes.data\"\n      />\n    </div>\n    <div v-if=\"isOptions\">\n      <chat-options\n        :title=\"message\"\n        :options=\"messageContentAttributes.items\"\n        :hide-fields=\"!!messageContentAttributes.submitted_values\"\n        @click=\"onOptionSelect\"\n      />\n    </div>\n    <chat-form\n      v-if=\"isForm && !messageContentAttributes.submitted_values\"\n      :items=\"messageContentAttributes.items\"\n      :button-label=\"messageContentAttributes.button_label\"\n      :submitted-values=\"messageContentAttributes.submitted_values\"\n      @submit=\"onFormSubmit\"\n    />\n    <div v-if=\"isCards\">\n      <chat-card\n        v-for=\"item in messageContentAttributes.items\"\n        :key=\"item.title\"\n        :media-url=\"item.media_url\"\n        :title=\"item.title\"\n        :description=\"item.description\"\n        :actions=\"item.actions\"\n      />\n    </div>\n    <div v-if=\"isArticle\">\n      <chat-article :items=\"messageContentAttributes.items\" />\n    </div>\n    <customer-satisfaction\n      v-if=\"isCSAT\"\n      :message-content-attributes=\"messageContentAttributes.submitted_values\"\n      :message-id=\"messageId\"\n    />\n  </div>\n</template>\n\n<script>\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\nimport ChatCard from 'shared/components/ChatCard.vue';\nimport ChatForm from 'shared/components/ChatForm.vue';\nimport ChatOptions from 'shared/components/ChatOptions.vue';\nimport ChatArticle from './template/Article.vue';\nimport EmailInput from './template/EmailInput.vue';\nimport CustomerSatisfaction from 'shared/components/CustomerSatisfaction.vue';\nimport darkModeMixin from 'widget/mixins/darkModeMixin.js';\nimport IntegrationCard from './template/IntegrationCard.vue';\n\nexport default {\n  name: 'AgentMessageBubble',\n  components: {\n    ChatArticle,\n    ChatCard,\n    ChatForm,\n    ChatOptions,\n    EmailInput,\n    CustomerSatisfaction,\n    IntegrationCard,\n  },\n  mixins: [messageFormatterMixin, darkModeMixin],\n  props: {\n    message: { type: String, default: null },\n    contentType: { type: String, default: null },\n    messageType: { type: Number, default: null },\n    messageId: { type: Number, default: null },\n    messageContentAttributes: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  computed: {\n    isTemplate() {\n      return this.messageType === 3;\n    },\n    isTemplateEmail() {\n      return this.contentType === 'input_email';\n    },\n    isCards() {\n      return this.contentType === 'cards';\n    },\n    isOptions() {\n      return this.contentType === 'input_select';\n    },\n    isForm() {\n      return this.contentType === 'form';\n    },\n    isArticle() {\n      return this.contentType === 'article';\n    },\n    isCSAT() {\n      return this.contentType === 'input_csat';\n    },\n    isIntegrations() {\n      return this.contentType === 'integrations';\n    },\n  },\n  methods: {\n    onResponse(messageResponse) {\n      this.$store.dispatch('message/update', messageResponse);\n    },\n    onOptionSelect(selectedOption) {\n      this.onResponse({\n        submittedValues: [selectedOption],\n        messageId: this.messageId,\n      });\n    },\n    onFormSubmit(formValues) {\n      const formValuesAsArray = Object.keys(formValues).map(key => ({\n        name: key,\n        value: formValues[key],\n      }));\n      this.onResponse({\n        submittedValues: formValuesAsArray,\n        messageId: this.messageId,\n      });\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./IntegrationCard.vue?vue&type=template&id=eb06e41e&scoped=true&\"\nimport script from \"./IntegrationCard.vue?vue&type=script&lang=js&\"\nexport * from \"./IntegrationCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./IntegrationCard.vue?vue&type=style&index=0&id=eb06e41e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eb06e41e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('button',{staticClass:\"button join-call-button\",style:({\n      background: _vm.widgetColor,\n      borderColor: _vm.widgetColor,\n      color: _vm.textColor,\n    }),attrs:{\"color-scheme\":\"secondary\",\"is-loading\":_vm.isLoading},on:{\"click\":_vm.joinTheCall}},[_c('fluent-icon',{staticClass:\"mr-2\",attrs:{\"icon\":\"video-add\"}}),_vm._v(\"\\n    \"+_vm._s(_vm.$t('INTEGRATIONS.DYTE.CLICK_HERE_TO_JOIN'))+\"\\n  \")],1),_vm._v(\" \"),(_vm.dyteAuthToken)?_c('div',{staticClass:\"video-call--container\"},[_c('iframe',{attrs:{\"src\":_vm.meetingLink,\"allow\":\"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;\"}}),_vm._v(\" \"),_c('button',{staticClass:\"button small join-call-button leave-room-button\",on:{\"click\":_vm.leaveTheRoom}},[_vm._v(\"\\n      \"+_vm._s(_vm.$t('INTEGRATIONS.DYTE.LEAVE_THE_ROOM'))+\"\\n    \")])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./AgentMessageBubble.vue?vue&type=template&id=05f5ec3c&\"\nimport script from \"./AgentMessageBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./AgentMessageBubble.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-bubble-wrap\"},[(\n      !_vm.isCards && !_vm.isOptions && !_vm.isForm && !_vm.isArticle && !_vm.isCards && !_vm.isCSAT\n    )?_c('div',{staticClass:\"chat-bubble agent\",class:_vm.$dm('bg-white', 'dark:bg-slate-700 has-dark-mode')},[_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.formatMessage(_vm.message, false)),expression:\"formatMessage(message, false)\"}],staticClass:\"message-content text-slate-900 dark:text-slate-50\"}),_vm._v(\" \"),(_vm.isTemplateEmail)?_c('email-input',{attrs:{\"message-id\":_vm.messageId,\"message-content-attributes\":_vm.messageContentAttributes}}):_vm._e(),_vm._v(\" \"),(_vm.isIntegrations)?_c('integration-card',{attrs:{\"message-id\":_vm.messageId,\"meeting-data\":_vm.messageContentAttributes.data}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.isOptions)?_c('div',[_c('chat-options',{attrs:{\"title\":_vm.message,\"options\":_vm.messageContentAttributes.items,\"hide-fields\":!!_vm.messageContentAttributes.submitted_values},on:{\"click\":_vm.onOptionSelect}})],1):_vm._e(),_vm._v(\" \"),(_vm.isForm && !_vm.messageContentAttributes.submitted_values)?_c('chat-form',{attrs:{\"items\":_vm.messageContentAttributes.items,\"button-label\":_vm.messageContentAttributes.button_label,\"submitted-values\":_vm.messageContentAttributes.submitted_values},on:{\"submit\":_vm.onFormSubmit}}):_vm._e(),_vm._v(\" \"),(_vm.isCards)?_c('div',_vm._l((_vm.messageContentAttributes.items),function(item){return _c('chat-card',{key:item.title,attrs:{\"media-url\":item.media_url,\"title\":item.title,\"description\":item.description,\"actions\":item.actions}})}),1):_vm._e(),_vm._v(\" \"),(_vm.isArticle)?_c('div',[_c('chat-article',{attrs:{\"items\":_vm.messageContentAttributes.items}})],1):_vm._e(),_vm._v(\" \"),(_vm.isCSAT)?_c('customer-satisfaction',{attrs:{\"message-content-attributes\":_vm.messageContentAttributes.submitted_values,\"message-id\":_vm.messageId}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"agent-message-wrap group\"\n    :class=\"{\n      'has-response': hasRecordedResponse || isASubmittedForm,\n    }\"\n  >\n    <div v-if=\"!isASubmittedForm\" class=\"agent-message\">\n      <div class=\"avatar-wrap\">\n        <thumbnail\n          v-if=\"message.showAvatar || hasRecordedResponse\"\n          :src=\"avatarUrl\"\n          size=\"24px\"\n          :username=\"agentName\"\n        />\n      </div>\n      <div class=\"message-wrap\">\n        <div v-if=\"hasReplyTo\" class=\"flex mt-2 mb-1 text-xs\">\n          <reply-to-chip :reply-to=\"replyTo\" />\n        </div>\n        <div class=\"flex gap-1\">\n          <drag-wrapper\n            class=\"space-y-2\"\n            direction=\"right\"\n            @dragged=\"toggleReply\"\n          >\n            <AgentMessageBubble\n              v-if=\"shouldDisplayAgentMessage\"\n              :content-type=\"contentType\"\n              :message-content-attributes=\"messageContentAttributes\"\n              :message-id=\"message.id\"\n              :message-type=\"messageType\"\n              :message=\"message.content\"\n            />\n            <div\n              v-if=\"hasAttachments\"\n              class=\"chat-bubble has-attachment agent\"\n              :class=\"(wrapClass, $dm('bg-white', 'dark:bg-slate-700'))\"\n            >\n              <div\n                v-for=\"attachment in message.attachments\"\n                :key=\"attachment.id\"\n              >\n                <image-bubble\n                  v-if=\"attachment.file_type === 'image' && !hasImageError\"\n                  :url=\"attachment.data_url\"\n                  :thumb=\"attachment.data_url\"\n                  :readable-time=\"readableTime\"\n                  @error=\"onImageLoadError\"\n                />\n                <audio v-else-if=\"attachment.file_type === 'audio'\" controls>\n                  <source :src=\"attachment.data_url\" />\n                </audio>\n                <file-bubble v-else :url=\"attachment.data_url\" />\n              </div>\n            </div>\n          </drag-wrapper>\n          <div class=\"flex flex-col justify-end\">\n            <message-reply-button\n              class=\"transition-opacity delay-75 opacity-0 group-hover:opacity-100 sm:opacity-0\"\n              @click=\"toggleReply\"\n            />\n          </div>\n        </div>\n        <p\n          v-if=\"message.showAvatar || hasRecordedResponse\"\n          v-dompurify-html=\"agentName\"\n          class=\"agent-name\"\n          :class=\"$dm('text-slate-700', 'dark:text-slate-200')\"\n        />\n      </div>\n    </div>\n\n    <UserMessage v-if=\"hasRecordedResponse\" :message=\"responseMessage\" />\n    <div v-if=\"isASubmittedForm\">\n      <UserMessage\n        v-for=\"submittedValue in submittedFormValues\"\n        :key=\"submittedValue.id\"\n        :message=\"submittedValue\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport UserMessage from 'widget/components/UserMessage.vue';\nimport AgentMessageBubble from 'widget/components/AgentMessageBubble.vue';\nimport MessageReplyButton from 'widget/components/MessageReplyButton.vue';\nimport timeMixin from 'dashboard/mixins/time';\nimport ImageBubble from 'widget/components/ImageBubble.vue';\nimport FileBubble from 'widget/components/FileBubble.vue';\nimport Thumbnail from 'dashboard/components/widgets/Thumbnail.vue';\nimport { MESSAGE_TYPE } from 'widget/helpers/constants';\nimport configMixin from '../mixins/configMixin';\nimport messageMixin from '../mixins/messageMixin';\nimport { isASubmittedFormMessage } from 'shared/helpers/MessageTypeHelper';\nimport darkModeMixin from 'widget/mixins/darkModeMixin.js';\nimport ReplyToChip from 'widget/components/ReplyToChip.vue';\nimport DragWrapper from 'widget/components/DragWrapper.vue';\nimport { BUS_EVENTS } from 'shared/constants/busEvents';\n\nexport default {\n  name: 'AgentMessage',\n  components: {\n    AgentMessageBubble,\n    ImageBubble,\n    Thumbnail,\n    UserMessage,\n    FileBubble,\n    MessageReplyButton,\n    ReplyToChip,\n    DragWrapper,\n  },\n  mixins: [timeMixin, configMixin, messageMixin, darkModeMixin],\n  props: {\n    message: {\n      type: Object,\n      default: () => {},\n    },\n    replyTo: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      hasImageError: false,\n    };\n  },\n  computed: {\n    shouldDisplayAgentMessage() {\n      if (\n        this.contentType === 'input_select' &&\n        this.messageContentAttributes.submitted_values &&\n        !this.message.content\n      ) {\n        return false;\n      }\n      return this.message.content;\n    },\n    readableTime() {\n      const { created_at: createdAt = '' } = this.message;\n      return this.messageStamp(createdAt, 'LLL d yyyy, h:mm a');\n    },\n    messageType() {\n      const { message_type: type = 1 } = this.message;\n      return type;\n    },\n    contentType() {\n      const { content_type: type = '' } = this.message;\n      return type;\n    },\n    agentName() {\n      if (this.message.sender) {\n        return this.message.sender.available_name || this.message.sender.name;\n      }\n\n      if (this.useInboxAvatarForBot) {\n        return this.channelConfig.websiteName;\n      }\n\n      return this.$t('UNREAD_VIEW.BOT');\n    },\n    avatarUrl() {\n      // eslint-disable-next-line\n      const BotImage = require('dashboard/assets/images/chatwoot_bot.png');\n      const displayImage = this.useInboxAvatarForBot\n        ? this.inboxAvatarUrl\n        : BotImage;\n\n      if (this.message.message_type === MESSAGE_TYPE.TEMPLATE) {\n        return displayImage;\n      }\n\n      return this.message.sender\n        ? this.message.sender.avatar_url\n        : displayImage;\n    },\n    hasRecordedResponse() {\n      return (\n        this.messageContentAttributes.submitted_email ||\n        (this.messageContentAttributes.submitted_values &&\n          !['form', 'input_csat'].includes(this.contentType))\n      );\n    },\n    responseMessage() {\n      if (this.messageContentAttributes.submitted_email) {\n        return { content: this.messageContentAttributes.submitted_email };\n      }\n\n      if (this.messageContentAttributes.submitted_values) {\n        if (this.contentType === 'input_select') {\n          const [selectionOption = {}] =\n            this.messageContentAttributes.submitted_values;\n          return { content: selectionOption.title || selectionOption.value };\n        }\n      }\n      return '';\n    },\n    isASubmittedForm() {\n      return isASubmittedFormMessage(this.message);\n    },\n    submittedFormValues() {\n      return this.messageContentAttributes.submitted_values.map(\n        submittedValue => ({\n          id: submittedValue.name,\n          content: submittedValue.value,\n        })\n      );\n    },\n    wrapClass() {\n      return {\n        'has-text': this.shouldDisplayAgentMessage,\n      };\n    },\n    hasReplyTo() {\n      return this.replyTo && (this.replyTo.content || this.replyTo.attachments);\n    },\n  },\n  watch: {\n    message() {\n      this.hasImageError = false;\n    },\n  },\n  mounted() {\n    this.hasImageError = false;\n  },\n  methods: {\n    onImageLoadError() {\n      this.hasImageError = true;\n    },\n    toggleReply() {\n      bus.$emit(BUS_EVENTS.TOGGLE_REPLY_TO_MESSAGE, this.message);\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentMessage.vue?vue&type=script&lang=js&\"","<template>\n  <UserMessage\n    v-if=\"isUserMessage\"\n    :id=\"`cwmsg-${message.id}`\"\n    :message=\"message\"\n    :reply-to=\"replyTo\"\n  />\n  <AgentMessage\n    v-else\n    :id=\"`cwmsg-${message.id}`\"\n    :message=\"message\"\n    :reply-to=\"replyTo\"\n  />\n</template>\n\n<script>\nimport AgentMessage from 'widget/components/AgentMessage.vue';\nimport UserMessage from 'widget/components/UserMessage.vue';\nimport { mapGetters } from 'vuex';\nimport { MESSAGE_TYPE } from 'widget/helpers/constants';\n\nexport default {\n  components: {\n    AgentMessage,\n    UserMessage,\n  },\n  props: {\n    message: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  computed: {\n    ...mapGetters({\n      allMessages: 'conversation/getConversation',\n    }),\n    isUserMessage() {\n      return this.message.message_type === MESSAGE_TYPE.INCOMING;\n    },\n    replyTo() {\n      const replyTo = this.message?.content_attributes?.in_reply_to;\n      return replyTo ? this.allMessages[replyTo] : null;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.message-wrap {\n  display: flex;\n  flex-direction: row;\n  align-items: flex-end;\n  max-width: 90%;\n}\n</style>\n\n<style lang=\"scss\">\n@import '~widget/assets/scss/variables.scss';\n\n.chat-bubble .message-content,\n.chat-bubble.user {\n  p code {\n    background-color: var(--s-75);\n    display: inline-block;\n    line-height: 1;\n\n    border-radius: $border-radius-small;\n    padding: $space-smaller;\n  }\n\n  pre {\n    overflow-y: auto;\n    background-color: var(--s-75);\n    border-color: var(--s-75);\n    color: var(--s-800);\n    border-radius: $border-radius-normal;\n    padding: $space-small;\n    margin-top: $space-smaller;\n    margin-bottom: $space-small;\n    display: block;\n    line-height: 1.7;\n    white-space: pre-wrap;\n\n    code {\n      background-color: transparent;\n      color: var(--s-800);\n      padding: 0;\n    }\n  }\n\n  blockquote {\n    border-left: $space-micro solid var(--s-75);\n    color: var(--s-800);\n    padding: $space-smaller $space-small;\n    margin: $space-smaller 0;\n    padding: $space-small $space-small 0 $space-normal;\n  }\n}\n\n@media (prefers-color-scheme: dark) {\n  .chat-bubble.agent.has-dark-mode {\n    blockquote {\n      border-color: var(--s-200);\n      color: var(--s-50);\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AgentMessage.vue?vue&type=template&id=496a88ac&\"\nimport script from \"./AgentMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./AgentMessage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"agent-message-wrap group\",class:{\n    'has-response': _vm.hasRecordedResponse || _vm.isASubmittedForm,\n  }},[(!_vm.isASubmittedForm)?_c('div',{staticClass:\"agent-message\"},[_c('div',{staticClass:\"avatar-wrap\"},[(_vm.message.showAvatar || _vm.hasRecordedResponse)?_c('thumbnail',{attrs:{\"src\":_vm.avatarUrl,\"size\":\"24px\",\"username\":_vm.agentName}}):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"message-wrap\"},[(_vm.hasReplyTo)?_c('div',{staticClass:\"flex mt-2 mb-1 text-xs\"},[_c('reply-to-chip',{attrs:{\"reply-to\":_vm.replyTo}})],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"flex gap-1\"},[_c('drag-wrapper',{staticClass:\"space-y-2\",attrs:{\"direction\":\"right\"},on:{\"dragged\":_vm.toggleReply}},[(_vm.shouldDisplayAgentMessage)?_c('AgentMessageBubble',{attrs:{\"content-type\":_vm.contentType,\"message-content-attributes\":_vm.messageContentAttributes,\"message-id\":_vm.message.id,\"message-type\":_vm.messageType,\"message\":_vm.message.content}}):_vm._e(),_vm._v(\" \"),(_vm.hasAttachments)?_c('div',{staticClass:\"chat-bubble has-attachment agent\",class:(_vm.wrapClass, _vm.$dm('bg-white', 'dark:bg-slate-700'))},_vm._l((_vm.message.attachments),function(attachment){return _c('div',{key:attachment.id},[(attachment.file_type === 'image' && !_vm.hasImageError)?_c('image-bubble',{attrs:{\"url\":attachment.data_url,\"thumb\":attachment.data_url,\"readable-time\":_vm.readableTime},on:{\"error\":_vm.onImageLoadError}}):(attachment.file_type === 'audio')?_c('audio',{attrs:{\"controls\":\"\"}},[_c('source',{attrs:{\"src\":attachment.data_url}})]):_c('file-bubble',{attrs:{\"url\":attachment.data_url}})],1)}),0):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"flex flex-col justify-end\"},[_c('message-reply-button',{staticClass:\"transition-opacity delay-75 opacity-0 group-hover:opacity-100 sm:opacity-0\",on:{\"click\":_vm.toggleReply}})],1)],1),_vm._v(\" \"),(_vm.message.showAvatar || _vm.hasRecordedResponse)?_c('p',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.agentName),expression:\"agentName\"}],staticClass:\"agent-name\",class:_vm.$dm('text-slate-700', 'dark:text-slate-200')}):_vm._e()])]):_vm._e(),_vm._v(\" \"),(_vm.hasRecordedResponse)?_c('UserMessage',{attrs:{\"message\":_vm.responseMessage}}):_vm._e(),_vm._v(\" \"),(_vm.isASubmittedForm)?_c('div',_vm._l((_vm.submittedFormValues),function(submittedValue){return _c('UserMessage',{key:submittedValue.id,attrs:{\"message\":submittedValue}})}),1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./ChatMessage.vue?vue&type=template&id=ecf74328&scoped=true&\"\nimport script from \"./ChatMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatMessage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatMessage.vue?vue&type=style&index=0&id=ecf74328&prod&scoped=true&lang=scss&\"\nimport style1 from \"./ChatMessage.vue?vue&type=style&index=1&id=ecf74328&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ecf74328\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.isUserMessage)?_c('UserMessage',{attrs:{\"id\":`cwmsg-${_vm.message.id}`,\"message\":_vm.message,\"reply-to\":_vm.replyTo}}):_c('AgentMessage',{attrs:{\"id\":`cwmsg-${_vm.message.id}`,\"message\":_vm.message,\"reply-to\":_vm.replyTo}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentTypingBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentTypingBubble.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"agent-message-wrap\">\n    <div class=\"agent-message\">\n      <div class=\"avatar-wrap\" />\n      <div class=\"message-wrap mt-2\">\n        <div\n          class=\"typing-bubble chat-bubble agent\"\n          :class=\"$dm('bg-white', 'dark:bg-slate-50')\"\n        >\n          <img\n            src=\"~widget/assets/images/typing.gif\"\n            alt=\"Agent is typing a message\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport darkModeMixing from 'widget/mixins/darkModeMixin.js';\nexport default {\n  name: 'AgentTypingBubble',\n  mixins: [darkModeMixing],\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables.scss';\n.agent-message-wrap {\n  position: sticky;\n  bottom: $space-smaller;\n}\n\n.typing-bubble {\n  max-width: $space-normal * 2.4;\n  padding: $space-small;\n  border-bottom-left-radius: $space-two;\n  border-top-left-radius: $space-small;\n\n  img {\n    width: 100%;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./AgentTypingBubble.vue?vue&type=template&id=49502ac0&scoped=true&\"\nimport script from \"./AgentTypingBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./AgentTypingBubble.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AgentTypingBubble.vue?vue&type=style&index=0&id=49502ac0&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"49502ac0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"agent-message-wrap\"},[_c('div',{staticClass:\"agent-message\"},[_c('div',{staticClass:\"avatar-wrap\"}),_vm._v(\" \"),_c('div',{staticClass:\"message-wrap mt-2\"},[_c('div',{staticClass:\"typing-bubble chat-bubble agent\",class:_vm.$dm('bg-white', 'dark:bg-slate-50')},[_c('img',{attrs:{\"src\":require(\"widget/assets/images/typing.gif\"),\"alt\":\"Agent is typing a message\"}})])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateSeparator.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DateSeparator.vue?vue&type=script&lang=js&\"","<template>\n  <div\n    class=\"date--separator\"\n    :class=\"$dm('text-slate-700', 'dark:text-slate-200')\"\n  >\n    {{ formattedDate }}\n  </div>\n</template>\n\n<script>\nimport { formatDate } from 'shared/helpers/DateHelper';\nimport darkModeMixin from 'widget/mixins/darkModeMixin.js';\n\nexport default {\n  mixins: [darkModeMixin],\n  props: {\n    date: {\n      type: String,\n      required: true,\n    },\n  },\n  computed: {\n    formattedDate() {\n      return formatDate({\n        date: this.date,\n        todayText: this.$t('TODAY'),\n        yesterdayText: this.$t('YESTERDAY'),\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables';\n\n.date--separator {\n  font-size: $font-size-default;\n  height: 50px;\n  line-height: 50px;\n  position: relative;\n  text-align: center;\n  width: 100%;\n}\n\n.date--separator::before,\n.date--separator::after {\n  background-color: $color-border;\n  content: '';\n  height: 1px;\n  position: absolute;\n  top: 24px;\n  width: calc((100% - 120px) / 2);\n}\n\n.date--separator::before {\n  left: 0;\n}\n\n.date--separator::after {\n  right: 0;\n}\n</style>\n","<template>\n  <div class=\"conversation--container\" :class=\"colorSchemeClass\">\n    <div class=\"conversation-wrap\" :class=\"{ 'is-typing': isAgentTyping }\">\n      <div v-if=\"isFetchingList\" class=\"message--loader\">\n        <spinner />\n      </div>\n      <div\n        v-for=\"groupedMessage in groupedMessages\"\n        :key=\"groupedMessage.date\"\n        class=\"messages-wrap\"\n      >\n        <date-separator :date=\"groupedMessage.date\" />\n        <chat-message\n          v-for=\"message in groupedMessage.messages\"\n          :key=\"message.id\"\n          :message=\"message\"\n        />\n      </div>\n      <agent-typing-bubble v-if=\"showStatusIndicator\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport ChatMessage from 'widget/components/ChatMessage.vue';\nimport AgentTypingBubble from 'widget/components/AgentTypingBubble.vue';\nimport DateSeparator from 'shared/components/DateSeparator.vue';\nimport Spinner from 'shared/components/Spinner.vue';\nimport darkModeMixin from 'widget/mixins/darkModeMixin';\nimport { MESSAGE_TYPE } from 'shared/constants/messages';\nimport { mapActions, mapGetters } from 'vuex';\n\nexport default {\n  name: 'ConversationWrap',\n  components: {\n    ChatMessage,\n    AgentTypingBubble,\n    DateSeparator,\n    Spinner,\n  },\n  mixins: [darkModeMixin],\n  props: {\n    groupedMessages: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data() {\n    return {\n      previousScrollHeight: 0,\n      previousConversationSize: 0,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      earliestMessage: 'conversation/getEarliestMessage',\n      lastMessage: 'conversation/getLastMessage',\n      allMessagesLoaded: 'conversation/getAllMessagesLoaded',\n      isFetchingList: 'conversation/getIsFetchingList',\n      conversationSize: 'conversation/getConversationSize',\n      isAgentTyping: 'conversation/getIsAgentTyping',\n      conversationAttributes: 'conversationAttributes/getConversationParams',\n    }),\n    colorSchemeClass() {\n      return `${this.darkMode === 'dark' ? 'dark-scheme' : 'light-scheme'}`;\n    },\n    showStatusIndicator() {\n      const { status } = this.conversationAttributes;\n      const isConversationInPendingStatus = status === 'pending';\n      const isLastMessageIncoming =\n        this.lastMessage.message_type === MESSAGE_TYPE.INCOMING;\n      return (\n        this.isAgentTyping ||\n        (isConversationInPendingStatus && isLastMessageIncoming)\n      );\n    },\n  },\n  watch: {\n    allMessagesLoaded() {\n      this.previousScrollHeight = 0;\n    },\n  },\n  mounted() {\n    this.$el.addEventListener('scroll', this.handleScroll);\n    this.scrollToBottom();\n  },\n  updated() {\n    if (this.previousConversationSize !== this.conversationSize) {\n      this.previousConversationSize = this.conversationSize;\n      this.scrollToBottom();\n    }\n  },\n  unmounted() {\n    this.$el.removeEventListener('scroll', this.handleScroll);\n  },\n  methods: {\n    ...mapActions('conversation', ['fetchOldConversations']),\n    scrollToBottom() {\n      const container = this.$el;\n      container.scrollTop = container.scrollHeight - this.previousScrollHeight;\n      this.previousScrollHeight = 0;\n    },\n    handleScroll() {\n      if (\n        this.isFetchingList ||\n        this.allMessagesLoaded ||\n        !this.conversationSize\n      ) {\n        return;\n      }\n\n      if (this.$el.scrollTop < 100) {\n        this.fetchOldConversations({ before: this.earliestMessage.id });\n        this.previousScrollHeight = this.$el.scrollHeight;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '~widget/assets/scss/variables.scss';\n@import '~widget/assets/scss/mixins.scss';\n\n.conversation--container {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow-y: auto;\n  color-scheme: light dark;\n\n  &.light-scheme {\n    color-scheme: light;\n  }\n  &.dark-scheme {\n    color-scheme: dark;\n  }\n}\n\n.conversation-wrap {\n  flex: 1;\n  padding: $space-large $space-small $space-small $space-small;\n}\n\n.message--loader {\n  text-align: center;\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationWrap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConversationWrap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DateSeparator.vue?vue&type=template&id=0619d2c7&scoped=true&\"\nimport script from \"./DateSeparator.vue?vue&type=script&lang=js&\"\nexport * from \"./DateSeparator.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DateSeparator.vue?vue&type=style&index=0&id=0619d2c7&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0619d2c7\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"date--separator\",class:_vm.$dm('text-slate-700', 'dark:text-slate-200')},[_vm._v(\"\\n  \"+_vm._s(_vm.formattedDate)+\"\\n\")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"flex flex-col flex-1 overflow-hidden rounded-b-lg bg-slate-25 dark:bg-slate-800\"\n  >\n    <div class=\"flex flex-1 overflow-auto\">\n      <conversation-wrap :grouped-messages=\"groupedMessages\" />\n    </div>\n    <chat-footer class=\"px-5\" />\n  </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex';\n\nimport ChatFooter from '../components/ChatFooter.vue';\nimport ConversationWrap from '../components/ConversationWrap.vue';\n\nexport default {\n  components: { ChatFooter, ConversationWrap },\n  computed: {\n    ...mapGetters({\n      groupedMessages: 'conversation/getGroupedConversation',\n    }),\n  },\n  mounted() {\n    this.$store.dispatch('conversation/setUserLastSeen');\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./ConversationWrap.vue?vue&type=template&id=dd2501de&scoped=true&\"\nimport script from \"./ConversationWrap.vue?vue&type=script&lang=js&\"\nexport * from \"./ConversationWrap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ConversationWrap.vue?vue&type=style&index=0&id=dd2501de&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dd2501de\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"conversation--container\",class:_vm.colorSchemeClass},[_c('div',{staticClass:\"conversation-wrap\",class:{ 'is-typing': _vm.isAgentTyping }},[(_vm.isFetchingList)?_c('div',{staticClass:\"message--loader\"},[_c('spinner')],1):_vm._e(),_vm._v(\" \"),_vm._l((_vm.groupedMessages),function(groupedMessage){return _c('div',{key:groupedMessage.date,staticClass:\"messages-wrap\"},[_c('date-separator',{attrs:{\"date\":groupedMessage.date}}),_vm._v(\" \"),_vm._l((groupedMessage.messages),function(message){return _c('chat-message',{key:message.id,attrs:{\"message\":message}})})],2)}),_vm._v(\" \"),(_vm.showStatusIndicator)?_c('agent-typing-bubble'):_vm._e()],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Messages.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Messages.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Messages.vue?vue&type=template&id=7553ca7c&\"\nimport script from \"./Messages.vue?vue&type=script&lang=js&\"\nexport * from \"./Messages.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}