{"version":3,"sources":["webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue?e38c","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLBotEditor.vue?0477","webpack:///app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue?fbf1","webpack:///app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLBotEditor.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLMonacoEditor.vue?4e5f","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLBotEditor.vue?0edc","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/components/CSMLBotEditor.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/csml/Edit.vue?bf38","webpack:///app/javascript/dashboard/routes/dashboard/settings/agentBots/csml/Edit.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/csml/Edit.vue?b7ce","webpack:///./app/javascript/dashboard/routes/dashboard/settings/agentBots/csml/Edit.vue"],"names":["_vm","this","_c","_self","staticClass","attrs","$t","_e","_v","globalConfig","csmlEditorHost","on","onEditorLoad","model","value","bot","callback","$$v","$set","expression","$v","csmlContent","_s","$event","preventDefault","onSubmit","apply","arguments","class","error","name","$error","directives","rawName","domProps","target","composing","component","agentBot","updateBot"],"mappings":"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","file":"js/78-6066bebb021c2b50b54f.chunk.js","sourcesContent":["export * from \"-!../../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../../node_modules/css-loader/dist/cjs.js??ref--2-1!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/postcss-loader/dist/cjs.js??ref--2-2!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLMonacoEditor.vue?vue&type=style&index=0&id=d9e9be14&prod&scoped=true&lang=css&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"h-auto overflow-auto flex flex-col\"},[_c('div',{staticClass:\"flex flex-row\"},[_c('div',{staticClass:\"w-[68%]\"},[_c('div',{staticClass:\"h-[calc(100vh-56px)] relative\"},[_c('csml-monaco-editor',{staticClass:\"w-full h-full\",model:{value:(_vm.bot.csmlContent),callback:function ($$v) {_vm.$set(_vm.bot, \"csmlContent\", $$v)},expression:\"bot.csmlContent\"}}),_vm._v(\" \"),(_vm.$v.bot.csmlContent.$error)?_c('div',{staticClass:\"bg-red-100 dark:bg-red-200 text-white dark:text-white absolute bottom-0 w-full p-2.5 flex items-center text-xs justify-center flex-shrink-0\"},[_c('span',[_vm._v(_vm._s(_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.BOT_CONFIG.ERROR')))])]):_vm._e()],1)]),_vm._v(\" \"),_c('div',{staticClass:\"w-[32%] overflow-auto p-4 h-[calc(100vh-56px)]\"},[_c('form',{staticClass:\"flex flex-col justify-between h-full\",on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit.apply(null, arguments)}}},[_c('div',[_c('label',{class:{ error: _vm.$v.bot.name.$error }},[_vm._v(\"\\n            \"+_vm._s(_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.LABEL'))+\"\\n            \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.bot.name),expression:\"bot.name\"}],attrs:{\"type\":\"text\",\"placeholder\":_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.PLACEHOLDER')},domProps:{\"value\":(_vm.bot.name)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.bot, \"name\", $event.target.value)}}}),_vm._v(\" \"),(_vm.$v.bot.name.$error)?_c('span',{staticClass:\"message\"},[_vm._v(\"\\n              \"+_vm._s(_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.ERROR'))+\"\\n            \")]):_vm._e()]),_vm._v(\" \"),_c('label',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.DESCRIPTION.LABEL'))+\"\\n            \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.bot.description),expression:\"bot.description\"}],attrs:{\"rows\":\"4\",\"placeholder\":_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.DESCRIPTION.PLACEHOLDER')},domProps:{\"value\":(_vm.bot.description)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.bot, \"description\", $event.target.value)}}})]),_vm._v(\" \"),_c('woot-button',[_vm._v(\"\\n            \"+_vm._s(_vm.$t('AGENT_BOTS.CSML_BOT_EDITOR.SUBMIT'))+\"\\n          \")])],1)])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"csml-editor--container\">\n    <loading-state\n      v-if=\"iframeLoading\"\n      :message=\"$t('AGENT_BOTS.LOADING_EDITOR')\"\n      class=\"dashboard-app_loading-container\"\n    />\n    <iframe\n      id=\"csml-editor--frame\"\n      :src=\"globalConfig.csmlEditorHost\"\n      @load=\"onEditorLoad\"\n    />\n  </div>\n</template>\n<script>\nimport LoadingState from 'dashboard/components/widgets/LoadingState.vue';\nimport { mapGetters } from 'vuex';\n\nexport default {\n  components: { LoadingState },\n  props: {\n    value: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      iframeLoading: true,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      globalConfig: 'globalConfig/get',\n    }),\n  },\n  mounted() {\n    window.onmessage = e => {\n      if (\n        typeof e.data !== 'string' ||\n        !e.data.startsWith('chatwoot-csml-editor:update')\n      ) {\n        return;\n      }\n      const csmlContent = e.data.replace('chatwoot-csml-editor:update', '');\n      this.$emit('input', csmlContent);\n    };\n  },\n  methods: {\n    onEditorLoad() {\n      const frameElement = document.getElementById(`csml-editor--frame`);\n      const eventData = {\n        event: 'editorContext',\n        data: this.value || '',\n      };\n      frameElement.contentWindow.postMessage(JSON.stringify(eventData), '*');\n      this.iframeLoading = false;\n    },\n  },\n};\n</script>\n\n<style scoped>\n#csml-editor--frame {\n  border: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>\n","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLMonacoEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLMonacoEditor.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"h-auto overflow-auto flex flex-col\">\n    <div class=\"flex flex-row\">\n      <div class=\"w-[68%]\">\n        <div class=\"h-[calc(100vh-56px)] relative\">\n          <csml-monaco-editor v-model=\"bot.csmlContent\" class=\"w-full h-full\" />\n          <div\n            v-if=\"$v.bot.csmlContent.$error\"\n            class=\"bg-red-100 dark:bg-red-200 text-white dark:text-white absolute bottom-0 w-full p-2.5 flex items-center text-xs justify-center flex-shrink-0\"\n          >\n            <span>{{ $t('AGENT_BOTS.CSML_BOT_EDITOR.BOT_CONFIG.ERROR') }}</span>\n          </div>\n        </div>\n      </div>\n      <div class=\"w-[32%] overflow-auto p-4 h-[calc(100vh-56px)]\">\n        <form\n          class=\"flex flex-col justify-between h-full\"\n          @submit.prevent=\"onSubmit\"\n        >\n          <div>\n            <label :class=\"{ error: $v.bot.name.$error }\">\n              {{ $t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.LABEL') }}\n              <input\n                v-model=\"bot.name\"\n                type=\"text\"\n                :placeholder=\"$t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.PLACEHOLDER')\"\n              />\n              <span v-if=\"$v.bot.name.$error\" class=\"message\">\n                {{ $t('AGENT_BOTS.CSML_BOT_EDITOR.NAME.ERROR') }}\n              </span>\n            </label>\n            <label>\n              {{ $t('AGENT_BOTS.CSML_BOT_EDITOR.DESCRIPTION.LABEL') }}\n              <textarea\n                v-model=\"bot.description\"\n                rows=\"4\"\n                :placeholder=\"\n                  $t('AGENT_BOTS.CSML_BOT_EDITOR.DESCRIPTION.PLACEHOLDER')\n                \"\n              />\n            </label>\n            <woot-button>\n              {{ $t('AGENT_BOTS.CSML_BOT_EDITOR.SUBMIT') }}\n            </woot-button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { required } from 'vuelidate/lib/validators';\nimport CsmlMonacoEditor from './CSMLMonacoEditor.vue';\n\nexport default {\n  components: { CsmlMonacoEditor },\n  props: {\n    agentBot: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  validations: {\n    bot: {\n      name: { required },\n      csmlContent: { required },\n    },\n  },\n  data() {\n    return {\n      bot: {\n        name: this.agentBot.name || '',\n        description: this.agentBot.description || '',\n        csmlContent: this.agentBot.bot_config.csml_content || '',\n      },\n    };\n  },\n  methods: {\n    onSubmit() {\n      this.$v.$touch();\n      if (this.$v.$invalid) {\n        return;\n      }\n      this.$emit('submit', {\n        id: this.agentBot.id || '',\n        ...this.bot,\n      });\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./CSMLMonacoEditor.vue?vue&type=template&id=d9e9be14&scoped=true&\"\nimport script from \"./CSMLMonacoEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./CSMLMonacoEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CSMLMonacoEditor.vue?vue&type=style&index=0&id=d9e9be14&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d9e9be14\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"csml-editor--container\"},[(_vm.iframeLoading)?_c('loading-state',{staticClass:\"dashboard-app_loading-container\",attrs:{\"message\":_vm.$t('AGENT_BOTS.LOADING_EDITOR')}}):_vm._e(),_vm._v(\" \"),_c('iframe',{attrs:{\"id\":\"csml-editor--frame\",\"src\":_vm.globalConfig.csmlEditorHost},on:{\"load\":_vm.onEditorLoad}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLBotEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CSMLBotEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CSMLBotEditor.vue?vue&type=template&id=43db4521&\"\nimport script from \"./CSMLBotEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./CSMLBotEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.agentBot.id)?_c('csml-bot-editor',{attrs:{\"agent-bot\":_vm.agentBot},on:{\"submit\":_vm.updateBot}}):_c('div',{staticClass:\"h-auto overflow-auto flex flex-col no-padding\"},[_c('spinner')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <csml-bot-editor\n    v-if=\"agentBot.id\"\n    :agent-bot=\"agentBot\"\n    @submit=\"updateBot\"\n  />\n  <div v-else class=\"h-auto overflow-auto flex flex-col no-padding\">\n    <spinner />\n  </div>\n</template>\n<script>\nimport Spinner from 'shared/components/Spinner.vue';\nimport CsmlBotEditor from '../components/CSMLBotEditor.vue';\nimport alertMixin from 'shared/mixins/alertMixin';\n\nimport { mapGetters } from 'vuex';\nexport default {\n  components: { Spinner, CsmlBotEditor },\n  mixins: [alertMixin],\n  computed: {\n    ...mapGetters({ uiFlags: 'agentBots/uiFlags' }),\n    agentBot() {\n      return this.$store.getters['agentBots/getBot'](this.$route.params.botId);\n    },\n  },\n  mounted() {\n    this.$store.dispatch('agentBots/show', this.$route.params.botId);\n  },\n  methods: {\n    async updateBot(bot) {\n      try {\n        await this.$store.dispatch('agentBots/update', {\n          id: bot.id,\n          name: bot.name,\n          description: bot.description,\n          bot_type: 'csml',\n          bot_config: { csml_content: bot.csmlContent },\n        });\n        this.showAlert(this.$t('AGENT_BOTS.EDIT.API.SUCCESS_MESSAGE'));\n      } catch (error) {\n        this.showAlert(\n          this.$t('AGENT_BOTS.CSML_BOT_EDITOR.BOT_CONFIG.API_ERROR')\n        );\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=8e56bba2&\"\nimport script from \"./Edit.vue?vue&type=script&lang=js&\"\nexport * from \"./Edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}