(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{189:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i}));var a="",r={INCOMING:0,OUTGOING:1,ACTIVITY:2,TEMPLATE:3},i="chatwoot-widget:"},1912:function(t,e,n){"use strict";n(64),n(49),n(65),n(1913),n(136),n(16),n(7),n(20),n(21),n(196),n(9);var a=n(1915),r=n.n(a),i=(n(370),/mention:\/\/(user|team)\/(\d+)\/(.+)/gm);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var c=function(t){t.children.forEach((function(t){"image"===t.type&&function(t){var e=t.attrGet("src");if(e){var n=new URL(e).searchParams.get("cw_image_height");n&&t.attrSet("style","height: ".concat(n,";"))}}(t)}))},l=n(1807)({html:!1,xhtmlOut:!0,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,quotes:"\u201c\u201d\u2018\u2019",maxNesting:20}).use((function(t){t.renderer.rules.mention=function(t,e){return'<span class="prosemirror-mention-node">'.concat(t[e].content,"</span>")},t.inline.ruler.before("link","mention",(function(t,e){var n,a,r,s,o,c,l="",u=t.posMax;return 91===t.src.charCodeAt(t.pos)&&(r=t.pos+1,!((a=t.md.helpers.parseLinkLabel(t,t.pos,!0))<0)&&(n=t.src.slice(r,a),(s=a+1)<u&&40===t.src.charCodeAt(s)&&(s+=1,(o=t.md.helpers.parseLinkDestination(t.src,s,t.posMax)).ok&&(l=t.md.normalizeLink(o.str),t.md.validateLink(l)?s=o.pos:l=""),s+=1),!!l.match(new RegExp(i))&&(e||(t.pos=r,t.posMax=a,(c=t.push("mention","")).href=l,c.content=n),t.pos=s,t.posMax=u,!0)))}))})).use((function(t){t.core.ruler.after("inline","add-image-height",(function(t){t.tokens.forEach((function(t){"inline"===t.type&&c(t)}))}))})).use(r.a,{attrs:{class:"link",rel:"noreferrer noopener nofollow",target:"_blank"}}),u=/(^|[^@\w])@(\w{1,15})\b/g,d=/(^|\s)#(\w+)/g,p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s(this,t),this.message=e||"",this.isAPrivateNote=a,this.isATweet=n}var e,n,a;return e=t,(n=[{key:"formatMessage",value:function(){var t=this.message;return this.isATweet&&!this.isAPrivateNote&&(t=(t=t.replace(u,"$1[@$2](http://twitter.com/$2)")).replace(d,"$1[#$2](https://twitter.com/hashtag/$2)")),l.render(t)}},{key:"formattedMessage",get:function(){return this.formatMessage()}},{key:"plainText",get:function(){return(new DOMParser).parseFromString(this.formattedMessage,"text/html").body.textContent||""}}])&&o(e.prototype,n),a&&o(e,a),t}(),m=p;e.a={methods:{formatMessage:function(t,e,n){return new m(t,e,n).formattedMessage},getPlainText:function(t,e){return new m(t,e).plainText},truncateMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.length<100?t:"".concat(t.slice(0,97),"...")},highlightContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=this.getPlainText(t),r=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return a.replace(new RegExp("(".concat(r,")"),"ig"),'<span class="'.concat(n,'">$1</span>'))}}}},2649:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=function(){for(var t="#",e=0;e<6;e+=1)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}},2650:function(t,e,n){},2658:function(t,e,n){"use strict";e.a={computed:{getLabelTitleErrorMessage:function(){var t="";return this.$v.title.$error?this.$v.title.required?this.$v.title.minLength?this.$v.title.validLabelCharacters||(t=this.$t("LABEL_MGMT.FORM.NAME.VALID_ERROR")):t=this.$t("LABEL_MGMT.FORM.NAME.MINIMUM_LENGTH_ERROR"):t=this.$t("LABEL_MGMT.FORM.NAME.REQUIRED_ERROR"):t="",t}}}},2659:function(t,e,n){"use strict";n(68),n(97);var a=n(57);e.a={title:{required:a.required,minLength:Object(a.minLength)(2),validLabelCharacters:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!t&&!t.includes(" ")}},description:{},color:{required:a.required},showOnSidebar:{}}},2661:function(t,e,n){},2662:function(t,e,n){},2663:function(t,e,n){"use strict";var a=n(1809),r={props:{inbox:{type:Object,default:function(){}}},computed:{computedInboxClass:function(){var t=this.inbox,e=t.phone_number,n=t.channel_type;return Object(a.a)(n,e)}}},i=n(5),s=Object(i.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"inbox--name inline-flex items-center py-0.5 px-0 leading-3 font-medium bg-none text-slate-600 dark:text-slate-500 text-xs my-0 mx-2.5"},[e("fluent-icon",{staticClass:"mr-0.5 rtl:ml-0.5 rtl:mr-0",attrs:{icon:t.computedInboxClass,size:"12"}}),t._v("\n  "+t._s(t.inbox.name)+"\n")],1)}),[],!1,null,null,null);e.a=s.exports},2664:function(t,e,n){"use strict";n(2650)},2667:function(t,e,n){"use strict";n(83),n(10),n(141),n(2224),n(45),n(4),n(8),n(11),n(9),n(12);var a=n(25),r=n(13);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a={computed:s(s({},Object(a.mapGetters)({currentChat:"getSelectedChat",accountId:"getCurrentAccountId"})),{},{attributes:function(){return this.$store.getters["attributes/getAttributesByModel"](this.attributeType)},customAttributes:function(){return"conversation_attribute"===this.attributeType?this.currentChat.custom_attributes||{}:this.contact.custom_attributes||{}},contactIdentifier:function(){var t,e;return(null===(t=this.currentChat.meta)||void 0===t||null===(e=t.sender)||void 0===e?void 0:e.id)||this.$route.params.contactId||this.contactId},contact:function(){return this.$store.getters["contacts/getContact"](this.contactIdentifier)},conversationId:function(){return this.currentChat.id},filteredAttributes:function(){var t=this;return Object.keys(this.customAttributes).map((function(e){var n=t.attributes.find((function(t){return t.attribute_key===e}));return s(s({},n),{},n?{value:t.customAttributes[e]}:{value:t.customAttributes[e],attribute_description:e,attribute_display_name:e,attribute_display_type:t.attributeDisplayType(t.customAttributes[e]),attribute_key:e,attribute_model:t.attributeType,id:Math.random()})}))}}),methods:{isAttributeNumber:function(t){return Number.isInteger(Number(t))&&Number(t)>0},attributeDisplayType:function(t){return this.isAttributeNumber(t)?"number":Object(r.f)(t)?"link":"text"}}}},2670:function(t,e,n){"use strict";n(30),n(4),n(31),n(10),n(8),n(11),n(9),n(12),n(7),n(22);var a=n(79),r=n(2658),i=n(25),s=n(2659),o=n(2649);function c(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={mixins:[a.a,r.a],props:{prefillTitle:{type:String,default:""}},data:function(){return{color:"#000",description:"",title:"",showOnSidebar:!0}},validations:s.a,computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(i.mapGetters)({uiFlags:"labels/getUIFlags"})),mounted:function(){this.color=Object(o.a)(),this.title=this.prefillTitle.toLowerCase()},methods:{onClose:function(){this.$emit("close")},addLabel:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("labels/create",{color:e.color,description:e.description,title:e.title.toLowerCase(),show_on_sidebar:e.showOnSidebar});case 3:e.showAlert(e.$t("LABEL_MGMT.ADD.API.SUCCESS_MESSAGE")),e.onClose(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),n=t.t0.message||e.$t("LABEL_MGMT.ADD.API.ERROR_MESSAGE"),e.showAlert(n);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(t){c(i,a,r,s,o,"next",t)}function o(t){c(i,a,r,s,o,"throw",t)}s(void 0)}))})()}}},p=d,m=(n(2664),n(5)),f=Object(m.a)(p,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-auto overflow-auto flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":t.$t("LABEL_MGMT.ADD.TITLE"),"header-content":t.$t("LABEL_MGMT.ADD.DESC")}}),t._v(" "),e("form",{staticClass:"mx-0 flex flex-wrap",on:{submit:function(e){return e.preventDefault(),t.addLabel.apply(null,arguments)}}},[e("woot-input",{staticClass:"w-full label-name--input",class:{error:t.$v.title.$error},attrs:{label:t.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:t.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:t.getLabelTitleErrorMessage,"data-testid":"label-title"},on:{input:t.$v.title.$touch},model:{value:t.title,callback:function(e){t.title="string"===typeof e?e.trim():e},expression:"title"}}),t._v(" "),e("woot-input",{staticClass:"w-full",class:{error:t.$v.description.$error},attrs:{label:t.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:t.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),"data-testid":"label-description"},on:{input:t.$v.description.$touch},model:{value:t.description,callback:function(e){t.description="string"===typeof e?e.trim():e},expression:"description"}}),t._v(" "),e("div",{staticClass:"w-full"},[e("label",[t._v("\n        "+t._s(t.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+"\n        "),e("woot-color-picker",{model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1)]),t._v(" "),e("div",{staticClass:"w-full"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.showOnSidebar,expression:"showOnSidebar"}],attrs:{type:"checkbox"},domProps:{value:!0,checked:Array.isArray(t.showOnSidebar)?t._i(t.showOnSidebar,!0)>-1:t.showOnSidebar},on:{change:function(e){var n=t.showOnSidebar,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,true);a.checked?i<0&&(t.showOnSidebar=n.concat([true])):i>-1&&(t.showOnSidebar=n.slice(0,i).concat(n.slice(i+1)))}else t.showOnSidebar=r}}}),t._v(" "),e("label",{attrs:{for:"conversation_creation"}},[t._v("\n        "+t._s(t.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL"))+"\n      ")])]),t._v(" "),e("div",{staticClass:"flex justify-end items-center py-2 px-0 gap-2 w-full"},[e("woot-button",{attrs:{"is-disabled":t.$v.title.$invalid||t.uiFlags.isCreating,"is-loading":t.uiFlags.isCreating,"data-testid":"label-submit"}},[t._v("\n        "+t._s(t.$t("LABEL_MGMT.FORM.CREATE"))+"\n      ")]),t._v(" "),e("woot-button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n        "+t._s(t.$t("LABEL_MGMT.FORM.CANCEL"))+"\n      ")])],1)],1)],1)}),[],!1,null,"0a500998",null);e.a=f.exports},2676:function(t,e,n){"use strict";var a=n(261),r=n(2677),i=n(149),s={components:{Thumbnail:a.a,MultiselectDropdownItems:r.a},mixins:[i.mixin],props:{options:{type:Array,default:function(){return[]}},selectedItem:{type:Object,default:function(){return{}}},hasThumbnail:{type:Boolean,default:!0},multiselectorTitle:{type:String,default:""},multiselectorPlaceholder:{type:String,default:"None"},noSearchResult:{type:String,default:"No results found"},inputPlaceholder:{type:String,default:"Search"}},data:function(){return{showSearchDropdown:!1}},computed:{hasValue:function(){return!(!this.selectedItem||!this.selectedItem.id)}},methods:{toggleDropdown:function(){this.showSearchDropdown=!this.showSearchDropdown},onCloseDropdown:function(){this.showSearchDropdown=!1},onClickSelectItem:function(t){this.$emit("click",t),this.onCloseDropdown()}}},o=(n(2696),n(5)),c=Object(o.a)(s,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.onCloseDropdown,expression:"onCloseDropdown"}],staticClass:"relative w-full mb-2",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.onCloseDropdown.apply(null,arguments)}}},[e("woot-button",{staticClass:"w-full border border-solid border-slate-200 dark:border-slate-700 px-2.5 hover:border-slate-75 dark:hover:border-slate-600",attrs:{variant:"hollow","color-scheme":"secondary"},on:{click:t.toggleDropdown}},[e("div",{staticClass:"flex"},[t.hasValue&&t.hasThumbnail?e("Thumbnail",{attrs:{src:t.selectedItem.thumbnail,size:"24px",status:t.selectedItem.availability_status,username:t.selectedItem.name}}):t._e(),t._v(" "),e("div",{staticClass:"flex justify-between w-full min-w-0 items-center"},[t.hasValue?e("h4",{staticClass:"items-center leading-tight my-0 mx-2 overflow-hidden whitespace-nowrap text-ellipsis text-sm text-slate-800 dark:text-slate-100",attrs:{title:t.selectedItem.name}},[t._v("\n          "+t._s(t.selectedItem.name)+"\n        ")]):e("h4",{staticClass:"mt-0 mb-0 mr-2 ml-0 text-ellipsis text-sm text-slate-800 dark:text-slate-100"},[t._v("\n          "+t._s(t.multiselectorPlaceholder)+"\n        ")]),t._v(" "),t.showSearchDropdown?e("i",{staticClass:"icon ion-chevron-up"}):e("i",{staticClass:"icon ion-chevron-down"})])],1)]),t._v(" "),e("div",{staticClass:"dropdown-pane",class:{"dropdown-pane--open":t.showSearchDropdown}},[e("div",{staticClass:"flex justify-between items-center mb-1"},[e("h4",{staticClass:"text-sm text-slate-800 dark:text-slate-100 m-0 overflow-hidden whitespace-nowrap text-ellipsis"},[t._v("\n        "+t._s(t.multiselectorTitle)+"\n      ")]),t._v(" "),e("woot-button",{attrs:{icon:"dismiss",size:"tiny","color-scheme":"secondary",variant:"clear"},on:{click:t.onCloseDropdown}})],1),t._v(" "),t.showSearchDropdown?e("multiselect-dropdown-items",{attrs:{options:t.options,"selected-items":[t.selectedItem],"has-thumbnail":t.hasThumbnail,"input-placeholder":t.inputPlaceholder,"no-search-result":t.noSearchResult},on:{click:t.onClickSelectItem}}):t._e()],1)],1)}),[],!1,null,"1a8129fb",null);e.a=c.exports},2677:function(t,e,n){"use strict";n(8),n(68),n(97),n(37),n(49),n(268);var a=n(358),r=n(359),i=n(261),s={components:{WootDropdownItem:a.a,WootDropdownMenu:r.a,Thumbnail:i.a},props:{options:{type:Array,default:function(){return[]}},selectedItems:{type:Array,default:function(){return[]}},hasThumbnail:{type:Boolean,default:!0},inputPlaceholder:{type:String,default:"Search"},noSearchResult:{type:String,default:"No results found"}},data:function(){return{search:""}},computed:{filteredOptions:function(){var t=this;return this.options.filter((function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())}))},noResult:function(){return 0===this.filteredOptions.length&&""!==this.search}},mounted:function(){this.focusInput()},methods:{onclick:function(t){this.$emit("click",t)},focusInput:function(){this.$refs.searchbar.focus()},isActive:function(t){return this.selectedItems.some((function(e){return e&&t.id===e.id}))}}},o=(n(2695),n(5)),c=Object(o.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dropdown-wrap"},[e("div",{staticClass:"mb-2 flex-shrink-0 flex-grow-0 flex-auto max-h-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"searchbar",staticClass:"search-input",attrs:{type:"text",autofocus:"true",placeholder:t.inputPlaceholder},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"flex justify-start items-start flex-auto overflow-auto"},[e("div",{staticClass:"w-full max-h-[10rem]"},[e("woot-dropdown-menu",t._l(t.filteredOptions,(function(n){return e("woot-dropdown-item",{key:n.id},[e("woot-button",{staticClass:"multiselect-dropdown--item",class:{active:t.isActive(n)},attrs:{variant:t.isActive(n)?"hollow":"clear","color-scheme":"secondary"},on:{click:()=>t.onclick(n)}},[e("div",{staticClass:"flex items-center"},[t.hasThumbnail?e("Thumbnail",{attrs:{src:n.thumbnail,size:"24px",username:n.name,status:n.availability_status,"has-border":""}}):t._e(),t._v(" "),e("div",{staticClass:"flex items-center justify-between w-full min-w-0"},[e("span",{staticClass:"leading-4 my-0 mx-2 overflow-hidden whitespace-nowrap text-ellipsis text-sm",attrs:{title:n.name}},[t._v("\n                  "+t._s(n.name)+"\n                ")]),t._v(" "),t.isActive(n)?e("fluent-icon",{attrs:{icon:"checkmark"}}):t._e()],1)],1)])],1)})),1),t._v(" "),t.noResult?e("h4",{staticClass:"w-full justify-center items-center flex text-slate-500 dark:text-slate-300 py-2 px-2.5 overflow-hidden whitespace-nowrap text-ellipsis text-sm"},[t._v("\n        "+t._s(t.noSearchResult)+"\n      ")]):t._e()],1)])])}),[],!1,null,"4d8f772f",null);e.a=c.exports},2688:function(t,e,n){"use strict";n.d(e,"b",(function(){return a}));n(9),n(269),n(8);var a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return t.forEach((function(t){t.source_id?e.findIndex((function(e){return t.source_id===e.source_id}))<0&&e.push(t):e.push(t)})),e};e.a={methods:{lastMessage:function(t){var e,n,a=t.messages.last(),r=t.messages.filter((function(t){return 2!==t.message_type})).last(),i=t.last_non_activity_message;return r||i?(n=i,(e=r)&&n?e.created_at>=n.created_at?e:n:e||n):a},readMessages:function(t,e){return t.filter((function(t){return 1e3*t.created_at<=1e3*e}))},unReadMessages:function(t,e){return t.filter((function(t){return 1e3*t.created_at>1e3*e}))}}}},2689:function(t,e,n){},2690:function(t,e,n){},2691:function(t,e,n){},2692:function(t,e,n){},2693:function(t,e,n){},2694:function(t,e,n){},2695:function(t,e,n){"use strict";n(2661)},2696:function(t,e,n){"use strict";n(2662)},2697:function(t,e,n){},2698:function(t,e,n){},2699:function(t,e,n){},2700:function(t,e,n){},2701:function(t,e,n){},2702:function(t,e,n){},2703:function(t,e,n){},2704:function(t,e,n){},2705:function(t,e,n){},2706:function(t,e,n){},2707:function(t,e,n){},2708:function(t,e,n){},2709:function(t,e,n){},2710:function(t,e,n){},2711:function(t,e,n){},2712:function(t,e,n){},2713:function(t,e,n){},2714:function(t,e,n){},2724:function(t,e,n){"use strict";n(4),n(31),n(7),n(33),n(16),n(20),n(21),n(64),n(37),n(69);var a=n(189),r=n(1912),i=n(90);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var a,r,i=[],s=!0,o=!1;try{for(n=n.call(t);!(s=(a=n.next()).done)&&(i.push(a.value),!e||i.length!==e);s=!0);}catch(c){o=!0,r=c}finally{try{s||null==n.return||n.return()}finally{if(o)throw r}}return i}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var c={name:"MessagePreview",mixins:[r.a],props:{message:{type:Object,required:!0},showMessageType:{type:Boolean,default:!0},defaultEmptyMessage:{type:String,default:""}},computed:{messageByAgent:function(){return this.message.message_type===a.b.OUTGOING},isMessageAnActivity:function(){return this.message.message_type===a.b.ACTIVITY},isMessagePrivate:function(){return this.message.private},parsedLastMessage:function(){var t=(this.message.content_attributes||{}).email,e=(t=void 0===t?{}:t).subject;return this.getPlainText(e||this.message.content)},lastMessageFileType:function(){var t=s(this.message.attachments,1)[0];return(t=void 0===t?{}:t).file_type},attachmentIcon:function(){return i.d[this.lastMessageFileType]},attachmentMessageContent:function(){return"CHAT_LIST.ATTACHMENTS.".concat(this.lastMessageFileType,".CONTENT")}}},l=n(5),u=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"overflow-hidden text-ellipsis whitespace-nowrap"},[t.showMessageType?[t.isMessagePrivate?e("fluent-icon",{staticClass:"-mt-0.5 align-middle text-slate-600 dark:text-slate-300 inline-block",attrs:{size:"16",icon:"lock-closed"}}):t.messageByAgent?e("fluent-icon",{staticClass:"-mt-0.5 align-middle text-slate-600 dark:text-slate-300 inline-block",attrs:{size:"16",icon:"arrow-reply"}}):t.isMessageAnActivity?e("fluent-icon",{staticClass:"-mt-0.5 align-middle text-slate-600 dark:text-slate-300 inline-block",attrs:{size:"16",icon:"info"}}):t._e()]:t._e(),t._v(" "),t.message.content?e("span",[t._v("\n    "+t._s(t.parsedLastMessage)+"\n  ")]):t.message.attachments?e("span",[t.attachmentIcon&&t.showMessageType?e("fluent-icon",{staticClass:"-mt-0.5 align-middle inline-block text-slate-600 dark:text-slate-300",attrs:{size:"16",icon:t.attachmentIcon}}):t._e(),t._v("\n    "+t._s(t.$t(`${t.attachmentMessageContent}`))+"\n  ")],1):e("span",[t._v("\n    "+t._s(t.defaultEmptyMessage||t.$t("CHAT_LIST.NO_CONTENT"))+"\n  ")])],2)}),[],!1,null,null,null);e.a=u.exports},2730:function(t,e,n){"use strict";n(41);var a=n(90),r=n(1921),i=n(2731);e.a={methods:{onFileUpload:function(t){this.globalConfig.directUploadsEnabled?this.onDirectFileUpload(t):this.onIndirectFileUpload(t)},onDirectFileUpload:function(t){var e=this,n=this.isATwilioSMSChannel?a.k:a.j;t&&(Object(r.a)(t,n)?new i.DirectUpload(t.file,"/api/v1/accounts/".concat(this.accountId,"/conversations/").concat(this.currentChat.id,"/direct_uploads"),{directUploadWillCreateBlobWithXHR:function(t){t.setRequestHeader("api_access_token",e.currentUser.access_token)}}).create((function(n,a){n?e.showAlert(n):e.attachFile({file:t,blob:a})})):this.showAlert(this.$t("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:n})))},onIndirectFileUpload:function(t){var e=this.isATwilioSMSChannel?a.k:a.j;t&&(Object(r.a)(t,e)?this.attachFile({file:t}):this.showAlert(this.$t("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:e})))}}}},2732:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n(83),n(49),n(266),n(2778),n(4),n(31),n(7),n(33),n(16),n(20),n(21),n(69),n(64),n(37);function a(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var i=function(t){var e=t.toUpperCase().split("").map((function(t){return 127397+t.charCodeAt()}));return String.fromCodePoint.apply(String,a(e))}},2734:function(t,e,n){"use strict";n(30),n(45),n(37),n(10),n(4),n(8),n(11),n(9),n(12),n(7),n(22);var a=n(25),r=n(261),i=n(2724),s=n(2688),o=n(1914),c=n(271),l=n(13),u=n(2663),d=n(92),p=(n(41),n(31),n(33),n(16),n(20),n(21),n(69),n(64),n(2741)),m={props:{option:{type:Object,default:function(){}},subMenuAvailable:{type:Boolean,default:!0}}},f=(n(2758),n(5)),h=Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"menu-with-submenu min-width-calc w-full p-1 flex items-center h-7 rounded-md relative bg-white dark:bg-slate-700 justify-between hover:bg-woot-75 cursor-pointer dark:hover:bg-slate-800",class:t.subMenuAvailable?"":"opacity-50 cursor-not-allowed"},[e("div",{staticClass:"flex items-center"},[e("fluent-icon",{staticClass:"menu-icon",attrs:{icon:t.option.icon,size:"14"}}),t._v(" "),e("p",{staticClass:"my-0 mx-2 text-xs"},[t._v(t._s(t.option.label))])],1),t._v(" "),e("fluent-icon",{attrs:{icon:"chevron-right",size:"12"}}),t._v(" "),t.subMenuAvailable?e("div",{staticClass:"submenu bg-white dark:bg-slate-700 p-1 shadow-lg rounded-md absolute left-full top-0 hidden min-h-min max-h-[15rem] overflow-y-auto overflow-x-hidden cursor-pointer"},[t._t("default")],2):t._e()],1)}),[],!1,null,"4e48e5ce",null).exports,b=n(125),v=n(1925),g={components:{Spinner:n(170).a}},_=(n(2759),Object(f.a)(g,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"agent-placeholder"},[e("spinner"),t._v(" "),e("p",[t._v(t._s(t.$t("CONVERSATION.CARD_CONTEXT_MENU.AGENTS_LOADING")))])],1)}),[],!1,null,"7265fabf",null).exports);function C(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){A(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w={components:{MenuItem:p.a,MenuItemWithSubmenu:h,AgentLoadingPlaceholder:_},mixins:[v.a],props:{status:{type:String,default:""},hasUnreadMessages:{type:Boolean,default:!1},inboxId:{type:Number,default:null},priority:{type:String,default:null}},data:function(){var t=this;return{STATUS_TYPE:b.b.STATUS_TYPE,unreadOption:{label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.MARK_AS_UNREAD"),icon:"mail"},statusMenuConfig:[{key:b.b.STATUS_TYPE.RESOLVED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.RESOLVED"),icon:"checkmark"},{key:b.b.STATUS_TYPE.PENDING,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.PENDING"),icon:"book-clock"},{key:b.b.STATUS_TYPE.OPEN,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.REOPEN"),icon:"arrow-redo"}],snoozeOption:{key:b.b.STATUS_TYPE.SNOOZED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.SNOOZE.TITLE"),icon:"snooze"},priorityConfig:{key:"priority",label:this.$t("CONVERSATION.PRIORITY.TITLE"),icon:"warning",options:[{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),key:null},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),key:"urgent"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),key:"high"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),key:"medium"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),key:"low"}].filter((function(e){return e.key!==t.priority}))},labelMenuConfig:{key:"label",icon:"tag",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_LABEL")},agentMenuConfig:{key:"agent",icon:"person-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_AGENT")},teamMenuConfig:{key:"team",icon:"people-team-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_TEAM")}}},computed:T(T({},Object(a.mapGetters)({labels:"labels/getLabels",teams:"teams/getTeams",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags"})),{},{filteredAgentOnAvailability:function(){var t=this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.inboxId),e=this.getAgentsByUpdatedPresence(t);return this.sortedAgentsByAvailability(e)},assignableAgents:function(){return[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"}].concat(C(this.filteredAgentOnAvailability))}}),mounted:function(){this.$store.dispatch("inboxAssignableAgents/fetch",[this.inboxId])},methods:{toggleStatus:function(t,e){this.$emit("update-conversation",t,e)},snoozeConversation:function(){document.querySelector("ninja-keys").open({parent:"snooze_conversation"})},assignPriority:function(t){this.$emit("assign-priority",t)},show:function(t){return this.status!==t},generateMenuLabelConfig:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return T(T(T(T(T(T(T(T({key:t.id},"icon"===e&&{icon:t.icon}),"label"===e&&{color:t.color}),"agent"===e&&{thumbnail:t.thumbnail}),"agent"===e&&{status:t.availability_status}),"text"===e&&{label:t.label}),"label"===e&&{label:t.title}),"agent"===e&&{label:t.name}),"team"===e&&{label:t.name})}}},E=w,x=Object(f.a)(E,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white dark:bg-slate-700 shadow-xl rounded-md p-1"},[t.hasUnreadMessages?t._e():e("menu-item",{attrs:{option:t.unreadOption,variant:"icon"},on:{click:function(e){return t.$emit("mark-as-unread")}}}),t._v(" "),t._l(t.statusMenuConfig,(function(n){return[t.show(n.key)?e("menu-item",{key:n.key,attrs:{option:n,variant:"icon"},on:{click:function(e){return t.toggleStatus(n.key,null)}}}):t._e()]})),t._v(" "),t.show(t.snoozeOption.key)?e("menu-item",{attrs:{option:t.snoozeOption,variant:"icon"},on:{click:function(e){return t.snoozeConversation()}}}):t._e(),t._v(" "),e("menu-item-with-submenu",{attrs:{option:t.priorityConfig}},t._l(t.priorityConfig.options,(function(n,a){return e("menu-item",{key:a,attrs:{option:n},on:{click:function(e){return t.assignPriority(n.key)}}})})),1),t._v(" "),e("menu-item-with-submenu",{attrs:{option:t.labelMenuConfig,"sub-menu-available":!!t.labels.length}},t._l(t.labels,(function(n){return e("menu-item",{key:n.id,attrs:{option:t.generateMenuLabelConfig(n,"label"),variant:"label"},on:{click:function(e){return t.$emit("assign-label",n)}}})})),1),t._v(" "),e("menu-item-with-submenu",{attrs:{option:t.agentMenuConfig,"sub-menu-available":!!t.assignableAgents.length}},[t.assignableAgentsUiFlags.isFetching?e("agent-loading-placeholder"):t._l(t.assignableAgents,(function(n){return e("menu-item",{key:n.id,attrs:{option:t.generateMenuLabelConfig(n,"agent"),variant:"agent"},on:{click:function(e){return t.$emit("assign-agent",n)}}})}))],2),t._v(" "),e("menu-item-with-submenu",{attrs:{option:t.teamMenuConfig,"sub-menu-available":!!t.teams.length}},t._l(t.teams,(function(n){return e("menu-item",{key:n.id,attrs:{option:t.generateMenuLabelConfig(n,"team")},on:{click:function(e){return t.$emit("assign-team",n)}}})})),1)],2)}),[],!1,null,null,null).exports,S=n(79),N=36e5,R=864e5,I={name:"TimeAgo",mixins:[o.a],props:{isAutoRefreshEnabled:{type:Boolean,default:!0},lastActivityTimestamp:{type:[String,Date,Number],default:""},createdAtTimestamp:{type:[String,Date,Number],default:""}},data:function(){return{lastActivityAtTimeAgo:this.dynamicTime(this.lastActivityTimestamp),createdAtTimeAgo:this.dynamicTime(this.createdAtTimestamp),timer:null}},computed:{lastActivityTime:function(){return this.shortTimestamp(this.lastActivityAtTimeAgo)},createdAtTime:function(){return this.shortTimestamp(this.createdAtTimeAgo)},createdAt:function(){return Date.now()-1e3*this.createdAtTimestamp>2592e6?"".concat(this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.OLDEST")," ").concat(this.dateFormat(this.createdAtTimestamp)):"".concat(this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.LATEST")," ").concat(this.createdAtTimeAgo)},lastActivity:function(){return Date.now()-1e3*this.lastActivityTimestamp>2592e6?"".concat(this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.NOT_ACTIVE")," ").concat(this.dateFormat(this.lastActivityTimestamp)):"".concat(this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.ACTIVE")," ").concat(this.lastActivityAtTimeAgo)},tooltipText:function(){return"".concat(this.createdAt,"\n              ").concat(this.lastActivity)}},watch:{lastActivityTimestamp:function(){this.lastActivityAtTimeAgo=this.dynamicTime(this.lastActivityTimestamp)},createdAtTimestamp:function(){this.createdAtTimeAgo=this.dynamicTime(this.createdAtTimestamp)}},mounted:function(){this.isAutoRefreshEnabled&&this.createTimer()},beforeDestroy:function(){clearTimeout(this.timer)},methods:{createTimer:function(){var t=this;this.timer=setTimeout((function(){t.lastActivityAtTimeAgo=t.dynamicTime(t.lastActivityTimestamp),t.createdAtTimeAgo=t.dynamicTime(t.createdAtTimestamp),t.createTimer()}),this.refreshTime())},refreshTime:function(){var t=Date.now()-1e3*this.lastActivityTimestamp;return t>R?R:t>N?N:6e4}}},M=Object(f.a)(I,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:{content:t.tooltipText,delay:{show:1500,hide:0},hideOnClick:!0},expression:"{\n    content: tooltipText,\n    delay: { show: 1500, hide: 0 },\n    hideOnClick: true,\n  }",modifiers:{top:!0}}],staticClass:"text-xxs text-slate-500 dark:text-slate-500 leading-4 ml-auto hover:text-slate-900 dark:hover:text-slate-100"},[e("span",[t._v(t._s(`${t.createdAtTime} \u2022 ${t.lastActivityTime}`))])])}),[],!1,null,null,null).exports,L={mixins:[n(1940).a],props:{conversationId:{type:Number,required:!0}},data:function(){return{showAllLabels:!1,showExpandLabelButton:!1,labelPosition:-1}},watch:{activeLabels:function(){var t=this;this.$nextTick((function(){return t.computeVisibleLabelPosition()}))}},mounted:function(){this.computeVisibleLabelPosition()},methods:{onShowLabels:function(t){t.stopPropagation(),this.showAllLabels=!this.showAllLabels},computeVisibleLabelPosition:function(){var t=this,e=this.$refs.labelContainer,n=this.$refs.labelContainer.querySelectorAll(".label"),a=0;this.showExpandLabelButton=!1,Array.from(n).forEach((function(n,r){(a+=n.offsetWidth+8)<e.clientWidth-16?t.labelPosition=r:t.showExpandLabelButton=!0}))}}},$=(n(2760),Object(f.a)(L,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.activeLabels.length,expression:"activeLabels.length"}],ref:"labelContainer",staticClass:"label-container mt-0.5 mx-2 mb-0"},[e("div",{staticClass:"labels-wrap flex items-end min-w-0 flex-shrink",class:{expand:t.showAllLabels}},[t._l(t.activeLabels,(function(n,a){return e("woot-label",{key:n.id,class:{hidden:!t.showAllLabels&&a>t.labelPosition},attrs:{title:n.title,description:n.description,color:n.color,variant:"smooth",small:""}})})),t._v(" "),t.showExpandLabelButton?e("woot-button",{staticClass:"show-more--button sticky flex-shrink-0 right-0 mr-6 rtl:rotate-180",attrs:{title:t.showAllLabels?t.$t("CONVERSATION.CARD.HIDE_LABELS"):t.$t("CONVERSATION.CARD.SHOW_LABELS"),"color-scheme":"secondary",variant:"hollow",icon:t.showAllLabels?"chevron-left":"chevron-right",size:"tiny"},on:{click:t.onShowLabels}}):t._e()],2)])}),[],!1,null,"d5b34c8e",null).exports),k=(n(68),n(97),n(273),n(90));function P(t){return function(t){if(Array.isArray(t))return D(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return D(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var j={name:"PriorityMark",props:{priority:{type:String,default:"",validate:function(t){return[].concat(P(Object.values(k.f)),[""]).includes(t)}}},data:function(){return{CONVERSATION_PRIORITY:k.f}},computed:{tooltipText:function(){return this.$t("CONVERSATION.PRIORITY.OPTIONS.".concat(this.priority.toUpperCase()))},isUrgent:function(){return this.priority===k.f.URGENT}}},U=Object(f.a)(j,(function(){var t=this,e=t._self._c;return t.priority?e("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.tooltipText,delay:{show:1500,hide:0},hideOnClick:!0},expression:"{\n    content: tooltipText,\n    delay: { show: 1500, hide: 0 },\n    hideOnClick: true,\n  }"}],staticClass:"shrink-0 rounded-sm inline-flex w-3.5 h-3.5",class:{"bg-red-50 dark:bg-red-700 dark:bg-opacity-30 text-red-500 dark:text-red-600":t.isUrgent,"bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-200":!t.isUrgent}},[e("fluent-icon",{attrs:{icon:`priority-${t.priority.toLowerCase()}`,size:"14","view-box":"0 0 14 14"}})],1):t._e()}),[],!1,null,null,null).exports;function F(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function B(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(t){F(i,a,r,s,o,"next",t)}function o(t){F(i,a,r,s,o,"throw",t)}s(void 0)}))}}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){W(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H={components:{CardLabels:$,InboxName:u.a,Thumbnail:r.a,ConversationContextMenu:x,TimeAgo:M,MessagePreview:i.a,PriorityMark:U},mixins:[d.c,o.a,s.a,S.a],props:{activeLabel:{type:String,default:""},chat:{type:Object,default:function(){}},hideInboxName:{type:Boolean,default:!1},hideThumbnail:{type:Boolean,default:!1},teamId:{type:[String,Number],default:0},foldersId:{type:[String,Number],default:0},showAssignee:{type:Boolean,default:!1},conversationType:{type:String,default:""},selected:{type:Boolean,default:!1}},data:function(){return{hovered:!1,showContextMenu:!1,contextMenu:{x:null,y:null}}},computed:G(G({},Object(a.mapGetters)({currentChat:"getSelectedChat",inboxesList:"inboxes/getInboxes",activeInbox:"getSelectedInbox",currentUser:"getCurrentUser",accountId:"getCurrentAccountId"})),{},{bulkActionCheck:function(){return!this.hideThumbnail&&!this.hovered&&!this.selected},chatMetadata:function(){return this.chat.meta||{}},assignee:function(){return this.chatMetadata.assignee||{}},currentContact:function(){return this.$store.getters["contacts/getContact"](this.chatMetadata.sender.id)},isActiveChat:function(){return this.currentChat.id===this.chat.id},unreadCount:function(){return this.chat.unread_count},hasUnread:function(){return this.unreadCount>0},isInboxNameVisible:function(){return!this.activeInbox},lastMessageInChat:function(){return this.lastMessage(this.chat)},inbox:function(){var t=this.chat.inbox_id;return this.$store.getters["inboxes/getInbox"](t)},showInboxName:function(){return!this.hideInboxName&&this.isInboxNameVisible&&this.inboxesList.length>1},inboxName:function(){return this.inbox.name||""}}),methods:{onCardClick:function(t){var e=this.activeInbox,n=this.chat,a=Object(l.c)(Object(l.b)({accountId:this.accountId,activeInbox:e,id:n.id,label:this.activeLabel,teamId:this.teamId,foldersId:this.foldersId,conversationType:this.conversationType}));t.metaKey||t.ctrlKey?window.open(window.chatwootConfig.hostURL+a,"_blank","noopener noreferrer nofollow"):this.isActiveChat||c.a.push({path:a})},onCardHover:function(){this.hovered=!this.hideThumbnail},onCardLeave:function(){this.hovered=!1},onSelectConversation:function(t){var e=t?"select-conversation":"de-select-conversation";this.$emit(e,this.chat.id,this.inbox.id)},openContextMenu:function(t){t.preventDefault(),this.$emit("context-menu-toggle",!0),this.contextMenu.x=t.pageX||t.clientX,this.contextMenu.y=t.pageY||t.clientY,this.showContextMenu=!0},closeContextMenu:function(){this.$emit("context-menu-toggle",!1),this.showContextMenu=!1,this.contextMenu.x=null,this.contextMenu.y=null},onUpdateConversation:function(t,e){this.closeContextMenu(),this.$emit("update-conversation-status",this.chat.id,t,e)},onAssignAgent:function(t){var e=this;return B(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$emit("assign-agent",t,[e.chat.id]),e.closeContextMenu();case 2:case"end":return n.stop()}}),n)})))()},onAssignLabel:function(t){var e=this;return B(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$emit("assign-label",[t.title],[e.chat.id]),e.closeContextMenu();case 2:case"end":return n.stop()}}),n)})))()},onAssignTeam:function(t){var e=this;return B(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$emit("assign-team",t,e.chat.id),e.closeContextMenu();case 2:case"end":return n.stop()}}),n)})))()},markAsUnread:function(){var t=this;return B(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$emit("mark-as-unread",t.chat.id),t.closeContextMenu();case 2:case"end":return e.stop()}}),e)})))()},assignPriority:function(t){var e=this;return B(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$emit("assign-priority",t,e.chat.id),e.closeContextMenu();case 2:case"end":return n.stop()}}),n)})))()}}},z=(n(2761),Object(f.a)(H,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative flex items-start flex-grow-0 flex-shrink-0 w-auto max-w-full px-4 py-0 border-t-0 border-b-0 border-l-2 border-r-0 border-transparent border-solid cursor-pointer conversation hover:bg-slate-25 dark:hover:bg-slate-800 group",class:{"active bg-slate-25 dark:bg-slate-800 border-woot-500":t.isActiveChat,"unread-chat":t.hasUnread,"has-inbox-name":t.showInboxName,"conversation-selected":t.selected},on:{mouseenter:t.onCardHover,mouseleave:t.onCardLeave,click:t.onCardClick,contextmenu:function(e){return t.openContextMenu(e)}}},[t.hovered||t.selected?e("label",{staticClass:"checkbox-wrapper",on:{click:function(t){t.stopPropagation()}}},[e("input",{staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{value:t.selected,checked:t.selected},on:{change:function(e){return t.onSelectConversation(e.target.checked)}}})]):t._e(),t._v(" "),t.bulkActionCheck?e("thumbnail",{staticClass:"columns",attrs:{src:t.currentContact.thumbnail,badge:t.inboxBadge,username:t.currentContact.name,status:t.currentContact.availability_status,size:"40px"}}):t._e(),t._v(" "),e("div",{staticClass:"px-0 py-3 border-b group-last:border-transparent group-hover:border-transparent border-slate-50 dark:border-slate-800/75 columns"},[e("div",{staticClass:"flex justify-between"},[t.showInboxName?e("inbox-name",{attrs:{inbox:t.inbox}}):t._e(),t._v(" "),e("div",{staticClass:"flex gap-2 ml-2 rtl:mr-2 rtl:ml-0"},[t.showAssignee&&t.assignee.name?e("span",{staticClass:"text-slate-500 dark:text-slate-400 text-xs font-medium leading-3 py-0.5 px-0 inline-flex text-ellipsis overflow-hidden whitespace-nowrap"},[e("fluent-icon",{staticClass:"text-slate-500 dark:text-slate-400",attrs:{icon:"person",size:"12"}}),t._v("\n          "+t._s(t.assignee.name)+"\n        ")],1):t._e(),t._v(" "),e("priority-mark",{attrs:{priority:t.chat.priority}})],1)],1),t._v(" "),e("h4",{staticClass:"conversation--user text-sm my-0 mx-2 capitalize pt-0.5 text-ellipsis overflow-hidden whitespace-nowrap w-[60%] text-slate-900 dark:text-slate-100"},[t._v("\n      "+t._s(t.currentContact.name)+"\n    ")]),t._v(" "),t.lastMessageInChat?e("message-preview",{staticClass:"conversation--message my-0 mx-2 leading-6 h-6 max-w-[96%] w-[16.875rem] text-sm text-slate-700 dark:text-slate-200",attrs:{message:t.lastMessageInChat}}):e("p",{staticClass:"conversation--message text-slate-700 dark:text-slate-200 text-sm my-0 mx-2 leading-6 h-6 max-w-[96%] w-[16.875rem] overflow-hidden text-ellipsis whitespace-nowrap"},[e("fluent-icon",{staticClass:"-mt-0.5 align-middle inline-block text-slate-600 dark:text-slate-300",attrs:{size:"16",icon:"info"}}),t._v(" "),e("span",[t._v("\n        "+t._s(t.$t("CHAT_LIST.NO_MESSAGES"))+"\n      ")])],1),t._v(" "),e("div",{staticClass:"absolute flex flex-col conversation--meta right-4 top-4"},[e("span",{staticClass:"ml-auto font-normal leading-4 text-black-600 text-xxs"},[e("time-ago",{attrs:{"last-activity-timestamp":t.chat.timestamp,"created-at-timestamp":t.chat.created_at}})],1),t._v(" "),e("span",{staticClass:"unread shadow-lg rounded-full hidden text-xxs font-semibold h-4 leading-4 ml-auto mt-1 min-w-[1rem] px-1 py-0 text-center text-white bg-green-400"},[t._v("\n        "+t._s(t.unreadCount>9?"9+":t.unreadCount)+"\n      ")])]),t._v(" "),e("card-labels",{attrs:{"conversation-id":t.chat.id}})],1),t._v(" "),t.showContextMenu?e("woot-context-menu",{ref:"menu",attrs:{x:t.contextMenu.x,y:t.contextMenu.y},on:{close:t.closeContextMenu}},[e("conversation-context-menu",{attrs:{status:t.chat.status,"inbox-id":t.inbox.id,priority:t.chat.priority,"has-unread-messages":t.hasUnread},on:{"update-conversation":t.onUpdateConversation,"assign-agent":t.onAssignAgent,"assign-label":t.onAssignLabel,"assign-team":t.onAssignTeam,"mark-as-unread":t.markAsUnread,"assign-priority":t.assignPriority}})],1):t._e()],1)}),[],!1,null,"edf709a2",null));e.a=z.exports},2735:function(t,e,n){"use strict";n(30),n(45),n(7),n(22),n(10),n(4),n(8),n(11),n(9),n(12),n(68),n(97),n(49),n(268);var a={name:"AttributeDropDownItem",props:{title:{type:String,default:""}},methods:{onClick:function(){this.$emit("click",this.title)}}},r=(n(2781),n(5)),i=Object(r.a)(a,(function(){var t=this,e=t._self._c;return e("woot-dropdown-item",[e("woot-button",{attrs:{variant:"clear"},on:{click:t.onClick}},[e("span",{staticClass:"label-text",attrs:{title:t.title}},[t._v(t._s(t.title))])])],1)}),[],!1,null,"0258e253",null).exports,s=n(2667);function o(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}var c={components:{CustomAttributeDropDownItem:i},mixins:[s.a],props:{attributeType:{type:String,default:"conversation_attribute"},contactId:{type:Number,default:null}},data:function(){return{search:""}},computed:{filteredAttributes:function(){var t=this;return this.attributes.filter((function(e){return!Object.keys(t.customAttributes).includes(e.attribute_key)})).filter((function(e){return e.attribute_display_name.toLowerCase().includes(t.search.toLowerCase())}))},noResult:function(){return 0===this.filteredAttributes.length}},mounted:function(){this.focusInput()},methods:{focusInput:function(){this.$refs.searchbar.focus()},addNewAttribute:function(){this.$router.push("/app/accounts/".concat(this.accountId,"/settings/custom-attributes/list"))},onAddAttribute:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.$emit("add-attribute",t);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(t){o(i,a,r,s,c,"next",t)}function c(t){o(i,a,r,s,c,"throw",t)}s(void 0)}))})()}}},l=c,u=(n(2782),Object(r.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col w-full max-h-[12.5rem]"},[e("h4",{staticClass:"text-sm text-slate-800 dark:text-slate-100 mb-1 overflow-hidden whitespace-nowrap text-ellipsis flex-grow"},[t._v("\n    "+t._s(t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_SELECT.TITLE"))+"\n  ")]),t._v(" "),e("div",{staticClass:"mb-2 flex-shrink-0 flex-grow-0 flex-auto max-h-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"searchbar",staticClass:"search-input",attrs:{type:"text",autofocus:"true",placeholder:t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_SELECT.PLACEHOLDER")},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"flex justify-start items-start flex-grow flex-shrink flex-auto overflow-auto h-32"},[e("div",{staticClass:"w-full h-full"},[e("woot-dropdown-menu",t._l(t.filteredAttributes,(function(n){return e("custom-attribute-drop-down-item",{key:n.attribute_display_name,attrs:{title:n.attribute_display_name},on:{click:function(e){return t.onAddAttribute(n)}}})})),1),t._v(" "),t.noResult?e("div",{staticClass:"w-full justify-center items-center flex mb-2 h-[70%] text-slate-500 dark:text-slate-300 py-2 px-2.5 overflow-hidden whitespace-nowrap text-ellipsis text-sm"},[t._v("\n        "+t._s(t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_SELECT.NO_RESULT"))+"\n      ")]):t._e(),t._v(" "),e("woot-button",{staticClass:"float-right",attrs:{icon:"add",size:"tiny"},on:{click:t.addNewAttribute}},[t._v("\n        "+t._s(t.$t("CUSTOM_ATTRIBUTES.FORM.ADD.TITLE"))+"\n      ")])],1)])])}),[],!1,null,"5fd82ccc",null).exports),d=n(79),p=n(149),m=n(109);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}var g={components:{CustomAttributeDropDown:u},mixins:[p.mixin,d.a,s.a],props:{attributeType:{type:String,default:"conversation_attribute"},contactId:{type:Number,default:null}},data:function(){return{showAttributeDropDown:!1}},methods:{addAttribute:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var a,r,i,s,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.attribute_key,r=t.attribute_display_type,i=t.default_value,s=!("checkbox"===r)&&(i||null),"conversation_attribute"!==n.attributeType){e.next=9;break}return e.next=7,n.$store.dispatch("updateCustomAttributes",{conversationId:n.conversationId,customAttributes:h(h({},n.customAttributes),{},b({},a,s))});case 7:e.next=11;break;case 9:return e.next=11,n.$store.dispatch("contacts/update",{id:n.contactId,custom_attributes:h(h({},n.customAttributes),{},b({},a,s))});case 11:bus.$emit(m.a.FOCUS_CUSTOM_ATTRIBUTE,a),n.showAlert(n.$t("CUSTOM_ATTRIBUTES.FORM.ADD.SUCCESS")),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),c=(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.message)||n.$t("CUSTOM_ATTRIBUTES.FORM.ADD.ERROR"),n.showAlert(c);case 19:return e.prev=19,n.closeDropdown(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,15,19,22]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(t){v(i,a,r,s,o,"next",t)}function o(t){v(i,a,r,s,o,"throw",t)}s(void 0)}))})()},toggleAttributeDropDown:function(){this.showAttributeDropDown=!this.showAttributeDropDown},closeDropdown:function(){this.showAttributeDropDown=!1}}},_=g,C=(n(2783),Object(r.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-attribute--selector"},[e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.closeDropdown,expression:"closeDropdown"}],staticClass:"label-wrap",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.closeDropdown.apply(null,arguments)}}},[e("woot-button",{attrs:{size:"small",variant:"link",icon:"add"},on:{click:t.toggleAttributeDropDown}},[t._v("\n      "+t._s(t.$t("CUSTOM_ATTRIBUTES.ADD_BUTTON_TEXT"))+"\n    ")]),t._v(" "),e("div",{staticClass:"dropdown-wrap"},[e("div",{staticClass:"dropdown-pane",class:{"dropdown-pane--open":t.showAttributeDropDown}},[t.showAttributeDropDown?e("custom-attribute-drop-down",{attrs:{"attribute-type":t.attributeType,"contact-id":t.contactId},on:{"add-attribute":t.addAttribute}}):t._e()],1)])],1)])}),[],!1,null,"377d269f",null));e.a=C.exports},2737:function(t,e,n){"use strict";n(30),n(45),n(83),n(7),n(22),n(10),n(4),n(8),n(11),n(9),n(12),n(378),n(379),n(31),n(33),n(16),n(20),n(21),n(37);var a=n(286),r=n(3182),i=n(57),s=n(109),o=n(2676),c=n(13),l={components:{MultiselectDropdown:o.a},props:{label:{type:String,required:!0},values:{type:Array,default:function(){return[]}},value:{type:[String,Number,Boolean],default:""},showActions:{type:Boolean,default:!1},attributeType:{type:String,default:"text"},attributeKey:{type:String,required:!0},contactId:{type:Number,default:null}},data:function(){return{isEditing:!1,editedValue:null}},computed:{displayValue:function(){return this.isAttributeTypeDate?new Date(this.value||new Date).toLocaleDateString():this.isAttributeTypeCheckbox?"false"!==this.value&&this.value:this.value},formattedValue:function(){return this.isAttributeTypeDate?Object(a.a)(this.value?new Date(this.value):new Date,"yyyy-MM-dd"):this.value},listOptions:function(){return this.values.map((function(t,e){return{id:e+1,name:t}}))},selectedItem:function(){return{id:this.values.indexOf(this.editedValue)+1,name:this.editedValue}},isAttributeTypeCheckbox:function(){return"checkbox"===this.attributeType},isAttributeTypeList:function(){return"list"===this.attributeType},isAttributeTypeLink:function(){return"link"===this.attributeType},isAttributeTypeDate:function(){return"date"===this.attributeType},urlValue:function(){return Object(c.f)(this.value)?this.value:"---"},hrefURL:function(){return Object(c.f)(this.value)?this.value:""},notAttributeTypeCheckboxAndList:function(){return!this.isAttributeTypeCheckbox&&!this.isAttributeTypeList},inputType:function(){return this.isAttributeTypeLink?"url":this.attributeType},shouldShowErrorMessage:function(){return this.$v.editedValue.$error},errorMessage:function(){return this.$v.editedValue.url?this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.INVALID_URL"):this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.REQUIRED")}},watch:{value:function(){this.isEditing=!1,this.editedValue=this.formattedValue}},validations:function(){return this.isAttributeTypeLink?{editedValue:{required:i.required,url:i.url}}:{editedValue:{required:i.required}}},mounted:function(){this.editedValue=this.formattedValue,bus.$on(s.a.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},destroyed:function(){bus.$off(s.a.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},methods:{onFocusAttribute:function(t){this.attributeKey===t&&this.onEdit()},focusInput:function(){this.$refs.inputfield&&this.$refs.inputfield.focus()},onEdit:function(){var t=this;this.isEditing=!0,this.$nextTick((function(){t.focusInput()}))},onUpdateListValue:function(t){t&&(this.editedValue=t.name,this.onUpdate())},onUpdate:function(){var t="date"===this.attributeType?Object(r.a)(this.editedValue):this.editedValue;this.$v.$touch(),this.$v.$invalid||(this.isEditing=!1,this.$emit("update",this.attributeKey,t))},onDelete:function(){this.isEditing=!1,this.$emit("delete",this.attributeKey)},onCopy:function(){this.$emit("copy",this.value)}}},u=(n(2779),n(5)),d=Object(u.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"py-3 px-4"},[e("div",{staticClass:"flex items-center mb-1"},[e("h4",{staticClass:"text-block-title flex items-center m-0 w-full error"},[t.isAttributeTypeCheckbox?e("div",{staticClass:"checkbox-wrap"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editedValue,expression:"editedValue"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.editedValue)?t._i(t.editedValue,null)>-1:t.editedValue},on:{change:[function(e){var n=t.editedValue,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&(t.editedValue=n.concat([null])):i>-1&&(t.editedValue=n.slice(0,i).concat(n.slice(i+1)))}else t.editedValue=r},t.onUpdate]}})]):t._e(),t._v(" "),e("div",{staticClass:"flex items-center justify-between w-full"},[e("span",{staticClass:"attribute-name",class:{error:t.$v.editedValue.$error}},[t._v("\n          "+t._s(t.label)+"\n        ")]),t._v(" "),t.showActions?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:t.$t("CUSTOM_ATTRIBUTES.ACTIONS.DELETE"),expression:"$t('CUSTOM_ATTRIBUTES.ACTIONS.DELETE')",modifiers:{left:!0}}],attrs:{variant:"link",size:"medium","color-scheme":"secondary",icon:"delete","class-names":"flex justify-end w-4"},on:{click:t.onDelete}}):t._e()],1)])]),t._v(" "),t.notAttributeTypeCheckboxAndList?e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}]},[e("div",{staticClass:"input-group small"},["checkbox"===t.inputType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.editedValue,expression:"editedValue"}],ref:"inputfield",staticClass:"input-group-field",class:{error:t.$v.editedValue.$error},attrs:{autofocus:"true",type:"checkbox"},domProps:{checked:Array.isArray(t.editedValue)?t._i(t.editedValue,null)>-1:t.editedValue},on:{blur:t.$v.editedValue.$touch,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onUpdate.apply(null,arguments)},change:function(e){var n=t.editedValue,a=e.target,r=!!a.checked;if(Array.isArray(n)){var i=t._i(n,null);a.checked?i<0&&(t.editedValue=n.concat([null])):i>-1&&(t.editedValue=n.slice(0,i).concat(n.slice(i+1)))}else t.editedValue=r}}}):"radio"===t.inputType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.editedValue,expression:"editedValue"}],ref:"inputfield",staticClass:"input-group-field",class:{error:t.$v.editedValue.$error},attrs:{autofocus:"true",type:"radio"},domProps:{checked:t._q(t.editedValue,null)},on:{blur:t.$v.editedValue.$touch,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onUpdate.apply(null,arguments)},change:function(e){t.editedValue=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.editedValue,expression:"editedValue"}],ref:"inputfield",staticClass:"input-group-field",class:{error:t.$v.editedValue.$error},attrs:{autofocus:"true",type:t.inputType},domProps:{value:t.editedValue},on:{blur:t.$v.editedValue.$touch,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onUpdate.apply(null,arguments)},input:function(e){e.target.composing||(t.editedValue=e.target.value)}}}),t._v(" "),e("div",{staticClass:"input-group-button"},[e("woot-button",{attrs:{size:"small",icon:"checkmark"},on:{click:t.onUpdate}})],1)]),t._v(" "),t.shouldShowErrorMessage?e("span",{staticClass:"text-red-400 dark:text-red-500 text-sm block font-normal -mt-px w-full"},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing,expression:"!isEditing"}],staticClass:"value--view",class:{"is-editable":t.showActions}},[t.isAttributeTypeLink?e("a",{staticClass:"value inline-block rounded-sm mb-0 break-all py-0.5 px-1",attrs:{href:t.hrefURL,target:"_blank",rel:"noopener noreferrer"}},[t._v("\n        "+t._s(t.urlValue)+"\n      ")]):e("p",{staticClass:"value inline-block rounded-sm mb-0 break-all py-0.5 px-1"},[t._v("\n        "+t._s(t.displayValue||"---")+"\n      ")]),t._v(" "),e("div",{staticClass:"flex max-w-[2rem] gap-1 ml-1 rtl:mr-1 rtl:ml-0"},[t.showActions?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("CUSTOM_ATTRIBUTES.ACTIONS.COPY"),expression:"$t('CUSTOM_ATTRIBUTES.ACTIONS.COPY')"}],attrs:{variant:"link",size:"small","color-scheme":"secondary",icon:"clipboard","class-names":"edit-button"},on:{click:t.onCopy}}):t._e(),t._v(" "),t.showActions?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:t.$t("CUSTOM_ATTRIBUTES.ACTIONS.EDIT"),expression:"$t('CUSTOM_ATTRIBUTES.ACTIONS.EDIT')",modifiers:{right:!0}}],attrs:{variant:"link",size:"small","color-scheme":"secondary",icon:"edit","class-names":"edit-button"},on:{click:t.onEdit}}):t._e()],1)])]):t._e(),t._v(" "),t.isAttributeTypeList?e("div",[e("multiselect-dropdown",{attrs:{options:t.listOptions,"selected-item":t.selectedItem,"has-thumbnail":!1,"multiselector-placeholder":t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.PLACEHOLDER"),"no-search-result":t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.NO_RESULT"),"input-placeholder":t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.SEARCH_INPUT_PLACEHOLDER")},on:{click:t.onUpdateListValue}})],1):t._e()])}),[],!1,null,"4b9019e8",null),p=d.exports,m=n(79),f=n(2667),h=n(1922);function b(t){return b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function v(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function g(t){var e=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==b(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===b(e)?e:String(e)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function T(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(t){O(i,a,r,s,o,"next",t)}function o(t){O(i,a,r,s,o,"throw",t)}s(void 0)}))}}var A={components:{CustomAttribute:p},mixins:[m.a,f.a],props:{attributeType:{type:String,default:"conversation_attribute"},attributeClass:{type:String,default:""},contactId:{type:Number,default:null}},methods:{onUpdate:function(t,e){var n=this;return T(regeneratorRuntime.mark((function a(){var r,i,s;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=C(C({},n.customAttributes),{},y({},t,e)),a.prev=1,"conversation_attribute"!==n.attributeType){a.next=7;break}return a.next=5,n.$store.dispatch("updateCustomAttributes",{conversationId:n.conversationId,customAttributes:r});case 5:a.next=8;break;case 7:n.$store.dispatch("contacts/update",{id:n.contactId,custom_attributes:r});case 8:n.showAlert(n.$t("CUSTOM_ATTRIBUTES.FORM.UPDATE.SUCCESS")),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),s=(null===a.t0||void 0===a.t0||null===(i=a.t0.response)||void 0===i?void 0:i.message)||n.$t("CUSTOM_ATTRIBUTES.FORM.UPDATE.ERROR"),n.showAlert(s);case 15:case"end":return a.stop()}}),a,null,[[1,11]])})))()},onDelete:function(t){var e=this;return T(regeneratorRuntime.mark((function n(){var a,r,i,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=e.customAttributes,a[t],r=v(a,[t].map(g)),"conversation_attribute"!==e.attributeType){n.next=7;break}return n.next=5,e.$store.dispatch("updateCustomAttributes",{conversationId:e.conversationId,customAttributes:r});case 5:n.next=8;break;case 7:e.$store.dispatch("contacts/deleteCustomAttributes",{id:e.contactId,customAttributes:[t]});case 8:e.showAlert(e.$t("CUSTOM_ATTRIBUTES.FORM.DELETE.SUCCESS")),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),s=(null===n.t0||void 0===n.t0||null===(i=n.t0.response)||void 0===i?void 0:i.message)||e.$t("CUSTOM_ATTRIBUTES.FORM.DELETE.ERROR"),e.showAlert(s);case 15:case"end":return n.stop()}}),n,null,[[0,11]])})))()},onCopy:function(t){var e=this;return T(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(h.a)(t);case 2:e.showAlert(e.$t("CUSTOM_ATTRIBUTES.COPY_SUCCESSFUL"));case 3:case"end":return n.stop()}}),n)})))()}}},w=(n(2780),Object(u.a)(A,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-attributes--panel"},t._l(t.filteredAttributes,(function(n){return e("custom-attribute",{key:n.id,class:t.attributeClass,attrs:{"attribute-key":n.attribute_key,"attribute-type":n.attribute_display_type,values:n.attribute_values,label:n.attribute_display_name,icon:n.icon,emoji:"",value:n.value,"show-actions":!0},on:{update:t.onUpdate,delete:t.onDelete,copy:t.onCopy}})})),1)}),[],!1,null,"8deaed62",null));e.a=w.exports},2739:function(t,e,n){"use strict";n(49),n(266),n(65);var a=n(2138),r=n.n(a),i=function(t){return!t.length||t.replace(/\s+/g,"").split(",").every((function(t){return r()(t)}))},s={props:{ccEmails:{type:String,default:""},bccEmails:{type:String,default:""},toEmails:{type:String,default:""}},data:function(){return{showBcc:!1,ccEmailsVal:"",bccEmailsVal:"",toEmailsVal:""}},watch:{bccEmails:function(t){t!==this.bccEmailsVal&&(this.bccEmailsVal=t)},ccEmails:function(t){t!==this.ccEmailsVal&&(this.ccEmailsVal=t)},toEmails:function(t){t!==this.toEmailsVal&&(this.toEmailsVal=t)}},mounted:function(){this.ccEmailsVal=this.ccEmails,this.bccEmailsVal=this.bccEmails,this.toEmailsVal=this.toEmails},validations:{ccEmailsVal:{hasValidEmails:function(t){return i(t)}},bccEmailsVal:{hasValidEmails:function(t){return i(t)}},toEmailsVal:{hasValidEmails:function(t){return i(t)}}},methods:{handleAddBcc:function(){this.showBcc=!0},onBlur:function(){this.$v.$touch(),this.$emit("update:bccEmails",this.bccEmailsVal),this.$emit("update:ccEmails",this.ccEmailsVal),this.$emit("update:toEmails",this.toEmailsVal)}}},o=(n(2770),n(5)),c=Object(o.a)(s,(function(){var t=this,e=t._self._c;return e("div",[t.toEmails?e("div",[e("div",{staticClass:"input-group small",class:{error:t.$v.toEmailsVal.$error}},[e("label",{staticClass:"input-group-label"},[t._v("\n        "+t._s(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.TO"))+"\n      ")]),t._v(" "),e("div",{staticClass:"input-group-field"},[e("woot-input",{class:{error:t.$v.toEmailsVal.$error},attrs:{type:"text",placeholder:t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER")},on:{blur:t.onBlur},model:{value:t.$v.toEmailsVal.$model,callback:function(e){t.$set(t.$v.toEmailsVal,"$model","string"===typeof e?e.trim():e)},expression:"$v.toEmailsVal.$model"}})],1)])]):t._e(),t._v(" "),e("div",{staticClass:"input-group-wrap"},[e("div",{staticClass:"input-group small",class:{error:t.$v.ccEmailsVal.$error}},[e("label",{staticClass:"input-group-label"},[t._v("\n        "+t._s(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.LABEL"))+"\n      ")]),t._v(" "),e("div",{staticClass:"input-group-field"},[e("woot-input",{class:{error:t.$v.ccEmailsVal.$error},attrs:{type:"text",placeholder:t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER")},on:{blur:t.onBlur},model:{value:t.$v.ccEmailsVal.$model,callback:function(e){t.$set(t.$v.ccEmailsVal,"$model","string"===typeof e?e.trim():e)},expression:"$v.ccEmailsVal.$model"}})],1),t._v(" "),t.showBcc?t._e():e("woot-button",{attrs:{variant:"clear",size:"small"},on:{click:t.handleAddBcc}},[t._v("\n        "+t._s(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.ADD_BCC"))+"\n      ")])],1),t._v(" "),t.$v.ccEmailsVal.$error?e("span",{staticClass:"message"},[t._v("\n      "+t._s(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.ERROR"))+"\n    ")]):t._e()]),t._v(" "),t.showBcc?e("div",{staticClass:"input-group-wrap"},[e("div",{staticClass:"input-group small",class:{error:t.$v.bccEmailsVal.$error}},[e("label",{staticClass:"input-group-label"},[t._v("\n        "+t._s(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.LABEL"))+"\n      ")]),t._v(" "),e("div",{staticClass:"input-group-field"},[e("woot-input",{class:{error:t.$v.bccEmailsVal.$error},attrs:{type:"text",placeholder:t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.PLACEHOLDER")},on:{blur:t.onBlur},model:{value:t.$v.bccEmailsVal.$model,callback:function(e){t.$set(t.$v.bccEmailsVal,"$model","string"===typeof e?e.trim():e)},expression:"$v.bccEmailsVal.$model"}})],1)]),t._v(" "),t.$v.bccEmailsVal.$error?e("span",{staticClass:"message"},[t._v("\n      "+t._s(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.ERROR"))+"\n    ")]):t._e()]):t._e()])}),[],!1,null,"902cac70",null);e.a=c.exports},2740:function(t,e,n){"use strict";n(30),n(41),n(37),n(4),n(31),n(49),n(65),n(68),n(97),n(10),n(8),n(11),n(9),n(12),n(7),n(22);var a=n(79),r=n(364),i=n(57),s=n(1920),o=n(223),c=n(2648);function l(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(t){l(i,a,r,s,o,"next",t)}function o(t){l(i,a,r,s,o,"throw",t)}s(void 0)}))}}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={mixins:[a.a],props:{contact:{type:Object,default:function(){return{}}},inProgress:{type:Boolean,default:!1},onSubmit:{type:Function,default:function(){}}},data:function(){return{countries:s.a,companyName:"",description:"",email:"",name:"",phoneNumber:"",activeDialCode:"",avatarFile:null,avatarUrl:"",country:{id:"",name:""},city:"",socialProfileUserNames:{facebook:"",twitter:"",linkedin:"",github:""},socialProfileKeys:[{key:"facebook",prefixURL:"https://facebook.com/"},{key:"twitter",prefixURL:"https://twitter.com/"},{key:"linkedin",prefixURL:"https://linkedin.com/"},{key:"github",prefixURL:"https://github.com/"}]}},validations:{name:{required:i.required},description:{},email:{email:i.email},companyName:{},phoneNumber:{},bio:{}},computed:{parsePhoneNumber:function(){return Object(c.a)(this.phoneNumber)},isPhoneNumberNotValid:function(){return""!==this.phoneNumber&&(!Object(o.d)(this.phoneNumber,this.activeDialCode)||""!==this.phoneNumber&&""===this.activeDialCode)},phoneNumberError:function(){return""===this.activeDialCode?this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DIAL_CODE_ERROR"):Object(o.d)(this.phoneNumber,this.activeDialCode)?"":this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.ERROR")},setPhoneNumber:function(){return this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode?this.phoneNumber:""===this.phoneNumber&&""!==this.activeDialCode?"":this.activeDialCode?"".concat(this.activeDialCode).concat(this.phoneNumber):""}},watch:{contact:function(){this.setContactObject()}},mounted:function(){this.setContactObject(),this.setDialCode()},methods:{onCancel:function(){this.$emit("cancel")},onSuccess:function(){this.$emit("success")},countryNameWithCode:function(t){var e=t.name,n=t.id;return n?e||n?"".concat(e," (").concat(n,")"):"":e},setDialCode:function(){if(""!==this.phoneNumber&&this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode){var t=this.parsePhoneNumber.countryCallingCode;this.activeDialCode="+".concat(t)}},setContactObject:function(){var t=this.contact,e=t.email,n=t.phone_number,a=t.name,r=this.contact.additional_attributes||{};this.name=a||"",this.email=e||"",this.phoneNumber=n||"",this.companyName=r.company_name||"",this.country={id:r.country_code||"",name:r.country||this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")},this.city=r.city||"",this.description=r.description||"",this.avatarUrl=this.contact.thumbnail||"";var i=r.social_profiles,s=void 0===i?{}:i,o=r.screen_name;this.socialProfileUserNames={twitter:s.twitter||o||"",facebook:s.facebook||"",linkedin:s.linkedin||"",github:s.github||"",instagram:s.instagram||""}},getContactObject:function(){null===this.country&&(this.country={id:"",name:""});var t={id:this.contact.id,name:this.name,email:this.email,phone_number:this.setPhoneNumber,additional_attributes:p(p({},this.contact.additional_attributes),{},{description:this.description,company_name:this.companyName,country_code:this.country.id,country:this.country.name===this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")?"":this.country.name,city:this.city,social_profiles:this.socialProfileUserNames})};return this.avatarFile&&(t.avatar=this.avatarFile,t.isFormData=!0),t},onPhoneNumberInputChange:function(t,e){this.activeDialCode=e},setPhoneCode:function(t){if(""!==this.phoneNumber&&this.parsePhoneNumber){var e=this.parsePhoneNumber.countryCallingCode;if(e===t)return;this.activeDialCode="+".concat(e);var n=this.phoneNumber.replace("+".concat(e),"".concat(t));this.phoneNumber=n}else this.activeDialCode=t},handleSubmit:function(){var t=this;return u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$v.$touch(),!t.$v.$invalid&&!t.isPhoneNumberNotValid){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.onSubmit(t.getContactObject());case 6:t.onSuccess(),t.showAlert(t.$t("CONTACT_FORM.SUCCESS_MESSAGE")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),e.t0 instanceof r.a?e.t0.data.includes("email")?t.showAlert(t.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.DUPLICATE")):e.t0.data.includes("phone_number")&&t.showAlert(t.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):e.t0 instanceof r.b?t.showAlert(e.t0.data):t.showAlert(t.$t("CONTACT_FORM.ERROR_MESSAGE"));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()},handleImageUpload:function(t){var e=t.file,n=t.url;this.avatarFile=e,this.avatarUrl=n},handleAvatarDelete:function(){var t=this;return u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.contact||!t.contact.id){e.next=5;break}return e.next=4,t.$store.dispatch("contacts/deleteAvatar",t.contact.id);case 4:t.showAlert(t.$t("CONTACT_FORM.DELETE_AVATAR.API.SUCCESS_MESSAGE"));case 5:t.avatarFile=null,t.avatarUrl="",t.activeDialCode="",e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t.showAlert(e.t0.message?e.t0.message:t.$t("CONTACT_FORM.DELETE_AVATAR.API.ERROR_MESSAGE"));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}},h=(n(2769),n(5)),b=Object(h.a)(f,(function(){var t=this,e=t._self._c;return e("form",{staticClass:"contact--form w-full pt-6 px-8 pb-8",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("div",[e("div",{staticClass:"w-full"},[e("woot-avatar-uploader",{staticClass:"settings-item",attrs:{label:t.$t("CONTACT_FORM.FORM.AVATAR.LABEL"),src:t.avatarUrl,"username-avatar":t.name,"delete-avatar":!!t.avatarUrl},on:{change:t.handleImageUpload,onAvatarDelete:t.handleAvatarDelete}})],1)]),t._v(" "),e("div",[e("div",{staticClass:"w-full"},[e("label",{class:{error:t.$v.name.$error}},[t._v("\n        "+t._s(t.$t("CONTACT_FORM.FORM.NAME.LABEL"))+"\n        "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("CONTACT_FORM.FORM.NAME.PLACEHOLDER")},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value.trim())},t.$v.name.$touch],blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("label",{class:{error:t.$v.email.$error}},[t._v("\n        "+t._s(t.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.LABEL"))+"\n        "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email,expression:"email",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.PLACEHOLDER")},domProps:{value:t.email},on:{input:[function(e){e.target.composing||(t.email=e.target.value.trim())},t.$v.email.$touch],blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.email.$error?e("span",{staticClass:"message"},[t._v("\n          "+t._s(t.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.ERROR"))+"\n        ")]):t._e()])])]),t._v(" "),e("div",{staticClass:"w-full"},[e("label",{class:{error:t.$v.description.$error}},[t._v("\n      "+t._s(t.$t("CONTACT_FORM.FORM.BIO.LABEL"))+"\n      "),e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.description,expression:"description",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("CONTACT_FORM.FORM.BIO.PLACEHOLDER")},domProps:{value:t.description},on:{input:[function(e){e.target.composing||(t.description=e.target.value.trim())},t.$v.description.$touch],blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),e("div",[e("div",{staticClass:"w-full"},[e("label",{class:{error:t.isPhoneNumberNotValid}},[t._v("\n        "+t._s(t.$t("CONTACT_FORM.FORM.PHONE_NUMBER.LABEL"))+"\n        "),e("woot-phone-input",{attrs:{value:t.phoneNumber,error:t.isPhoneNumberNotValid,placeholder:t.$t("CONTACT_FORM.FORM.PHONE_NUMBER.PLACEHOLDER")},on:{input:t.onPhoneNumberInputChange,blur:t.$v.phoneNumber.$touch,setCode:t.setPhoneCode},model:{value:t.phoneNumber,callback:function(e){t.phoneNumber=e},expression:"phoneNumber"}}),t._v(" "),t.isPhoneNumberNotValid?e("span",{staticClass:"message"},[t._v("\n          "+t._s(t.phoneNumberError)+"\n        ")]):t._e()],1),t._v(" "),t.isPhoneNumberNotValid||!t.phoneNumber?e("div",{staticClass:"callout small warning text-sm dark:bg-yellow-200/20 dark:text-yellow-400"},[t._v("\n        "+t._s(t.$t("CONTACT_FORM.FORM.PHONE_NUMBER.HELP"))+"\n      ")]):t._e()])]),t._v(" "),e("woot-input",{staticClass:"w-full",attrs:{label:t.$t("CONTACT_FORM.FORM.COMPANY_NAME.LABEL"),placeholder:t.$t("CONTACT_FORM.FORM.COMPANY_NAME.PLACEHOLDER")},model:{value:t.companyName,callback:function(e){t.companyName="string"===typeof e?e.trim():e},expression:"companyName"}}),t._v(" "),e("div",[e("div",{staticClass:"w-full"},[e("label",[t._v("\n        "+t._s(t.$t("CONTACT_FORM.FORM.COUNTRY.LABEL"))+"\n      ")]),t._v(" "),e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:t.$t("CONTACT_FORM.FORM.COUNTRY.PLACEHOLDER"),"selected-label":"","select-label":t.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_PLACEHOLDER"),"deselect-label":t.$t("CONTACT_FORM.FORM.COUNTRY.REMOVE"),"custom-label":t.countryNameWithCode,"max-height":160,options:t.countries,"allow-empty":!0,"option-height":104},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}})],1)]),t._v(" "),e("woot-input",{staticClass:"w-full",attrs:{label:t.$t("CONTACT_FORM.FORM.CITY.LABEL"),placeholder:t.$t("CONTACT_FORM.FORM.CITY.PLACEHOLDER")},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}}),t._v(" "),e("div",{staticClass:"w-full"},[e("label",[t._v(" Social Profiles ")]),t._v(" "),t._l(t.socialProfileKeys,(function(n){return e("div",{key:n.key,staticClass:"input-group"},[e("span",{staticClass:"input-group-label"},[t._v(t._s(n.prefixURL))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.socialProfileUserNames[n.key],expression:"socialProfileUserNames[socialProfile.key]"}],staticClass:"input-group-field",attrs:{type:"text"},domProps:{value:t.socialProfileUserNames[n.key]},on:{input:function(e){e.target.composing||t.$set(t.socialProfileUserNames,n.key,e.target.value)}}})])}))],2),t._v(" "),e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("div",{staticClass:"w-full"},[e("woot-submit-button",{attrs:{loading:t.inProgress,"button-text":t.$t("CONTACT_FORM.FORM.SUBMIT")}}),t._v(" "),e("button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onCancel.apply(null,arguments)}}},[t._v("\n        "+t._s(t.$t("CONTACT_FORM.FORM.CANCEL"))+"\n      ")])],1)])],1)}),[],!1,null,"66e91b10",null);e.a=b.exports},2741:function(t,e,n){"use strict";var a={components:{Thumbnail:n(261).a},props:{option:{type:Object,default:function(){}},variant:{type:String,default:"default"}}},r=(n(2757),n(5)),i=Object(r.a)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"menu",attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.$emit("click")}}},["icon"===t.variant&&t.option.icon?e("fluent-icon",{staticClass:"menu-icon",attrs:{icon:t.option.icon,size:"14"}}):t._e(),t._v(" "),"label"===t.variant&&t.option.color?e("span",{staticClass:"label-pill",style:{backgroundColor:t.option.color}}):t._e(),t._v(" "),"agent"===t.variant?e("thumbnail",{staticClass:"agent-thumbnail",attrs:{username:t.option.label,src:t.option.thumbnail,status:t.option.status,size:"20px"}}):t._e(),t._v(" "),e("p",{staticClass:"menu-label overflow-hidden whitespace-nowrap text-ellipsis"},[t._v("\n    "+t._s(t.option.label)+"\n  ")])],1)}),[],!1,null,"a134e04e",null);e.a=i.exports},2742:function(t,e,n){"use strict";var a={methods:{openProfileSettings:function(){return this.$router.push({name:"profile_settings_index"})}}},r=n(5),i=Object(r.a)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-0 mx-4 px-1 flex max-h-[8vh] items-baseline justify-between hover:bg-slate-25 dark:hover:bg-slate-800 border border-dashed border-slate-100 dark:border-slate-700 rounded-sm overflow-auto"},[e("p",{staticClass:"w-fit !m-0"},[t._v("\n    "+t._s(t.$t("CONVERSATION.FOOTER.MESSAGE_SIGNATURE_NOT_CONFIGURED"))+"\n    "),e("woot-button",{attrs:{"color-scheme":"primary",variant:"link"},on:{click:t.openProfileSettings}},[t._v("\n      "+t._s(t.$t("CONVERSATION.FOOTER.CLICK_HERE"))+"\n    ")])],1)])}),[],!1,null,null,null);e.a=i.exports},2743:function(t,e,n){"use strict";n(68),n(97),n(37);var a=n(1921),r={props:{attachments:{type:Array,default:function(){return[]}},removeAttachment:{type:Function,default:function(){}}},methods:{onRemoveAttachment:function(t){this.removeAttachment(t)},formatFileSize:function(t){var e=t.byte_size||t.size;return Object(a.b)(e,0)},isTypeImage:function(t){return(t.content_type||t.type).includes("image")},isTypeAudio:function(t){return(t.content_type||t.type).includes("audio")},fileName:function(t){return t.filename||t.name}}},i=(n(2774),n(5)),s=Object(i.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"preview-item__wrap flex overflow-auto max-h-[12.5rem]"},t._l(t.attachments,(function(n,a){return e("div",{key:n.id,staticClass:"preview-item flex items-center p-1 bg-slate-50 dark:bg-slate-800 gap-1 rounded-md w-[15rem] mb-1"},[e("div",{staticClass:"max-w-[4rem] flex-shrink-0 w-6 flex items-center"},[t.isTypeImage(n.resource)?e("img",{staticClass:"image-thumb",attrs:{src:n.thumb}}):e("span",{staticClass:"w-6 h-6 text-lg relative -top-px text-left"},[t._v("\n        \ud83d\udcc4\n      ")])]),t._v(" "),e("div",{staticClass:"max-w-[60%] min-w-[50%] overflow-hidden text-ellipsis"},[e("span",{staticClass:"h-4 overflow-hidden text-sm font-medium text-ellipsis whitespace-nowrap"},[t._v("\n        "+t._s(t.fileName(n.resource))+"\n      ")])]),t._v(" "),e("div",{staticClass:"w-[30%] justify-center"},[e("span",{staticClass:"item overflow-hidden text-xs text-ellipsis whitespace-nowrap"},[t._v("\n        "+t._s(t.formatFileSize(n.resource))+"\n      ")])]),t._v(" "),e("div",{staticClass:"flex items-center justify-center"},[t.isTypeAudio(n.resource)?t._e():e("woot-button",{staticClass:"remove--attachment clear secondary",attrs:{icon:"dismiss"},on:{click:()=>t.onRemoveAttachment(a)}})],1)])})),0)}),[],!1,null,"0ee8bf23",null);e.a=s.exports},2744:function(t,e,n){"use strict";n(45),n(8),n(68),n(97),n(37),n(141);var a=["DOCUMENT","IMAGE","VIDEO"],r={props:{inboxId:{type:Number,default:void 0}},data:function(){return{query:""}},computed:{whatsAppTemplateMessages:function(){return this.$store.getters["inboxes/getWhatsAppTemplates"](this.inboxId).filter((function(t){return"approved"===t.status.toLowerCase()})).filter((function(t){return t.components.every((function(t){return!a.includes(t.format)}))}))},filteredTemplateMessages:function(){var t=this;return this.whatsAppTemplateMessages.filter((function(e){return e.name.toLowerCase().includes(t.query.toLowerCase())}))}},methods:{getTemplatebody:function(t){return t.components.find((function(t){return"BODY"===t.type})).text}}},i=r,s=(n(2772),n(5)),o=Object(s.a)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full"},[e("div",{staticClass:"templates__list-search"},[e("fluent-icon",{staticClass:"search-icon",attrs:{icon:"search",size:"16"}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"search",staticClass:"templates__search-input",attrs:{type:"search",placeholder:t.$t("WHATSAPP_TEMPLATES.PICKER.SEARCH_PLACEHOLDER")},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})],1),t._v(" "),e("div",{staticClass:"template__list-container"},[t._l(t.filteredTemplateMessages,(function(n,a){return e("div",{key:n.id},[e("button",{staticClass:"template__list-item",on:{click:function(e){return t.$emit("onSelect",n)}}},[e("div",[e("div",{staticClass:"flex-between"},[e("p",{staticClass:"label-title"},[t._v("\n              "+t._s(n.name)+"\n            ")]),t._v(" "),e("span",{staticClass:"inline-block py-1 px-2 rounded-sm text-xs leading-none cursor-default bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-100"},[t._v("\n              "+t._s(t.$t("WHATSAPP_TEMPLATES.PICKER.LABELS.LANGUAGE"))+" :\n              "+t._s(n.language)+"\n            ")])]),t._v(" "),e("div",[e("p",{staticClass:"strong"},[t._v("\n              "+t._s(t.$t("WHATSAPP_TEMPLATES.PICKER.LABELS.TEMPLATE_BODY"))+"\n            ")]),t._v(" "),e("p",{staticClass:"label-body"},[t._v(t._s(t.getTemplatebody(n)))])]),t._v(" "),e("div",{staticClass:"label-category"},[e("p",{staticClass:"strong"},[t._v("\n              "+t._s(t.$t("WHATSAPP_TEMPLATES.PICKER.LABELS.CATEGORY"))+"\n            ")]),t._v(" "),e("p",[t._v(t._s(n.category))])])])]),t._v(" "),a!=t.filteredTemplateMessages.length-1?e("hr",{key:`hr-${a}`}):t._e()])})),t._v(" "),t.filteredTemplateMessages.length?t._e():e("div",[e("p",[t._v("\n        "+t._s(t.$t("WHATSAPP_TEMPLATES.PICKER.NO_TEMPLATES_FOUND"))+"\n        "),e("strong",[t._v(t._s(t.query))])])])],2)])}),[],!1,null,"17f761ab",null);e.a=o.exports},2745:function(t,e,n){"use strict";n(10),n(49),n(370),n(141),n(65),n(37),n(83);var a=n(57),r={props:{template:{type:Object,default:function(){}}},validations:{processedParams:{requiredIfKeysPresent:Object(a.requiredIf)("variables"),allKeysRequired:function(t){return Object.keys(t).every((function(e){return t[e]}))}}},data:function(){return{processedParams:{}}},computed:{variables:function(){var t=this.templateString.match(/{{([^}]+)}}/g);return t},templateString:function(){return this.template.components.find((function(t){return"BODY"===t.type})).text},processedString:function(){var t=this;return this.templateString.replace(/{{([^}]+)}}/g,(function(e,n){var a=t.processVariable(n);return t.processedParams[a]||"{{".concat(n,"}}")}))}},mounted:function(){this.generateVariables()},methods:{sendMessage:function(){if(this.$v.$touch(),!this.$v.$invalid){var t={message:this.processedString,templateParams:{name:this.template.name,category:this.template.category,language:this.template.language,namespace:this.template.namespace,processed_params:this.processedParams}};this.$emit("sendMessage",t)}},processVariable:function(t){return t.replace(/{{|}}/g,"")},generateVariables:function(){var t=this,e=this.templateString.match(/{{([^}]+)}}/g);if(e){var n=e.map((function(e){return t.processVariable(e)}));this.processedParams=n.reduce((function(t,e){return t[e]="",t}),{})}}}},i=r,s=(n(2773),n(5)),o=Object(s.a)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.processedString,expression:"processedString"}],staticClass:"template-input",attrs:{rows:"4",readonly:""},domProps:{value:t.processedString},on:{input:function(e){e.target.composing||(t.processedString=e.target.value)}}}),t._v(" "),t.variables?e("div",{staticClass:"template__variables-container"},[e("p",{staticClass:"variables-label"},[t._v("\n      "+t._s(t.$t("WHATSAPP_TEMPLATES.PARSER.VARIABLES_LABEL"))+"\n    ")]),t._v(" "),t._l(t.processedParams,(function(n,a){return e("div",{key:a,staticClass:"template__variable-item"},[e("span",{staticClass:"variable-label"},[t._v("\n        "+t._s(a)+"\n      ")]),t._v(" "),e("woot-input",{staticClass:"variable-input",attrs:{type:"text",styles:{marginBottom:0}},model:{value:t.processedParams[a],callback:function(e){t.$set(t.processedParams,a,e)},expression:"processedParams[key]"}})],1)})),t._v(" "),t.$v.$dirty&&t.$v.$invalid?e("p",{staticClass:"error"},[t._v("\n      "+t._s(t.$t("WHATSAPP_TEMPLATES.PARSER.FORM_ERROR_MESSAGE"))+"\n    ")]):t._e()],2):t._e(),t._v(" "),e("footer",[e("woot-button",{attrs:{variant:"smooth"},on:{click:function(e){return t.$emit("resetTemplate")}}},[t._v("\n      "+t._s(t.$t("WHATSAPP_TEMPLATES.PARSER.GO_BACK_LABEL"))+"\n    ")]),t._v(" "),e("woot-button",{attrs:{type:"button"},on:{click:t.sendMessage}},[t._v("\n      "+t._s(t.$t("WHATSAPP_TEMPLATES.PARSER.SEND_MESSAGE_LABEL"))+"\n    ")])],1)])}),[],!1,null,"7dd22fb8",null);e.a=o.exports},2757:function(t,e,n){"use strict";n(2689)},2758:function(t,e,n){"use strict";n(2690)},2759:function(t,e,n){"use strict";n(2691)},2760:function(t,e,n){"use strict";n(2692)},2761:function(t,e,n){"use strict";n(2693)},2763:function(t,e,n){"use strict";n(2694)},2764:function(t,e,n){"use strict";n(2697)},2765:function(t,e,n){"use strict";function a(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function s(t,e){if(e&&t.length!==e.length)throw new Error("The number of values must be equal to the number of weights");return t.reduce((function(t,n,a){return t+n*(e?e[a]:1)}),0)/(e?e.reduce((function(t,e){return t+e}),0):t.length)}function o(t){return t.split(/\s+/).filter((function(t,e,n){return t&&n.indexOf(t)===e}))}n.d(e,"a",(function(){return u}));var c=1.2,l=1.1;function u(t,e,n,a){var i=[],o=a&&a.threshold||.8,c=e.trim().toLowerCase();return e?(t.forEach((function(t){var e,a=[],l=[],u=function(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,s=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw s}}}}(n);try{for(u.s();!(e=u.n()).done;){var p=e.value,m="string"==typeof p?p:p.name;if("string"!=typeof p?l.push(p.weight):l.push(1),Object.prototype.hasOwnProperty.call(t,m)&&"string"==typeof t[m]){var f=d(t[m].trim().toLowerCase(),c);a.push(f)}else a.push(0)}}catch(b){u.e(b)}finally{u.f()}var h=s(a,l);h>=o&&i.push({object:t,similarity:h})})),i.sort((function(t,e){return e.similarity-t.similarity})),i.map((function(t){return t.object}))):t}function d(t,e){var n=o(t),r=o(e).map((function(t){var e=n.map((function(e){return function(t,e){var n=function(t,e){if(t.length<e.length){var n=t;t=e,e=n}var a=t.length,r=e.length;if(!r)return 0;for(var i=Math.max(1,a/2)-1,s=Array(r).fill(!1),o=Array(a).fill(""),c=0,l=0;l<a;l++)for(var u=t[l],d=0;d<r;d++){var p=e[d];if(d<=l+i&&d+i>=1&&u===p&&!s[d]){s[d]=!0,o[c++]=u;break}}if(!c)return 0;for(var m=0,f=0,h=0;h<r;h++)s[h]&&(e[h]!==o[f]&&m++,f++);var b=(c/a+c/r+(c-m/2)/c)/3,v=0;r=Math.min(4,r);for(var g=0;g<r;g++)t[g]===e[g]&&v++;return b+.1*v*(1-b)}(t,e);return t.includes(e)?n*c:n}(e,t)})),r=Math.max.apply(Math,a(e));return r===e[0]?r*l:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(e,Math.min(n,t))}(r)}));return s(r)}},2766:function(t,e,n){"use strict";n(2698)},2767:function(t,e,n){"use strict";n(2699)},2768:function(t,e,n){"use strict";n(2700)},2769:function(t,e,n){"use strict";n(2701)},2770:function(t,e,n){"use strict";n(2702)},2771:function(t,e,n){"use strict";n(2703)},2772:function(t,e,n){"use strict";n(2704)},2773:function(t,e,n){"use strict";n(2705)},2774:function(t,e,n){"use strict";n(2706)},2775:function(t,e,n){"use strict";n(2707)},2776:function(t,e,n){"use strict";n(2708)},2777:function(t,e,n){"use strict";n(2709)},2778:function(t,e,n){var a=n(24),r=n(126),i=String.fromCharCode,s=String.fromCodePoint;a({target:"String",stat:!0,forced:!!s&&1!=s.length},{fromCodePoint:function(t){for(var e,n=[],a=arguments.length,s=0;a>s;){if(e=+arguments[s++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?i(e):i(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},2779:function(t,e,n){"use strict";n(2710)},2780:function(t,e,n){"use strict";n(2711)},2781:function(t,e,n){"use strict";n(2712)},2782:function(t,e,n){"use strict";n(2713)},2783:function(t,e,n){"use strict";n(2714)},2797:function(t,e,n){"use strict";n(30),n(41),n(1776),n(8),n(37),n(10),n(4),n(11),n(9),n(12),n(7),n(22);var a=n(149),r=n(1914),i=n(79),s=n(1927),o=n(1922);function c(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}var l={components:{EmojiOrIcon:s.a},mixins:[i.a],props:{href:{type:String,default:""},icon:{type:String,required:!0},emoji:{type:String,required:!0},value:{type:String,default:""},showCopy:{type:Boolean,default:!1}},methods:{onCopy:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(o.a)(n.value);case 3:n.showAlert(n.$t("CONTACT_PANEL.COPY_SUCCESSFUL"));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(t){c(i,a,r,s,o,"next",t)}function o(t){c(i,a,r,s,o,"throw",t)}s(void 0)}))})()}}},u=l,d=(n(2768),n(5)),p=Object(d.a)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"-ml-1"},[t.href?e("a",{staticClass:"flex items-center mb-2 text-slate-800 dark:text-slate-100 hover:underline",attrs:{href:t.href}},[e("emoji-or-icon",{staticClass:"mr-2 ml-1 rtl:mr-1 rtl:ml-2",attrs:{icon:t.icon,emoji:t.emoji,"icon-size":"14"}}),t._v(" "),t.value?e("span",{staticClass:"overflow-hidden whitespace-nowrap text-ellipsis text-sm",attrs:{title:t.value}},[t._v("\n      "+t._s(t.value)+"\n    ")]):e("span",{staticClass:"text-slate-300 dark:text-slate-600 text-sm"},[t._v(t._s(t.$t("CONTACT_PANEL.NOT_AVAILABLE")))]),t._v(" "),t.showCopy?e("woot-button",{attrs:{type:"submit",variant:"clear",size:"tiny","color-scheme":"secondary",icon:"clipboard","class-names":"copy-button"},on:{click:t.onCopy}}):t._e()],1):e("div",{staticClass:"flex items-center mb-2 text-slate-800 dark:text-slate-100"},[e("emoji-or-icon",{staticClass:"mr-2 ml-1 rtl:mr-1 rtl:ml-2",attrs:{icon:t.icon,emoji:t.emoji,"icon-size":"14"}}),t._v(" "),t.value?e("span",{staticClass:"overflow-hidden whitespace-nowrap text-ellipsis text-sm"},[t._v("\n      "+t._s(t.value)+"\n    ")]):e("span",{staticClass:"text-slate-300 dark:text-slate-600 text-sm"},[t._v(t._s(t.$t("CONTACT_PANEL.NOT_AVAILABLE")))])],1)])}),[],!1,null,"083c8120",null).exports,m=n(261),f={props:{socialProfiles:{type:Object,default:function(){return{}}}},data:function(){return{socialMediaLinks:[{key:"facebook",icon:"facebook",link:"https://facebook.com/"},{key:"twitter",icon:"twitter",link:"https://twitter.com/"},{key:"linkedin",icon:"linkedin",link:"https://linkedin.com/"},{key:"github",icon:"github",link:"https://github.com/"},{key:"instagram",icon:"instagram",link:"https://instagram.com/"}]}},computed:{availableProfiles:function(){var t=this;return this.socialMediaLinks.filter((function(e){return!!t.socialProfiles[e.key]}))}}},h=Object(d.a)(f,(function(){var t=this,e=t._self._c;return t.availableProfiles.length?e("div",{staticClass:"flex items-end mx-0 my-2 gap-3"},t._l(t.availableProfiles,(function(n){return e("a",{key:n.key,attrs:{href:`${n.link}${t.socialProfiles[n.key]}`,target:"_blank",rel:"noopener noreferrer nofollow"}},[e("fluent-icon",{staticClass:"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200",attrs:{icon:`brand-${n.key}`,size:"16"}})],1)})),0):t._e()}),[],!1,null,null,null).exports,b=n(25);function v(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C={components:{ContactForm:n(2740).a},props:{show:{type:Boolean,default:!1},contact:{type:Object,default:function(){return{}}}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(b.mapGetters)({uiFlags:"contacts/getUIFlags"})),methods:{onCancel:function(){this.$emit("cancel")},onSuccess:function(){this.$emit("cancel")},onSubmit:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$store.dispatch("contacts/update",t);case 2:return e.next=4,n.$store.dispatch("contacts/fetchContactableInbox",n.contact.id);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(t){v(i,a,r,s,o,"next",t)}function o(t){v(i,a,r,s,o,"throw",t)}s(void 0)}))})()}}},y=C,O=Object(d.a)(y,(function(){var t=this,e=t._self._c;return e("woot-modal",{attrs:{show:t.show,"on-close":t.onCancel,"modal-type":"right-aligned"},on:{"update:show":function(e){t.show=e}}},[e("div",{staticClass:"h-auto overflow-auto flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":`${t.$t("EDIT_CONTACT.TITLE")} - ${t.contact.name||t.contact.email}`,"header-content":t.$t("EDIT_CONTACT.DESC")}}),t._v(" "),e("contact-form",{attrs:{contact:t.contact,"in-progress":t.uiFlags.isUpdating,"on-submit":t.onSubmit},on:{success:t.onSuccess,cancel:t.onCancel}})],1)])}),[],!1,null,null,null).exports,T=(n(141),n(83),n(68),n(97),n(1916)),A=n(2739),w=n(1945),E=n(2742),x=n(1809),S={components:{},props:{name:{type:String,default:""},inboxIdentifier:{type:String,default:""},channelType:{type:String,default:""}},computed:{computedInboxIcon:function(){return this.channelType?Object(x.a)(this.channelType,this.inboxIdentifier):"chat"},computedInboxType:function(){return this.channelType?Object(x.d)(this.channelType,this.inboxIdentifier):"chat"}}},N=(n(2771),Object(d.a)(S,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center h-[2.375rem] min-w-0 py-0 px-1"},[e("span",{staticClass:"inline-flex rounded mr-1 rtl:ml-1 rtl:mr-0 bg-slate-25 dark:bg-slate-700 p-0.5 items-center flex-shrink-0 justify-center w-6 h-6"},[e("fluent-icon",{staticClass:"text-slate-800 dark:text-slate-200",attrs:{icon:t.computedInboxIcon,size:"14"}})],1),t._v(" "),e("div",{staticClass:"flex flex-col w-full min-w-0 ml-1 mr-1"},[e("h5",{staticClass:"option__title"},[t._v("\n      "+t._s(t.name)+"\n    ")]),t._v(" "),e("p",{staticClass:"option__body overflow-hidden whitespace-nowrap text-ellipsis",attrs:{title:t.inboxIdentifier}},[t._v("\n      "+t._s(t.inboxIdentifier||t.computedInboxType)+"\n    ")])])])}),[],!1,null,"15209d00",null).exports),R=(n(45),n(2744)),I=n(2745),M={components:{TemplatesPicker:R.a,TemplateParser:I.a},props:{inboxId:{type:Number,default:void 0},show:{type:Boolean,default:!0}},data:function(){return{selectedWaTemplate:null}},methods:{pickTemplate:function(t){this.$emit("pickTemplate",!0),this.selectedWaTemplate=t},onResetTemplate:function(){this.$emit("pickTemplate",!1),this.selectedWaTemplate=null},onSendMessage:function(t){this.$emit("on-send",t)},onClose:function(){this.$emit("cancel")}}},L=Object(d.a)(M,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mx-0 flex flex-wrap"},[t.selectedWaTemplate?e("template-parser",{attrs:{template:t.selectedWaTemplate},on:{resetTemplate:t.onResetTemplate,sendMessage:t.onSendMessage}}):e("templates-picker",{attrs:{"inbox-id":t.inboxId},on:{onSelect:t.pickTemplate}})],1)}),[],!1,null,null,null).exports,$=n(92),k=n(364),P=n(57),D=n(2729),j=n.n(D),U=n(2743),F=n(90),B=n(2730),V=n(217),G=n(267);function W(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function H(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(t){W(i,a,r,s,o,"next",t)}function o(t){W(i,a,r,s,o,"throw",t)}s(void 0)}))}}function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){q(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var X={components:{Thumbnail:m.a,WootMessageEditor:T.a,ReplyEmailHead:A.a,CannedResponse:w.a,WhatsappTemplates:L,InboxDropdownItem:N,FileUpload:j.a,AttachmentPreview:U.a,MessageSignatureMissingAlert:E.a},mixins:[i.a,G.a,$.c,B.a],props:{contact:{type:Object,default:function(){return{}}},onSubmit:{type:Function,default:function(){}},channelType:{type:String,default:""}},data:function(){return{name:"",subject:"",message:"",showCannedResponseMenu:!1,cannedResponseSearchKey:"",bccEmails:"",ccEmails:"",targetInbox:{},whatsappTemplateSelected:!1,attachedFiles:[]}},validations:{subject:{required:Object(P.requiredIf)("isAnEmailInbox")},message:{required:P.required},targetInbox:{required:P.required}},computed:Y(Y({},Object(b.mapGetters)({uiFlags:"contacts/getUIFlags",conversationsUiFlags:"contactConversations/getUIFlags",currentUser:"getCurrentUser",globalConfig:"globalConfig/get",messageSignature:"getMessageSignature"})),{},{sendWithSignature:function(){return this.fetchSignatureFlagFromUiSettings(this.channelType)},signatureToApply:function(){return this.messageSignature},newMessagePayload:function(){var t={inboxId:this.targetInbox.id,sourceId:this.targetInbox.sourceId,contactId:this.contact.id,message:{content:this.message},mailSubject:this.subject,assigneeId:this.currentUser.id};return this.attachedFiles&&this.attachedFiles.length&&(t.files=[],this.setAttachmentPayload(t)),this.ccEmails&&(t.message.cc_emails=this.ccEmails),this.bccEmails&&(t.message.bcc_emails=this.bccEmails),t},selectedInbox:{get:function(){var t=this;return(this.contact.contactableInboxes||[]).find((function(e){var n,a,r;return(null===(n=e.inbox)||void 0===n?void 0:n.id)&&(null===(a=e.inbox)||void 0===a?void 0:a.id)===(null===(r=t.targetInbox)||void 0===r?void 0:r.id)}))||{inbox:{}}},set:function(t){this.targetInbox=t.inbox}},showNoInboxAlert:function(){return!!this.contact.contactableInboxes&&(0===this.inboxes.length&&!this.uiFlags.isFetchingInboxes)},isSignatureEnabledForInbox:function(){return this.isAnEmailInbox&&this.sendWithSignature},signatureToggleTooltip:function(){return this.sendWithSignature?this.$t("CONVERSATION.FOOTER.DISABLE_SIGN_TOOLTIP"):this.$t("CONVERSATION.FOOTER.ENABLE_SIGN_TOOLTIP")},inboxes:function(){return(this.contact.contactableInboxes||[]).map((function(t){return Y(Y({},t.inbox),{},{sourceId:t.source_id})}))},isAnEmailInbox:function(){return this.selectedInbox&&this.selectedInbox.inbox.channel_type===$.b.EMAIL},isAnWebWidgetInbox:function(){return this.selectedInbox&&this.selectedInbox.inbox.channel_type===$.b.WEB},isEmailOrWebWidgetInbox:function(){return this.isAnEmailInbox||this.isAnWebWidgetInbox},hasWhatsappTemplates:function(){var t;return!(null===(t=this.selectedInbox.inbox)||void 0===t||!t.message_templates)},hasAttachments:function(){return this.attachedFiles.length},inbox:function(){return this.targetInbox},allowedFileTypes:function(){return F.a}}),watch:{message:function(t){this.hasSlashCommand="/"===t[0]&&!this.isEmailOrWebWidgetInbox;var e=t.includes(" ");this.hasSlashCommand&&!e?(this.cannedResponseSearchKey=t.substring(1),this.showCannedResponseMenu=!0):(this.cannedResponseSearchKey="",this.showCannedResponseMenu=!1)},targetInbox:function(){this.setSignature()}},mounted:function(){this.setSignature()},methods:{setSignature:function(){this.messageSignature&&(this.isSignatureEnabledForInbox?this.message=Object(V.a)(this.message,this.signatureToApply):this.message=Object(V.e)(this.message,this.signatureToApply))},setAttachmentPayload:function(t){var e=this;this.attachedFiles.forEach((function(n){e.globalConfig.directUploadsEnabled?t.files.push(n.blobSignedId):t.files.push(n.resource.file)}))},attachFile:function(t){var e=this,n=t.blob,a=t.file,r=new FileReader;r.readAsDataURL(a.file),r.onloadend=function(){e.attachedFiles.push({currentChatId:e.contact.id,resource:n||a,isPrivate:e.isPrivate,thumb:r.result,blobSignedId:n?n.signed_id:void 0})}},removeAttachment:function(t){this.attachedFiles=this.attachedFiles.filter((function(e,n){return t!==n}))},onCancel:function(){this.$emit("cancel")},onSuccess:function(){this.$emit("success")},replaceTextWithCannedResponse:function(t){this.message=t},toggleCannedMenu:function(t){this.showCannedMenu=t},prepareWhatsAppMessagePayload:function(t){var e=t.message,n=t.templateParams;return{inboxId:this.targetInbox.id,sourceId:this.targetInbox.sourceId,contactId:this.contact.id,message:{content:e,template_params:n},assigneeId:this.currentUser.id}},onFormSubmit:function(){this.$v.$touch(),this.$v.$invalid||this.createConversation({payload:this.newMessagePayload,isFromWhatsApp:!1})},createConversation:function(t){var e=this;return H(regeneratorRuntime.mark((function n(){var a,r,i,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.payload,r=t.isFromWhatsApp,n.prev=1,n.next=4,e.onSubmit(a,r);case 4:i=n.sent,s={type:"link",to:"/app/accounts/".concat(i.account_id,"/conversations/").concat(i.id),message:e.$t("NEW_CONVERSATION.FORM.GO_TO_CONVERSATION")},e.onSuccess(),e.showAlert(e.$t("NEW_CONVERSATION.FORM.SUCCESS_MESSAGE"),s),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),n.t0 instanceof k.b?e.showAlert(n.t0.data):e.showAlert(e.$t("NEW_CONVERSATION.FORM.ERROR_MESSAGE"));case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))()},toggleWaTemplate:function(t){this.whatsappTemplateSelected=t},onSendWhatsAppReply:function(t){var e=this;return H(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return!0,a=e.prepareWhatsAppMessagePayload(t),n.next=4,e.createConversation({payload:a,isFromWhatsApp:true});case 4:case"end":return n.stop()}}),n)})))()},inboxReadableIdentifier:function(t){return"".concat(t.name," (").concat(t.channel_type,")")},computedInboxSource:function(t){return t.channel_type?Object(x.b)(t.channel_type,t.phone_number,t):""},toggleMessageSignature:function(){this.setSignatureFlagForInbox(this.channelType,!this.sendWithSignature),this.setSignature()}}},K=(n(2775),Object(d.a)(X,(function(){var t=this,e=t._self._c;return e("form",{staticClass:"conversation--form w-full",on:{submit:function(e){return e.preventDefault(),t.onFormSubmit.apply(null,arguments)}}},[t.showNoInboxAlert?e("div",{staticClass:"callout warning"},[e("p",[t._v("\n      "+t._s(t.$t("NEW_CONVERSATION.NO_INBOX"))+"\n    ")])]):e("div",[e("div",{staticClass:"gap-2 flex flex-row"},[e("div",{staticClass:"w-[50%]"},[e("label",[t._v("\n          "+t._s(t.$t("NEW_CONVERSATION.FORM.INBOX.LABEL"))+"\n        ")]),t._v(" "),e("div",{staticClass:"multiselect-wrap--small",class:{"has-multi-select-error":t.$v.targetInbox.$error}},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT"),"selected-label":"","select-label":"","deselect-label":"","max-height":160,"close-on-select":!0,options:[...t.inboxes]},scopedSlots:t._u([{key:"singleLabel",fn:function({option:n}){return[n.name?e("inbox-dropdown-item",{attrs:{name:n.name,"inbox-identifier":t.computedInboxSource(n),"channel-type":n.channel_type}}):e("span",[t._v("\n                "+t._s(t.$t("NEW_CONVERSATION.FORM.INBOX.PLACEHOLDER"))+"\n              ")])]}},{key:"option",fn:function({option:n}){return[e("inbox-dropdown-item",{attrs:{name:n.name,"inbox-identifier":t.computedInboxSource(n),"channel-type":n.channel_type}})]}}]),model:{value:t.targetInbox,callback:function(e){t.targetInbox=e},expression:"targetInbox"}})],1),t._v(" "),e("label",{class:{error:t.$v.targetInbox.$error}},[t.$v.targetInbox.$error?e("span",{staticClass:"message"},[t._v("\n            "+t._s(t.$t("NEW_CONVERSATION.FORM.INBOX.ERROR"))+"\n          ")]):t._e()])]),t._v(" "),e("div",{staticClass:"w-[50%]"},[e("label",[t._v("\n          "+t._s(t.$t("NEW_CONVERSATION.FORM.TO.LABEL"))+"\n          "),e("div",{staticClass:"flex items-center h-[2.4735rem] rounded-sm py-1 px-2 bg-slate-25 dark:bg-slate-900 border border-solid border-slate-75 dark:border-slate-600"},[e("thumbnail",{attrs:{src:t.contact.thumbnail,size:"24px",username:t.contact.name,status:t.contact.availability_status}}),t._v(" "),e("h4",{staticClass:"m-0 ml-2 mr-2 text-slate-700 dark:text-slate-100 text-sm"},[t._v("\n              "+t._s(t.contact.name)+"\n            ")])],1)])])]),t._v(" "),t.isAnEmailInbox?e("div",{staticClass:"w-full"},[e("div",{staticClass:"w-full"},[e("label",{class:{error:t.$v.subject.$error}},[t._v("\n          "+t._s(t.$t("NEW_CONVERSATION.FORM.SUBJECT.LABEL"))+"\n          "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.subject,expression:"subject"}],attrs:{type:"text",placeholder:t.$t("NEW_CONVERSATION.FORM.SUBJECT.PLACEHOLDER")},domProps:{value:t.subject},on:{input:[function(e){e.target.composing||(t.subject=e.target.value)},t.$v.subject.$touch]}}),t._v(" "),t.$v.subject.$error?e("span",{staticClass:"message"},[t._v("\n            "+t._s(t.$t("NEW_CONVERSATION.FORM.SUBJECT.ERROR"))+"\n          ")]):t._e()])])]):t._e(),t._v(" "),e("div",{staticClass:"w-full"},[e("div",{staticClass:"w-full"},[e("div",{staticClass:"relative"},[t.showCannedResponseMenu&&t.hasSlashCommand?e("canned-response",{attrs:{"search-key":t.cannedResponseSearchKey},on:{click:t.replaceTextWithCannedResponse}}):t._e()],1),t._v(" "),t.isEmailOrWebWidgetInbox?e("div",[e("label",[t._v("\n            "+t._s(t.$t("NEW_CONVERSATION.FORM.MESSAGE.LABEL"))+"\n          ")]),t._v(" "),t.isAnEmailInbox?e("reply-email-head",{attrs:{"cc-emails":t.ccEmails,"bcc-emails":t.bccEmails},on:{"update:ccEmails":function(e){t.ccEmails=e},"update:cc-emails":function(e){t.ccEmails=e},"update:bccEmails":function(e){t.bccEmails=e},"update:bcc-emails":function(e){t.bccEmails=e}}}):t._e(),t._v(" "),e("div",{staticClass:"editor-wrap"},[e("woot-message-editor",{staticClass:"message-editor",class:{editor_warning:t.$v.message.$error},attrs:{"enable-variables":!0,signature:t.signatureToApply,"allow-signature":!0,placeholder:t.$t("NEW_CONVERSATION.FORM.MESSAGE.PLACEHOLDER")},on:{"toggle-canned-menu":t.toggleCannedMenu,blur:t.$v.message.$touch},scopedSlots:t._u([{key:"footer",fn:function(){return[t.isSignatureEnabledForInbox&&!t.messageSignature?e("message-signature-missing-alert",{staticClass:"!mx-0 mb-1"}):t._e(),t._v(" "),t.isAnEmailInbox?e("div",{staticClass:"mb-3 mt-px"},[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.signatureToggleTooltip,expression:"signatureToggleTooltip",modifiers:{"top-end":!0}}],attrs:{icon:"signature","color-scheme":"secondary",variant:"smooth",size:"small",title:t.signatureToggleTooltip},on:{click:function(e){return e.preventDefault(),t.toggleMessageSignature.apply(null,arguments)}}})],1):t._e()]},proxy:!0}],null,!1,823990732),model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t._v(" "),t.$v.message.$error?e("span",{staticClass:"editor-warning__message"},[t._v("\n              "+t._s(t.$t("NEW_CONVERSATION.FORM.MESSAGE.ERROR"))+"\n            ")]):t._e()],1)],1):t.hasWhatsappTemplates?e("whatsapp-templates",{attrs:{"inbox-id":t.selectedInbox.inbox.id},on:{"on-select-template":t.toggleWaTemplate,"on-send":t.onSendWhatsAppReply}}):e("label",{class:{error:t.$v.message.$error}},[t._v("\n          "+t._s(t.$t("NEW_CONVERSATION.FORM.MESSAGE.LABEL"))+"\n          "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"min-h-[5rem]",attrs:{type:"text",placeholder:t.$t("NEW_CONVERSATION.FORM.MESSAGE.PLACEHOLDER")},domProps:{value:t.message},on:{input:[function(e){e.target.composing||(t.message=e.target.value)},t.$v.message.$touch]}}),t._v(" "),t.$v.message.$error?e("span",{staticClass:"message"},[t._v("\n            "+t._s(t.$t("NEW_CONVERSATION.FORM.MESSAGE.ERROR"))+"\n          ")]):t._e()]),t._v(" "),t.isEmailOrWebWidgetInbox?e("div",{staticClass:"flex flex-col"},[e("file-upload",{ref:"uploadAttachment",attrs:{"input-id":"newConversationAttachment",size:16777216,accept:t.allowedFileTypes,multiple:!0,drop:!0,"drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0}},on:{"input-file":t.onFileUpload}},[e("woot-button",{attrs:{"class-names":"button--upload",icon:"attach",emoji:"\ud83d\udcce","color-scheme":"secondary",variant:"smooth",size:"small"}},[t._v("\n              "+t._s(t.$t("NEW_CONVERSATION.FORM.ATTACHMENTS.SELECT"))+"\n            ")]),t._v(" "),e("span",{staticClass:"text-slate-500 ltr:ml-1 rtl:mr-1 font-medium text-xs dark:text-slate-400"},[t._v("\n              "+t._s(t.$t("NEW_CONVERSATION.FORM.ATTACHMENTS.HELP_TEXT"))+"\n            ")])],1),t._v(" "),t.hasAttachments?e("div",{staticClass:"max-h-20 overflow-y-auto mb-4 mt-1.5"},[e("attachment-preview",{staticClass:"[&>.preview-item]:dark:bg-slate-700 flex-row flex-wrap gap-x-3 gap-y-1",attrs:{attachments:t.attachedFiles,"remove-attachment":t.removeAttachment}})],1):t._e()],1):t._e()],1)])]),t._v(" "),t.hasWhatsappTemplates?t._e():e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onCancel.apply(null,arguments)}}},[t._v("\n      "+t._s(t.$t("NEW_CONVERSATION.FORM.CANCEL"))+"\n    ")]),t._v(" "),e("woot-button",{attrs:{type:"submit","is-loading":t.conversationsUiFlags.isCreating}},[t._v("\n      "+t._s(t.$t("NEW_CONVERSATION.FORM.SUBMIT"))+"\n    ")])],1),t._v(" "),t.isEmailOrWebWidgetInbox?e("transition",{attrs:{name:"modal-fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.$refs.uploadAttachment&&t.$refs.uploadAttachment.dropActive,expression:"$refs.uploadAttachment && $refs.uploadAttachment.dropActive"}],staticClass:"flex top-0 bottom-0 z-30 gap-2 right-0 left-0 items-center justify-center flex-col absolute w-full h-full bg-white/80 dark:bg-slate-700/80"},[e("fluent-icon",{attrs:{icon:"cloud-backup",size:"40"}}),t._v(" "),e("h4",{staticClass:"page-sub-title text-slate-600 dark:text-slate-200"},[t._v("\n        "+t._s(t.$t("CONVERSATION.REPLYBOX.DRAG_DROP"))+"\n      ")])],1)]):t._e()],1)}),[],!1,null,"397e44b5",null));function Z(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}var J={components:{ConversationForm:K.exports},props:{show:{type:Boolean,default:!1},contact:{type:Object,default:function(){return{}}}},watch:{"contact.id":function(t){this.$store.dispatch("contacts/fetchContactableInbox",t)}},mounted:function(){var t=this.contact.id;this.$store.dispatch("contacts/fetchContactableInbox",t)},methods:{onCancel:function(){this.$emit("cancel")},onSuccess:function(){this.$emit("cancel")},onSubmit:function(t,e){var n,a=this;return(n=regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.$store.dispatch("contactConversations/create",{params:t,isFromWhatsApp:e});case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(a,r){var i=n.apply(t,e);function s(t){Z(i,a,r,s,o,"next",t)}function o(t){Z(i,a,r,s,o,"throw",t)}s(void 0)}))})()}}},Q=J,tt=Object(d.a)(Q,(function(){var t=this,e=t._self._c;return e("woot-modal",{attrs:{show:t.show,"on-close":t.onCancel},on:{"update:show":function(e){t.show=e}}},[e("div",{staticClass:"h-auto overflow-auto flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":t.$t("NEW_CONVERSATION.TITLE"),"header-content":t.$t("NEW_CONVERSATION.DESC")}}),t._v(" "),e("conversation-form",{attrs:{contact:t.contact,"on-submit":t.onSubmit},on:{success:t.onSuccess,cancel:t.onCancel}})],1)])}),[],!1,null,null,null).exports,et=(n(49),n(268),{props:{primaryContactName:{type:String,default:""},parentContactName:{type:String,default:""}}}),nt=Object(d.a)(et,(function(){var t=this,e=t._self._c;return t.parentContactName?e("div",{staticClass:"my-4 relative p-2.5 border rounded-[4px] text-slate-800 dark:text-slate-100 border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800"},[e("h5",{staticClass:"text-base font-medium text-slate-900 dark:text-white"},[t._v("\n    "+t._s(t.$t("MERGE_CONTACTS.SUMMARY.TITLE"))+"\n  ")]),t._v(" "),e("ul",{staticClass:"ml-0 list-none"},[e("li",[e("span",{staticClass:"inline-block mr-1"},[t._v("\u274c")]),t._v(" "),e("span",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.$t("MERGE_CONTACTS.SUMMARY.DELETE_WARNING",{primaryContactName:t.primaryContactName}),expression:"\n          $t('MERGE_CONTACTS.SUMMARY.DELETE_WARNING', {\n            primaryContactName,\n          })\n        "}]})]),t._v(" "),e("li",[e("span",{staticClass:"inline-block mr-1"},[t._v("\u2705")]),t._v(" "),e("span",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.$t("MERGE_CONTACTS.SUMMARY.ATTRIBUTE_WARNING",{primaryContactName:t.primaryContactName,parentContactName:t.parentContactName}),expression:"\n          $t('MERGE_CONTACTS.SUMMARY.ATTRIBUTE_WARNING', {\n            primaryContactName,\n            parentContactName,\n          })\n        "}]})])])]):t._e()}),[],!1,null,null,null).exports,at={components:{Thumbnail:m.a},props:{name:{type:String,default:""},thumbnail:{type:String,default:""},email:{type:String,default:""},phoneNumber:{type:String,default:""},identifier:{type:[String,Number],required:!0}}},rt=(n(2776),{components:{MergeContactSummary:nt,ContactDropdownItem:Object(d.a)(at,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"option-item--user"},[e("thumbnail",{attrs:{src:t.thumbnail,size:"28px",username:t.name}}),t._v(" "),e("div",{staticClass:"option__user-data"},[e("h5",{staticClass:"option__title"},[t._v("\n      "+t._s(t.name)+"\n      "),t.identifier?e("span",{staticClass:"user-identifier"},[t._v("\n        (ID: "+t._s(t.identifier)+")\n      ")]):t._e()]),t._v(" "),e("p",{staticClass:"option__body"},[t.email?e("span",{staticClass:"email-icon-wrap"},[e("fluent-icon",{staticClass:"merge-contact--icon",attrs:{icon:"mail",size:"12"}}),t._v("\n        "+t._s(t.email)+"\n      ")],1):t._e(),t._v(" "),t.phoneNumber?e("span",{staticClass:"phone-icon-wrap"},[e("fluent-icon",{staticClass:"merge-contact--icon",attrs:{icon:"call",size:"12"}}),t._v("\n        "+t._s(t.phoneNumber)+"\n      ")],1):t._e(),t._v(" "),t.phoneNumber||t.email?t._e():e("span",[t._v(t._s("---"))])])])],1)}),[],!1,null,"5521a686",null).exports},mixins:[i.a],props:{primaryContact:{type:Object,required:!0},isSearching:{type:Boolean,default:!1},isMerging:{type:Boolean,default:!1},searchResults:{type:Array,default:function(){return[]}}},validations:{primaryContact:{required:P.required},parentContact:{required:P.required}},data:function(){return{parentContact:void 0}},computed:{parentContactName:function(){return this.parentContact?this.parentContact.name:""}},methods:{searchChange:function(t){this.$emit("search",t)},onSubmit:function(){this.$v.$touch(),this.$v.$invalid||this.$emit("submit",this.parentContact.id)},onCancel:function(){this.$emit("cancel")}}}),it=(n(2777),Object(d.a)(rt,(function(){var t=this,e=t._self._c;return e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",[e("div",[e("div",{staticClass:"mt-1 multiselect-wrap--medium",class:{error:t.$v.parentContact.$error}},[e("label",{staticClass:"multiselect__label"},[t._v("\n          "+t._s(t.$t("MERGE_CONTACTS.PARENT.TITLE"))+"\n          "),e("woot-label",{staticClass:"ml-2",attrs:{title:t.$t("MERGE_CONTACTS.PARENT.HELP_LABEL"),"color-scheme":"success",small:""}})],1),t._v(" "),e("multiselect",{attrs:{options:t.searchResults,label:"name","track-by":"id","internal-search":!1,"clear-on-select":!1,"show-labels":!1,placeholder:t.$t("MERGE_CONTACTS.PARENT.PLACEHOLDER"),"allow-empty":!0,loading:t.isSearching,"max-height":150,"open-direction":"top"},on:{"search-change":t.searchChange},scopedSlots:t._u([{key:"singleLabel",fn:function(t){return[e("contact-dropdown-item",{attrs:{thumbnail:t.option.thumbnail,identifier:t.option.id,name:t.option.name,email:t.option.email,"phone-number":t.option.phone_number}})]}},{key:"option",fn:function(t){return[e("contact-dropdown-item",{attrs:{thumbnail:t.option.thumbnail,identifier:t.option.id,name:t.option.name,email:t.option.email,"phone-number":t.option.phone_number}})]}}]),model:{value:t.parentContact,callback:function(e){t.parentContact=e},expression:"parentContact"}},[t._v(" "),t._v(" "),e("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("\n            "+t._s(t.$t("AGENT_MGMT.SEARCH.NO_RESULTS"))+"\n          ")])]),t._v(" "),t.$v.parentContact.$error?e("span",{staticClass:"message"},[t._v("\n          "+t._s(t.$t("MERGE_CONTACTS.FORM.CHILD_CONTACT.ERROR"))+"\n        ")]):t._e()],1)]),t._v(" "),e("div",{staticClass:"multiselect-wrap--medium flex"},[e("div",{staticClass:"w-8 relative text-base text-slate-100 dark:text-slate-600 after:content-[''] after:h-12 after:w-0 after:left-4 after:absolute after:border-l after:border-solid after:border-slate-100 after:dark:border-slate-600 before:content-[''] before:h-0 before:w-4 before:left-4 before:top-12 before:absolute before:border-b before:border-solid before:border-slate-100 before:dark:border-slate-600"},[e("fluent-icon",{staticClass:"absolute -top-1 left-2",attrs:{icon:"arrow-up",size:"17"}})],1),t._v(" "),e("div",{staticClass:"flex flex-col w-full"},[e("label",{staticClass:"multiselect__label"},[t._v("\n          "+t._s(t.$t("MERGE_CONTACTS.PRIMARY.TITLE"))+"\n          "),e("woot-label",{staticClass:"ml-2",attrs:{title:t.$t("MERGE_CONTACTS.PRIMARY.HELP_LABEL"),"color-scheme":"alert",small:""}})],1),t._v(" "),e("multiselect",{attrs:{value:t.primaryContact,disabled:"",options:[],"show-labels":!1,label:"name","track-by":"id"},scopedSlots:t._u([{key:"singleLabel",fn:function(t){return[e("contact-dropdown-item",{attrs:{thumbnail:t.option.thumbnail,name:t.option.name,identifier:t.option.id,email:t.option.email,"phone-number":t.option.phoneNumber}})]}}])})],1)])]),t._v(" "),e("merge-contact-summary",{attrs:{"primary-contact-name":t.primaryContact.name,"parent-contact-name":t.parentContactName}}),t._v(" "),e("div",{staticClass:"mt-6 flex justify-end"},[e("woot-button",{attrs:{variant:"clear"},on:{click:function(e){return e.preventDefault(),t.onCancel.apply(null,arguments)}}},[t._v("\n      "+t._s(t.$t("MERGE_CONTACTS.FORM.CANCEL"))+"\n    ")]),t._v(" "),e("woot-button",{attrs:{type:"submit","is-loading":t.isMerging}},[t._v("\n      "+t._s(t.$t("MERGE_CONTACTS.FORM.SUBMIT"))+"\n    ")])],1)],1)}),[],!1,null,"05b2da1d",null)),st=it.exports,ot=n(148),ct=n(87);function lt(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function ut(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(t){lt(i,a,r,s,o,"next",t)}function o(t){lt(i,a,r,s,o,"throw",t)}s(void 0)}))}}function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mt={components:{MergeContact:st},mixins:[i.a],props:{primaryContact:{type:Object,required:!0},show:{type:Boolean,default:!1}},data:function(){return{isSearching:!1,searchResults:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(b.mapGetters)({uiFlags:"contacts/getUIFlags"})),methods:{onClose:function(){this.$emit("close")},onContactSearch:function(t){var e=this;return ut(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isSearching=!0,e.searchResults=[],n.prev=2,n.next=5,ot.a.search(t);case 5:a=n.sent,r=a.data.payload,e.searchResults=r.filter((function(t){return t.id!==e.primaryContact.id})),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),e.showAlert(e.$t("MERGE_CONTACTS.SEARCH.ERROR_MESSAGE"));case 13:return n.prev=13,e.isSearching=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[2,10,13,16]])})))()},onMergeContacts:function(t){var e=this;return ut(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$track(ct.c.MERGED_CONTACTS),n.prev=1,n.next=4,e.$store.dispatch("contacts/merge",{childId:e.primaryContact.id,parentId:t});case 4:e.showAlert(e.$t("MERGE_CONTACTS.FORM.SUCCESS_MESSAGE")),e.onClose(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),e.showAlert(e.$t("MERGE_CONTACTS.FORM.ERROR_MESSAGE"));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()}}},ft=mt,ht=Object(d.a)(ft,(function(){var t=this,e=t._self._c;return e("woot-modal",{attrs:{show:t.show,"on-close":t.onClose},on:{"update:show":function(e){t.show=e}}},[e("woot-modal-header",{attrs:{"header-title":t.$t("MERGE_CONTACTS.TITLE"),"header-content":t.$t("MERGE_CONTACTS.DESCRIPTION")}}),t._v(" "),e("merge-contact",{attrs:{"primary-contact":t.primaryContact,"is-searching":t.isSearching,"is-merging":t.uiFlags.isMerging,"search-results":t.searchResults},on:{search:t.onContactSearch,cancel:t.onClose,submit:t.onMergeContacts}})],1)}),[],!1,null,"0b10d3b4",null).exports,bt=n(221),vt=n(2732),gt=n(109),_t=n(1799);function Ct(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(n),!0).forEach((function(e){Tt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var At={components:{ContactInfoRow:p,EditContact:O,Thumbnail:m.a,SocialIcons:h,NewConversation:tt,ContactMergeModal:ht},mixins:[i.a,bt.a,a.mixin,r.a],props:{contact:{type:Object,default:function(){return{}}},channelType:{type:String,default:""},showAvatar:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},closeIconName:{type:String,default:"chevron-right"}},data:function(){return{showEditModal:!1,showConversationModal:!1,showMergeModal:!1,showDeleteModal:!1}},computed:Ot(Ot({},Object(b.mapGetters)({uiFlags:"contacts/getUIFlags"})),{},{contactProfileLink:function(){return"/app/accounts/".concat(this.$route.params.accountId,"/contacts/").concat(this.contact.id)},additionalAttributes:function(){return this.contact.additional_attributes||{}},location:function(){var t=this.additionalAttributes,e=t.country,n=void 0===e?"":e,a=t.city,r=void 0===a?"":a,i=t.country_code,s=[r,n].filter((function(t){return!!t})).join(", ");return s?this.findCountryFlag(i,s):""},socialProfiles:function(){var t=this.additionalAttributes,e=t.social_profiles;return Ot({twitter:t.screen_name},e||{})},confirmDeleteMessage:function(){return" ".concat(this.contact.name,"?")}}),methods:{toggleMergeModal:function(){this.showMergeModal=!this.showMergeModal},toggleEditModal:function(){this.showEditModal=!this.showEditModal},onPanelToggle:function(){this.$emit("toggle-panel")},toggleConversationModal:function(){this.showConversationModal=!this.showConversationModal,bus.$emit(gt.a.NEW_CONVERSATION_MODAL,this.showConversationModal)},toggleDeleteModal:function(){this.showDeleteModal=!this.showDeleteModal},confirmDeletion:function(){this.deleteContact(this.contact),this.closeDelete()},closeDelete:function(){this.showDeleteModal=!1,this.showConversationModal=!1,this.showEditModal=!1},findCountryFlag:function(t,e){try{var n=t?Object(vt.a)(t):"\ud83c\udf0e";return"".concat(e," ").concat(n)}catch(a){return""}},deleteContact:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.prev=1,e.next=4,n.$store.dispatch("contacts/delete",a);case 4:n.$emit("panel-close"),n.showAlert(n.$t("DELETE_CONTACT.API.SUCCESS_MESSAGE")),Object(_t.b)(n.$route.name)?n.$router.push({name:Object(_t.a)(n.$route.name)}):"contacts_dashboard"!==n.$route.name&&n.$router.push({name:"contacts_dashboard"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n.showAlert(e.t0.message?e.t0.message:n.$t("DELETE_CONTACT.API.ERROR_MESSAGE"));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(t){Ct(i,a,r,s,o,"next",t)}function o(t){Ct(i,a,r,s,o,"throw",t)}s(void 0)}))})()},openMergeModal:function(){this.toggleMergeModal()}}},wt=At,Et=Object(d.a)(wt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative items-center p-4 bg-white dark:bg-slate-900"},[e("div",{staticClass:"text-left rtl:text-right"},[e("div",{staticClass:"flex justify-between flex-row"},[t.showAvatar?e("thumbnail",{attrs:{src:t.contact.thumbnail,size:"56px",username:t.contact.name,status:t.contact.availability_status}}):t._e(),t._v(" "),t.showCloseButton?e("woot-button",{staticClass:"clear secondary rtl:rotate-180",attrs:{icon:t.closeIconName},on:{click:t.onPanelToggle}}):t._e()],1),t._v(" "),e("div",{staticClass:"mt-2 w-full"},[t.showAvatar?e("div",{staticClass:"flex items-start mb-2 gap-1.5"},[e("h3",{staticClass:"text-base text-slate-800 dark:text-slate-100 capitalize whitespace-normal my-0"},[t._v("\n          "+t._s(t.contact.name)+"\n        ")]),t._v(" "),e("div",{staticClass:"flex flex-row items-center gap-1"},[t.contact.created_at?e("fluent-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:`${t.$t("CONTACT_PANEL.CREATED_AT_LABEL")} ${t.dynamicTime(t.contact.created_at)}`,expression:"\n              `${$t('CONTACT_PANEL.CREATED_AT_LABEL')} ${dynamicTime(\n                contact.created_at\n              )}`\n            ",modifiers:{left:!0}}],staticClass:"mt-0.5",attrs:{icon:"info",size:"14"}}):t._e(),t._v(" "),e("a",{staticClass:"fs-default",attrs:{href:t.contactProfileLink,target:"_blank",rel:"noopener nofollow noreferrer"}},[e("woot-button",{attrs:{size:"tiny",icon:"open",variant:"clear","color-scheme":"secondary"}})],1)],1)]):t._e(),t._v(" "),t.additionalAttributes.description?e("p",{staticClass:"break-words"},[t._v("\n        "+t._s(t.additionalAttributes.description)+"\n      ")]):t._e(),t._v(" "),e("div",{staticClass:"mb-3"},[e("contact-info-row",{attrs:{href:t.contact.email?`mailto:${t.contact.email}`:"",value:t.contact.email,icon:"mail",emoji:"\u2709\ufe0f",title:t.$t("CONTACT_PANEL.EMAIL_ADDRESS"),"show-copy":""}}),t._v(" "),e("contact-info-row",{attrs:{href:t.contact.phone_number?`tel:${t.contact.phone_number}`:"",value:t.contact.phone_number,icon:"call",emoji:"\ud83d\udcde",title:t.$t("CONTACT_PANEL.PHONE_NUMBER"),"show-copy":""}}),t._v(" "),t.contact.identifier?e("contact-info-row",{attrs:{value:t.contact.identifier,icon:"contact-identify",emoji:"\ud83e\udeaa",title:t.$t("CONTACT_PANEL.IDENTIFIER")}}):t._e(),t._v(" "),e("contact-info-row",{attrs:{value:t.additionalAttributes.company_name,icon:"building-bank",emoji:"\ud83c\udfe2",title:t.$t("CONTACT_PANEL.COMPANY")}}),t._v(" "),t.location||t.additionalAttributes.location?e("contact-info-row",{attrs:{value:t.location||t.additionalAttributes.location,icon:"map",emoji:"\ud83c\udf0d",title:t.$t("CONTACT_PANEL.LOCATION")}}):t._e(),t._v(" "),e("social-icons",{attrs:{"social-profiles":t.socialProfiles}})],1)]),t._v(" "),e("div",{staticClass:"flex items-center w-full mt-2 gap-2"},[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("CONTACT_PANEL.NEW_MESSAGE"),expression:"$t('CONTACT_PANEL.NEW_MESSAGE')"}],attrs:{title:"$t('CONTACT_PANEL.NEW_MESSAGE')",icon:"chat",size:"small"},on:{click:t.toggleConversationModal}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("EDIT_CONTACT.BUTTON_LABEL"),expression:"$t('EDIT_CONTACT.BUTTON_LABEL')"}],attrs:{title:"$t('EDIT_CONTACT.BUTTON_LABEL')",icon:"edit",variant:"smooth",size:"small"},on:{click:t.toggleEditModal}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("CONTACT_PANEL.MERGE_CONTACT"),expression:"$t('CONTACT_PANEL.MERGE_CONTACT')"}],attrs:{title:"$t('CONTACT_PANEL.MERGE_CONTACT')",icon:"merge",variant:"smooth",size:"small","color-scheme":"secondary",disabled:t.uiFlags.isMerging},on:{click:t.openMergeModal}}),t._v(" "),t.isAdmin?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("DELETE_CONTACT.BUTTON_LABEL"),expression:"$t('DELETE_CONTACT.BUTTON_LABEL')"}],attrs:{title:"$t('DELETE_CONTACT.BUTTON_LABEL')",icon:"delete",variant:"smooth",size:"small","color-scheme":"alert",disabled:t.uiFlags.isDeleting},on:{click:t.toggleDeleteModal}}):t._e()],1),t._v(" "),t.showEditModal?e("edit-contact",{attrs:{show:t.showEditModal,contact:t.contact},on:{cancel:t.toggleEditModal}}):t._e(),t._v(" "),t.contact.id?e("new-conversation",{attrs:{show:t.showConversationModal,contact:t.contact},on:{cancel:t.toggleConversationModal}}):t._e(),t._v(" "),t.showMergeModal?e("contact-merge-modal",{attrs:{"primary-contact":t.contact,show:t.showMergeModal},on:{close:t.toggleMergeModal}}):t._e()],1),t._v(" "),t.showDeleteModal?e("woot-delete-modal",{attrs:{show:t.showDeleteModal,"on-close":t.closeDelete,"on-confirm":t.confirmDeletion,title:t.$t("DELETE_CONTACT.CONFIRM.TITLE"),message:t.$t("DELETE_CONTACT.CONFIRM.MESSAGE"),"message-value":t.confirmDeleteMessage,"confirm-text":t.$t("DELETE_CONTACT.CONFIRM.YES"),"reject-text":t.$t("DELETE_CONTACT.CONFIRM.NO")},on:{"update:show":function(e){t.showDeleteModal=e}}}):t._e()],1)}),[],!1,null,null,null);e.a=Et.exports},2799:function(t,e,n){"use strict";n(49),n(268),n(68),n(97);var a={props:{title:{type:String,default:""},color:{type:String,default:""},selected:{type:Boolean,default:!1}},methods:{onClick:function(){this.$emit("click",this.title)}}},r=(n(2764),n(5)),i=Object(r.a)(a,(function(){var t=this,e=t._self._c;return e("woot-dropdown-item",[e("div",{staticClass:"item-wrap"},[e("woot-button",{attrs:{variant:"clear"},on:{click:t.onClick}},[e("div",{staticClass:"button-wrap"},[e("div",{staticClass:"name-label-wrap"},[t.color?e("div",{staticClass:"label-color--display",style:{backgroundColor:t.color}}):t._e(),t._v(" "),e("span",{staticClass:"label-text",attrs:{title:t.title}},[t._v(t._s(t.title))])]),t._v(" "),e("div",[t.selected?e("i",{staticClass:"icon ion-checkmark-round"}):t._e()])])])],1)])}),[],!1,null,"e83c4bc0",null).exports,s=n(1944),o=n(2670),c=n(2765),l=(n(65),n(1775),/[^a-zA-Z0-9_-]/g),u=/\s+/g,d={components:{LabelDropdownItem:i,AddLabelModal:o.a,Hotkey:s.a},props:{accountLabels:{type:Array,default:function(){return[]}},selectedLabels:{type:Array,default:function(){return[]}},allowCreation:{type:Boolean,default:!1}},data:function(){return{search:"",createModalVisible:!1}},computed:{createLabelPlaceholder:function(){var t=this.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.CREATE_LABEL");return this.search?"".concat(t,":"):t},filteredActiveLabels:function(){return this.search?Object(c.a)(this.accountLabels,this.search,["title"],{threshold:.9}):this.accountLabels},noResult:function(){return 0===this.filteredActiveLabels.length},hasExactMatchInResults:function(){var t=this;return this.filteredActiveLabels.some((function(e){return e.title===t.search}))},shouldShowCreate:function(){return this.allowCreation&&this.filteredActiveLabels.length<3},parsedSearch:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t?t.trim().toLowerCase().replace(u,"-").replace(l,""):""}(this.search)}},mounted:function(){this.focusInput()},methods:{focusInput:function(){this.$refs.searchbar.focus()},updateLabels:function(t){this.$emit("update",t)},onAdd:function(t){this.$emit("add",t)},onRemove:function(t){this.$emit("remove",t)},onAddRemove:function(t){this.selectedLabels.includes(t.title)?this.onRemove(t.title):this.onAdd(t)},showCreateModal:function(){this.createModalVisible=!0},hideCreateModal:function(){this.createModalVisible=!1}}},p=d,m=(n(2766),Object(r.a)(p,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col w-full max-h-[12.5rem]"},[e("div",{staticClass:"flex items-center justify-center mb-1"},[e("h4",{staticClass:"text-sm text-slate-800 dark:text-slate-100 m-0 overflow-hidden whitespace-nowrap text-ellipsis flex-grow"},[t._v("\n      "+t._s(t.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.TITLE"))+"\n    ")]),t._v(" "),e("hotkey",{attrs:{"custom-class":"text-slate-800 dark:text-slate-100 bg-slate-50 dark:bg-slate-600 text-xxs border border-solid border-slate-75 dark:border-slate-600"}},[t._v("\n      L\n    ")])],1),t._v(" "),e("div",{staticClass:"mb-2 flex-shrink-0 flex-grow-0 flex-auto max-h-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"searchbar",staticClass:"search-input",attrs:{type:"text",autofocus:"true",placeholder:t.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.PLACEHOLDER")},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"flex justify-start items-start flex-grow flex-shrink flex-auto overflow-auto"},[e("div",{staticClass:"w-full"},[e("woot-dropdown-menu",t._l(t.filteredActiveLabels,(function(n){return e("label-dropdown-item",{key:n.title,attrs:{title:n.title,color:n.color,selected:t.selectedLabels.includes(n.title)},on:{click:function(e){return t.onAddRemove(n)}}})})),1),t._v(" "),t.noResult?e("div",{staticClass:"flex justify-center py-4 px-2.5 font-medium text-xs text-slate-700 dark:text-slate-200"},[t._v("\n        "+t._s(t.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.NO_RESULT"))+"\n      ")]):t._e(),t._v(" "),t.allowCreation&&t.shouldShowCreate?e("div",{staticClass:"flex pt-1 border-t border-solid border-slate-100 dark:border-slate-900"},[e("woot-button",{staticClass:"button-new-label",attrs:{size:"small",variant:"clear","color-scheme":"secondary",icon:"add","is-expanded":"","is-disabled":t.hasExactMatchInResults},on:{click:t.showCreateModal}},[t._v("\n          "+t._s(t.createLabelPlaceholder)+"\n          "+t._s(t.parsedSearch)+"\n        ")]),t._v(" "),e("woot-modal",{attrs:{show:t.createModalVisible,"on-close":t.hideCreateModal},on:{"update:show":function(e){t.createModalVisible=e}}},[e("add-label-modal",{attrs:{"prefill-title":t.parsedSearch},on:{close:t.hideCreateModal}})],1)],1):t._e()],1)])])}),[],!1,null,"65d69bf0",null));e.a=m.exports},2816:function(t,e,n){"use strict";var a={components:{EmojiOrIcon:n(1927).a},props:{title:{type:String,required:!0},compact:{type:Boolean,default:!1},icon:{type:String,default:""},emoji:{type:String,default:""},isOpen:{type:Boolean,default:!0}}},r=n(5),i=Object(r.a)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"-mt-px text-sm"},[e("button",{staticClass:"flex items-center select-none w-full bg-slate-50 dark:bg-slate-800 border border-l-0 border-r-0 border-solid m-0 border-slate-100 dark:border-slate-700/50 cursor-grab justify-between py-2 px-4 drag-handle",on:{click:function(e){return t.$emit("click")}}},[e("div",{staticClass:"flex justify-between mb-0.5"},[e("emoji-or-icon",{staticClass:"inline-block w-5",attrs:{icon:t.icon,emoji:t.emoji}}),t._v(" "),e("h5",{staticClass:"text-slate-800 text-sm dark:text-slate-100 mb-0 py-0 pr-2 pl-0"},[t._v("\n        "+t._s(t.title)+"\n      ")])],1),t._v(" "),e("div",{staticClass:"flex flex-row"},[t._t("button"),t._v(" "),e("div",{staticClass:"flex justify-end w-3 text-woot-500"},[t.isOpen?e("fluent-icon",{attrs:{size:"24",icon:"subtract",type:"solid"}}):e("fluent-icon",{attrs:{size:"24",icon:"add",type:"solid"}})],1)],2)]),t._v(" "),t.isOpen?e("div",{staticClass:"bg-white dark:bg-slate-900",class:t.compact?"p-0":"p-4"},[t._t("default")],2):t._e()])}),[],!1,null,null,null);e.a=i.exports},2817:function(t,e,n){"use strict";n(45),n(8),n(10),n(4),n(11),n(9),n(12);var a=n(2734),r=n(25),i=n(170);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c={components:{ConversationCard:a.a,Spinner:i.a},props:{contactId:{type:[String,Number],required:!0},conversationId:{type:[String,Number],required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({conversations:function(){return this.$store.getters["contactConversations/getContactConversation"](this.contactId)},previousConversations:function(){var t=this;return this.conversations.filter((function(e){return e.id!==Number(t.conversationId)}))}},Object(r.mapGetters)({uiFlags:"contactConversations/getUIFlags"})),watch:{contactId:function(t,e){t&&t!==e&&this.$store.dispatch("contactConversations/get",t)}},mounted:function(){this.$store.dispatch("contactConversations/get",this.contactId)}},l=c,u=(n(2763),n(5)),d=Object(u.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"contact-conversation--panel"},[t.uiFlags.isFetching?e("spinner"):e("div",{staticClass:"contact-conversation__wrap"},[t.previousConversations.length?e("div",{staticClass:"contact-conversation--list"},t._l(t.previousConversations,(function(t){return e("conversation-card",{key:t.id,staticClass:"compact",attrs:{chat:t,"hide-inbox-name":!1,"hide-thumbnail":!0}})})),1):e("div",{staticClass:"no-label-message"},[e("span",[t._v("\n        "+t._s(t.$t("CONTACT_PANEL.CONVERSATIONS.NO_RECORDS_FOUND"))+"\n      ")])])])],1)}),[],!1,null,"bf2c0356",null);e.a=d.exports},2821:function(t,e,n){"use strict";var a={methods:{addLabel:function(){this.$emit("add")}}},r=(n(2767),n(5)),i=Object(r.a)(a,(function(){var t=this;return(0,t._self._c)("woot-button",{staticClass:"label--add",attrs:{variant:"smooth",icon:"add",size:"tiny"},on:{click:t.addLabel}},[t._v("\n  "+t._s(t.$t("CONTACT_PANEL.LABELS.CONVERSATION.ADD_BUTTON"))+"\n")])}),[],!1,null,"37ec2225",null);e.a=i.exports},2969:function(t,e,n){},2970:function(t,e,n){},3018:function(t,e,n){"use strict";n(10);var a=n(2816),r=n(2817),i=n(2797),s=(n(30),n(45),n(8),n(68),n(97),n(83),n(4),n(11),n(9),n(12),n(7),n(22),n(25)),o=n(2821),c=n(299),l=n(2799),u=n(149),d=n(221),p=n(108),m={components:{AddLabel:o.a,LabelDropdown:l.a},mixins:[u.mixin,d.a,c.a],props:{allLabels:{type:Array,default:function(){return[]}},savedLabels:{type:Array,default:function(){return[]}}},data:function(){return{showSearchDropdownLabel:!1}},computed:{selectedLabels:function(){return this.savedLabels.map((function(t){return t.title}))}},methods:{addItem:function(t){this.$emit("add",t)},removeItem:function(t){this.$emit("remove",t)},toggleLabels:function(){this.showSearchDropdownLabel=!this.showSearchDropdownLabel},closeDropdownLabel:function(){this.showSearchDropdownLabel=!1},handleKeyEvents:function(t){"l"!==Object(p.a)(t)||Object(p.x)(t)?Object(p.z)(t)&&this.showSearchDropdownLabel&&(this.closeDropdownLabel(),t.preventDefault()):(this.toggleLabels(),t.preventDefault())}}},f=(n(3274),n(5));function h(t,e,n,a,r,i,s){try{var o=t[i](s),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(a,r)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(t){h(i,a,r,s,o,"next",t)}function o(t){h(i,a,r,s,o,"throw",t)}s(void 0)}))}}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _={components:{LabelSelector:Object(f.a)(m,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.closeDropdownLabel,expression:"closeDropdownLabel"}],staticClass:"label-wrap"},[e("add-label",{on:{add:t.toggleLabels}}),t._v(" "),t._l(t.savedLabels,(function(n){return e("woot-label",{key:n.id,attrs:{title:n.title,description:n.description,"show-close":!0,color:n.color,variant:"smooth"},on:{click:t.removeItem}})})),t._v(" "),e("div",{staticClass:"dropdown-wrap"},[e("div",{staticClass:"dropdown-pane",class:{"dropdown-pane--open":t.showSearchDropdownLabel}},[t.showSearchDropdownLabel?e("label-dropdown",{attrs:{"account-labels":t.allLabels,"selected-labels":t.selectedLabels,"allow-creation":t.isAdmin},on:{add:t.addItem,remove:t.removeItem}}):t._e()],1)])],2)}),[],!1,null,"67ed207f",null).exports},mixins:[n(79).a],props:{contactId:{type:[String,Number],required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({savedLabels:function(){var t=this.$store.getters["contactLabels/getContactLabels"](this.contactId);return this.allLabels.filter((function(e){var n=e.title;return t.includes(n)}))}},Object(s.mapGetters)({labelUiFlags:"contactLabels/getUIFlags",allLabels:"labels/getLabels"})),watch:{contactId:function(t,e){t&&t!==e&&this.fetchLabels(t)}},mounted:function(){var t=this.contactId;this.fetchLabels(t)},methods:{onUpdateLabels:function(t){var e=this;return b(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("contactLabels/update",{contactId:e.contactId,labels:t});case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),e.showAlert(e.$t("CONTACT_PANEL.LABELS.CONTACT.ERROR"));case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()},addItem:function(t){var e=this.savedLabels.map((function(t){return t.title}));e.push(t.title),this.onUpdateLabels(e)},removeItem:function(t){var e=this.savedLabels.map((function(t){return t.title})).filter((function(e){return e!==t}));this.onUpdateLabels(e)},fetchLabels:function(t){var e=this;return b(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:e.$store.dispatch("contactLabels/get",t);case 3:case"end":return n.stop()}}),n)})))()}}},C=_,y=Object(f.a)(C,(function(){var t=this;return(0,t._self._c)("label-selector",{attrs:{"all-labels":t.allLabels,"saved-labels":t.savedLabels},on:{add:t.addItem,remove:t.removeItem}})}),[],!1,null,null,null).exports,O=n(2737),T=n(2735),A=n(2683),w=n.n(A),E=n(267),x={components:{AccordionItem:a.a,ContactConversations:r.a,ContactInfo:i.a,ContactLabel:y,CustomAttributes:O.a,CustomAttributeSelector:T.a,draggable:w.a},mixins:[E.a],props:{contact:{type:Object,default:function(){return{}}},onClose:{type:Function,default:function(){}},showAvatar:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0}},data:function(){return{dragEnabled:!0,contactSidebarItems:[],dragging:!1}},computed:{hasContactAttributes:function(){var t=this.contact.custom_attributes;return t&&Object.keys(t).length}},mounted:function(){this.contactSidebarItems=this.contactSidebarItemsOrder},methods:{onDragEnd:function(){this.dragging=!1,this.updateUISettings({contact_sidebar_items_order:this.contactSidebarItems})}}},S=(n(3275),Object(f.a)(x,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-[25%] bg-white dark:bg-slate-900 contact--panel",class:{"border-left":t.showAvatar}},[e("contact-info",{attrs:{"show-close-button":t.showCloseButton,"show-avatar":t.showAvatar,contact:t.contact,"close-icon-name":"dismiss"},on:{"panel-close":t.onClose,"toggle-panel":t.onClose}}),t._v(" "),e("draggable",{staticClass:"list-group",attrs:{list:t.contactSidebarItems,disabled:!t.dragEnabled,"ghost-class":"ghost"},on:{start:function(e){t.dragging=!0},end:t.onDragEnd}},[e("transition-group",t._l(t.contactSidebarItems,(function(n){return e("div",{key:n.name,staticClass:"list-group-item"},["contact_attributes"===n.name?e("div",[e("accordion-item",{attrs:{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.CONTACT_ATTRIBUTES"),"is-open":t.isContactSidebarItemOpen("is_ct_custom_attr_open"),compact:""},on:{click:e=>t.toggleSidebarUIState("is_ct_custom_attr_open",e)}},[e("custom-attributes",{staticClass:"even",attrs:{"contact-id":t.contact.id,"attribute-type":"contact_attribute","attribute-class":"conversation--attribute","custom-attributes":t.contact.custom_attributes}}),t._v(" "),e("custom-attribute-selector",{attrs:{"attribute-type":"contact_attribute","contact-id":t.contact.id}})],1)],1):t._e(),t._v(" "),"contact_labels"===n.name?e("div",[e("accordion-item",{attrs:{title:t.$t("CONTACT_PANEL.SIDEBAR_SECTIONS.CONTACT_LABELS"),"is-open":t.isContactSidebarItemOpen("is_ct_labels_open")},on:{click:e=>t.toggleSidebarUIState("is_ct_labels_open",e)}},[e("contact-label",{staticClass:"contact-labels",attrs:{"contact-id":t.contact.id}})],1)],1):t._e(),t._v(" "),"previous_conversation"===n.name?e("div",[e("accordion-item",{attrs:{title:t.$t("CONTACT_PANEL.SIDEBAR_SECTIONS.PREVIOUS_CONVERSATIONS"),"is-open":t.isContactSidebarItemOpen("is_ct_prev_conv_open")},on:{click:e=>t.toggleSidebarUIState("is_ct_prev_conv_open",e)}},[t.contact.id?e("contact-conversations",{attrs:{"contact-id":t.contact.id,"conversation-id":""}}):t._e()],1)],1):t._e()])})),0)],1)],1)}),[],!1,null,"6d3d5265",null));e.a=S.exports},3182:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n(39),r=n(14),i=36e5,s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},o=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,l=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(t,e){Object(r.a)(1,arguments);var n=e||{},i=null==n.additionalDigits?2:Object(a.a)(n.additionalDigits);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var s,o=d(t);if(o.date){var c=p(o.date,i);s=m(c.restDateString,c.year)}if(isNaN(s)||!s)return new Date(NaN);var l,u=s.getTime(),f=0;if(o.time&&(f=h(o.time),isNaN(f)||null===f))return new Date(NaN);if(!o.timezone){var b=new Date(u+f),g=new Date(0);return g.setFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),g.setHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()),g}return l=v(o.timezone),isNaN(l)?new Date(NaN):new Date(u+f+l)}function d(t){var e,n={},a=t.split(s.dateTimeDelimiter);if(a.length>2)return n;if(/:/.test(a[0])?(n.date=null,e=a[0]):(n.date=a[0],e=a[1],s.timeZoneDelimiter.test(n.date)&&(n.date=t.split(s.timeZoneDelimiter)[0],e=t.substr(n.date.length,t.length))),e){var r=s.timezone.exec(e);r?(n.time=e.replace(r[1],""),n.timezone=r[1]):n.time=e}return n}function p(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=t.match(n);if(!a)return{year:null};var r=a[1]&&parseInt(a[1]),i=a[2]&&parseInt(a[2]);return{year:null==i?r:100*i,restDateString:t.slice((a[1]||a[2]).length)}}function m(t,e){if(null===e)return null;var n=t.match(o);if(!n)return null;var a=!!n[4],r=f(n[1]),i=f(n[2])-1,s=f(n[3]),c=f(n[4]),l=f(n[5])-1;if(a)return function(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}(0,c,l)?function(t,e,n){var a=new Date(0);a.setUTCFullYear(t,0,4);var r=a.getUTCDay()||7,i=7*(e-1)+n+1-r;return a.setUTCDate(a.getUTCDate()+i),a}(e,c,l):new Date(NaN);var u=new Date(0);return function(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(g[e]||(_(t)?29:28))}(e,i,s)&&function(t,e){return e>=1&&e<=(_(t)?366:365)}(e,r)?(u.setUTCFullYear(e,i,Math.max(r,s)),u):new Date(NaN)}function f(t){return t?parseInt(t):1}function h(t){var e=t.match(c);if(!e)return null;var n=b(e[1]),a=b(e[2]),r=b(e[3]);return function(t,e,n){if(24===t)return 0===e&&0===n;return n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}(n,a,r)?n*i+6e4*a+1e3*r:NaN}function b(t){return t&&parseFloat(t.replace(",","."))||0}function v(t){if("Z"===t)return 0;var e=t.match(l);if(!e)return 0;var n="+"===e[1]?-1:1,a=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return function(t,e){return e>=0&&e<=59}(0,r)?n*(a*i+6e4*r):NaN}var g=[31,null,31,30,31,30,31,31,30,31,30,31];function _(t){return t%400===0||t%4===0&&t%100}},3274:function(t,e,n){"use strict";n(2969)},3275:function(t,e,n){"use strict";n(2970)}}]);
//# sourceMappingURL=10-ec55ce7604fd75258547.chunk.js.map