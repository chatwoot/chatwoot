(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1867:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));var i=function(t){return"form"===t.content_type},s=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(e)&&!(null===(t=e.content_attributes)||void 0===t||!t.submitted_values)},a={GENERAL:1e4,FACEBOOK:1e3,TWILIO_SMS:320,TWILIO_WHATSAPP:1600}},189:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a}));var i="",s={INCOMING:0,OUTGOING:1,ACTIVITY:2,TEMPLATE:3},a="chatwoot-widget:"},1912:function(t,e,n){"use strict";n(64),n(49),n(65),n(1913),n(136),n(16),n(7),n(20),n(21),n(196),n(9);var i=n(1915),s=n.n(i),a=(n(370),/mention:\/\/(user|team)\/(\d+)\/(.+)/gm);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(t){t.children.forEach((function(t){"image"===t.type&&function(t){var e=t.attrGet("src");if(e){var n=new URL(e).searchParams.get("cw_image_height");n&&t.attrSet("style","height: ".concat(n,";"))}}(t)}))},l=n(1807)({html:!1,xhtmlOut:!0,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,quotes:"\u201c\u201d\u2018\u2019",maxNesting:20}).use((function(t){t.renderer.rules.mention=function(t,e){return'<span class="prosemirror-mention-node">'.concat(t[e].content,"</span>")},t.inline.ruler.before("link","mention",(function(t,e){var n,i,s,r,o,c,l="",u=t.posMax;return 91===t.src.charCodeAt(t.pos)&&(s=t.pos+1,!((i=t.md.helpers.parseLinkLabel(t,t.pos,!0))<0)&&(n=t.src.slice(s,i),(r=i+1)<u&&40===t.src.charCodeAt(r)&&(r+=1,(o=t.md.helpers.parseLinkDestination(t.src,r,t.posMax)).ok&&(l=t.md.normalizeLink(o.str),t.md.validateLink(l)?r=o.pos:l=""),r+=1),!!l.match(new RegExp(a))&&(e||(t.pos=s,t.posMax=i,(c=t.push("mention","")).href=l,c.content=n),t.pos=r,t.posMax=u,!0)))}))})).use((function(t){t.core.ruler.after("inline","add-image-height",(function(t){t.tokens.forEach((function(t){"inline"===t.type&&c(t)}))}))})).use(s.a,{attrs:{class:"link",rel:"noreferrer noopener nofollow",target:"_blank"}}),u=/(^|[^@\w])@(\w{1,15})\b/g,d=/(^|\s)#(\w+)/g,p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r(this,t),this.message=e||"",this.isAPrivateNote=i,this.isATweet=n}var e,n,i;return e=t,(n=[{key:"formatMessage",value:function(){var t=this.message;return this.isATweet&&!this.isAPrivateNote&&(t=(t=t.replace(u,"$1[@$2](http://twitter.com/$2)")).replace(d,"$1[#$2](https://twitter.com/hashtag/$2)")),l.render(t)}},{key:"formattedMessage",get:function(){return this.formatMessage()}},{key:"plainText",get:function(){return(new DOMParser).parseFromString(this.formattedMessage,"text/html").body.textContent||""}}])&&o(e.prototype,n),i&&o(e,i),t}(),h=p;e.a={methods:{formatMessage:function(t,e,n){return new h(t,e,n).formattedMessage},getPlainText:function(t,e){return new h(t,e).plainText},truncateMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.length<100?t:"".concat(t.slice(0,97),"...")},highlightContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this.getPlainText(t),s=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return i.replace(new RegExp("(".concat(s,")"),"ig"),'<span class="'.concat(n,'">$1</span>'))}}}},1917:function(t,e,n){"use strict";e.a={computed:{hostURL:function(){return window.chatwootConfig.hostURL},vapidPublicKey:function(){return window.chatwootConfig.vapidPublicKey},enabledLanguages:function(){return window.chatwootConfig.enabledLanguages},isEnterprise:function(){return"true"===window.chatwootConfig.isEnterprise}}}},2649:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){for(var t="#",e=0;e<6;e+=1)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}},2650:function(t,e,n){},2654:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));n(41);var i=function(t){var e=window.chatwootConfig,n=e.hostURL,i=e.helpCenterURL;return"".concat(i||n||"","/hc/").concat(t)},s=function(t,e,n,s){var a=i(t);return"".concat(a,"/articles/").concat(s)}},2657:function(t,e,n){"use strict";var i=n(271),s={props:{backUrl:{type:[String,Object],default:""},buttonLabel:{type:String,default:""}},methods:{goBack:function(){""!==this.backUrl?i.a.push(this.backUrl):i.a.go(-1)}}},a=n(5),r=Object(a.a)(s,(function(){var t=this,e=t._self._c;return e("button",{staticClass:"header-section flex items-center text-base font-normal mr-4 ml-2 cursor-pointer text-woot-500 dark:text-woot-500",on:{"!click":function(e){return t.goBack.apply(null,arguments)}}},[e("fluent-icon",{attrs:{icon:"chevron-left"}}),t._v("\n  "+t._s(t.buttonLabel||t.$t("GENERAL_SETTINGS.BACK"))+"\n")],1)}),[],!1,null,null,null);e.a=r.exports},2658:function(t,e,n){"use strict";e.a={computed:{getLabelTitleErrorMessage:function(){var t="";return this.$v.title.$error?this.$v.title.required?this.$v.title.minLength?this.$v.title.validLabelCharacters||(t=this.$t("LABEL_MGMT.FORM.NAME.VALID_ERROR")):t=this.$t("LABEL_MGMT.FORM.NAME.MINIMUM_LENGTH_ERROR"):t=this.$t("LABEL_MGMT.FORM.NAME.REQUIRED_ERROR"):t="",t}}}},2659:function(t,e,n){"use strict";n(68),n(97);var i=n(57);e.a={title:{required:i.required,minLength:Object(i.minLength)(2),validLabelCharacters:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!t&&!t.includes(" ")}},description:{},color:{required:i.required},showOnSidebar:{}}},2660:function(t,e,n){},2661:function(t,e,n){},2662:function(t,e,n){},2663:function(t,e,n){"use strict";var i=n(1809),s={props:{inbox:{type:Object,default:function(){}}},computed:{computedInboxClass:function(){var t=this.inbox,e=t.phone_number,n=t.channel_type;return Object(i.a)(n,e)}}},a=n(5),r=Object(a.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"inbox--name inline-flex items-center py-0.5 px-0 leading-3 font-medium bg-none text-slate-600 dark:text-slate-500 text-xs my-0 mx-2.5"},[e("fluent-icon",{staticClass:"mr-0.5 rtl:ml-0.5 rtl:mr-0",attrs:{icon:t.computedInboxClass,size:"12"}}),t._v("\n  "+t._s(t.inbox.name)+"\n")],1)}),[],!1,null,null,null);e.a=r.exports},2664:function(t,e,n){"use strict";n(2650)},2667:function(t,e,n){"use strict";n(83),n(10),n(141),n(2224),n(45),n(4),n(8),n(11),n(9),n(12);var i=n(25),s=n(13);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a={computed:r(r({},Object(i.mapGetters)({currentChat:"getSelectedChat",accountId:"getCurrentAccountId"})),{},{attributes:function(){return this.$store.getters["attributes/getAttributesByModel"](this.attributeType)},customAttributes:function(){return"conversation_attribute"===this.attributeType?this.currentChat.custom_attributes||{}:this.contact.custom_attributes||{}},contactIdentifier:function(){var t,e;return(null===(t=this.currentChat.meta)||void 0===t||null===(e=t.sender)||void 0===e?void 0:e.id)||this.$route.params.contactId||this.contactId},contact:function(){return this.$store.getters["contacts/getContact"](this.contactIdentifier)},conversationId:function(){return this.currentChat.id},filteredAttributes:function(){var t=this;return Object.keys(this.customAttributes).map((function(e){var n=t.attributes.find((function(t){return t.attribute_key===e}));return r(r({},n),{},n?{value:t.customAttributes[e]}:{value:t.customAttributes[e],attribute_description:e,attribute_display_name:e,attribute_display_type:t.attributeDisplayType(t.customAttributes[e]),attribute_key:e,attribute_model:t.attributeType,id:Math.random()})}))}}),methods:{isAttributeNumber:function(t){return Number.isInteger(Number(t))&&Number(t)>0},attributeDisplayType:function(t){return this.isAttributeNumber(t)?"number":Object(s.f)(t)?"link":"text"}}}},2670:function(t,e,n){"use strict";n(30),n(4),n(31),n(10),n(8),n(11),n(9),n(12),n(7),n(22);var i=n(79),s=n(2658),a=n(25),r=n(2659),o=n(2649);function c(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={mixins:[i.a,s.a],props:{prefillTitle:{type:String,default:""}},data:function(){return{color:"#000",description:"",title:"",showOnSidebar:!0}},validations:r.a,computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(a.mapGetters)({uiFlags:"labels/getUIFlags"})),mounted:function(){this.color=Object(o.a)(),this.title=this.prefillTitle.toLowerCase()},methods:{onClose:function(){this.$emit("close")},addLabel:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("labels/create",{color:e.color,description:e.description,title:e.title.toLowerCase(),show_on_sidebar:e.showOnSidebar});case 3:e.showAlert(e.$t("LABEL_MGMT.ADD.API.SUCCESS_MESSAGE")),e.onClose(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),n=t.t0.message||e.$t("LABEL_MGMT.ADD.API.ERROR_MESSAGE"),e.showAlert(n);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){c(a,i,s,r,o,"next",t)}function o(t){c(a,i,s,r,o,"throw",t)}r(void 0)}))})()}}},p=d,h=(n(2664),n(5)),f=Object(h.a)(p,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-auto overflow-auto flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":t.$t("LABEL_MGMT.ADD.TITLE"),"header-content":t.$t("LABEL_MGMT.ADD.DESC")}}),t._v(" "),e("form",{staticClass:"mx-0 flex flex-wrap",on:{submit:function(e){return e.preventDefault(),t.addLabel.apply(null,arguments)}}},[e("woot-input",{staticClass:"w-full label-name--input",class:{error:t.$v.title.$error},attrs:{label:t.$t("LABEL_MGMT.FORM.NAME.LABEL"),placeholder:t.$t("LABEL_MGMT.FORM.NAME.PLACEHOLDER"),error:t.getLabelTitleErrorMessage,"data-testid":"label-title"},on:{input:t.$v.title.$touch},model:{value:t.title,callback:function(e){t.title="string"===typeof e?e.trim():e},expression:"title"}}),t._v(" "),e("woot-input",{staticClass:"w-full",class:{error:t.$v.description.$error},attrs:{label:t.$t("LABEL_MGMT.FORM.DESCRIPTION.LABEL"),placeholder:t.$t("LABEL_MGMT.FORM.DESCRIPTION.PLACEHOLDER"),"data-testid":"label-description"},on:{input:t.$v.description.$touch},model:{value:t.description,callback:function(e){t.description="string"===typeof e?e.trim():e},expression:"description"}}),t._v(" "),e("div",{staticClass:"w-full"},[e("label",[t._v("\n        "+t._s(t.$t("LABEL_MGMT.FORM.COLOR.LABEL"))+"\n        "),e("woot-color-picker",{model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1)]),t._v(" "),e("div",{staticClass:"w-full"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.showOnSidebar,expression:"showOnSidebar"}],attrs:{type:"checkbox"},domProps:{value:!0,checked:Array.isArray(t.showOnSidebar)?t._i(t.showOnSidebar,!0)>-1:t.showOnSidebar},on:{change:function(e){var n=t.showOnSidebar,i=e.target,s=!!i.checked;if(Array.isArray(n)){var a=t._i(n,true);i.checked?a<0&&(t.showOnSidebar=n.concat([true])):a>-1&&(t.showOnSidebar=n.slice(0,a).concat(n.slice(a+1)))}else t.showOnSidebar=s}}}),t._v(" "),e("label",{attrs:{for:"conversation_creation"}},[t._v("\n        "+t._s(t.$t("LABEL_MGMT.FORM.SHOW_ON_SIDEBAR.LABEL"))+"\n      ")])]),t._v(" "),e("div",{staticClass:"flex justify-end items-center py-2 px-0 gap-2 w-full"},[e("woot-button",{attrs:{"is-disabled":t.$v.title.$invalid||t.uiFlags.isCreating,"is-loading":t.uiFlags.isCreating,"data-testid":"label-submit"}},[t._v("\n        "+t._s(t.$t("LABEL_MGMT.FORM.CREATE"))+"\n      ")]),t._v(" "),e("woot-button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n        "+t._s(t.$t("LABEL_MGMT.FORM.CANCEL"))+"\n      ")])],1)],1)],1)}),[],!1,null,"0a500998",null);e.a=f.exports},2675:function(t,e,n){"use strict";n(16),n(7),n(21),n(10),n(4),n(8),n(11),n(9),n(12);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r={props:{value:{type:Object,default:function(){return null}},filterAttributes:{type:Array,default:function(){return[]}},inputType:{type:String,default:"plain_text"},dataType:{type:String,default:"plain_text"},operators:{type:Array,default:function(){return[]}},dropdownValues:{type:Array,default:function(){return[]}},showQueryOperator:{type:Boolean,default:!1},v:{type:Object,default:function(){return null}},showUserInput:{type:Boolean,default:!0},groupedFilters:{type:Boolean,default:!1},filterGroups:{type:Array,default:function(){return[]}},customAttributeType:{type:String,default:""}},computed:{attributeKey:{get:function(){return this.value?this.value.attribute_key:null},set:function(t){var e=this.value||{};this.$emit("input",s(s({},e),{},{attribute_key:t}))}},filterOperator:{get:function(){return this.value?this.value.filter_operator:null},set:function(t){var e=this.value||{};this.$emit("input",s(s({},e),{},{filter_operator:t}))}},values:{get:function(){return this.value?this.value.values:null},set:function(t){var e=this.value||{};this.$emit("input",s(s({},e),{},{values:t}))}},query_operator:{get:function(){return this.value?this.value.query_operator:null},set:function(t){var e=this.value||{};this.$emit("input",s(s({},e),{},{query_operator:t}))}},custom_attribute_type:{get:function(){return this.customAttributeType?this.customAttributeType:""},set:function(){var t=this.value||{};this.$emit("input",s(s({},t),{},{custom_attribute_type:this.customAttributeType}))}}},watch:{customAttributeType:{handler:function(t){this.value.custom_attribute_type="conversation_attribute"===t||"contact_attribute"===t?this.customAttributeType:""},immediate:!0}},methods:{removeFilter:function(){this.$emit("removeFilter")},resetFilter:function(){this.$emit("resetFilter")},getInputErrorClass:function(t,e){return t&&e?"bg-red-50 dark:bg-red-800/50 border-red-100 dark:border-red-700/50":"bg-slate-50 dark:bg-slate-800 border-slate-75 dark:border-slate-700/50"}}},o=(n(2681),n(5)),c=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"rounded-md p-2 border border-solid",class:t.getInputErrorClass(t.v.values.$dirty,t.v.values.$error)},[e("div",{staticClass:"flex"},[t.groupedFilters?e("select",{directives:[{name:"model",rawName:"v-model",value:t.attributeKey,expression:"attributeKey"}],staticClass:"bg-white max-w-[30%] dark:bg-slate-900 mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.attributeKey=e.target.multiple?n:n[0]},function(e){return t.resetFilter()}]}},t._l(t.filterGroups,(function(n,i){return e("optgroup",{key:i,attrs:{label:n.name}},t._l(n.attributes,(function(n){return e("option",{key:n.key,domProps:{value:n.key}},[t._v("\n            "+t._s(n.name)+"\n          ")])})),0)})),0):e("select",{directives:[{name:"model",rawName:"v-model",value:t.attributeKey,expression:"attributeKey"}],staticClass:"bg-white max-w-[30%] dark:bg-slate-900 mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.attributeKey=e.target.multiple?n:n[0]},function(e){return t.resetFilter()}]}},t._l(t.filterAttributes,(function(n){return e("option",{key:n.key,attrs:{disabled:n.disabled},domProps:{value:n.key}},[t._v("\n          "+t._s(n.name)+"\n        ")])})),0),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filterOperator,expression:"filterOperator"}],staticClass:"bg-white dark:bg-slate-900 max-w-[20%] mb-0 mr-1 text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.filterOperator=e.target.multiple?n:n[0]}}},t._l(t.operators,(function(n,i){return e("option",{key:i,domProps:{value:n.value}},[t._v("\n          "+t._s(t.$t(`FILTER.OPERATOR_LABELS.${n.value}`))+"\n        ")])})),0),t._v(" "),t.showUserInput?e("div",{staticClass:"filter__answer--wrap mr-1 flex-grow"},["multi_select"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:"Select",multiple:!0,"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.dropdownValues,"allow-empty":!1},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})],1):"search_select"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:"Select","selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"","max-height":160,options:t.dropdownValues,"allow-empty":!1,"option-height":104},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})],1):"date"===t.inputType?e("div",{staticClass:"multiselect-wrap--small"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.values,expression:"values"}],staticClass:"mb-0 datepicker",attrs:{type:"date",editable:!1},domProps:{value:t.values},on:{input:function(e){e.target.composing||(t.values=e.target.value)}}})]):e("input",{directives:[{name:"model",rawName:"v-model",value:t.values,expression:"values"}],staticClass:"mb-0",attrs:{type:"text",placeholder:"Enter value"},domProps:{value:t.values},on:{input:function(e){e.target.composing||(t.values=e.target.value)}}})]):t._e(),t._v(" "),e("woot-button",{attrs:{icon:"dismiss",variant:"clear","color-scheme":"secondary"},on:{click:t.removeFilter}})],1),t._v(" "),t.v.values.$dirty&&t.v.values.$error?e("p",{staticClass:"filter-error"},[t._v("\n      "+t._s(t.$t("FILTER.EMPTY_VALUE_ERROR"))+"\n    ")]):t._e()]),t._v(" "),t.showQueryOperator?e("div",{staticClass:"flex items-center justify-center relative my-2.5 mx-0"},[e("hr",{staticClass:"w-full absolute border-b border-solid border-slate-75 dark:border-slate-800"}),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.query_operator,expression:"query_operator"}],staticClass:"bg-white dark:bg-slate-900 mb-0 w-auto relative text-slate-800 dark:text-slate-100 border-slate-75 dark:border-slate-600",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.query_operator=e.target.multiple?n:n[0]}}},[e("option",{attrs:{value:"and"}},[t._v("\n        "+t._s(t.$t("FILTER.QUERY_DROPDOWN_LABELS.AND"))+"\n      ")]),t._v(" "),e("option",{attrs:{value:"or"}},[t._v("\n        "+t._s(t.$t("FILTER.QUERY_DROPDOWN_LABELS.OR"))+"\n      ")])])]):t._e()])}),[],!1,null,"de5a525e",null);e.a=c.exports},2676:function(t,e,n){"use strict";var i=n(261),s=n(2677),a=n(149),r={components:{Thumbnail:i.a,MultiselectDropdownItems:s.a},mixins:[a.mixin],props:{options:{type:Array,default:function(){return[]}},selectedItem:{type:Object,default:function(){return{}}},hasThumbnail:{type:Boolean,default:!0},multiselectorTitle:{type:String,default:""},multiselectorPlaceholder:{type:String,default:"None"},noSearchResult:{type:String,default:"No results found"},inputPlaceholder:{type:String,default:"Search"}},data:function(){return{showSearchDropdown:!1}},computed:{hasValue:function(){return!(!this.selectedItem||!this.selectedItem.id)}},methods:{toggleDropdown:function(){this.showSearchDropdown=!this.showSearchDropdown},onCloseDropdown:function(){this.showSearchDropdown=!1},onClickSelectItem:function(t){this.$emit("click",t),this.onCloseDropdown()}}},o=(n(2696),n(5)),c=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.onCloseDropdown,expression:"onCloseDropdown"}],staticClass:"relative w-full mb-2",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.onCloseDropdown.apply(null,arguments)}}},[e("woot-button",{staticClass:"w-full border border-solid border-slate-200 dark:border-slate-700 px-2.5 hover:border-slate-75 dark:hover:border-slate-600",attrs:{variant:"hollow","color-scheme":"secondary"},on:{click:t.toggleDropdown}},[e("div",{staticClass:"flex"},[t.hasValue&&t.hasThumbnail?e("Thumbnail",{attrs:{src:t.selectedItem.thumbnail,size:"24px",status:t.selectedItem.availability_status,username:t.selectedItem.name}}):t._e(),t._v(" "),e("div",{staticClass:"flex justify-between w-full min-w-0 items-center"},[t.hasValue?e("h4",{staticClass:"items-center leading-tight my-0 mx-2 overflow-hidden whitespace-nowrap text-ellipsis text-sm text-slate-800 dark:text-slate-100",attrs:{title:t.selectedItem.name}},[t._v("\n          "+t._s(t.selectedItem.name)+"\n        ")]):e("h4",{staticClass:"mt-0 mb-0 mr-2 ml-0 text-ellipsis text-sm text-slate-800 dark:text-slate-100"},[t._v("\n          "+t._s(t.multiselectorPlaceholder)+"\n        ")]),t._v(" "),t.showSearchDropdown?e("i",{staticClass:"icon ion-chevron-up"}):e("i",{staticClass:"icon ion-chevron-down"})])],1)]),t._v(" "),e("div",{staticClass:"dropdown-pane",class:{"dropdown-pane--open":t.showSearchDropdown}},[e("div",{staticClass:"flex justify-between items-center mb-1"},[e("h4",{staticClass:"text-sm text-slate-800 dark:text-slate-100 m-0 overflow-hidden whitespace-nowrap text-ellipsis"},[t._v("\n        "+t._s(t.multiselectorTitle)+"\n      ")]),t._v(" "),e("woot-button",{attrs:{icon:"dismiss",size:"tiny","color-scheme":"secondary",variant:"clear"},on:{click:t.onCloseDropdown}})],1),t._v(" "),t.showSearchDropdown?e("multiselect-dropdown-items",{attrs:{options:t.options,"selected-items":[t.selectedItem],"has-thumbnail":t.hasThumbnail,"input-placeholder":t.inputPlaceholder,"no-search-result":t.noSearchResult},on:{click:t.onClickSelectItem}}):t._e()],1)],1)}),[],!1,null,"1a8129fb",null);e.a=c.exports},2677:function(t,e,n){"use strict";n(8),n(68),n(97),n(37),n(49),n(268);var i=n(358),s=n(359),a=n(261),r={components:{WootDropdownItem:i.a,WootDropdownMenu:s.a,Thumbnail:a.a},props:{options:{type:Array,default:function(){return[]}},selectedItems:{type:Array,default:function(){return[]}},hasThumbnail:{type:Boolean,default:!0},inputPlaceholder:{type:String,default:"Search"},noSearchResult:{type:String,default:"No results found"}},data:function(){return{search:""}},computed:{filteredOptions:function(){var t=this;return this.options.filter((function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())}))},noResult:function(){return 0===this.filteredOptions.length&&""!==this.search}},mounted:function(){this.focusInput()},methods:{onclick:function(t){this.$emit("click",t)},focusInput:function(){this.$refs.searchbar.focus()},isActive:function(t){return this.selectedItems.some((function(e){return e&&t.id===e.id}))}}},o=(n(2695),n(5)),c=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"dropdown-wrap"},[e("div",{staticClass:"mb-2 flex-shrink-0 flex-grow-0 flex-auto max-h-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"searchbar",staticClass:"search-input",attrs:{type:"text",autofocus:"true",placeholder:t.inputPlaceholder},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"flex justify-start items-start flex-auto overflow-auto"},[e("div",{staticClass:"w-full max-h-[10rem]"},[e("woot-dropdown-menu",t._l(t.filteredOptions,(function(n){return e("woot-dropdown-item",{key:n.id},[e("woot-button",{staticClass:"multiselect-dropdown--item",class:{active:t.isActive(n)},attrs:{variant:t.isActive(n)?"hollow":"clear","color-scheme":"secondary"},on:{click:()=>t.onclick(n)}},[e("div",{staticClass:"flex items-center"},[t.hasThumbnail?e("Thumbnail",{attrs:{src:n.thumbnail,size:"24px",username:n.name,status:n.availability_status,"has-border":""}}):t._e(),t._v(" "),e("div",{staticClass:"flex items-center justify-between w-full min-w-0"},[e("span",{staticClass:"leading-4 my-0 mx-2 overflow-hidden whitespace-nowrap text-ellipsis text-sm",attrs:{title:n.name}},[t._v("\n                  "+t._s(n.name)+"\n                ")]),t._v(" "),t.isActive(n)?e("fluent-icon",{attrs:{icon:"checkmark"}}):t._e()],1)],1)])],1)})),1),t._v(" "),t.noResult?e("h4",{staticClass:"w-full justify-center items-center flex text-slate-500 dark:text-slate-300 py-2 px-2.5 overflow-hidden whitespace-nowrap text-ellipsis text-sm"},[t._v("\n        "+t._s(t.noSearchResult)+"\n      ")]):t._e()],1)])])}),[],!1,null,"4d8f772f",null);e.a=c.exports},2680:function(t,e,n){"use strict";n(16),n(7),n(21),n(83),n(49),n(266),n(4),n(31),n(33),n(20);function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}e.a=function(t){var e=JSON.parse(JSON.stringify(t)).map((function(t){return t.values=function(t){return"content"===t.attribute_key?(t.values||"").split(","):Array.isArray(t.values)?function(t){var e;return null!==(e=t.values[0])&&void 0!==e&&e.id?t.values.map((function(t){return t.id})):t.values}(t):"object"===i(t.values)?[t.values.id]:t.values?[t.values]:[]}(t),t}));return e[e.length-1].query_operator=void 0,{payload:e}}},2681:function(t,e,n){"use strict";n(2660)},2682:function(t,e,n){},2687:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return o}));var i=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"}],s=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"}],a=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"contains",label:"Contains"},{value:"does_not_contain",label:"Does not contain"}],r=[{value:"equal_to",label:"Equal to"},{value:"not_equal_to",label:"Not equal to"},{value:"is_present",label:"Is present"},{value:"is_not_present",label:"Is not present"},{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"}],o=[{value:"is_greater_than",label:"Is greater than"},{value:"is_less_than",label:"Is less than"},{value:"days_before",label:"Is x days before"}]},2688:function(t,e,n){"use strict";n.d(e,"b",(function(){return i}));n(9),n(269),n(8);var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return t.forEach((function(t){t.source_id?e.findIndex((function(e){return t.source_id===e.source_id}))<0&&e.push(t):e.push(t)})),e};e.a={methods:{lastMessage:function(t){var e,n,i=t.messages.last(),s=t.messages.filter((function(t){return 2!==t.message_type})).last(),a=t.last_non_activity_message;return s||a?(n=a,(e=s)&&n?e.created_at>=n.created_at?e:n:e||n):i},readMessages:function(t,e){return t.filter((function(t){return 1e3*t.created_at<=1e3*e}))},unReadMessages:function(t,e){return t.filter((function(t){return 1e3*t.created_at>1e3*e}))}}}},2689:function(t,e,n){},2690:function(t,e,n){},2691:function(t,e,n){},2692:function(t,e,n){},2693:function(t,e,n){},2694:function(t,e,n){},2695:function(t,e,n){"use strict";n(2661)},2696:function(t,e,n){"use strict";n(2662)},2697:function(t,e,n){},2698:function(t,e,n){},2699:function(t,e,n){},2700:function(t,e,n){},2701:function(t,e,n){},2702:function(t,e,n){},2703:function(t,e,n){},2704:function(t,e,n){},2705:function(t,e,n){},2706:function(t,e,n){},2707:function(t,e,n){},2708:function(t,e,n){},2709:function(t,e,n){},2710:function(t,e,n){},2711:function(t,e,n){},2712:function(t,e,n){},2713:function(t,e,n){},2714:function(t,e,n){},2724:function(t,e,n){"use strict";n(4),n(31),n(7),n(33),n(16),n(20),n(21),n(64),n(37),n(69);var i=n(189),s=n(1912),a=n(90);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var i,s,a=[],r=!0,o=!1;try{for(n=n.call(t);!(r=(i=n.next()).done)&&(a.push(i.value),!e||a.length!==e);r=!0);}catch(c){o=!0,s=c}finally{try{r||null==n.return||n.return()}finally{if(o)throw s}}return a}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var c={name:"MessagePreview",mixins:[s.a],props:{message:{type:Object,required:!0},showMessageType:{type:Boolean,default:!0},defaultEmptyMessage:{type:String,default:""}},computed:{messageByAgent:function(){return this.message.message_type===i.b.OUTGOING},isMessageAnActivity:function(){return this.message.message_type===i.b.ACTIVITY},isMessagePrivate:function(){return this.message.private},parsedLastMessage:function(){var t=(this.message.content_attributes||{}).email,e=(t=void 0===t?{}:t).subject;return this.getPlainText(e||this.message.content)},lastMessageFileType:function(){var t=r(this.message.attachments,1)[0];return(t=void 0===t?{}:t).file_type},attachmentIcon:function(){return a.d[this.lastMessageFileType]},attachmentMessageContent:function(){return"CHAT_LIST.ATTACHMENTS.".concat(this.lastMessageFileType,".CONTENT")}}},l=n(5),u=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"overflow-hidden text-ellipsis whitespace-nowrap"},[t.showMessageType?[t.isMessagePrivate?e("fluent-icon",{staticClass:"-mt-0.5 align-middle text-slate-600 dark:text-slate-300 inline-block",attrs:{size:"16",icon:"lock-closed"}}):t.messageByAgent?e("fluent-icon",{staticClass:"-mt-0.5 align-middle text-slate-600 dark:text-slate-300 inline-block",attrs:{size:"16",icon:"arrow-reply"}}):t.isMessageAnActivity?e("fluent-icon",{staticClass:"-mt-0.5 align-middle text-slate-600 dark:text-slate-300 inline-block",attrs:{size:"16",icon:"info"}}):t._e()]:t._e(),t._v(" "),t.message.content?e("span",[t._v("\n    "+t._s(t.parsedLastMessage)+"\n  ")]):t.message.attachments?e("span",[t.attachmentIcon&&t.showMessageType?e("fluent-icon",{staticClass:"-mt-0.5 align-middle inline-block text-slate-600 dark:text-slate-300",attrs:{size:"16",icon:t.attachmentIcon}}):t._e(),t._v("\n    "+t._s(t.$t(`${t.attachmentMessageContent}`))+"\n  ")],1):e("span",[t._v("\n    "+t._s(t.defaultEmptyMessage||t.$t("CHAT_LIST.NO_CONTENT"))+"\n  ")])],2)}),[],!1,null,null,null);e.a=u.exports},2726:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=[{key:"assign_team",label:"Assign a team",inputType:"search_select"},{key:"assign_agent",label:"Assign an agent",inputType:"search_select"},{key:"add_label",label:"Add a label",inputType:"multi_select"},{key:"remove_label",label:"Remove a label",inputType:"multi_select"},{key:"remove_assigned_team",label:"Remove Assigned Team",inputType:null},{key:"send_email_transcript",label:"Send an email transcript",inputType:"email"},{key:"mute_conversation",label:"Mute conversation",inputType:null},{key:"snooze_conversation",label:"Snooze conversation",inputType:null},{key:"resolve_conversation",label:"Resolve conversation",inputType:null},{key:"send_attachment",label:"Send Attachment",inputType:"attachment"},{key:"send_message",label:"Send a message",inputType:"textarea"},{key:"add_private_note",label:"Add a private note",inputType:"textarea"},{key:"change_priority",label:"Change Priority",inputType:"search_select"}]},2728:function(t,e,n){"use strict";n(83),n(41),n(37),n(4),n(31),n(7),n(33),n(16),n(20),n(21),n(69),n(64);var i=n(125);function s(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}e.a={methods:{setFilterAttributes:function(){var t=this,e=this.$store.getters["attributes/getAttributesByModel"](this.attributeModel),n={name:this.$t("".concat(this.filtersFori18n,".GROUPS.CUSTOM_ATTRIBUTES")),attributes:e.map((function(t){return{key:t.attribute_key,name:t.attribute_display_name}}))},i=this.filterAttributeGroups.map((function(e){return{name:t.$t("".concat(t.filtersFori18n,".GROUPS.").concat(e.i18nGroup)),attributes:e.attributes.map((function(e){return{key:e.key,name:t.$t("".concat(t.filtersFori18n,".ATTRIBUTES.").concat(e.i18nKey))}}))}})),a=e.map((function(e){return{attributeKey:e.attribute_key,attributeI18nKey:"CUSTOM_ATTRIBUTE_".concat(e.attribute_display_type.toUpperCase()),inputType:t.customAttributeInputType(e.attribute_display_type),filterOperators:t.getOperatorTypes(e.attribute_display_type),attributeModel:"custom_attributes"}}));this.filterTypes=[].concat(s(this.filterTypes),s(a)),this.filterGroups=[].concat(s(i),[n])},initializeExistingFilterToModal:function(){this.initializeStatusAndAssigneeFilterToModal(),this.initializeInboxTeamAndLabelFilterToModal()},initializeStatusAndAssigneeFilterToModal:function(){""!==this.activeStatus&&this.appliedFilter.push({attribute_key:"status",attribute_model:"standard",filter_operator:"equal_to",values:[{id:this.activeStatus,name:this.$t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.".concat(this.activeStatus,".TEXT"))}],query_operator:"and",custom_attribute_type:""}),this.activeAssigneeTab===i.b.ASSIGNEE_TYPE.ME&&this.appliedFilter.push({attribute_key:"assignee_id",filter_operator:"equal_to",values:this.currentUserDetails,query_operator:"and",custom_attribute_type:""})},initializeInboxTeamAndLabelFilterToModal:function(){this.conversationInbox&&this.appliedFilter.push({attribute_key:"inbox_id",attribute_model:"standard",filter_operator:"equal_to",values:[{id:this.conversationInbox,name:this.inbox.name}],query_operator:"and",custom_attribute_type:""}),this.teamId&&this.appliedFilter.push({attribute_key:"team_id",attribute_model:"standard",filter_operator:"equal_to",values:this.activeTeam,query_operator:"and",custom_attribute_type:""}),this.label&&this.appliedFilter.push({attribute_key:"labels",attribute_model:"standard",filter_operator:"equal_to",values:[{id:this.label,name:this.label}],query_operator:"and",custom_attribute_type:""})}}}},2730:function(t,e,n){"use strict";n(41);var i=n(90),s=n(1921),a=n(2731);e.a={methods:{onFileUpload:function(t){this.globalConfig.directUploadsEnabled?this.onDirectFileUpload(t):this.onIndirectFileUpload(t)},onDirectFileUpload:function(t){var e=this,n=this.isATwilioSMSChannel?i.k:i.j;t&&(Object(s.a)(t,n)?new a.DirectUpload(t.file,"/api/v1/accounts/".concat(this.accountId,"/conversations/").concat(this.currentChat.id,"/direct_uploads"),{directUploadWillCreateBlobWithXHR:function(t){t.setRequestHeader("api_access_token",e.currentUser.access_token)}}).create((function(n,i){n?e.showAlert(n):e.attachFile({file:t,blob:i})})):this.showAlert(this.$t("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:n})))},onIndirectFileUpload:function(t){var e=this.isATwilioSMSChannel?i.k:i.j;t&&(Object(s.a)(t,e)?this.attachFile({file:t}):this.showAlert(this.$t("CONVERSATION.FILE_SIZE_LIMIT",{MAXIMUM_SUPPORTED_FILE_UPLOAD_SIZE:e})))}}}},2732:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n(83),n(49),n(266),n(2778),n(4),n(31),n(7),n(33),n(16),n(20),n(21),n(69),n(64),n(37);function i(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var a=function(t){var e=t.toUpperCase().split("").map((function(t){return 127397+t.charCodeAt()}));return String.fromCodePoint.apply(String,i(e))}},2734:function(t,e,n){"use strict";n(30),n(45),n(37),n(10),n(4),n(8),n(11),n(9),n(12),n(7),n(22);var i=n(25),s=n(261),a=n(2724),r=n(2688),o=n(1914),c=n(271),l=n(13),u=n(2663),d=n(92),p=(n(41),n(31),n(33),n(16),n(20),n(21),n(69),n(64),n(2741)),h={props:{option:{type:Object,default:function(){}},subMenuAvailable:{type:Boolean,default:!0}}},f=(n(2758),n(5)),m=Object(f.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"menu-with-submenu min-width-calc w-full p-1 flex items-center h-7 rounded-md relative bg-white dark:bg-slate-700 justify-between hover:bg-woot-75 cursor-pointer dark:hover:bg-slate-800",class:t.subMenuAvailable?"":"opacity-50 cursor-not-allowed"},[e("div",{staticClass:"flex items-center"},[e("fluent-icon",{staticClass:"menu-icon",attrs:{icon:t.option.icon,size:"14"}}),t._v(" "),e("p",{staticClass:"my-0 mx-2 text-xs"},[t._v(t._s(t.option.label))])],1),t._v(" "),e("fluent-icon",{attrs:{icon:"chevron-right",size:"12"}}),t._v(" "),t.subMenuAvailable?e("div",{staticClass:"submenu bg-white dark:bg-slate-700 p-1 shadow-lg rounded-md absolute left-full top-0 hidden min-h-min max-h-[15rem] overflow-y-auto overflow-x-hidden cursor-pointer"},[t._t("default")],2):t._e()],1)}),[],!1,null,"4e48e5ce",null).exports,v=n(125),b=n(1925),g={components:{Spinner:n(170).a}},_=(n(2759),Object(f.a)(g,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"agent-placeholder"},[e("spinner"),t._v(" "),e("p",[t._v(t._s(t.$t("CONVERSATION.CARD_CONTEXT_MENU.AGENTS_LOADING")))])],1)}),[],!1,null,"7265fabf",null).exports);function y(t){return function(t){if(Array.isArray(t))return C(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E={components:{MenuItem:p.a,MenuItemWithSubmenu:m,AgentLoadingPlaceholder:_},mixins:[b.a],props:{status:{type:String,default:""},hasUnreadMessages:{type:Boolean,default:!1},inboxId:{type:Number,default:null},priority:{type:String,default:null}},data:function(){var t=this;return{STATUS_TYPE:v.b.STATUS_TYPE,unreadOption:{label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.MARK_AS_UNREAD"),icon:"mail"},statusMenuConfig:[{key:v.b.STATUS_TYPE.RESOLVED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.RESOLVED"),icon:"checkmark"},{key:v.b.STATUS_TYPE.PENDING,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.PENDING"),icon:"book-clock"},{key:v.b.STATUS_TYPE.OPEN,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.REOPEN"),icon:"arrow-redo"}],snoozeOption:{key:v.b.STATUS_TYPE.SNOOZED,label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.SNOOZE.TITLE"),icon:"snooze"},priorityConfig:{key:"priority",label:this.$t("CONVERSATION.PRIORITY.TITLE"),icon:"warning",options:[{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),key:null},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),key:"urgent"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),key:"high"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),key:"medium"},{label:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),key:"low"}].filter((function(e){return e.key!==t.priority}))},labelMenuConfig:{key:"label",icon:"tag",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_LABEL")},agentMenuConfig:{key:"agent",icon:"person-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_AGENT")},teamMenuConfig:{key:"team",icon:"people-team-add",label:this.$t("CONVERSATION.CARD_CONTEXT_MENU.ASSIGN_TEAM")}}},computed:A(A({},Object(i.mapGetters)({labels:"labels/getLabels",teams:"teams/getTeams",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags"})),{},{filteredAgentOnAvailability:function(){var t=this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.inboxId),e=this.getAgentsByUpdatedPresence(t);return this.sortedAgentsByAvailability(e)},assignableAgents:function(){return[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"}].concat(y(this.filteredAgentOnAvailability))}}),mounted:function(){this.$store.dispatch("inboxAssignableAgents/fetch",[this.inboxId])},methods:{toggleStatus:function(t,e){this.$emit("update-conversation",t,e)},snoozeConversation:function(){document.querySelector("ninja-keys").open({parent:"snooze_conversation"})},assignPriority:function(t){this.$emit("assign-priority",t)},show:function(t){return this.status!==t},generateMenuLabelConfig:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return A(A(A(A(A(A(A(A({key:t.id},"icon"===e&&{icon:t.icon}),"label"===e&&{color:t.color}),"agent"===e&&{thumbnail:t.thumbnail}),"agent"===e&&{status:t.availability_status}),"text"===e&&{label:t.label}),"label"===e&&{label:t.title}),"agent"===e&&{label:t.name}),"team"===e&&{label:t.name})}}},w=E,S=Object(f.a)(w,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white dark:bg-slate-700 shadow-xl rounded-md p-1"},[t.hasUnreadMessages?t._e():e("menu-item",{attrs:{option:t.unreadOption,variant:"icon"},on:{click:function(e){return t.$emit("mark-as-unread")}}}),t._v(" "),t._l(t.statusMenuConfig,(function(n){return[t.show(n.key)?e("menu-item",{key:n.key,attrs:{option:n,variant:"icon"},on:{click:function(e){return t.toggleStatus(n.key,null)}}}):t._e()]})),t._v(" "),t.show(t.snoozeOption.key)?e("menu-item",{attrs:{option:t.snoozeOption,variant:"icon"},on:{click:function(e){return t.snoozeConversation()}}}):t._e(),t._v(" "),e("menu-item-with-submenu",{attrs:{option:t.priorityConfig}},t._l(t.priorityConfig.options,(function(n,i){return e("menu-item",{key:i,attrs:{option:n},on:{click:function(e){return t.assignPriority(n.key)}}})})),1),t._v(" "),e("menu-item-with-submenu",{attrs:{option:t.labelMenuConfig,"sub-menu-available":!!t.labels.length}},t._l(t.labels,(function(n){return e("menu-item",{key:n.id,attrs:{option:t.generateMenuLabelConfig(n,"label"),variant:"label"},on:{click:function(e){return t.$emit("assign-label",n)}}})})),1),t._v(" "),e("menu-item-with-submenu",{attrs:{option:t.agentMenuConfig,"sub-menu-available":!!t.assignableAgents.length}},[t.assignableAgentsUiFlags.isFetching?e("agent-loading-placeholder"):t._l(t.assignableAgents,(function(n){return e("menu-item",{key:n.id,attrs:{option:t.generateMenuLabelConfig(n,"agent"),variant:"agent"},on:{click:function(e){return t.$emit("assign-agent",n)}}})}))],2),t._v(" "),e("menu-item-with-submenu",{attrs:{option:t.teamMenuConfig,"sub-menu-available":!!t.teams.length}},t._l(t.teams,(function(n){return e("menu-item",{key:n.id,attrs:{option:t.generateMenuLabelConfig(n,"team")},on:{click:function(e){return t.$emit("assign-team",n)}}})})),1)],2)}),[],!1,null,null,null).exports,I=n(79),x=36e5,N=864e5,R={name:"TimeAgo",mixins:[o.a],props:{isAutoRefreshEnabled:{type:Boolean,default:!0},lastActivityTimestamp:{type:[String,Date,Number],default:""},createdAtTimestamp:{type:[String,Date,Number],default:""}},data:function(){return{lastActivityAtTimeAgo:this.dynamicTime(this.lastActivityTimestamp),createdAtTimeAgo:this.dynamicTime(this.createdAtTimestamp),timer:null}},computed:{lastActivityTime:function(){return this.shortTimestamp(this.lastActivityAtTimeAgo)},createdAtTime:function(){return this.shortTimestamp(this.createdAtTimeAgo)},createdAt:function(){return Date.now()-1e3*this.createdAtTimestamp>2592e6?"".concat(this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.OLDEST")," ").concat(this.dateFormat(this.createdAtTimestamp)):"".concat(this.$t("CHAT_LIST.CHAT_TIME_STAMP.CREATED.LATEST")," ").concat(this.createdAtTimeAgo)},lastActivity:function(){return Date.now()-1e3*this.lastActivityTimestamp>2592e6?"".concat(this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.NOT_ACTIVE")," ").concat(this.dateFormat(this.lastActivityTimestamp)):"".concat(this.$t("CHAT_LIST.CHAT_TIME_STAMP.LAST_ACTIVITY.ACTIVE")," ").concat(this.lastActivityAtTimeAgo)},tooltipText:function(){return"".concat(this.createdAt,"\n              ").concat(this.lastActivity)}},watch:{lastActivityTimestamp:function(){this.lastActivityAtTimeAgo=this.dynamicTime(this.lastActivityTimestamp)},createdAtTimestamp:function(){this.createdAtTimeAgo=this.dynamicTime(this.createdAtTimestamp)}},mounted:function(){this.isAutoRefreshEnabled&&this.createTimer()},beforeDestroy:function(){clearTimeout(this.timer)},methods:{createTimer:function(){var t=this;this.timer=setTimeout((function(){t.lastActivityAtTimeAgo=t.dynamicTime(t.lastActivityTimestamp),t.createdAtTimeAgo=t.dynamicTime(t.createdAtTimestamp),t.createTimer()}),this.refreshTime())},refreshTime:function(){var t=Date.now()-1e3*this.lastActivityTimestamp;return t>N?N:t>x?x:6e4}}},L=Object(f.a)(R,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:{content:t.tooltipText,delay:{show:1500,hide:0},hideOnClick:!0},expression:"{\n    content: tooltipText,\n    delay: { show: 1500, hide: 0 },\n    hideOnClick: true,\n  }",modifiers:{top:!0}}],staticClass:"text-xxs text-slate-500 dark:text-slate-500 leading-4 ml-auto hover:text-slate-900 dark:hover:text-slate-100"},[e("span",[t._v(t._s(`${t.createdAtTime} \u2022 ${t.lastActivityTime}`))])])}),[],!1,null,null,null).exports,P={mixins:[n(1940).a],props:{conversationId:{type:Number,required:!0}},data:function(){return{showAllLabels:!1,showExpandLabelButton:!1,labelPosition:-1}},watch:{activeLabels:function(){var t=this;this.$nextTick((function(){return t.computeVisibleLabelPosition()}))}},mounted:function(){this.computeVisibleLabelPosition()},methods:{onShowLabels:function(t){t.stopPropagation(),this.showAllLabels=!this.showAllLabels},computeVisibleLabelPosition:function(){var t=this,e=this.$refs.labelContainer,n=this.$refs.labelContainer.querySelectorAll(".label"),i=0;this.showExpandLabelButton=!1,Array.from(n).forEach((function(n,s){(i+=n.offsetWidth+8)<e.clientWidth-16?t.labelPosition=s:t.showExpandLabelButton=!0}))}}},M=(n(2760),Object(f.a)(P,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.activeLabels.length,expression:"activeLabels.length"}],ref:"labelContainer",staticClass:"label-container mt-0.5 mx-2 mb-0"},[e("div",{staticClass:"labels-wrap flex items-end min-w-0 flex-shrink",class:{expand:t.showAllLabels}},[t._l(t.activeLabels,(function(n,i){return e("woot-label",{key:n.id,class:{hidden:!t.showAllLabels&&i>t.labelPosition},attrs:{title:n.title,description:n.description,color:n.color,variant:"smooth",small:""}})})),t._v(" "),t.showExpandLabelButton?e("woot-button",{staticClass:"show-more--button sticky flex-shrink-0 right-0 mr-6 rtl:rotate-180",attrs:{title:t.showAllLabels?t.$t("CONVERSATION.CARD.HIDE_LABELS"):t.$t("CONVERSATION.CARD.SHOW_LABELS"),"color-scheme":"secondary",variant:"hollow",icon:t.showAllLabels?"chevron-left":"chevron-right",size:"tiny"},on:{click:t.onShowLabels}}):t._e()],2)])}),[],!1,null,"d5b34c8e",null).exports),k=(n(68),n(97),n(273),n(90));function $(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var D={name:"PriorityMark",props:{priority:{type:String,default:"",validate:function(t){return[].concat($(Object.values(k.f)),[""]).includes(t)}}},data:function(){return{CONVERSATION_PRIORITY:k.f}},computed:{tooltipText:function(){return this.$t("CONVERSATION.PRIORITY.OPTIONS.".concat(this.priority.toUpperCase()))},isUrgent:function(){return this.priority===k.f.URGENT}}},F=Object(f.a)(D,(function(){var t=this,e=t._self._c;return t.priority?e("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.tooltipText,delay:{show:1500,hide:0},hideOnClick:!0},expression:"{\n    content: tooltipText,\n    delay: { show: 1500, hide: 0 },\n    hideOnClick: true,\n  }"}],staticClass:"shrink-0 rounded-sm inline-flex w-3.5 h-3.5",class:{"bg-red-50 dark:bg-red-700 dark:bg-opacity-30 text-red-500 dark:text-red-600":t.isUrgent,"bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-200":!t.isUrgent}},[e("fluent-icon",{attrs:{icon:`priority-${t.priority.toLowerCase()}`,size:"14","view-box":"0 0 14 14"}})],1):t._e()}),[],!1,null,null,null).exports;function U(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function B(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){U(a,i,s,r,o,"next",t)}function o(t){U(a,i,s,r,o,"throw",t)}r(void 0)}))}}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){W(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H={components:{CardLabels:M,InboxName:u.a,Thumbnail:s.a,ConversationContextMenu:S,TimeAgo:L,MessagePreview:a.a,PriorityMark:F},mixins:[d.c,o.a,r.a,I.a],props:{activeLabel:{type:String,default:""},chat:{type:Object,default:function(){}},hideInboxName:{type:Boolean,default:!1},hideThumbnail:{type:Boolean,default:!1},teamId:{type:[String,Number],default:0},foldersId:{type:[String,Number],default:0},showAssignee:{type:Boolean,default:!1},conversationType:{type:String,default:""},selected:{type:Boolean,default:!1}},data:function(){return{hovered:!1,showContextMenu:!1,contextMenu:{x:null,y:null}}},computed:G(G({},Object(i.mapGetters)({currentChat:"getSelectedChat",inboxesList:"inboxes/getInboxes",activeInbox:"getSelectedInbox",currentUser:"getCurrentUser",accountId:"getCurrentAccountId"})),{},{bulkActionCheck:function(){return!this.hideThumbnail&&!this.hovered&&!this.selected},chatMetadata:function(){return this.chat.meta||{}},assignee:function(){return this.chatMetadata.assignee||{}},currentContact:function(){return this.$store.getters["contacts/getContact"](this.chatMetadata.sender.id)},isActiveChat:function(){return this.currentChat.id===this.chat.id},unreadCount:function(){return this.chat.unread_count},hasUnread:function(){return this.unreadCount>0},isInboxNameVisible:function(){return!this.activeInbox},lastMessageInChat:function(){return this.lastMessage(this.chat)},inbox:function(){var t=this.chat.inbox_id;return this.$store.getters["inboxes/getInbox"](t)},showInboxName:function(){return!this.hideInboxName&&this.isInboxNameVisible&&this.inboxesList.length>1},inboxName:function(){return this.inbox.name||""}}),methods:{onCardClick:function(t){var e=this.activeInbox,n=this.chat,i=Object(l.c)(Object(l.b)({accountId:this.accountId,activeInbox:e,id:n.id,label:this.activeLabel,teamId:this.teamId,foldersId:this.foldersId,conversationType:this.conversationType}));t.metaKey||t.ctrlKey?window.open(window.chatwootConfig.hostURL+i,"_blank","noopener noreferrer nofollow"):this.isActiveChat||c.a.push({path:i})},onCardHover:function(){this.hovered=!this.hideThumbnail},onCardLeave:function(){this.hovered=!1},onSelectConversation:function(t){var e=t?"select-conversation":"de-select-conversation";this.$emit(e,this.chat.id,this.inbox.id)},openContextMenu:function(t){t.preventDefault(),this.$emit("context-menu-toggle",!0),this.contextMenu.x=t.pageX||t.clientX,this.contextMenu.y=t.pageY||t.clientY,this.showContextMenu=!0},closeContextMenu:function(){this.$emit("context-menu-toggle",!1),this.showContextMenu=!1,this.contextMenu.x=null,this.contextMenu.y=null},onUpdateConversation:function(t,e){this.closeContextMenu(),this.$emit("update-conversation-status",this.chat.id,t,e)},onAssignAgent:function(t){var e=this;return B(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$emit("assign-agent",t,[e.chat.id]),e.closeContextMenu();case 2:case"end":return n.stop()}}),n)})))()},onAssignLabel:function(t){var e=this;return B(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$emit("assign-label",[t.title],[e.chat.id]),e.closeContextMenu();case 2:case"end":return n.stop()}}),n)})))()},onAssignTeam:function(t){var e=this;return B(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$emit("assign-team",t,e.chat.id),e.closeContextMenu();case 2:case"end":return n.stop()}}),n)})))()},markAsUnread:function(){var t=this;return B(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$emit("mark-as-unread",t.chat.id),t.closeContextMenu();case 2:case"end":return e.stop()}}),e)})))()},assignPriority:function(t){var e=this;return B(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$emit("assign-priority",t,e.chat.id),e.closeContextMenu();case 2:case"end":return n.stop()}}),n)})))()}}},z=(n(2761),Object(f.a)(H,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative flex items-start flex-grow-0 flex-shrink-0 w-auto max-w-full px-4 py-0 border-t-0 border-b-0 border-l-2 border-r-0 border-transparent border-solid cursor-pointer conversation hover:bg-slate-25 dark:hover:bg-slate-800 group",class:{"active bg-slate-25 dark:bg-slate-800 border-woot-500":t.isActiveChat,"unread-chat":t.hasUnread,"has-inbox-name":t.showInboxName,"conversation-selected":t.selected},on:{mouseenter:t.onCardHover,mouseleave:t.onCardLeave,click:t.onCardClick,contextmenu:function(e){return t.openContextMenu(e)}}},[t.hovered||t.selected?e("label",{staticClass:"checkbox-wrapper",on:{click:function(t){t.stopPropagation()}}},[e("input",{staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{value:t.selected,checked:t.selected},on:{change:function(e){return t.onSelectConversation(e.target.checked)}}})]):t._e(),t._v(" "),t.bulkActionCheck?e("thumbnail",{staticClass:"columns",attrs:{src:t.currentContact.thumbnail,badge:t.inboxBadge,username:t.currentContact.name,status:t.currentContact.availability_status,size:"40px"}}):t._e(),t._v(" "),e("div",{staticClass:"px-0 py-3 border-b group-last:border-transparent group-hover:border-transparent border-slate-50 dark:border-slate-800/75 columns"},[e("div",{staticClass:"flex justify-between"},[t.showInboxName?e("inbox-name",{attrs:{inbox:t.inbox}}):t._e(),t._v(" "),e("div",{staticClass:"flex gap-2 ml-2 rtl:mr-2 rtl:ml-0"},[t.showAssignee&&t.assignee.name?e("span",{staticClass:"text-slate-500 dark:text-slate-400 text-xs font-medium leading-3 py-0.5 px-0 inline-flex text-ellipsis overflow-hidden whitespace-nowrap"},[e("fluent-icon",{staticClass:"text-slate-500 dark:text-slate-400",attrs:{icon:"person",size:"12"}}),t._v("\n          "+t._s(t.assignee.name)+"\n        ")],1):t._e(),t._v(" "),e("priority-mark",{attrs:{priority:t.chat.priority}})],1)],1),t._v(" "),e("h4",{staticClass:"conversation--user text-sm my-0 mx-2 capitalize pt-0.5 text-ellipsis overflow-hidden whitespace-nowrap w-[60%] text-slate-900 dark:text-slate-100"},[t._v("\n      "+t._s(t.currentContact.name)+"\n    ")]),t._v(" "),t.lastMessageInChat?e("message-preview",{staticClass:"conversation--message my-0 mx-2 leading-6 h-6 max-w-[96%] w-[16.875rem] text-sm text-slate-700 dark:text-slate-200",attrs:{message:t.lastMessageInChat}}):e("p",{staticClass:"conversation--message text-slate-700 dark:text-slate-200 text-sm my-0 mx-2 leading-6 h-6 max-w-[96%] w-[16.875rem] overflow-hidden text-ellipsis whitespace-nowrap"},[e("fluent-icon",{staticClass:"-mt-0.5 align-middle inline-block text-slate-600 dark:text-slate-300",attrs:{size:"16",icon:"info"}}),t._v(" "),e("span",[t._v("\n        "+t._s(t.$t("CHAT_LIST.NO_MESSAGES"))+"\n      ")])],1),t._v(" "),e("div",{staticClass:"absolute flex flex-col conversation--meta right-4 top-4"},[e("span",{staticClass:"ml-auto font-normal leading-4 text-black-600 text-xxs"},[e("time-ago",{attrs:{"last-activity-timestamp":t.chat.timestamp,"created-at-timestamp":t.chat.created_at}})],1),t._v(" "),e("span",{staticClass:"unread shadow-lg rounded-full hidden text-xxs font-semibold h-4 leading-4 ml-auto mt-1 min-w-[1rem] px-1 py-0 text-center text-white bg-green-400"},[t._v("\n        "+t._s(t.unreadCount>9?"9+":t.unreadCount)+"\n      ")])]),t._v(" "),e("card-labels",{attrs:{"conversation-id":t.chat.id}})],1),t._v(" "),t.showContextMenu?e("woot-context-menu",{ref:"menu",attrs:{x:t.contextMenu.x,y:t.contextMenu.y},on:{close:t.closeContextMenu}},[e("conversation-context-menu",{attrs:{status:t.chat.status,"inbox-id":t.inbox.id,priority:t.chat.priority,"has-unread-messages":t.hasUnread},on:{"update-conversation":t.onUpdateConversation,"assign-agent":t.onAssignAgent,"assign-label":t.onAssignLabel,"assign-team":t.onAssignTeam,"mark-as-unread":t.markAsUnread,"assign-priority":t.assignPriority}})],1):t._e()],1)}),[],!1,null,"edf709a2",null));e.a=z.exports},2735:function(t,e,n){"use strict";n(30),n(45),n(7),n(22),n(10),n(4),n(8),n(11),n(9),n(12),n(68),n(97),n(49),n(268);var i={name:"AttributeDropDownItem",props:{title:{type:String,default:""}},methods:{onClick:function(){this.$emit("click",this.title)}}},s=(n(2781),n(5)),a=Object(s.a)(i,(function(){var t=this,e=t._self._c;return e("woot-dropdown-item",[e("woot-button",{attrs:{variant:"clear"},on:{click:t.onClick}},[e("span",{staticClass:"label-text",attrs:{title:t.title}},[t._v(t._s(t.title))])])],1)}),[],!1,null,"0258e253",null).exports,r=n(2667);function o(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}var c={components:{CustomAttributeDropDownItem:a},mixins:[r.a],props:{attributeType:{type:String,default:"conversation_attribute"},contactId:{type:Number,default:null}},data:function(){return{search:""}},computed:{filteredAttributes:function(){var t=this;return this.attributes.filter((function(e){return!Object.keys(t.customAttributes).includes(e.attribute_key)})).filter((function(e){return e.attribute_display_name.toLowerCase().includes(t.search.toLowerCase())}))},noResult:function(){return 0===this.filteredAttributes.length}},mounted:function(){this.focusInput()},methods:{focusInput:function(){this.$refs.searchbar.focus()},addNewAttribute:function(){this.$router.push("/app/accounts/".concat(this.accountId,"/settings/custom-attributes/list"))},onAddAttribute:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.$emit("add-attribute",t);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,s){var a=e.apply(t,n);function r(t){o(a,i,s,r,c,"next",t)}function c(t){o(a,i,s,r,c,"throw",t)}r(void 0)}))})()}}},l=c,u=(n(2782),Object(s.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col w-full max-h-[12.5rem]"},[e("h4",{staticClass:"text-sm text-slate-800 dark:text-slate-100 mb-1 overflow-hidden whitespace-nowrap text-ellipsis flex-grow"},[t._v("\n    "+t._s(t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_SELECT.TITLE"))+"\n  ")]),t._v(" "),e("div",{staticClass:"mb-2 flex-shrink-0 flex-grow-0 flex-auto max-h-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"searchbar",staticClass:"search-input",attrs:{type:"text",autofocus:"true",placeholder:t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_SELECT.PLACEHOLDER")},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"flex justify-start items-start flex-grow flex-shrink flex-auto overflow-auto h-32"},[e("div",{staticClass:"w-full h-full"},[e("woot-dropdown-menu",t._l(t.filteredAttributes,(function(n){return e("custom-attribute-drop-down-item",{key:n.attribute_display_name,attrs:{title:n.attribute_display_name},on:{click:function(e){return t.onAddAttribute(n)}}})})),1),t._v(" "),t.noResult?e("div",{staticClass:"w-full justify-center items-center flex mb-2 h-[70%] text-slate-500 dark:text-slate-300 py-2 px-2.5 overflow-hidden whitespace-nowrap text-ellipsis text-sm"},[t._v("\n        "+t._s(t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_SELECT.NO_RESULT"))+"\n      ")]):t._e(),t._v(" "),e("woot-button",{staticClass:"float-right",attrs:{icon:"add",size:"tiny"},on:{click:t.addNewAttribute}},[t._v("\n        "+t._s(t.$t("CUSTOM_ATTRIBUTES.FORM.ADD.TITLE"))+"\n      ")])],1)])])}),[],!1,null,"5fd82ccc",null).exports),d=n(79),p=n(149),h=n(109);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}var g={components:{CustomAttributeDropDown:u},mixins:[p.mixin,d.a,r.a],props:{attributeType:{type:String,default:"conversation_attribute"},contactId:{type:Number,default:null}},data:function(){return{showAttributeDropDown:!1}},methods:{addAttribute:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var i,s,a,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=t.attribute_key,s=t.attribute_display_type,a=t.default_value,r=!("checkbox"===s)&&(a||null),"conversation_attribute"!==n.attributeType){e.next=9;break}return e.next=7,n.$store.dispatch("updateCustomAttributes",{conversationId:n.conversationId,customAttributes:m(m({},n.customAttributes),{},v({},i,r))});case 7:e.next=11;break;case 9:return e.next=11,n.$store.dispatch("contacts/update",{id:n.contactId,custom_attributes:m(m({},n.customAttributes),{},v({},i,r))});case 11:bus.$emit(h.a.FOCUS_CUSTOM_ATTRIBUTE,i),n.showAlert(n.$t("CUSTOM_ATTRIBUTES.FORM.ADD.SUCCESS")),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),c=(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.message)||n.$t("CUSTOM_ATTRIBUTES.FORM.ADD.ERROR"),n.showAlert(c);case 19:return e.prev=19,n.closeDropdown(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,15,19,22]])})),function(){var t=this,n=arguments;return new Promise((function(i,s){var a=e.apply(t,n);function r(t){b(a,i,s,r,o,"next",t)}function o(t){b(a,i,s,r,o,"throw",t)}r(void 0)}))})()},toggleAttributeDropDown:function(){this.showAttributeDropDown=!this.showAttributeDropDown},closeDropdown:function(){this.showAttributeDropDown=!1}}},_=g,y=(n(2783),Object(s.a)(_,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-attribute--selector"},[e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.closeDropdown,expression:"closeDropdown"}],staticClass:"label-wrap",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.closeDropdown.apply(null,arguments)}}},[e("woot-button",{attrs:{size:"small",variant:"link",icon:"add"},on:{click:t.toggleAttributeDropDown}},[t._v("\n      "+t._s(t.$t("CUSTOM_ATTRIBUTES.ADD_BUTTON_TEXT"))+"\n    ")]),t._v(" "),e("div",{staticClass:"dropdown-wrap"},[e("div",{staticClass:"dropdown-pane",class:{"dropdown-pane--open":t.showAttributeDropDown}},[t.showAttributeDropDown?e("custom-attribute-drop-down",{attrs:{"attribute-type":t.attributeType,"contact-id":t.contactId},on:{"add-attribute":t.addAttribute}}):t._e()],1)])],1)])}),[],!1,null,"377d269f",null));e.a=y.exports},2737:function(t,e,n){"use strict";n(30),n(45),n(83),n(7),n(22),n(10),n(4),n(8),n(11),n(9),n(12),n(378),n(379),n(31),n(33),n(16),n(20),n(21),n(37);var i=n(286),s=n(3182),a=n(57),r=n(109),o=n(2676),c=n(13),l={components:{MultiselectDropdown:o.a},props:{label:{type:String,required:!0},values:{type:Array,default:function(){return[]}},value:{type:[String,Number,Boolean],default:""},showActions:{type:Boolean,default:!1},attributeType:{type:String,default:"text"},attributeKey:{type:String,required:!0},contactId:{type:Number,default:null}},data:function(){return{isEditing:!1,editedValue:null}},computed:{displayValue:function(){return this.isAttributeTypeDate?new Date(this.value||new Date).toLocaleDateString():this.isAttributeTypeCheckbox?"false"!==this.value&&this.value:this.value},formattedValue:function(){return this.isAttributeTypeDate?Object(i.a)(this.value?new Date(this.value):new Date,"yyyy-MM-dd"):this.value},listOptions:function(){return this.values.map((function(t,e){return{id:e+1,name:t}}))},selectedItem:function(){return{id:this.values.indexOf(this.editedValue)+1,name:this.editedValue}},isAttributeTypeCheckbox:function(){return"checkbox"===this.attributeType},isAttributeTypeList:function(){return"list"===this.attributeType},isAttributeTypeLink:function(){return"link"===this.attributeType},isAttributeTypeDate:function(){return"date"===this.attributeType},urlValue:function(){return Object(c.f)(this.value)?this.value:"---"},hrefURL:function(){return Object(c.f)(this.value)?this.value:""},notAttributeTypeCheckboxAndList:function(){return!this.isAttributeTypeCheckbox&&!this.isAttributeTypeList},inputType:function(){return this.isAttributeTypeLink?"url":this.attributeType},shouldShowErrorMessage:function(){return this.$v.editedValue.$error},errorMessage:function(){return this.$v.editedValue.url?this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.INVALID_URL"):this.$t("CUSTOM_ATTRIBUTES.VALIDATIONS.REQUIRED")}},watch:{value:function(){this.isEditing=!1,this.editedValue=this.formattedValue}},validations:function(){return this.isAttributeTypeLink?{editedValue:{required:a.required,url:a.url}}:{editedValue:{required:a.required}}},mounted:function(){this.editedValue=this.formattedValue,bus.$on(r.a.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},destroyed:function(){bus.$off(r.a.FOCUS_CUSTOM_ATTRIBUTE,this.onFocusAttribute)},methods:{onFocusAttribute:function(t){this.attributeKey===t&&this.onEdit()},focusInput:function(){this.$refs.inputfield&&this.$refs.inputfield.focus()},onEdit:function(){var t=this;this.isEditing=!0,this.$nextTick((function(){t.focusInput()}))},onUpdateListValue:function(t){t&&(this.editedValue=t.name,this.onUpdate())},onUpdate:function(){var t="date"===this.attributeType?Object(s.a)(this.editedValue):this.editedValue;this.$v.$touch(),this.$v.$invalid||(this.isEditing=!1,this.$emit("update",this.attributeKey,t))},onDelete:function(){this.isEditing=!1,this.$emit("delete",this.attributeKey)},onCopy:function(){this.$emit("copy",this.value)}}},u=(n(2779),n(5)),d=Object(u.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"py-3 px-4"},[e("div",{staticClass:"flex items-center mb-1"},[e("h4",{staticClass:"text-block-title flex items-center m-0 w-full error"},[t.isAttributeTypeCheckbox?e("div",{staticClass:"checkbox-wrap"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.editedValue,expression:"editedValue"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.editedValue)?t._i(t.editedValue,null)>-1:t.editedValue},on:{change:[function(e){var n=t.editedValue,i=e.target,s=!!i.checked;if(Array.isArray(n)){var a=t._i(n,null);i.checked?a<0&&(t.editedValue=n.concat([null])):a>-1&&(t.editedValue=n.slice(0,a).concat(n.slice(a+1)))}else t.editedValue=s},t.onUpdate]}})]):t._e(),t._v(" "),e("div",{staticClass:"flex items-center justify-between w-full"},[e("span",{staticClass:"attribute-name",class:{error:t.$v.editedValue.$error}},[t._v("\n          "+t._s(t.label)+"\n        ")]),t._v(" "),t.showActions?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:t.$t("CUSTOM_ATTRIBUTES.ACTIONS.DELETE"),expression:"$t('CUSTOM_ATTRIBUTES.ACTIONS.DELETE')",modifiers:{left:!0}}],attrs:{variant:"link",size:"medium","color-scheme":"secondary",icon:"delete","class-names":"flex justify-end w-4"},on:{click:t.onDelete}}):t._e()],1)])]),t._v(" "),t.notAttributeTypeCheckboxAndList?e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isEditing,expression:"isEditing"}]},[e("div",{staticClass:"input-group small"},["checkbox"===t.inputType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.editedValue,expression:"editedValue"}],ref:"inputfield",staticClass:"input-group-field",class:{error:t.$v.editedValue.$error},attrs:{autofocus:"true",type:"checkbox"},domProps:{checked:Array.isArray(t.editedValue)?t._i(t.editedValue,null)>-1:t.editedValue},on:{blur:t.$v.editedValue.$touch,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onUpdate.apply(null,arguments)},change:function(e){var n=t.editedValue,i=e.target,s=!!i.checked;if(Array.isArray(n)){var a=t._i(n,null);i.checked?a<0&&(t.editedValue=n.concat([null])):a>-1&&(t.editedValue=n.slice(0,a).concat(n.slice(a+1)))}else t.editedValue=s}}}):"radio"===t.inputType?e("input",{directives:[{name:"model",rawName:"v-model",value:t.editedValue,expression:"editedValue"}],ref:"inputfield",staticClass:"input-group-field",class:{error:t.$v.editedValue.$error},attrs:{autofocus:"true",type:"radio"},domProps:{checked:t._q(t.editedValue,null)},on:{blur:t.$v.editedValue.$touch,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onUpdate.apply(null,arguments)},change:function(e){t.editedValue=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.editedValue,expression:"editedValue"}],ref:"inputfield",staticClass:"input-group-field",class:{error:t.$v.editedValue.$error},attrs:{autofocus:"true",type:t.inputType},domProps:{value:t.editedValue},on:{blur:t.$v.editedValue.$touch,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onUpdate.apply(null,arguments)},input:function(e){e.target.composing||(t.editedValue=e.target.value)}}}),t._v(" "),e("div",{staticClass:"input-group-button"},[e("woot-button",{attrs:{size:"small",icon:"checkmark"},on:{click:t.onUpdate}})],1)]),t._v(" "),t.shouldShowErrorMessage?e("span",{staticClass:"text-red-400 dark:text-red-500 text-sm block font-normal -mt-px w-full"},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isEditing,expression:"!isEditing"}],staticClass:"value--view",class:{"is-editable":t.showActions}},[t.isAttributeTypeLink?e("a",{staticClass:"value inline-block rounded-sm mb-0 break-all py-0.5 px-1",attrs:{href:t.hrefURL,target:"_blank",rel:"noopener noreferrer"}},[t._v("\n        "+t._s(t.urlValue)+"\n      ")]):e("p",{staticClass:"value inline-block rounded-sm mb-0 break-all py-0.5 px-1"},[t._v("\n        "+t._s(t.displayValue||"---")+"\n      ")]),t._v(" "),e("div",{staticClass:"flex max-w-[2rem] gap-1 ml-1 rtl:mr-1 rtl:ml-0"},[t.showActions?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("CUSTOM_ATTRIBUTES.ACTIONS.COPY"),expression:"$t('CUSTOM_ATTRIBUTES.ACTIONS.COPY')"}],attrs:{variant:"link",size:"small","color-scheme":"secondary",icon:"clipboard","class-names":"edit-button"},on:{click:t.onCopy}}):t._e(),t._v(" "),t.showActions?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:t.$t("CUSTOM_ATTRIBUTES.ACTIONS.EDIT"),expression:"$t('CUSTOM_ATTRIBUTES.ACTIONS.EDIT')",modifiers:{right:!0}}],attrs:{variant:"link",size:"small","color-scheme":"secondary",icon:"edit","class-names":"edit-button"},on:{click:t.onEdit}}):t._e()],1)])]):t._e(),t._v(" "),t.isAttributeTypeList?e("div",[e("multiselect-dropdown",{attrs:{options:t.listOptions,"selected-item":t.selectedItem,"has-thumbnail":!1,"multiselector-placeholder":t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.PLACEHOLDER"),"no-search-result":t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.NO_RESULT"),"input-placeholder":t.$t("CUSTOM_ATTRIBUTES.FORM.ATTRIBUTE_TYPE.LIST.SEARCH_INPUT_PLACEHOLDER")},on:{click:t.onUpdateListValue}})],1):t._e()])}),[],!1,null,"4b9019e8",null),p=d.exports,h=n(79),f=n(2667),m=n(1922);function v(t){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function b(t,e){if(null==t)return{};var n,i,s=function(t,e){if(null==t)return{};var n,i,s={},a=Object.keys(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||(s[n]=t[n]);return s}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function g(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==v(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===v(e)?e:String(e)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){C(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function A(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){O(a,i,s,r,o,"next",t)}function o(t){O(a,i,s,r,o,"throw",t)}r(void 0)}))}}var T={components:{CustomAttribute:p},mixins:[h.a,f.a],props:{attributeType:{type:String,default:"conversation_attribute"},attributeClass:{type:String,default:""},contactId:{type:Number,default:null}},methods:{onUpdate:function(t,e){var n=this;return A(regeneratorRuntime.mark((function i(){var s,a,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(s=y(y({},n.customAttributes),{},C({},t,e)),i.prev=1,"conversation_attribute"!==n.attributeType){i.next=7;break}return i.next=5,n.$store.dispatch("updateCustomAttributes",{conversationId:n.conversationId,customAttributes:s});case 5:i.next=8;break;case 7:n.$store.dispatch("contacts/update",{id:n.contactId,custom_attributes:s});case 8:n.showAlert(n.$t("CUSTOM_ATTRIBUTES.FORM.UPDATE.SUCCESS")),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(1),r=(null===i.t0||void 0===i.t0||null===(a=i.t0.response)||void 0===a?void 0:a.message)||n.$t("CUSTOM_ATTRIBUTES.FORM.UPDATE.ERROR"),n.showAlert(r);case 15:case"end":return i.stop()}}),i,null,[[1,11]])})))()},onDelete:function(t){var e=this;return A(regeneratorRuntime.mark((function n(){var i,s,a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,i=e.customAttributes,i[t],s=b(i,[t].map(g)),"conversation_attribute"!==e.attributeType){n.next=7;break}return n.next=5,e.$store.dispatch("updateCustomAttributes",{conversationId:e.conversationId,customAttributes:s});case 5:n.next=8;break;case 7:e.$store.dispatch("contacts/deleteCustomAttributes",{id:e.contactId,customAttributes:[t]});case 8:e.showAlert(e.$t("CUSTOM_ATTRIBUTES.FORM.DELETE.SUCCESS")),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),r=(null===n.t0||void 0===n.t0||null===(a=n.t0.response)||void 0===a?void 0:a.message)||e.$t("CUSTOM_ATTRIBUTES.FORM.DELETE.ERROR"),e.showAlert(r);case 15:case"end":return n.stop()}}),n,null,[[0,11]])})))()},onCopy:function(t){var e=this;return A(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(m.a)(t);case 2:e.showAlert(e.$t("CUSTOM_ATTRIBUTES.COPY_SUCCESSFUL"));case 3:case"end":return n.stop()}}),n)})))()}}},E=(n(2780),Object(u.a)(T,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-attributes--panel"},t._l(t.filteredAttributes,(function(n){return e("custom-attribute",{key:n.id,class:t.attributeClass,attrs:{"attribute-key":n.attribute_key,"attribute-type":n.attribute_display_type,values:n.attribute_values,label:n.attribute_display_name,icon:n.icon,emoji:"",value:n.value,"show-actions":!0},on:{update:t.onUpdate,delete:t.onDelete,copy:t.onCopy}})})),1)}),[],!1,null,"8deaed62",null));e.a=E.exports},2739:function(t,e,n){"use strict";n(49),n(266),n(65);var i=n(2138),s=n.n(i),a=function(t){return!t.length||t.replace(/\s+/g,"").split(",").every((function(t){return s()(t)}))},r={props:{ccEmails:{type:String,default:""},bccEmails:{type:String,default:""},toEmails:{type:String,default:""}},data:function(){return{showBcc:!1,ccEmailsVal:"",bccEmailsVal:"",toEmailsVal:""}},watch:{bccEmails:function(t){t!==this.bccEmailsVal&&(this.bccEmailsVal=t)},ccEmails:function(t){t!==this.ccEmailsVal&&(this.ccEmailsVal=t)},toEmails:function(t){t!==this.toEmailsVal&&(this.toEmailsVal=t)}},mounted:function(){this.ccEmailsVal=this.ccEmails,this.bccEmailsVal=this.bccEmails,this.toEmailsVal=this.toEmails},validations:{ccEmailsVal:{hasValidEmails:function(t){return a(t)}},bccEmailsVal:{hasValidEmails:function(t){return a(t)}},toEmailsVal:{hasValidEmails:function(t){return a(t)}}},methods:{handleAddBcc:function(){this.showBcc=!0},onBlur:function(){this.$v.$touch(),this.$emit("update:bccEmails",this.bccEmailsVal),this.$emit("update:ccEmails",this.ccEmailsVal),this.$emit("update:toEmails",this.toEmailsVal)}}},o=(n(2770),n(5)),c=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",[t.toEmails?e("div",[e("div",{staticClass:"input-group small",class:{error:t.$v.toEmailsVal.$error}},[e("label",{staticClass:"input-group-label"},[t._v("\n        "+t._s(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.TO"))+"\n      ")]),t._v(" "),e("div",{staticClass:"input-group-field"},[e("woot-input",{class:{error:t.$v.toEmailsVal.$error},attrs:{type:"text",placeholder:t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER")},on:{blur:t.onBlur},model:{value:t.$v.toEmailsVal.$model,callback:function(e){t.$set(t.$v.toEmailsVal,"$model","string"===typeof e?e.trim():e)},expression:"$v.toEmailsVal.$model"}})],1)])]):t._e(),t._v(" "),e("div",{staticClass:"input-group-wrap"},[e("div",{staticClass:"input-group small",class:{error:t.$v.ccEmailsVal.$error}},[e("label",{staticClass:"input-group-label"},[t._v("\n        "+t._s(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.LABEL"))+"\n      ")]),t._v(" "),e("div",{staticClass:"input-group-field"},[e("woot-input",{class:{error:t.$v.ccEmailsVal.$error},attrs:{type:"text",placeholder:t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.PLACEHOLDER")},on:{blur:t.onBlur},model:{value:t.$v.ccEmailsVal.$model,callback:function(e){t.$set(t.$v.ccEmailsVal,"$model","string"===typeof e?e.trim():e)},expression:"$v.ccEmailsVal.$model"}})],1),t._v(" "),t.showBcc?t._e():e("woot-button",{attrs:{variant:"clear",size:"small"},on:{click:t.handleAddBcc}},[t._v("\n        "+t._s(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.ADD_BCC"))+"\n      ")])],1),t._v(" "),t.$v.ccEmailsVal.$error?e("span",{staticClass:"message"},[t._v("\n      "+t._s(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.CC.ERROR"))+"\n    ")]):t._e()]),t._v(" "),t.showBcc?e("div",{staticClass:"input-group-wrap"},[e("div",{staticClass:"input-group small",class:{error:t.$v.bccEmailsVal.$error}},[e("label",{staticClass:"input-group-label"},[t._v("\n        "+t._s(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.LABEL"))+"\n      ")]),t._v(" "),e("div",{staticClass:"input-group-field"},[e("woot-input",{class:{error:t.$v.bccEmailsVal.$error},attrs:{type:"text",placeholder:t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.PLACEHOLDER")},on:{blur:t.onBlur},model:{value:t.$v.bccEmailsVal.$model,callback:function(e){t.$set(t.$v.bccEmailsVal,"$model","string"===typeof e?e.trim():e)},expression:"$v.bccEmailsVal.$model"}})],1)]),t._v(" "),t.$v.bccEmailsVal.$error?e("span",{staticClass:"message"},[t._v("\n      "+t._s(t.$t("CONVERSATION.REPLYBOX.EMAIL_HEAD.BCC.ERROR"))+"\n    ")]):t._e()]):t._e()])}),[],!1,null,"902cac70",null);e.a=c.exports},2740:function(t,e,n){"use strict";n(30),n(41),n(37),n(4),n(31),n(49),n(65),n(68),n(97),n(10),n(8),n(11),n(9),n(12),n(7),n(22);var i=n(79),s=n(364),a=n(57),r=n(1920),o=n(223),c=n(2648);function l(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){l(a,i,s,r,o,"next",t)}function o(t){l(a,i,s,r,o,"throw",t)}r(void 0)}))}}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={mixins:[i.a],props:{contact:{type:Object,default:function(){return{}}},inProgress:{type:Boolean,default:!1},onSubmit:{type:Function,default:function(){}}},data:function(){return{countries:r.a,companyName:"",description:"",email:"",name:"",phoneNumber:"",activeDialCode:"",avatarFile:null,avatarUrl:"",country:{id:"",name:""},city:"",socialProfileUserNames:{facebook:"",twitter:"",linkedin:"",github:""},socialProfileKeys:[{key:"facebook",prefixURL:"https://facebook.com/"},{key:"twitter",prefixURL:"https://twitter.com/"},{key:"linkedin",prefixURL:"https://linkedin.com/"},{key:"github",prefixURL:"https://github.com/"}]}},validations:{name:{required:a.required},description:{},email:{email:a.email},companyName:{},phoneNumber:{},bio:{}},computed:{parsePhoneNumber:function(){return Object(c.a)(this.phoneNumber)},isPhoneNumberNotValid:function(){return""!==this.phoneNumber&&(!Object(o.d)(this.phoneNumber,this.activeDialCode)||""!==this.phoneNumber&&""===this.activeDialCode)},phoneNumberError:function(){return""===this.activeDialCode?this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DIAL_CODE_ERROR"):Object(o.d)(this.phoneNumber,this.activeDialCode)?"":this.$t("CONTACT_FORM.FORM.PHONE_NUMBER.ERROR")},setPhoneNumber:function(){return this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode?this.phoneNumber:""===this.phoneNumber&&""!==this.activeDialCode?"":this.activeDialCode?"".concat(this.activeDialCode).concat(this.phoneNumber):""}},watch:{contact:function(){this.setContactObject()}},mounted:function(){this.setContactObject(),this.setDialCode()},methods:{onCancel:function(){this.$emit("cancel")},onSuccess:function(){this.$emit("success")},countryNameWithCode:function(t){var e=t.name,n=t.id;return n?e||n?"".concat(e," (").concat(n,")"):"":e},setDialCode:function(){if(""!==this.phoneNumber&&this.parsePhoneNumber&&this.parsePhoneNumber.countryCallingCode){var t=this.parsePhoneNumber.countryCallingCode;this.activeDialCode="+".concat(t)}},setContactObject:function(){var t=this.contact,e=t.email,n=t.phone_number,i=t.name,s=this.contact.additional_attributes||{};this.name=i||"",this.email=e||"",this.phoneNumber=n||"",this.companyName=s.company_name||"",this.country={id:s.country_code||"",name:s.country||this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")},this.city=s.city||"",this.description=s.description||"",this.avatarUrl=this.contact.thumbnail||"";var a=s.social_profiles,r=void 0===a?{}:a,o=s.screen_name;this.socialProfileUserNames={twitter:r.twitter||o||"",facebook:r.facebook||"",linkedin:r.linkedin||"",github:r.github||"",instagram:r.instagram||""}},getContactObject:function(){null===this.country&&(this.country={id:"",name:""});var t={id:this.contact.id,name:this.name,email:this.email,phone_number:this.setPhoneNumber,additional_attributes:p(p({},this.contact.additional_attributes),{},{description:this.description,company_name:this.companyName,country_code:this.country.id,country:this.country.name===this.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_COUNTRY")?"":this.country.name,city:this.city,social_profiles:this.socialProfileUserNames})};return this.avatarFile&&(t.avatar=this.avatarFile,t.isFormData=!0),t},onPhoneNumberInputChange:function(t,e){this.activeDialCode=e},setPhoneCode:function(t){if(""!==this.phoneNumber&&this.parsePhoneNumber){var e=this.parsePhoneNumber.countryCallingCode;if(e===t)return;this.activeDialCode="+".concat(e);var n=this.phoneNumber.replace("+".concat(e),"".concat(t));this.phoneNumber=n}else this.activeDialCode=t},handleSubmit:function(){var t=this;return u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$v.$touch(),!t.$v.$invalid&&!t.isPhoneNumberNotValid){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.onSubmit(t.getContactObject());case 6:t.onSuccess(),t.showAlert(t.$t("CONTACT_FORM.SUCCESS_MESSAGE")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),e.t0 instanceof s.a?e.t0.data.includes("email")?t.showAlert(t.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.DUPLICATE")):e.t0.data.includes("phone_number")&&t.showAlert(t.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):e.t0 instanceof s.b?t.showAlert(e.t0.data):t.showAlert(t.$t("CONTACT_FORM.ERROR_MESSAGE"));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()},handleImageUpload:function(t){var e=t.file,n=t.url;this.avatarFile=e,this.avatarUrl=n},handleAvatarDelete:function(){var t=this;return u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.contact||!t.contact.id){e.next=5;break}return e.next=4,t.$store.dispatch("contacts/deleteAvatar",t.contact.id);case 4:t.showAlert(t.$t("CONTACT_FORM.DELETE_AVATAR.API.SUCCESS_MESSAGE"));case 5:t.avatarFile=null,t.avatarUrl="",t.activeDialCode="",e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t.showAlert(e.t0.message?e.t0.message:t.$t("CONTACT_FORM.DELETE_AVATAR.API.ERROR_MESSAGE"));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}},m=(n(2769),n(5)),v=Object(m.a)(f,(function(){var t=this,e=t._self._c;return e("form",{staticClass:"contact--form w-full pt-6 px-8 pb-8",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("div",[e("div",{staticClass:"w-full"},[e("woot-avatar-uploader",{staticClass:"settings-item",attrs:{label:t.$t("CONTACT_FORM.FORM.AVATAR.LABEL"),src:t.avatarUrl,"username-avatar":t.name,"delete-avatar":!!t.avatarUrl},on:{change:t.handleImageUpload,onAvatarDelete:t.handleAvatarDelete}})],1)]),t._v(" "),e("div",[e("div",{staticClass:"w-full"},[e("label",{class:{error:t.$v.name.$error}},[t._v("\n        "+t._s(t.$t("CONTACT_FORM.FORM.NAME.LABEL"))+"\n        "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("CONTACT_FORM.FORM.NAME.PLACEHOLDER")},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value.trim())},t.$v.name.$touch],blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("label",{class:{error:t.$v.email.$error}},[t._v("\n        "+t._s(t.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.LABEL"))+"\n        "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email,expression:"email",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.PLACEHOLDER")},domProps:{value:t.email},on:{input:[function(e){e.target.composing||(t.email=e.target.value.trim())},t.$v.email.$touch],blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.email.$error?e("span",{staticClass:"message"},[t._v("\n          "+t._s(t.$t("CONTACT_FORM.FORM.EMAIL_ADDRESS.ERROR"))+"\n        ")]):t._e()])])]),t._v(" "),e("div",{staticClass:"w-full"},[e("label",{class:{error:t.$v.description.$error}},[t._v("\n      "+t._s(t.$t("CONTACT_FORM.FORM.BIO.LABEL"))+"\n      "),e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.description,expression:"description",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("CONTACT_FORM.FORM.BIO.PLACEHOLDER")},domProps:{value:t.description},on:{input:[function(e){e.target.composing||(t.description=e.target.value.trim())},t.$v.description.$touch],blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),e("div",[e("div",{staticClass:"w-full"},[e("label",{class:{error:t.isPhoneNumberNotValid}},[t._v("\n        "+t._s(t.$t("CONTACT_FORM.FORM.PHONE_NUMBER.LABEL"))+"\n        "),e("woot-phone-input",{attrs:{value:t.phoneNumber,error:t.isPhoneNumberNotValid,placeholder:t.$t("CONTACT_FORM.FORM.PHONE_NUMBER.PLACEHOLDER")},on:{input:t.onPhoneNumberInputChange,blur:t.$v.phoneNumber.$touch,setCode:t.setPhoneCode},model:{value:t.phoneNumber,callback:function(e){t.phoneNumber=e},expression:"phoneNumber"}}),t._v(" "),t.isPhoneNumberNotValid?e("span",{staticClass:"message"},[t._v("\n          "+t._s(t.phoneNumberError)+"\n        ")]):t._e()],1),t._v(" "),t.isPhoneNumberNotValid||!t.phoneNumber?e("div",{staticClass:"callout small warning text-sm dark:bg-yellow-200/20 dark:text-yellow-400"},[t._v("\n        "+t._s(t.$t("CONTACT_FORM.FORM.PHONE_NUMBER.HELP"))+"\n      ")]):t._e()])]),t._v(" "),e("woot-input",{staticClass:"w-full",attrs:{label:t.$t("CONTACT_FORM.FORM.COMPANY_NAME.LABEL"),placeholder:t.$t("CONTACT_FORM.FORM.COMPANY_NAME.PLACEHOLDER")},model:{value:t.companyName,callback:function(e){t.companyName="string"===typeof e?e.trim():e},expression:"companyName"}}),t._v(" "),e("div",[e("div",{staticClass:"w-full"},[e("label",[t._v("\n        "+t._s(t.$t("CONTACT_FORM.FORM.COUNTRY.LABEL"))+"\n      ")]),t._v(" "),e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:t.$t("CONTACT_FORM.FORM.COUNTRY.PLACEHOLDER"),"selected-label":"","select-label":t.$t("CONTACT_FORM.FORM.COUNTRY.SELECT_PLACEHOLDER"),"deselect-label":t.$t("CONTACT_FORM.FORM.COUNTRY.REMOVE"),"custom-label":t.countryNameWithCode,"max-height":160,options:t.countries,"allow-empty":!0,"option-height":104},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}})],1)]),t._v(" "),e("woot-input",{staticClass:"w-full",attrs:{label:t.$t("CONTACT_FORM.FORM.CITY.LABEL"),placeholder:t.$t("CONTACT_FORM.FORM.CITY.PLACEHOLDER")},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}}),t._v(" "),e("div",{staticClass:"w-full"},[e("label",[t._v(" Social Profiles ")]),t._v(" "),t._l(t.socialProfileKeys,(function(n){return e("div",{key:n.key,staticClass:"input-group"},[e("span",{staticClass:"input-group-label"},[t._v(t._s(n.prefixURL))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.socialProfileUserNames[n.key],expression:"socialProfileUserNames[socialProfile.key]"}],staticClass:"input-group-field",attrs:{type:"text"},domProps:{value:t.socialProfileUserNames[n.key]},on:{input:function(e){e.target.composing||t.$set(t.socialProfileUserNames,n.key,e.target.value)}}})])}))],2),t._v(" "),e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("div",{staticClass:"w-full"},[e("woot-submit-button",{attrs:{loading:t.inProgress,"button-text":t.$t("CONTACT_FORM.FORM.SUBMIT")}}),t._v(" "),e("button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onCancel.apply(null,arguments)}}},[t._v("\n        "+t._s(t.$t("CONTACT_FORM.FORM.CANCEL"))+"\n      ")])],1)])],1)}),[],!1,null,"66e91b10",null);e.a=v.exports},2741:function(t,e,n){"use strict";var i={components:{Thumbnail:n(261).a},props:{option:{type:Object,default:function(){}},variant:{type:String,default:"default"}}},s=(n(2757),n(5)),a=Object(s.a)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"menu",attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.$emit("click")}}},["icon"===t.variant&&t.option.icon?e("fluent-icon",{staticClass:"menu-icon",attrs:{icon:t.option.icon,size:"14"}}):t._e(),t._v(" "),"label"===t.variant&&t.option.color?e("span",{staticClass:"label-pill",style:{backgroundColor:t.option.color}}):t._e(),t._v(" "),"agent"===t.variant?e("thumbnail",{staticClass:"agent-thumbnail",attrs:{username:t.option.label,src:t.option.thumbnail,status:t.option.status,size:"20px"}}):t._e(),t._v(" "),e("p",{staticClass:"menu-label overflow-hidden whitespace-nowrap text-ellipsis"},[t._v("\n    "+t._s(t.option.label)+"\n  ")])],1)}),[],!1,null,"a134e04e",null);e.a=a.exports},2742:function(t,e,n){"use strict";var i={methods:{openProfileSettings:function(){return this.$router.push({name:"profile_settings_index"})}}},s=n(5),a=Object(s.a)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-0 mx-4 px-1 flex max-h-[8vh] items-baseline justify-between hover:bg-slate-25 dark:hover:bg-slate-800 border border-dashed border-slate-100 dark:border-slate-700 rounded-sm overflow-auto"},[e("p",{staticClass:"w-fit !m-0"},[t._v("\n    "+t._s(t.$t("CONVERSATION.FOOTER.MESSAGE_SIGNATURE_NOT_CONFIGURED"))+"\n    "),e("woot-button",{attrs:{"color-scheme":"primary",variant:"link"},on:{click:t.openProfileSettings}},[t._v("\n      "+t._s(t.$t("CONVERSATION.FOOTER.CLICK_HERE"))+"\n    ")])],1)])}),[],!1,null,null,null);e.a=a.exports},2743:function(t,e,n){"use strict";n(68),n(97),n(37);var i=n(1921),s={props:{attachments:{type:Array,default:function(){return[]}},removeAttachment:{type:Function,default:function(){}}},methods:{onRemoveAttachment:function(t){this.removeAttachment(t)},formatFileSize:function(t){var e=t.byte_size||t.size;return Object(i.b)(e,0)},isTypeImage:function(t){return(t.content_type||t.type).includes("image")},isTypeAudio:function(t){return(t.content_type||t.type).includes("audio")},fileName:function(t){return t.filename||t.name}}},a=(n(2774),n(5)),r=Object(a.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"preview-item__wrap flex overflow-auto max-h-[12.5rem]"},t._l(t.attachments,(function(n,i){return e("div",{key:n.id,staticClass:"preview-item flex items-center p-1 bg-slate-50 dark:bg-slate-800 gap-1 rounded-md w-[15rem] mb-1"},[e("div",{staticClass:"max-w-[4rem] flex-shrink-0 w-6 flex items-center"},[t.isTypeImage(n.resource)?e("img",{staticClass:"image-thumb",attrs:{src:n.thumb}}):e("span",{staticClass:"w-6 h-6 text-lg relative -top-px text-left"},[t._v("\n        \ud83d\udcc4\n      ")])]),t._v(" "),e("div",{staticClass:"max-w-[60%] min-w-[50%] overflow-hidden text-ellipsis"},[e("span",{staticClass:"h-4 overflow-hidden text-sm font-medium text-ellipsis whitespace-nowrap"},[t._v("\n        "+t._s(t.fileName(n.resource))+"\n      ")])]),t._v(" "),e("div",{staticClass:"w-[30%] justify-center"},[e("span",{staticClass:"item overflow-hidden text-xs text-ellipsis whitespace-nowrap"},[t._v("\n        "+t._s(t.formatFileSize(n.resource))+"\n      ")])]),t._v(" "),e("div",{staticClass:"flex items-center justify-center"},[t.isTypeAudio(n.resource)?t._e():e("woot-button",{staticClass:"remove--attachment clear secondary",attrs:{icon:"dismiss"},on:{click:()=>t.onRemoveAttachment(i)}})],1)])})),0)}),[],!1,null,"0ee8bf23",null);e.a=r.exports},2744:function(t,e,n){"use strict";n(45),n(8),n(68),n(97),n(37),n(141);var i=["DOCUMENT","IMAGE","VIDEO"],s={props:{inboxId:{type:Number,default:void 0}},data:function(){return{query:""}},computed:{whatsAppTemplateMessages:function(){return this.$store.getters["inboxes/getWhatsAppTemplates"](this.inboxId).filter((function(t){return"approved"===t.status.toLowerCase()})).filter((function(t){return t.components.every((function(t){return!i.includes(t.format)}))}))},filteredTemplateMessages:function(){var t=this;return this.whatsAppTemplateMessages.filter((function(e){return e.name.toLowerCase().includes(t.query.toLowerCase())}))}},methods:{getTemplatebody:function(t){return t.components.find((function(t){return"BODY"===t.type})).text}}},a=s,r=(n(2772),n(5)),o=Object(r.a)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full"},[e("div",{staticClass:"templates__list-search"},[e("fluent-icon",{staticClass:"search-icon",attrs:{icon:"search",size:"16"}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"search",staticClass:"templates__search-input",attrs:{type:"search",placeholder:t.$t("WHATSAPP_TEMPLATES.PICKER.SEARCH_PLACEHOLDER")},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})],1),t._v(" "),e("div",{staticClass:"template__list-container"},[t._l(t.filteredTemplateMessages,(function(n,i){return e("div",{key:n.id},[e("button",{staticClass:"template__list-item",on:{click:function(e){return t.$emit("onSelect",n)}}},[e("div",[e("div",{staticClass:"flex-between"},[e("p",{staticClass:"label-title"},[t._v("\n              "+t._s(n.name)+"\n            ")]),t._v(" "),e("span",{staticClass:"inline-block py-1 px-2 rounded-sm text-xs leading-none cursor-default bg-white dark:bg-slate-700 text-slate-800 dark:text-slate-100"},[t._v("\n              "+t._s(t.$t("WHATSAPP_TEMPLATES.PICKER.LABELS.LANGUAGE"))+" :\n              "+t._s(n.language)+"\n            ")])]),t._v(" "),e("div",[e("p",{staticClass:"strong"},[t._v("\n              "+t._s(t.$t("WHATSAPP_TEMPLATES.PICKER.LABELS.TEMPLATE_BODY"))+"\n            ")]),t._v(" "),e("p",{staticClass:"label-body"},[t._v(t._s(t.getTemplatebody(n)))])]),t._v(" "),e("div",{staticClass:"label-category"},[e("p",{staticClass:"strong"},[t._v("\n              "+t._s(t.$t("WHATSAPP_TEMPLATES.PICKER.LABELS.CATEGORY"))+"\n            ")]),t._v(" "),e("p",[t._v(t._s(n.category))])])])]),t._v(" "),i!=t.filteredTemplateMessages.length-1?e("hr",{key:`hr-${i}`}):t._e()])})),t._v(" "),t.filteredTemplateMessages.length?t._e():e("div",[e("p",[t._v("\n        "+t._s(t.$t("WHATSAPP_TEMPLATES.PICKER.NO_TEMPLATES_FOUND"))+"\n        "),e("strong",[t._v(t._s(t.query))])])])],2)])}),[],!1,null,"17f761ab",null);e.a=o.exports},2745:function(t,e,n){"use strict";n(10),n(49),n(370),n(141),n(65),n(37),n(83);var i=n(57),s={props:{template:{type:Object,default:function(){}}},validations:{processedParams:{requiredIfKeysPresent:Object(i.requiredIf)("variables"),allKeysRequired:function(t){return Object.keys(t).every((function(e){return t[e]}))}}},data:function(){return{processedParams:{}}},computed:{variables:function(){var t=this.templateString.match(/{{([^}]+)}}/g);return t},templateString:function(){return this.template.components.find((function(t){return"BODY"===t.type})).text},processedString:function(){var t=this;return this.templateString.replace(/{{([^}]+)}}/g,(function(e,n){var i=t.processVariable(n);return t.processedParams[i]||"{{".concat(n,"}}")}))}},mounted:function(){this.generateVariables()},methods:{sendMessage:function(){if(this.$v.$touch(),!this.$v.$invalid){var t={message:this.processedString,templateParams:{name:this.template.name,category:this.template.category,language:this.template.language,namespace:this.template.namespace,processed_params:this.processedParams}};this.$emit("sendMessage",t)}},processVariable:function(t){return t.replace(/{{|}}/g,"")},generateVariables:function(){var t=this,e=this.templateString.match(/{{([^}]+)}}/g);if(e){var n=e.map((function(e){return t.processVariable(e)}));this.processedParams=n.reduce((function(t,e){return t[e]="",t}),{})}}}},a=s,r=(n(2773),n(5)),o=Object(r.a)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.processedString,expression:"processedString"}],staticClass:"template-input",attrs:{rows:"4",readonly:""},domProps:{value:t.processedString},on:{input:function(e){e.target.composing||(t.processedString=e.target.value)}}}),t._v(" "),t.variables?e("div",{staticClass:"template__variables-container"},[e("p",{staticClass:"variables-label"},[t._v("\n      "+t._s(t.$t("WHATSAPP_TEMPLATES.PARSER.VARIABLES_LABEL"))+"\n    ")]),t._v(" "),t._l(t.processedParams,(function(n,i){return e("div",{key:i,staticClass:"template__variable-item"},[e("span",{staticClass:"variable-label"},[t._v("\n        "+t._s(i)+"\n      ")]),t._v(" "),e("woot-input",{staticClass:"variable-input",attrs:{type:"text",styles:{marginBottom:0}},model:{value:t.processedParams[i],callback:function(e){t.$set(t.processedParams,i,e)},expression:"processedParams[key]"}})],1)})),t._v(" "),t.$v.$dirty&&t.$v.$invalid?e("p",{staticClass:"error"},[t._v("\n      "+t._s(t.$t("WHATSAPP_TEMPLATES.PARSER.FORM_ERROR_MESSAGE"))+"\n    ")]):t._e()],2):t._e(),t._v(" "),e("footer",[e("woot-button",{attrs:{variant:"smooth"},on:{click:function(e){return t.$emit("resetTemplate")}}},[t._v("\n      "+t._s(t.$t("WHATSAPP_TEMPLATES.PARSER.GO_BACK_LABEL"))+"\n    ")]),t._v(" "),e("woot-button",{attrs:{type:"button"},on:{click:t.sendMessage}},[t._v("\n      "+t._s(t.$t("WHATSAPP_TEMPLATES.PARSER.SEND_MESSAGE_LABEL"))+"\n    ")])],1)])}),[],!1,null,"7dd22fb8",null);e.a=o.exports},2752:function(t,e,n){"use strict";n(2682)},2754:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"e",(function(){return a})),n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return c}));n(141),n(1776),n(83),n(37),n(7),n(136);var i=n(2726),s=function(t){return i.a.find((function(e){return e.key===t})).label},a=function(t,e){return e.map((function(e){var n=t.find((function(t){return t.id===e}));return n?n.name:""})).join(", ")},r=function(t,e){return e.map((function(e){var n=t.find((function(t){return t.title===e}));return n?n.title:""})).join(", ")},o=function(t,e){return e.map((function(e){var n=t.find((function(t){return t.id===e}));return n?n.name:""})).join(", ")},c=function(t,e,n){if(!t||!n)return"";if("send_attachment"===e){var i=n.find((function(e){return e.blob_id===t}));if(i)return i.filename.toString()}return""}},2757:function(t,e,n){"use strict";n(2689)},2758:function(t,e,n){"use strict";n(2690)},2759:function(t,e,n){"use strict";n(2691)},2760:function(t,e,n){"use strict";n(2692)},2761:function(t,e,n){"use strict";n(2693)},2762:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n(141),n(83),n(8),n(68),n(97),n(37),n(16),n(7),n(21),n(136);var i=function(t,e,n,i){var s=null===e||void 0===e?void 0:e.find((function(e){return e[n]===t[0]}));return{id:t[0],name:s?s[i]:t[0]}},s=function(t,e){var n=t.attribute_key,s=t.filter_operator,a=t.values,r=e.filterTypes,o=e.allCustomAttributes,c=function(t,e,n){if(("created_at"===t||"last_activity_at"===t)&&"days_before"===e)return"plain_text";var i=n.find((function(e){return e.attributeKey===t}));return null===i||void 0===i?void 0:i.inputType}(n,s,r);if(void 0===c){var l=function(t,e){return{text:"string",number:"string",date:"string",checkbox:"multi_select",list:"multi_select",link:"string"}[e.find((function(e){return e.attribute_key===t})).attribute_display_type]}(n,o);return"string"===l?a[0].toString():{id:a[0],name:a[0]}}return"multi_select"===c||"search_select"===c?function(t,e){var n=t.attribute_key,s=t.values,a=e.languages,r=e.countries,o=e.agents,c=e.inboxes,l=e.teams,u=e.campaigns,d=e.labels;switch(n){case"status":return function(t){return t.map((function(t){return{id:t,name:t}}))}(s);case"assignee_id":return i(s,o,"id","name");case"inbox_id":return i(s,c,"id","name");case"team_id":return i(s,l,"id","name");case"campaign_id":return i(s,u,"id","title");case"labels":return function(t,e){return e.filter((function(e){return t.includes(e.title)})).map((function(t){var e=t.title;return{id:e,name:e}}))}(s,d);case"browser_language":return function(t,e){return e.filter((function(e){return t.includes(e.id)})).map((function(t){var e=t.id,n=t.name;return{id:e.toLowerCase(),name:n}}))}(s,a);case"country_code":return function(t,e){return e.filter((function(e){return t.includes(e.id)})).map((function(t){return{id:t.id,name:t.name}}))}(s,r);default:return{id:s[0],name:s[0]}}}(t,e):a[0].toString()}},2763:function(t,e,n){"use strict";n(2694)},2764:function(t,e,n){"use strict";n(2697)},2766:function(t,e,n){"use strict";n(2698)},2767:function(t,e,n){"use strict";n(2699)},2768:function(t,e,n){"use strict";n(2700)},2769:function(t,e,n){"use strict";n(2701)},2770:function(t,e,n){"use strict";n(2702)},2771:function(t,e,n){"use strict";n(2703)},2772:function(t,e,n){"use strict";n(2704)},2773:function(t,e,n){"use strict";n(2705)},2774:function(t,e,n){"use strict";n(2706)},2775:function(t,e,n){"use strict";n(2707)},2776:function(t,e,n){"use strict";n(2708)},2777:function(t,e,n){"use strict";n(2709)},2779:function(t,e,n){"use strict";n(2710)},2780:function(t,e,n){"use strict";n(2711)},2781:function(t,e,n){"use strict";n(2712)},2782:function(t,e,n){"use strict";n(2713)},2783:function(t,e,n){"use strict";n(2714)},2784:function(t,e,n){"use strict";var i=n(2785),s=n.n(i);e.default=s.a},2785:function(t,e){},2789:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n(41);var i=function(t,e){return"".concat("https://app.dyte.in/meeting/stage/").concat(t,"?authToken=").concat(e,"&showSetupScreen=true&disableVideoBackground=true")}},2797:function(t,e,n){"use strict";n(30),n(41),n(1776),n(8),n(37),n(10),n(4),n(11),n(9),n(12),n(7),n(22);var i=n(149),s=n(1914),a=n(79),r=n(1927),o=n(1922);function c(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}var l={components:{EmojiOrIcon:r.a},mixins:[a.a],props:{href:{type:String,default:""},icon:{type:String,required:!0},emoji:{type:String,required:!0},value:{type:String,default:""},showCopy:{type:Boolean,default:!1}},methods:{onCopy:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(o.a)(n.value);case 3:n.showAlert(n.$t("CONTACT_PANEL.COPY_SUCCESSFUL"));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,s){var a=e.apply(t,n);function r(t){c(a,i,s,r,o,"next",t)}function o(t){c(a,i,s,r,o,"throw",t)}r(void 0)}))})()}}},u=l,d=(n(2768),n(5)),p=Object(d.a)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"-ml-1"},[t.href?e("a",{staticClass:"flex items-center mb-2 text-slate-800 dark:text-slate-100 hover:underline",attrs:{href:t.href}},[e("emoji-or-icon",{staticClass:"mr-2 ml-1 rtl:mr-1 rtl:ml-2",attrs:{icon:t.icon,emoji:t.emoji,"icon-size":"14"}}),t._v(" "),t.value?e("span",{staticClass:"overflow-hidden whitespace-nowrap text-ellipsis text-sm",attrs:{title:t.value}},[t._v("\n      "+t._s(t.value)+"\n    ")]):e("span",{staticClass:"text-slate-300 dark:text-slate-600 text-sm"},[t._v(t._s(t.$t("CONTACT_PANEL.NOT_AVAILABLE")))]),t._v(" "),t.showCopy?e("woot-button",{attrs:{type:"submit",variant:"clear",size:"tiny","color-scheme":"secondary",icon:"clipboard","class-names":"copy-button"},on:{click:t.onCopy}}):t._e()],1):e("div",{staticClass:"flex items-center mb-2 text-slate-800 dark:text-slate-100"},[e("emoji-or-icon",{staticClass:"mr-2 ml-1 rtl:mr-1 rtl:ml-2",attrs:{icon:t.icon,emoji:t.emoji,"icon-size":"14"}}),t._v(" "),t.value?e("span",{staticClass:"overflow-hidden whitespace-nowrap text-ellipsis text-sm"},[t._v("\n      "+t._s(t.value)+"\n    ")]):e("span",{staticClass:"text-slate-300 dark:text-slate-600 text-sm"},[t._v(t._s(t.$t("CONTACT_PANEL.NOT_AVAILABLE")))])],1)])}),[],!1,null,"083c8120",null).exports,h=n(261),f={props:{socialProfiles:{type:Object,default:function(){return{}}}},data:function(){return{socialMediaLinks:[{key:"facebook",icon:"facebook",link:"https://facebook.com/"},{key:"twitter",icon:"twitter",link:"https://twitter.com/"},{key:"linkedin",icon:"linkedin",link:"https://linkedin.com/"},{key:"github",icon:"github",link:"https://github.com/"},{key:"instagram",icon:"instagram",link:"https://instagram.com/"}]}},computed:{availableProfiles:function(){var t=this;return this.socialMediaLinks.filter((function(e){return!!t.socialProfiles[e.key]}))}}},m=Object(d.a)(f,(function(){var t=this,e=t._self._c;return t.availableProfiles.length?e("div",{staticClass:"flex items-end mx-0 my-2 gap-3"},t._l(t.availableProfiles,(function(n){return e("a",{key:n.key,attrs:{href:`${n.link}${t.socialProfiles[n.key]}`,target:"_blank",rel:"noopener noreferrer nofollow"}},[e("fluent-icon",{staticClass:"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200",attrs:{icon:`brand-${n.key}`,size:"16"}})],1)})),0):t._e()}),[],!1,null,null,null).exports,v=n(25);function b(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y={components:{ContactForm:n(2740).a},props:{show:{type:Boolean,default:!1},contact:{type:Object,default:function(){return{}}}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(v.mapGetters)({uiFlags:"contacts/getUIFlags"})),methods:{onCancel:function(){this.$emit("cancel")},onSuccess:function(){this.$emit("cancel")},onSubmit:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$store.dispatch("contacts/update",t);case 2:return e.next=4,n.$store.dispatch("contacts/fetchContactableInbox",n.contact.id);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,s){var a=e.apply(t,n);function r(t){b(a,i,s,r,o,"next",t)}function o(t){b(a,i,s,r,o,"throw",t)}r(void 0)}))})()}}},C=y,O=Object(d.a)(C,(function(){var t=this,e=t._self._c;return e("woot-modal",{attrs:{show:t.show,"on-close":t.onCancel,"modal-type":"right-aligned"},on:{"update:show":function(e){t.show=e}}},[e("div",{staticClass:"h-auto overflow-auto flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":`${t.$t("EDIT_CONTACT.TITLE")} - ${t.contact.name||t.contact.email}`,"header-content":t.$t("EDIT_CONTACT.DESC")}}),t._v(" "),e("contact-form",{attrs:{contact:t.contact,"in-progress":t.uiFlags.isUpdating,"on-submit":t.onSubmit},on:{success:t.onSuccess,cancel:t.onCancel}})],1)])}),[],!1,null,null,null).exports,A=(n(141),n(83),n(68),n(97),n(1916)),T=n(2739),E=n(1945),w=n(2742),S=n(1809),I={components:{},props:{name:{type:String,default:""},inboxIdentifier:{type:String,default:""},channelType:{type:String,default:""}},computed:{computedInboxIcon:function(){return this.channelType?Object(S.a)(this.channelType,this.inboxIdentifier):"chat"},computedInboxType:function(){return this.channelType?Object(S.d)(this.channelType,this.inboxIdentifier):"chat"}}},x=(n(2771),Object(d.a)(I,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center h-[2.375rem] min-w-0 py-0 px-1"},[e("span",{staticClass:"inline-flex rounded mr-1 rtl:ml-1 rtl:mr-0 bg-slate-25 dark:bg-slate-700 p-0.5 items-center flex-shrink-0 justify-center w-6 h-6"},[e("fluent-icon",{staticClass:"text-slate-800 dark:text-slate-200",attrs:{icon:t.computedInboxIcon,size:"14"}})],1),t._v(" "),e("div",{staticClass:"flex flex-col w-full min-w-0 ml-1 mr-1"},[e("h5",{staticClass:"option__title"},[t._v("\n      "+t._s(t.name)+"\n    ")]),t._v(" "),e("p",{staticClass:"option__body overflow-hidden whitespace-nowrap text-ellipsis",attrs:{title:t.inboxIdentifier}},[t._v("\n      "+t._s(t.inboxIdentifier||t.computedInboxType)+"\n    ")])])])}),[],!1,null,"15209d00",null).exports),N=(n(45),n(2744)),R=n(2745),L={components:{TemplatesPicker:N.a,TemplateParser:R.a},props:{inboxId:{type:Number,default:void 0},show:{type:Boolean,default:!0}},data:function(){return{selectedWaTemplate:null}},methods:{pickTemplate:function(t){this.$emit("pickTemplate",!0),this.selectedWaTemplate=t},onResetTemplate:function(){this.$emit("pickTemplate",!1),this.selectedWaTemplate=null},onSendMessage:function(t){this.$emit("on-send",t)},onClose:function(){this.$emit("cancel")}}},P=Object(d.a)(L,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"mx-0 flex flex-wrap"},[t.selectedWaTemplate?e("template-parser",{attrs:{template:t.selectedWaTemplate},on:{resetTemplate:t.onResetTemplate,sendMessage:t.onSendMessage}}):e("templates-picker",{attrs:{"inbox-id":t.inboxId},on:{onSelect:t.pickTemplate}})],1)}),[],!1,null,null,null).exports,M=n(92),k=n(364),$=n(57),j=n(2729),D=n.n(j),F=n(2743),U=n(90),B=n(2730),V=n(217),G=n(267);function W(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function H(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){W(a,i,s,r,o,"next",t)}function o(t){W(a,i,s,r,o,"throw",t)}r(void 0)}))}}function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){q(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var K={components:{Thumbnail:h.a,WootMessageEditor:A.a,ReplyEmailHead:T.a,CannedResponse:E.a,WhatsappTemplates:P,InboxDropdownItem:x,FileUpload:D.a,AttachmentPreview:F.a,MessageSignatureMissingAlert:w.a},mixins:[a.a,G.a,M.c,B.a],props:{contact:{type:Object,default:function(){return{}}},onSubmit:{type:Function,default:function(){}},channelType:{type:String,default:""}},data:function(){return{name:"",subject:"",message:"",showCannedResponseMenu:!1,cannedResponseSearchKey:"",bccEmails:"",ccEmails:"",targetInbox:{},whatsappTemplateSelected:!1,attachedFiles:[]}},validations:{subject:{required:Object($.requiredIf)("isAnEmailInbox")},message:{required:$.required},targetInbox:{required:$.required}},computed:Y(Y({},Object(v.mapGetters)({uiFlags:"contacts/getUIFlags",conversationsUiFlags:"contactConversations/getUIFlags",currentUser:"getCurrentUser",globalConfig:"globalConfig/get",messageSignature:"getMessageSignature"})),{},{sendWithSignature:function(){return this.fetchSignatureFlagFromUiSettings(this.channelType)},signatureToApply:function(){return this.messageSignature},newMessagePayload:function(){var t={inboxId:this.targetInbox.id,sourceId:this.targetInbox.sourceId,contactId:this.contact.id,message:{content:this.message},mailSubject:this.subject,assigneeId:this.currentUser.id};return this.attachedFiles&&this.attachedFiles.length&&(t.files=[],this.setAttachmentPayload(t)),this.ccEmails&&(t.message.cc_emails=this.ccEmails),this.bccEmails&&(t.message.bcc_emails=this.bccEmails),t},selectedInbox:{get:function(){var t=this;return(this.contact.contactableInboxes||[]).find((function(e){var n,i,s;return(null===(n=e.inbox)||void 0===n?void 0:n.id)&&(null===(i=e.inbox)||void 0===i?void 0:i.id)===(null===(s=t.targetInbox)||void 0===s?void 0:s.id)}))||{inbox:{}}},set:function(t){this.targetInbox=t.inbox}},showNoInboxAlert:function(){return!!this.contact.contactableInboxes&&(0===this.inboxes.length&&!this.uiFlags.isFetchingInboxes)},isSignatureEnabledForInbox:function(){return this.isAnEmailInbox&&this.sendWithSignature},signatureToggleTooltip:function(){return this.sendWithSignature?this.$t("CONVERSATION.FOOTER.DISABLE_SIGN_TOOLTIP"):this.$t("CONVERSATION.FOOTER.ENABLE_SIGN_TOOLTIP")},inboxes:function(){return(this.contact.contactableInboxes||[]).map((function(t){return Y(Y({},t.inbox),{},{sourceId:t.source_id})}))},isAnEmailInbox:function(){return this.selectedInbox&&this.selectedInbox.inbox.channel_type===M.b.EMAIL},isAnWebWidgetInbox:function(){return this.selectedInbox&&this.selectedInbox.inbox.channel_type===M.b.WEB},isEmailOrWebWidgetInbox:function(){return this.isAnEmailInbox||this.isAnWebWidgetInbox},hasWhatsappTemplates:function(){var t;return!(null===(t=this.selectedInbox.inbox)||void 0===t||!t.message_templates)},hasAttachments:function(){return this.attachedFiles.length},inbox:function(){return this.targetInbox},allowedFileTypes:function(){return U.a}}),watch:{message:function(t){this.hasSlashCommand="/"===t[0]&&!this.isEmailOrWebWidgetInbox;var e=t.includes(" ");this.hasSlashCommand&&!e?(this.cannedResponseSearchKey=t.substring(1),this.showCannedResponseMenu=!0):(this.cannedResponseSearchKey="",this.showCannedResponseMenu=!1)},targetInbox:function(){this.setSignature()}},mounted:function(){this.setSignature()},methods:{setSignature:function(){this.messageSignature&&(this.isSignatureEnabledForInbox?this.message=Object(V.a)(this.message,this.signatureToApply):this.message=Object(V.e)(this.message,this.signatureToApply))},setAttachmentPayload:function(t){var e=this;this.attachedFiles.forEach((function(n){e.globalConfig.directUploadsEnabled?t.files.push(n.blobSignedId):t.files.push(n.resource.file)}))},attachFile:function(t){var e=this,n=t.blob,i=t.file,s=new FileReader;s.readAsDataURL(i.file),s.onloadend=function(){e.attachedFiles.push({currentChatId:e.contact.id,resource:n||i,isPrivate:e.isPrivate,thumb:s.result,blobSignedId:n?n.signed_id:void 0})}},removeAttachment:function(t){this.attachedFiles=this.attachedFiles.filter((function(e,n){return t!==n}))},onCancel:function(){this.$emit("cancel")},onSuccess:function(){this.$emit("success")},replaceTextWithCannedResponse:function(t){this.message=t},toggleCannedMenu:function(t){this.showCannedMenu=t},prepareWhatsAppMessagePayload:function(t){var e=t.message,n=t.templateParams;return{inboxId:this.targetInbox.id,sourceId:this.targetInbox.sourceId,contactId:this.contact.id,message:{content:e,template_params:n},assigneeId:this.currentUser.id}},onFormSubmit:function(){this.$v.$touch(),this.$v.$invalid||this.createConversation({payload:this.newMessagePayload,isFromWhatsApp:!1})},createConversation:function(t){var e=this;return H(regeneratorRuntime.mark((function n(){var i,s,a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.payload,s=t.isFromWhatsApp,n.prev=1,n.next=4,e.onSubmit(i,s);case 4:a=n.sent,r={type:"link",to:"/app/accounts/".concat(a.account_id,"/conversations/").concat(a.id),message:e.$t("NEW_CONVERSATION.FORM.GO_TO_CONVERSATION")},e.onSuccess(),e.showAlert(e.$t("NEW_CONVERSATION.FORM.SUCCESS_MESSAGE"),r),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),n.t0 instanceof k.b?e.showAlert(n.t0.data):e.showAlert(e.$t("NEW_CONVERSATION.FORM.ERROR_MESSAGE"));case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))()},toggleWaTemplate:function(t){this.whatsappTemplateSelected=t},onSendWhatsAppReply:function(t){var e=this;return H(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return!0,i=e.prepareWhatsAppMessagePayload(t),n.next=4,e.createConversation({payload:i,isFromWhatsApp:true});case 4:case"end":return n.stop()}}),n)})))()},inboxReadableIdentifier:function(t){return"".concat(t.name," (").concat(t.channel_type,")")},computedInboxSource:function(t){return t.channel_type?Object(S.b)(t.channel_type,t.phone_number,t):""},toggleMessageSignature:function(){this.setSignatureFlagForInbox(this.channelType,!this.sendWithSignature),this.setSignature()}}},X=(n(2775),Object(d.a)(K,(function(){var t=this,e=t._self._c;return e("form",{staticClass:"conversation--form w-full",on:{submit:function(e){return e.preventDefault(),t.onFormSubmit.apply(null,arguments)}}},[t.showNoInboxAlert?e("div",{staticClass:"callout warning"},[e("p",[t._v("\n      "+t._s(t.$t("NEW_CONVERSATION.NO_INBOX"))+"\n    ")])]):e("div",[e("div",{staticClass:"gap-2 flex flex-row"},[e("div",{staticClass:"w-[50%]"},[e("label",[t._v("\n          "+t._s(t.$t("NEW_CONVERSATION.FORM.INBOX.LABEL"))+"\n        ")]),t._v(" "),e("div",{staticClass:"multiselect-wrap--small",class:{"has-multi-select-error":t.$v.targetInbox.$error}},[e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT"),"selected-label":"","select-label":"","deselect-label":"","max-height":160,"close-on-select":!0,options:[...t.inboxes]},scopedSlots:t._u([{key:"singleLabel",fn:function({option:n}){return[n.name?e("inbox-dropdown-item",{attrs:{name:n.name,"inbox-identifier":t.computedInboxSource(n),"channel-type":n.channel_type}}):e("span",[t._v("\n                "+t._s(t.$t("NEW_CONVERSATION.FORM.INBOX.PLACEHOLDER"))+"\n              ")])]}},{key:"option",fn:function({option:n}){return[e("inbox-dropdown-item",{attrs:{name:n.name,"inbox-identifier":t.computedInboxSource(n),"channel-type":n.channel_type}})]}}]),model:{value:t.targetInbox,callback:function(e){t.targetInbox=e},expression:"targetInbox"}})],1),t._v(" "),e("label",{class:{error:t.$v.targetInbox.$error}},[t.$v.targetInbox.$error?e("span",{staticClass:"message"},[t._v("\n            "+t._s(t.$t("NEW_CONVERSATION.FORM.INBOX.ERROR"))+"\n          ")]):t._e()])]),t._v(" "),e("div",{staticClass:"w-[50%]"},[e("label",[t._v("\n          "+t._s(t.$t("NEW_CONVERSATION.FORM.TO.LABEL"))+"\n          "),e("div",{staticClass:"flex items-center h-[2.4735rem] rounded-sm py-1 px-2 bg-slate-25 dark:bg-slate-900 border border-solid border-slate-75 dark:border-slate-600"},[e("thumbnail",{attrs:{src:t.contact.thumbnail,size:"24px",username:t.contact.name,status:t.contact.availability_status}}),t._v(" "),e("h4",{staticClass:"m-0 ml-2 mr-2 text-slate-700 dark:text-slate-100 text-sm"},[t._v("\n              "+t._s(t.contact.name)+"\n            ")])],1)])])]),t._v(" "),t.isAnEmailInbox?e("div",{staticClass:"w-full"},[e("div",{staticClass:"w-full"},[e("label",{class:{error:t.$v.subject.$error}},[t._v("\n          "+t._s(t.$t("NEW_CONVERSATION.FORM.SUBJECT.LABEL"))+"\n          "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.subject,expression:"subject"}],attrs:{type:"text",placeholder:t.$t("NEW_CONVERSATION.FORM.SUBJECT.PLACEHOLDER")},domProps:{value:t.subject},on:{input:[function(e){e.target.composing||(t.subject=e.target.value)},t.$v.subject.$touch]}}),t._v(" "),t.$v.subject.$error?e("span",{staticClass:"message"},[t._v("\n            "+t._s(t.$t("NEW_CONVERSATION.FORM.SUBJECT.ERROR"))+"\n          ")]):t._e()])])]):t._e(),t._v(" "),e("div",{staticClass:"w-full"},[e("div",{staticClass:"w-full"},[e("div",{staticClass:"relative"},[t.showCannedResponseMenu&&t.hasSlashCommand?e("canned-response",{attrs:{"search-key":t.cannedResponseSearchKey},on:{click:t.replaceTextWithCannedResponse}}):t._e()],1),t._v(" "),t.isEmailOrWebWidgetInbox?e("div",[e("label",[t._v("\n            "+t._s(t.$t("NEW_CONVERSATION.FORM.MESSAGE.LABEL"))+"\n          ")]),t._v(" "),t.isAnEmailInbox?e("reply-email-head",{attrs:{"cc-emails":t.ccEmails,"bcc-emails":t.bccEmails},on:{"update:ccEmails":function(e){t.ccEmails=e},"update:cc-emails":function(e){t.ccEmails=e},"update:bccEmails":function(e){t.bccEmails=e},"update:bcc-emails":function(e){t.bccEmails=e}}}):t._e(),t._v(" "),e("div",{staticClass:"editor-wrap"},[e("woot-message-editor",{staticClass:"message-editor",class:{editor_warning:t.$v.message.$error},attrs:{"enable-variables":!0,signature:t.signatureToApply,"allow-signature":!0,placeholder:t.$t("NEW_CONVERSATION.FORM.MESSAGE.PLACEHOLDER")},on:{"toggle-canned-menu":t.toggleCannedMenu,blur:t.$v.message.$touch},scopedSlots:t._u([{key:"footer",fn:function(){return[t.isSignatureEnabledForInbox&&!t.messageSignature?e("message-signature-missing-alert",{staticClass:"!mx-0 mb-1"}):t._e(),t._v(" "),t.isAnEmailInbox?e("div",{staticClass:"mb-3 mt-px"},[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.signatureToggleTooltip,expression:"signatureToggleTooltip",modifiers:{"top-end":!0}}],attrs:{icon:"signature","color-scheme":"secondary",variant:"smooth",size:"small",title:t.signatureToggleTooltip},on:{click:function(e){return e.preventDefault(),t.toggleMessageSignature.apply(null,arguments)}}})],1):t._e()]},proxy:!0}],null,!1,823990732),model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t._v(" "),t.$v.message.$error?e("span",{staticClass:"editor-warning__message"},[t._v("\n              "+t._s(t.$t("NEW_CONVERSATION.FORM.MESSAGE.ERROR"))+"\n            ")]):t._e()],1)],1):t.hasWhatsappTemplates?e("whatsapp-templates",{attrs:{"inbox-id":t.selectedInbox.inbox.id},on:{"on-select-template":t.toggleWaTemplate,"on-send":t.onSendWhatsAppReply}}):e("label",{class:{error:t.$v.message.$error}},[t._v("\n          "+t._s(t.$t("NEW_CONVERSATION.FORM.MESSAGE.LABEL"))+"\n          "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"min-h-[5rem]",attrs:{type:"text",placeholder:t.$t("NEW_CONVERSATION.FORM.MESSAGE.PLACEHOLDER")},domProps:{value:t.message},on:{input:[function(e){e.target.composing||(t.message=e.target.value)},t.$v.message.$touch]}}),t._v(" "),t.$v.message.$error?e("span",{staticClass:"message"},[t._v("\n            "+t._s(t.$t("NEW_CONVERSATION.FORM.MESSAGE.ERROR"))+"\n          ")]):t._e()]),t._v(" "),t.isEmailOrWebWidgetInbox?e("div",{staticClass:"flex flex-col"},[e("file-upload",{ref:"uploadAttachment",attrs:{"input-id":"newConversationAttachment",size:16777216,accept:t.allowedFileTypes,multiple:!0,drop:!0,"drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0}},on:{"input-file":t.onFileUpload}},[e("woot-button",{attrs:{"class-names":"button--upload",icon:"attach",emoji:"\ud83d\udcce","color-scheme":"secondary",variant:"smooth",size:"small"}},[t._v("\n              "+t._s(t.$t("NEW_CONVERSATION.FORM.ATTACHMENTS.SELECT"))+"\n            ")]),t._v(" "),e("span",{staticClass:"text-slate-500 ltr:ml-1 rtl:mr-1 font-medium text-xs dark:text-slate-400"},[t._v("\n              "+t._s(t.$t("NEW_CONVERSATION.FORM.ATTACHMENTS.HELP_TEXT"))+"\n            ")])],1),t._v(" "),t.hasAttachments?e("div",{staticClass:"max-h-20 overflow-y-auto mb-4 mt-1.5"},[e("attachment-preview",{staticClass:"[&>.preview-item]:dark:bg-slate-700 flex-row flex-wrap gap-x-3 gap-y-1",attrs:{attachments:t.attachedFiles,"remove-attachment":t.removeAttachment}})],1):t._e()],1):t._e()],1)])]),t._v(" "),t.hasWhatsappTemplates?t._e():e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onCancel.apply(null,arguments)}}},[t._v("\n      "+t._s(t.$t("NEW_CONVERSATION.FORM.CANCEL"))+"\n    ")]),t._v(" "),e("woot-button",{attrs:{type:"submit","is-loading":t.conversationsUiFlags.isCreating}},[t._v("\n      "+t._s(t.$t("NEW_CONVERSATION.FORM.SUBMIT"))+"\n    ")])],1),t._v(" "),t.isEmailOrWebWidgetInbox?e("transition",{attrs:{name:"modal-fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.$refs.uploadAttachment&&t.$refs.uploadAttachment.dropActive,expression:"$refs.uploadAttachment && $refs.uploadAttachment.dropActive"}],staticClass:"flex top-0 bottom-0 z-30 gap-2 right-0 left-0 items-center justify-center flex-col absolute w-full h-full bg-white/80 dark:bg-slate-700/80"},[e("fluent-icon",{attrs:{icon:"cloud-backup",size:"40"}}),t._v(" "),e("h4",{staticClass:"page-sub-title text-slate-600 dark:text-slate-200"},[t._v("\n        "+t._s(t.$t("CONVERSATION.REPLYBOX.DRAG_DROP"))+"\n      ")])],1)]):t._e()],1)}),[],!1,null,"397e44b5",null));function Q(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}var Z={components:{ConversationForm:X.exports},props:{show:{type:Boolean,default:!1},contact:{type:Object,default:function(){return{}}}},watch:{"contact.id":function(t){this.$store.dispatch("contacts/fetchContactableInbox",t)}},mounted:function(){var t=this.contact.id;this.$store.dispatch("contacts/fetchContactableInbox",t)},methods:{onCancel:function(){this.$emit("cancel")},onSuccess:function(){this.$emit("cancel")},onSubmit:function(t,e){var n,i=this;return(n=regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.$store.dispatch("contactConversations/create",{params:t,isFromWhatsApp:e});case 2:return s=n.sent,n.abrupt("return",s);case 4:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(i,s){var a=n.apply(t,e);function r(t){Q(a,i,s,r,o,"next",t)}function o(t){Q(a,i,s,r,o,"throw",t)}r(void 0)}))})()}}},J=Z,tt=Object(d.a)(J,(function(){var t=this,e=t._self._c;return e("woot-modal",{attrs:{show:t.show,"on-close":t.onCancel},on:{"update:show":function(e){t.show=e}}},[e("div",{staticClass:"h-auto overflow-auto flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":t.$t("NEW_CONVERSATION.TITLE"),"header-content":t.$t("NEW_CONVERSATION.DESC")}}),t._v(" "),e("conversation-form",{attrs:{contact:t.contact,"on-submit":t.onSubmit},on:{success:t.onSuccess,cancel:t.onCancel}})],1)])}),[],!1,null,null,null).exports,et=(n(49),n(268),{props:{primaryContactName:{type:String,default:""},parentContactName:{type:String,default:""}}}),nt=Object(d.a)(et,(function(){var t=this,e=t._self._c;return t.parentContactName?e("div",{staticClass:"my-4 relative p-2.5 border rounded-[4px] text-slate-800 dark:text-slate-100 border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800"},[e("h5",{staticClass:"text-base font-medium text-slate-900 dark:text-white"},[t._v("\n    "+t._s(t.$t("MERGE_CONTACTS.SUMMARY.TITLE"))+"\n  ")]),t._v(" "),e("ul",{staticClass:"ml-0 list-none"},[e("li",[e("span",{staticClass:"inline-block mr-1"},[t._v("\u274c")]),t._v(" "),e("span",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.$t("MERGE_CONTACTS.SUMMARY.DELETE_WARNING",{primaryContactName:t.primaryContactName}),expression:"\n          $t('MERGE_CONTACTS.SUMMARY.DELETE_WARNING', {\n            primaryContactName,\n          })\n        "}]})]),t._v(" "),e("li",[e("span",{staticClass:"inline-block mr-1"},[t._v("\u2705")]),t._v(" "),e("span",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.$t("MERGE_CONTACTS.SUMMARY.ATTRIBUTE_WARNING",{primaryContactName:t.primaryContactName,parentContactName:t.parentContactName}),expression:"\n          $t('MERGE_CONTACTS.SUMMARY.ATTRIBUTE_WARNING', {\n            primaryContactName,\n            parentContactName,\n          })\n        "}]})])])]):t._e()}),[],!1,null,null,null).exports,it={components:{Thumbnail:h.a},props:{name:{type:String,default:""},thumbnail:{type:String,default:""},email:{type:String,default:""},phoneNumber:{type:String,default:""},identifier:{type:[String,Number],required:!0}}},st=(n(2776),{components:{MergeContactSummary:nt,ContactDropdownItem:Object(d.a)(it,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"option-item--user"},[e("thumbnail",{attrs:{src:t.thumbnail,size:"28px",username:t.name}}),t._v(" "),e("div",{staticClass:"option__user-data"},[e("h5",{staticClass:"option__title"},[t._v("\n      "+t._s(t.name)+"\n      "),t.identifier?e("span",{staticClass:"user-identifier"},[t._v("\n        (ID: "+t._s(t.identifier)+")\n      ")]):t._e()]),t._v(" "),e("p",{staticClass:"option__body"},[t.email?e("span",{staticClass:"email-icon-wrap"},[e("fluent-icon",{staticClass:"merge-contact--icon",attrs:{icon:"mail",size:"12"}}),t._v("\n        "+t._s(t.email)+"\n      ")],1):t._e(),t._v(" "),t.phoneNumber?e("span",{staticClass:"phone-icon-wrap"},[e("fluent-icon",{staticClass:"merge-contact--icon",attrs:{icon:"call",size:"12"}}),t._v("\n        "+t._s(t.phoneNumber)+"\n      ")],1):t._e(),t._v(" "),t.phoneNumber||t.email?t._e():e("span",[t._v(t._s("---"))])])])],1)}),[],!1,null,"5521a686",null).exports},mixins:[a.a],props:{primaryContact:{type:Object,required:!0},isSearching:{type:Boolean,default:!1},isMerging:{type:Boolean,default:!1},searchResults:{type:Array,default:function(){return[]}}},validations:{primaryContact:{required:$.required},parentContact:{required:$.required}},data:function(){return{parentContact:void 0}},computed:{parentContactName:function(){return this.parentContact?this.parentContact.name:""}},methods:{searchChange:function(t){this.$emit("search",t)},onSubmit:function(){this.$v.$touch(),this.$v.$invalid||this.$emit("submit",this.parentContact.id)},onCancel:function(){this.$emit("cancel")}}}),at=(n(2777),Object(d.a)(st,(function(){var t=this,e=t._self._c;return e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",[e("div",[e("div",{staticClass:"mt-1 multiselect-wrap--medium",class:{error:t.$v.parentContact.$error}},[e("label",{staticClass:"multiselect__label"},[t._v("\n          "+t._s(t.$t("MERGE_CONTACTS.PARENT.TITLE"))+"\n          "),e("woot-label",{staticClass:"ml-2",attrs:{title:t.$t("MERGE_CONTACTS.PARENT.HELP_LABEL"),"color-scheme":"success",small:""}})],1),t._v(" "),e("multiselect",{attrs:{options:t.searchResults,label:"name","track-by":"id","internal-search":!1,"clear-on-select":!1,"show-labels":!1,placeholder:t.$t("MERGE_CONTACTS.PARENT.PLACEHOLDER"),"allow-empty":!0,loading:t.isSearching,"max-height":150,"open-direction":"top"},on:{"search-change":t.searchChange},scopedSlots:t._u([{key:"singleLabel",fn:function(t){return[e("contact-dropdown-item",{attrs:{thumbnail:t.option.thumbnail,identifier:t.option.id,name:t.option.name,email:t.option.email,"phone-number":t.option.phone_number}})]}},{key:"option",fn:function(t){return[e("contact-dropdown-item",{attrs:{thumbnail:t.option.thumbnail,identifier:t.option.id,name:t.option.name,email:t.option.email,"phone-number":t.option.phone_number}})]}}]),model:{value:t.parentContact,callback:function(e){t.parentContact=e},expression:"parentContact"}},[t._v(" "),t._v(" "),e("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v("\n            "+t._s(t.$t("AGENT_MGMT.SEARCH.NO_RESULTS"))+"\n          ")])]),t._v(" "),t.$v.parentContact.$error?e("span",{staticClass:"message"},[t._v("\n          "+t._s(t.$t("MERGE_CONTACTS.FORM.CHILD_CONTACT.ERROR"))+"\n        ")]):t._e()],1)]),t._v(" "),e("div",{staticClass:"multiselect-wrap--medium flex"},[e("div",{staticClass:"w-8 relative text-base text-slate-100 dark:text-slate-600 after:content-[''] after:h-12 after:w-0 after:left-4 after:absolute after:border-l after:border-solid after:border-slate-100 after:dark:border-slate-600 before:content-[''] before:h-0 before:w-4 before:left-4 before:top-12 before:absolute before:border-b before:border-solid before:border-slate-100 before:dark:border-slate-600"},[e("fluent-icon",{staticClass:"absolute -top-1 left-2",attrs:{icon:"arrow-up",size:"17"}})],1),t._v(" "),e("div",{staticClass:"flex flex-col w-full"},[e("label",{staticClass:"multiselect__label"},[t._v("\n          "+t._s(t.$t("MERGE_CONTACTS.PRIMARY.TITLE"))+"\n          "),e("woot-label",{staticClass:"ml-2",attrs:{title:t.$t("MERGE_CONTACTS.PRIMARY.HELP_LABEL"),"color-scheme":"alert",small:""}})],1),t._v(" "),e("multiselect",{attrs:{value:t.primaryContact,disabled:"",options:[],"show-labels":!1,label:"name","track-by":"id"},scopedSlots:t._u([{key:"singleLabel",fn:function(t){return[e("contact-dropdown-item",{attrs:{thumbnail:t.option.thumbnail,name:t.option.name,identifier:t.option.id,email:t.option.email,"phone-number":t.option.phoneNumber}})]}}])})],1)])]),t._v(" "),e("merge-contact-summary",{attrs:{"primary-contact-name":t.primaryContact.name,"parent-contact-name":t.parentContactName}}),t._v(" "),e("div",{staticClass:"mt-6 flex justify-end"},[e("woot-button",{attrs:{variant:"clear"},on:{click:function(e){return e.preventDefault(),t.onCancel.apply(null,arguments)}}},[t._v("\n      "+t._s(t.$t("MERGE_CONTACTS.FORM.CANCEL"))+"\n    ")]),t._v(" "),e("woot-button",{attrs:{type:"submit","is-loading":t.isMerging}},[t._v("\n      "+t._s(t.$t("MERGE_CONTACTS.FORM.SUBMIT"))+"\n    ")])],1)],1)}),[],!1,null,"05b2da1d",null)),rt=at.exports,ot=n(148),ct=n(87);function lt(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function ut(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){lt(a,i,s,r,o,"next",t)}function o(t){lt(a,i,s,r,o,"throw",t)}r(void 0)}))}}function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ht={components:{MergeContact:rt},mixins:[a.a],props:{primaryContact:{type:Object,required:!0},show:{type:Boolean,default:!1}},data:function(){return{isSearching:!1,searchResults:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(v.mapGetters)({uiFlags:"contacts/getUIFlags"})),methods:{onClose:function(){this.$emit("close")},onContactSearch:function(t){var e=this;return ut(regeneratorRuntime.mark((function n(){var i,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isSearching=!0,e.searchResults=[],n.prev=2,n.next=5,ot.a.search(t);case 5:i=n.sent,s=i.data.payload,e.searchResults=s.filter((function(t){return t.id!==e.primaryContact.id})),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),e.showAlert(e.$t("MERGE_CONTACTS.SEARCH.ERROR_MESSAGE"));case 13:return n.prev=13,e.isSearching=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[2,10,13,16]])})))()},onMergeContacts:function(t){var e=this;return ut(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$track(ct.c.MERGED_CONTACTS),n.prev=1,n.next=4,e.$store.dispatch("contacts/merge",{childId:e.primaryContact.id,parentId:t});case 4:e.showAlert(e.$t("MERGE_CONTACTS.FORM.SUCCESS_MESSAGE")),e.onClose(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),e.showAlert(e.$t("MERGE_CONTACTS.FORM.ERROR_MESSAGE"));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()}}},ft=ht,mt=Object(d.a)(ft,(function(){var t=this,e=t._self._c;return e("woot-modal",{attrs:{show:t.show,"on-close":t.onClose},on:{"update:show":function(e){t.show=e}}},[e("woot-modal-header",{attrs:{"header-title":t.$t("MERGE_CONTACTS.TITLE"),"header-content":t.$t("MERGE_CONTACTS.DESCRIPTION")}}),t._v(" "),e("merge-contact",{attrs:{"primary-contact":t.primaryContact,"is-searching":t.isSearching,"is-merging":t.uiFlags.isMerging,"search-results":t.searchResults},on:{search:t.onContactSearch,cancel:t.onClose,submit:t.onMergeContacts}})],1)}),[],!1,null,"0b10d3b4",null).exports,vt=n(221),bt=n(2732),gt=n(109),_t=n(1799);function yt(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function At(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tt={components:{ContactInfoRow:p,EditContact:O,Thumbnail:h.a,SocialIcons:m,NewConversation:tt,ContactMergeModal:mt},mixins:[a.a,vt.a,i.mixin,s.a],props:{contact:{type:Object,default:function(){return{}}},channelType:{type:String,default:""},showAvatar:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},closeIconName:{type:String,default:"chevron-right"}},data:function(){return{showEditModal:!1,showConversationModal:!1,showMergeModal:!1,showDeleteModal:!1}},computed:Ot(Ot({},Object(v.mapGetters)({uiFlags:"contacts/getUIFlags"})),{},{contactProfileLink:function(){return"/app/accounts/".concat(this.$route.params.accountId,"/contacts/").concat(this.contact.id)},additionalAttributes:function(){return this.contact.additional_attributes||{}},location:function(){var t=this.additionalAttributes,e=t.country,n=void 0===e?"":e,i=t.city,s=void 0===i?"":i,a=t.country_code,r=[s,n].filter((function(t){return!!t})).join(", ");return r?this.findCountryFlag(a,r):""},socialProfiles:function(){var t=this.additionalAttributes,e=t.social_profiles;return Ot({twitter:t.screen_name},e||{})},confirmDeleteMessage:function(){return" ".concat(this.contact.name,"?")}}),methods:{toggleMergeModal:function(){this.showMergeModal=!this.showMergeModal},toggleEditModal:function(){this.showEditModal=!this.showEditModal},onPanelToggle:function(){this.$emit("toggle-panel")},toggleConversationModal:function(){this.showConversationModal=!this.showConversationModal,bus.$emit(gt.a.NEW_CONVERSATION_MODAL,this.showConversationModal)},toggleDeleteModal:function(){this.showDeleteModal=!this.showDeleteModal},confirmDeletion:function(){this.deleteContact(this.contact),this.closeDelete()},closeDelete:function(){this.showDeleteModal=!1,this.showConversationModal=!1,this.showEditModal=!1},findCountryFlag:function(t,e){try{var n=t?Object(bt.a)(t):"\ud83c\udf0e";return"".concat(e," ").concat(n)}catch(i){return""}},deleteContact:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.id,e.prev=1,e.next=4,n.$store.dispatch("contacts/delete",i);case 4:n.$emit("panel-close"),n.showAlert(n.$t("DELETE_CONTACT.API.SUCCESS_MESSAGE")),Object(_t.b)(n.$route.name)?n.$router.push({name:Object(_t.a)(n.$route.name)}):"contacts_dashboard"!==n.$route.name&&n.$router.push({name:"contacts_dashboard"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n.showAlert(e.t0.message?e.t0.message:n.$t("DELETE_CONTACT.API.ERROR_MESSAGE"));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(i,s){var a=e.apply(t,n);function r(t){yt(a,i,s,r,o,"next",t)}function o(t){yt(a,i,s,r,o,"throw",t)}r(void 0)}))})()},openMergeModal:function(){this.toggleMergeModal()}}},Et=Tt,wt=Object(d.a)(Et,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative items-center p-4 bg-white dark:bg-slate-900"},[e("div",{staticClass:"text-left rtl:text-right"},[e("div",{staticClass:"flex justify-between flex-row"},[t.showAvatar?e("thumbnail",{attrs:{src:t.contact.thumbnail,size:"56px",username:t.contact.name,status:t.contact.availability_status}}):t._e(),t._v(" "),t.showCloseButton?e("woot-button",{staticClass:"clear secondary rtl:rotate-180",attrs:{icon:t.closeIconName},on:{click:t.onPanelToggle}}):t._e()],1),t._v(" "),e("div",{staticClass:"mt-2 w-full"},[t.showAvatar?e("div",{staticClass:"flex items-start mb-2 gap-1.5"},[e("h3",{staticClass:"text-base text-slate-800 dark:text-slate-100 capitalize whitespace-normal my-0"},[t._v("\n          "+t._s(t.contact.name)+"\n        ")]),t._v(" "),e("div",{staticClass:"flex flex-row items-center gap-1"},[t.contact.created_at?e("fluent-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:`${t.$t("CONTACT_PANEL.CREATED_AT_LABEL")} ${t.dynamicTime(t.contact.created_at)}`,expression:"\n              `${$t('CONTACT_PANEL.CREATED_AT_LABEL')} ${dynamicTime(\n                contact.created_at\n              )}`\n            ",modifiers:{left:!0}}],staticClass:"mt-0.5",attrs:{icon:"info",size:"14"}}):t._e(),t._v(" "),e("a",{staticClass:"fs-default",attrs:{href:t.contactProfileLink,target:"_blank",rel:"noopener nofollow noreferrer"}},[e("woot-button",{attrs:{size:"tiny",icon:"open",variant:"clear","color-scheme":"secondary"}})],1)],1)]):t._e(),t._v(" "),t.additionalAttributes.description?e("p",{staticClass:"break-words"},[t._v("\n        "+t._s(t.additionalAttributes.description)+"\n      ")]):t._e(),t._v(" "),e("div",{staticClass:"mb-3"},[e("contact-info-row",{attrs:{href:t.contact.email?`mailto:${t.contact.email}`:"",value:t.contact.email,icon:"mail",emoji:"\u2709\ufe0f",title:t.$t("CONTACT_PANEL.EMAIL_ADDRESS"),"show-copy":""}}),t._v(" "),e("contact-info-row",{attrs:{href:t.contact.phone_number?`tel:${t.contact.phone_number}`:"",value:t.contact.phone_number,icon:"call",emoji:"\ud83d\udcde",title:t.$t("CONTACT_PANEL.PHONE_NUMBER"),"show-copy":""}}),t._v(" "),t.contact.identifier?e("contact-info-row",{attrs:{value:t.contact.identifier,icon:"contact-identify",emoji:"\ud83e\udeaa",title:t.$t("CONTACT_PANEL.IDENTIFIER")}}):t._e(),t._v(" "),e("contact-info-row",{attrs:{value:t.additionalAttributes.company_name,icon:"building-bank",emoji:"\ud83c\udfe2",title:t.$t("CONTACT_PANEL.COMPANY")}}),t._v(" "),t.location||t.additionalAttributes.location?e("contact-info-row",{attrs:{value:t.location||t.additionalAttributes.location,icon:"map",emoji:"\ud83c\udf0d",title:t.$t("CONTACT_PANEL.LOCATION")}}):t._e(),t._v(" "),e("social-icons",{attrs:{"social-profiles":t.socialProfiles}})],1)]),t._v(" "),e("div",{staticClass:"flex items-center w-full mt-2 gap-2"},[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("CONTACT_PANEL.NEW_MESSAGE"),expression:"$t('CONTACT_PANEL.NEW_MESSAGE')"}],attrs:{title:"$t('CONTACT_PANEL.NEW_MESSAGE')",icon:"chat",size:"small"},on:{click:t.toggleConversationModal}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("EDIT_CONTACT.BUTTON_LABEL"),expression:"$t('EDIT_CONTACT.BUTTON_LABEL')"}],attrs:{title:"$t('EDIT_CONTACT.BUTTON_LABEL')",icon:"edit",variant:"smooth",size:"small"},on:{click:t.toggleEditModal}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("CONTACT_PANEL.MERGE_CONTACT"),expression:"$t('CONTACT_PANEL.MERGE_CONTACT')"}],attrs:{title:"$t('CONTACT_PANEL.MERGE_CONTACT')",icon:"merge",variant:"smooth",size:"small","color-scheme":"secondary",disabled:t.uiFlags.isMerging},on:{click:t.openMergeModal}}),t._v(" "),t.isAdmin?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("DELETE_CONTACT.BUTTON_LABEL"),expression:"$t('DELETE_CONTACT.BUTTON_LABEL')"}],attrs:{title:"$t('DELETE_CONTACT.BUTTON_LABEL')",icon:"delete",variant:"smooth",size:"small","color-scheme":"alert",disabled:t.uiFlags.isDeleting},on:{click:t.toggleDeleteModal}}):t._e()],1),t._v(" "),t.showEditModal?e("edit-contact",{attrs:{show:t.showEditModal,contact:t.contact},on:{cancel:t.toggleEditModal}}):t._e(),t._v(" "),t.contact.id?e("new-conversation",{attrs:{show:t.showConversationModal,contact:t.contact},on:{cancel:t.toggleConversationModal}}):t._e(),t._v(" "),t.showMergeModal?e("contact-merge-modal",{attrs:{"primary-contact":t.contact,show:t.showMergeModal},on:{close:t.toggleMergeModal}}):t._e()],1),t._v(" "),t.showDeleteModal?e("woot-delete-modal",{attrs:{show:t.showDeleteModal,"on-close":t.closeDelete,"on-confirm":t.confirmDeletion,title:t.$t("DELETE_CONTACT.CONFIRM.TITLE"),message:t.$t("DELETE_CONTACT.CONFIRM.MESSAGE"),"message-value":t.confirmDeleteMessage,"confirm-text":t.$t("DELETE_CONTACT.CONFIRM.YES"),"reject-text":t.$t("DELETE_CONTACT.CONFIRM.NO")},on:{"update:show":function(e){t.showDeleteModal=e}}}):t._e()],1)}),[],!1,null,null,null);e.a=wt.exports},2799:function(t,e,n){"use strict";n(49),n(268),n(68),n(97);var i={props:{title:{type:String,default:""},color:{type:String,default:""},selected:{type:Boolean,default:!1}},methods:{onClick:function(){this.$emit("click",this.title)}}},s=(n(2764),n(5)),a=Object(s.a)(i,(function(){var t=this,e=t._self._c;return e("woot-dropdown-item",[e("div",{staticClass:"item-wrap"},[e("woot-button",{attrs:{variant:"clear"},on:{click:t.onClick}},[e("div",{staticClass:"button-wrap"},[e("div",{staticClass:"name-label-wrap"},[t.color?e("div",{staticClass:"label-color--display",style:{backgroundColor:t.color}}):t._e(),t._v(" "),e("span",{staticClass:"label-text",attrs:{title:t.title}},[t._v(t._s(t.title))])]),t._v(" "),e("div",[t.selected?e("i",{staticClass:"icon ion-checkmark-round"}):t._e()])])])],1)])}),[],!1,null,"e83c4bc0",null).exports,r=n(1944),o=n(2670),c=n(2765),l=(n(65),n(1775),/[^a-zA-Z0-9_-]/g),u=/\s+/g,d={components:{LabelDropdownItem:a,AddLabelModal:o.a,Hotkey:r.a},props:{accountLabels:{type:Array,default:function(){return[]}},selectedLabels:{type:Array,default:function(){return[]}},allowCreation:{type:Boolean,default:!1}},data:function(){return{search:"",createModalVisible:!1}},computed:{createLabelPlaceholder:function(){var t=this.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.CREATE_LABEL");return this.search?"".concat(t,":"):t},filteredActiveLabels:function(){return this.search?Object(c.a)(this.accountLabels,this.search,["title"],{threshold:.9}):this.accountLabels},noResult:function(){return 0===this.filteredActiveLabels.length},hasExactMatchInResults:function(){var t=this;return this.filteredActiveLabels.some((function(e){return e.title===t.search}))},shouldShowCreate:function(){return this.allowCreation&&this.filteredActiveLabels.length<3},parsedSearch:function(){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t?t.trim().toLowerCase().replace(u,"-").replace(l,""):""}(this.search)}},mounted:function(){this.focusInput()},methods:{focusInput:function(){this.$refs.searchbar.focus()},updateLabels:function(t){this.$emit("update",t)},onAdd:function(t){this.$emit("add",t)},onRemove:function(t){this.$emit("remove",t)},onAddRemove:function(t){this.selectedLabels.includes(t.title)?this.onRemove(t.title):this.onAdd(t)},showCreateModal:function(){this.createModalVisible=!0},hideCreateModal:function(){this.createModalVisible=!1}}},p=d,h=(n(2766),Object(s.a)(p,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col w-full max-h-[12.5rem]"},[e("div",{staticClass:"flex items-center justify-center mb-1"},[e("h4",{staticClass:"text-sm text-slate-800 dark:text-slate-100 m-0 overflow-hidden whitespace-nowrap text-ellipsis flex-grow"},[t._v("\n      "+t._s(t.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.TITLE"))+"\n    ")]),t._v(" "),e("hotkey",{attrs:{"custom-class":"text-slate-800 dark:text-slate-100 bg-slate-50 dark:bg-slate-600 text-xxs border border-solid border-slate-75 dark:border-slate-600"}},[t._v("\n      L\n    ")])],1),t._v(" "),e("div",{staticClass:"mb-2 flex-shrink-0 flex-grow-0 flex-auto max-h-8"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],ref:"searchbar",staticClass:"search-input",attrs:{type:"text",autofocus:"true",placeholder:t.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.PLACEHOLDER")},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"flex justify-start items-start flex-grow flex-shrink flex-auto overflow-auto"},[e("div",{staticClass:"w-full"},[e("woot-dropdown-menu",t._l(t.filteredActiveLabels,(function(n){return e("label-dropdown-item",{key:n.title,attrs:{title:n.title,color:n.color,selected:t.selectedLabels.includes(n.title)},on:{click:function(e){return t.onAddRemove(n)}}})})),1),t._v(" "),t.noResult?e("div",{staticClass:"flex justify-center py-4 px-2.5 font-medium text-xs text-slate-700 dark:text-slate-200"},[t._v("\n        "+t._s(t.$t("CONTACT_PANEL.LABELS.LABEL_SELECT.NO_RESULT"))+"\n      ")]):t._e(),t._v(" "),t.allowCreation&&t.shouldShowCreate?e("div",{staticClass:"flex pt-1 border-t border-solid border-slate-100 dark:border-slate-900"},[e("woot-button",{staticClass:"button-new-label",attrs:{size:"small",variant:"clear","color-scheme":"secondary",icon:"add","is-expanded":"","is-disabled":t.hasExactMatchInResults},on:{click:t.showCreateModal}},[t._v("\n          "+t._s(t.createLabelPlaceholder)+"\n          "+t._s(t.parsedSearch)+"\n        ")]),t._v(" "),e("woot-modal",{attrs:{show:t.createModalVisible,"on-close":t.hideCreateModal},on:{"update:show":function(e){t.createModalVisible=e}}},[e("add-label-modal",{attrs:{"prefill-title":t.parsedSearch},on:{close:t.hideCreateModal}})],1)],1):t._e()],1)])])}),[],!1,null,"65d69bf0",null));e.a=h.exports},2804:function(t,e,n){"use strict";var i=n(5),s={name:"IframeLoader",components:{ArticleSkeletonLoader:Object(i.a)({},(function(){this._self._c;return this._m(0)}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-4 space-y-6 bg-white dark:bg-slate-900"},[e("div",{staticClass:"space-y-2 animate-loader-pulse"},[e("div",{staticClass:"h-6 bg-slate-100 dark:bg-slate-700 rounded w-1/5"}),t._v(" "),e("div",{staticClass:"h-10 bg-slate-100 dark:bg-slate-700 rounded w-3/5"})]),t._v(" "),e("div",{staticClass:"space-y-2 animate-loader-pulse"},[e("div",{staticClass:"h-5 bg-slate-100 dark:bg-slate-700 rounded"}),t._v(" "),e("div",{staticClass:"h-5 bg-slate-100 dark:bg-slate-700 rounded"}),t._v(" "),e("div",{staticClass:"h-5 bg-slate-100 dark:bg-slate-700 rounded"}),t._v(" "),e("div",{staticClass:"h-5 bg-slate-100 dark:bg-slate-700 rounded w-4/5"})]),t._v(" "),e("div",{staticClass:"space-y-2 animate-loader-pulse"},[e("div",{staticClass:"h-5 bg-slate-100 dark:bg-slate-700 rounded"}),t._v(" "),e("div",{staticClass:"h-5 bg-slate-100 dark:bg-slate-700 rounded"}),t._v(" "),e("div",{staticClass:"h-5 bg-slate-100 dark:bg-slate-700 rounded w-3/5"}),t._v(" "),e("div",{staticClass:"h-5 bg-slate-100 dark:bg-slate-700 rounded"})]),t._v(" "),e("div",{staticClass:"space-y-2 animate-loader-pulse"},[e("div",{staticClass:"h-5 bg-slate-100 dark:bg-slate-700 rounded"}),t._v(" "),e("div",{staticClass:"h-5 bg-slate-100 dark:bg-slate-700 rounded"}),t._v(" "),e("div",{staticClass:"h-5 bg-slate-100 dark:bg-slate-700 rounded"}),t._v(" "),e("div",{staticClass:"h-5 bg-slate-100 dark:bg-slate-700 rounded w-3/5"})])])}],!1,null,null,null).exports},props:{url:{type:String,default:""}},data:function(){return{isLoading:!0,showEmptyState:!this.url}},methods:{handleIframeLoad:function(){this.isLoading=!1},handleIframeError:function(){this.isLoading=!1,this.showEmptyState=!0}}},a=Object(i.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative overflow-hidden pb-1/2 h-full"},[t.url?e("iframe",{staticClass:"absolute w-full h-full top-0 left-0",attrs:{src:t.url},on:{load:t.handleIframeLoad,error:t.handleIframeError}}):t._e(),t._v(" "),t.isLoading?e("article-skeleton-loader",{staticClass:"absolute w-full h-full top-0 left-0"}):t._e(),t._v(" "),t.showEmptyState?e("div",{staticClass:"absolute w-full h-full top-0 left-0 flex justify-center items-center"},[e("p",[t._v(t._s(t.$t("PORTAL.IFRAME_ERROR")))])]):t._e()],1)}),[],!1,null,null,null);e.a=a.exports},2807:function(t,e,n){"use strict";n(30),n(45),n(37),n(7),n(22);var i=n(57),s=n(79),a=n(87);function r(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}var o={mixins:[s.a],props:{filterType:{type:Number,default:0},customViewsQuery:{type:Object,default:function(){}},openLastSavedItem:{type:Function,default:function(){}}},data:function(){return{show:!0,name:""}},computed:{isButtonDisabled:function(){return this.$v.name.$invalid}},validations:{name:{required:i.required,minLength:Object(i.minLength)(1)}},methods:{onClose:function(){this.$emit("close")},saveCustomViews:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$v.$touch(),!e.$v.$invalid){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,e.$store.dispatch("customViews/create",{name:e.name,filter_type:e.filterType,query:e.customViewsQuery});case 6:e.alertMessage=0===e.filterType?e.$t("FILTER.CUSTOM_VIEWS.ADD.API_FOLDERS.SUCCESS_MESSAGE"):e.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.SUCCESS_MESSAGE"),e.onClose(),e.$track(a.c.SAVE_FILTER,{type:0===e.filterType?"folder":"segment"}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),n=null===t.t0||void 0===t.t0?void 0:t.t0.message,e.alertMessage=n||0===e.filterType?n:e.$t("FILTER.CUSTOM_VIEWS.ADD.API_SEGMENTS.ERROR_MESSAGE");case 15:return t.prev=15,e.showAlert(e.alertMessage),t.finish(15);case 18:e.openLastSavedItem();case 19:case"end":return t.stop()}}),t,null,[[3,11,15,18]])})),function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function o(t){r(a,i,s,o,c,"next",t)}function c(t){r(a,i,s,o,c,"throw",t)}o(void 0)}))})()}}},c=o,l=n(5),u=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("woot-modal",{attrs:{show:t.show,"on-close":t.onClose},on:{"update:show":function(e){t.show=e}}},[e("woot-modal-header",{attrs:{"header-title":t.$t("FILTER.CUSTOM_VIEWS.ADD.TITLE")}}),t._v(" "),e("form",{staticClass:"w-full",on:{submit:function(e){return e.preventDefault(),t.saveCustomViews.apply(null,arguments)}}},[e("div",{staticClass:"w-full"},[e("woot-input",{class:{error:t.$v.name.$error},attrs:{label:t.$t("FILTER.CUSTOM_VIEWS.ADD.LABEL"),type:"text",error:t.$v.name.$error?t.$t("FILTER.CUSTOM_VIEWS.ADD.ERROR_MESSAGE"):"",placeholder:t.$t("FILTER.CUSTOM_VIEWS.ADD.PLACEHOLDER")},on:{blur:t.$v.name.$touch},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("woot-button",{attrs:{disabled:t.isButtonDisabled}},[t._v("\n          "+t._s(t.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON"))+"\n        ")]),t._v(" "),e("woot-button",{attrs:{variant:"clear"},on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n          "+t._s(t.$t("FILTER.CUSTOM_VIEWS.ADD.CANCEL_BUTTON"))+"\n        ")])],1)],1)])],1)}),[],!1,null,null,null);e.a=u.exports},2808:function(t,e,n){"use strict";n(30),n(45),n(37),n(7),n(22);var i=n(79),s=n(87);function a(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}var r={mixins:[i.a],props:{showDeletePopup:{type:Boolean,default:!1},activeCustomView:{type:Object,default:function(){}},customViewsId:{type:[String,Number],default:0},activeFilterType:{type:Number,default:0},openLastItemAfterDelete:{type:Function,default:function(){}}},computed:{activeCustomViews:function(){return 0===this.activeFilterType?"conversation":1===this.activeFilterType?"contact":""},deleteMessage:function(){return" ".concat(this.activeCustomView&&this.activeCustomView.name,"?")},deleteConfirmText:function(){return"".concat(this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.YES"))},deleteRejectText:function(){return"".concat(this.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.NO"))},isFolderSection:function(){return 0===this.activeFilterType&&"home"!==this.$route.name},isSegmentSection:function(){return 1===this.activeFilterType&&"contacts_dashboard"!==this.$route.name}},methods:{deleteSavedCustomViews:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,i,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=Number(e.customViewsId),i=e.activeCustomViews,t.next=5,e.$store.dispatch("customViews/delete",{id:n,filterType:i});case 5:e.closeDeletePopup(),e.showAlert(0===e.activeFilterType?e.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):e.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE")),e.$track(s.c.DELETE_FILTER,{type:0===e.filterType?"folder":"segment"}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),r=null!==t.t0&&void 0!==t.t0&&null!==(a=t.t0.response)&&void 0!==a&&a.message||0===e.activeFilterType?e.$t("FILTER.CUSTOM_VIEWS.DELETE.API_FOLDERS.SUCCESS_MESSAGE"):e.$t("FILTER.CUSTOM_VIEWS.DELETE.API_SEGMENTS.SUCCESS_MESSAGE"),e.showAlert(r);case 14:e.openLastItemAfterDelete();case 15:case"end":return t.stop()}}),t,null,[[0,10]])})),function(){var e=this,n=arguments;return new Promise((function(i,s){var r=t.apply(e,n);function o(t){a(r,i,s,o,c,"next",t)}function c(t){a(r,i,s,o,c,"throw",t)}o(void 0)}))})()},closeDeletePopup:function(){this.$emit("close")}}},o=r,c=n(5),l=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",[t.showDeletePopup?e("woot-delete-modal",{attrs:{show:t.showDeletePopup,"on-close":t.closeDeletePopup,"on-confirm":t.deleteSavedCustomViews,title:t.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.TITLE"),message:t.$t("FILTER.CUSTOM_VIEWS.DELETE.MODAL.CONFIRM.MESSAGE"),"message-value":t.deleteMessage,"confirm-text":t.deleteConfirmText,"reject-text":t.deleteRejectText},on:{"update:show":function(e){t.showDeletePopup=e}}}):t._e()],1)}),[],!1,null,null,null);e.a=l.exports},2813:function(t,e,n){"use strict";var i=n(57),s=n(1923),a=n(301),r=n(1916),o=n(79),c={components:{WootSubmitButton:s.a,Modal:a.a,WootMessageEditor:r.a},mixins:[o.a],props:{responseContent:{type:String,default:""},onClose:{type:Function,default:function(){}}},data:function(){return{shortCode:"",content:this.responseContent||"",addCanned:{showLoading:!1,message:""},show:!0}},validations:{shortCode:{required:i.required,minLength:Object(i.minLength)(2)},content:{required:i.required}},methods:{resetForm:function(){this.shortCode="",this.content="",this.$v.shortCode.$reset(),this.$v.content.$reset()},addCannedResponse:function(){var t=this;this.addCanned.showLoading=!0,this.$store.dispatch("createCannedResponse",{short_code:this.shortCode,content:this.content}).then((function(){t.addCanned.showLoading=!1,t.showAlert(t.$t("CANNED_MGMT.ADD.API.SUCCESS_MESSAGE")),t.resetForm(),t.onClose()})).catch((function(e){t.addCanned.showLoading=!1;var n=(null===e||void 0===e?void 0:e.message)||t.$t("CANNED_MGMT.ADD.API.ERROR_MESSAGE");t.showAlert(n)}))}}},l=(n(2752),n(5)),u=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("modal",{attrs:{show:t.show,"on-close":t.onClose},on:{"update:show":function(e){t.show=e}}},[e("div",{staticClass:"h-auto overflow-auto flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":t.$t("CANNED_MGMT.ADD.TITLE"),"header-content":t.$t("CANNED_MGMT.ADD.DESC")}}),t._v(" "),e("form",{staticClass:"flex flex-col w-full",on:{submit:function(e){return e.preventDefault(),t.addCannedResponse()}}},[e("div",{staticClass:"w-full"},[e("label",{class:{error:t.$v.shortCode.$error}},[t._v("\n          "+t._s(t.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.LABEL"))+"\n          "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.shortCode,expression:"shortCode",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("CANNED_MGMT.ADD.FORM.SHORT_CODE.PLACEHOLDER")},domProps:{value:t.shortCode},on:{input:[function(e){e.target.composing||(t.shortCode=e.target.value.trim())},t.$v.shortCode.$touch],blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),e("div",{staticClass:"w-full"},[e("label",{class:{error:t.$v.content.$error}},[t._v("\n          "+t._s(t.$t("CANNED_MGMT.ADD.FORM.CONTENT.LABEL"))+"\n        ")]),t._v(" "),e("div",{staticClass:"editor-wrap"},[e("woot-message-editor",{staticClass:"message-editor",class:{editor_warning:t.$v.content.$error},attrs:{"enable-variables":!0,"enable-canned-responses":!1,placeholder:t.$t("CANNED_MGMT.ADD.FORM.CONTENT.PLACEHOLDER")},on:{blur:t.$v.content.$touch},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)]),t._v(" "),e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("woot-submit-button",{attrs:{disabled:t.$v.content.$invalid||t.$v.shortCode.$invalid||t.addCanned.showLoading,"button-text":t.$t("CANNED_MGMT.ADD.FORM.SUBMIT"),loading:t.addCanned.showLoading}}),t._v(" "),e("button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n          "+t._s(t.$t("CANNED_MGMT.ADD.CANCEL_BUTTON_TEXT"))+"\n        ")])],1)])],1)])}),[],!1,null,"0458982c",null);e.a=u.exports},2816:function(t,e,n){"use strict";var i={components:{EmojiOrIcon:n(1927).a},props:{title:{type:String,required:!0},compact:{type:Boolean,default:!1},icon:{type:String,default:""},emoji:{type:String,default:""},isOpen:{type:Boolean,default:!0}}},s=n(5),a=Object(s.a)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"-mt-px text-sm"},[e("button",{staticClass:"flex items-center select-none w-full bg-slate-50 dark:bg-slate-800 border border-l-0 border-r-0 border-solid m-0 border-slate-100 dark:border-slate-700/50 cursor-grab justify-between py-2 px-4 drag-handle",on:{click:function(e){return t.$emit("click")}}},[e("div",{staticClass:"flex justify-between mb-0.5"},[e("emoji-or-icon",{staticClass:"inline-block w-5",attrs:{icon:t.icon,emoji:t.emoji}}),t._v(" "),e("h5",{staticClass:"text-slate-800 text-sm dark:text-slate-100 mb-0 py-0 pr-2 pl-0"},[t._v("\n        "+t._s(t.title)+"\n      ")])],1),t._v(" "),e("div",{staticClass:"flex flex-row"},[t._t("button"),t._v(" "),e("div",{staticClass:"flex justify-end w-3 text-woot-500"},[t.isOpen?e("fluent-icon",{attrs:{size:"24",icon:"subtract",type:"solid"}}):e("fluent-icon",{attrs:{size:"24",icon:"add",type:"solid"}})],1)],2)]),t._v(" "),t.isOpen?e("div",{staticClass:"bg-white dark:bg-slate-900",class:t.compact?"p-0":"p-4"},[t._t("default")],2):t._e()])}),[],!1,null,null,null);e.a=a.exports},2817:function(t,e,n){"use strict";n(45),n(8),n(10),n(4),n(11),n(9),n(12);var i=n(2734),s=n(25),a=n(170);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c={components:{ConversationCard:i.a,Spinner:a.a},props:{contactId:{type:[String,Number],required:!0},conversationId:{type:[String,Number],required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({conversations:function(){return this.$store.getters["contactConversations/getContactConversation"](this.contactId)},previousConversations:function(){var t=this;return this.conversations.filter((function(e){return e.id!==Number(t.conversationId)}))}},Object(s.mapGetters)({uiFlags:"contactConversations/getUIFlags"})),watch:{contactId:function(t,e){t&&t!==e&&this.$store.dispatch("contactConversations/get",t)}},mounted:function(){this.$store.dispatch("contactConversations/get",this.contactId)}},l=c,u=(n(2763),n(5)),d=Object(u.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"contact-conversation--panel"},[t.uiFlags.isFetching?e("spinner"):e("div",{staticClass:"contact-conversation__wrap"},[t.previousConversations.length?e("div",{staticClass:"contact-conversation--list"},t._l(t.previousConversations,(function(t){return e("conversation-card",{key:t.id,staticClass:"compact",attrs:{chat:t,"hide-inbox-name":!1,"hide-thumbnail":!0}})})),1):e("div",{staticClass:"no-label-message"},[e("span",[t._v("\n        "+t._s(t.$t("CONTACT_PANEL.CONVERSATIONS.NO_RECORDS_FOUND"))+"\n      ")])])])],1)}),[],!1,null,"bf2c0356",null);e.a=d.exports},2821:function(t,e,n){"use strict";var i={methods:{addLabel:function(){this.$emit("add")}}},s=(n(2767),n(5)),a=Object(s.a)(i,(function(){var t=this;return(0,t._self._c)("woot-button",{staticClass:"label--add",attrs:{variant:"smooth",icon:"add",size:"tiny"},on:{click:t.addLabel}},[t._v("\n  "+t._s(t.$t("CONTACT_PANEL.LABELS.CONVERSATION.ADD_BUTTON"))+"\n")])}),[],!1,null,"37ec2225",null);e.a=a.exports},2902:function(t,e,n){},2903:function(t,e,n){},2904:function(t,e,n){},2905:function(t,e,n){},2906:function(t,e,n){},2907:function(t,e,n){},2908:function(t,e,n){},2909:function(t,e,n){},2910:function(t,e,n){},2911:function(t,e,n){},2912:function(t,e,n){},2913:function(t,e,n){},2914:function(t,e,n){},2915:function(t,e,n){},2916:function(t,e,n){},2917:function(t,e,n){},2918:function(t,e,n){},2919:function(t,e,n){},2920:function(t,e,n){},2921:function(t,e,n){},2922:function(t,e,n){},2923:function(t,e,n){},2924:function(t,e,n){},2925:function(t,e,n){},2926:function(t,e,n){},2927:function(t,e,n){},2928:function(t,e,n){},2929:function(t,e,n){},2930:function(t,e,n){},2931:function(t,e,n){},2940:function(t,e,n){},2941:function(t,e,n){},2942:function(t,e,n){},2943:function(t,e,n){},2944:function(t,e,n){},2945:function(t,e,n){},2946:function(t,e,n){},2947:function(t,e,n){},2948:function(t,e,n){},2949:function(t,e,n){},2950:function(t,e,n){},2951:function(t,e,n){},2952:function(t,e,n){},2953:function(t,e,n){},2954:function(t,e,n){},2955:function(t,e,n){},2956:function(t,e,n){},2957:function(t,e,n){},2958:function(t,e,n){},3170:function(t,e,n){"use strict";n(2902)},3171:function(t,e,n){"use strict";n(2903)},3172:function(t,e,n){"use strict";n(2904)},3173:function(t,e,n){"use strict";n(2905)},3174:function(t,e,n){"use strict";n(2906)},3175:function(t,e,n){"use strict";n(2907)},3176:function(t,e,n){"use strict";n(2908)},3177:function(t,e,n){"use strict";n(2909)},3178:function(t,e,n){"use strict";n(2910)},3179:function(t,e,n){"use strict";n(2911)},3180:function(t,e,n){"use strict";n(2912)},3181:function(t,e,n){"use strict";n(2913)},3183:function(t,e,n){"use strict";n(2914)},3184:function(t,e,n){"use strict";n(2915)},3185:function(t,e,n){"use strict";n(2916)},3186:function(t,e,n){"use strict";n(2917)},3187:function(t,e,n){"use strict";n(2918)},3188:function(t,e,n){"use strict";n(2919)},3189:function(t,e,n){"use strict";n(2920)},3190:function(t,e,n){"use strict";n(2921)},3191:function(t,e,n){"use strict";n(2922)},3192:function(t,e,n){"use strict";n(2923)},3193:function(t,e,n){"use strict";n(2924)},3194:function(t,e,n){t.exports=n.p+"media/dashboard/assets/images/no-chat-dark-47cacd0972a4cba7686816851ffeeeb6.svg"},3195:function(t,e,n){t.exports=n.p+"media/dashboard/assets/images/no-chat-462edd1de1359c96d365ae4d4c1f3380.svg"},3196:function(t,e,n){t.exports=n.p+"media/dashboard/assets/images/typing-6027d21b24f45e3377a729a55158f948.gif"},3197:function(t,e,n){"use strict";n(2925)},3198:function(t,e,n){"use strict";n(2926)},3199:function(t,e,n){"use strict";var i=n(3334),s=n(2784),a=(n(3200),n(5)),r=Object(a.a)(s.default,i.a,i.b,!1,null,"0be456e6",null);e.default=r.exports},3200:function(t,e,n){"use strict";n(2927)},3201:function(t,e,n){"use strict";n(2928)},3202:function(t,e,n){"use strict";n(2929)},3203:function(t,e,n){"use strict";n(2930)},3204:function(t,e,n){"use strict";n(2931)},3207:function(t,e){},3241:function(t,e,n){"use strict";n(2940)},3242:function(t,e,n){"use strict";n(2941)},3243:function(t,e,n){"use strict";n(2942)},3244:function(t,e,n){"use strict";n(2943)},3245:function(t,e,n){"use strict";n(2944)},3246:function(t,e,n){"use strict";n(2945)},3247:function(t,e,n){"use strict";n(2946)},3248:function(t,e,n){"use strict";n(2947)},3249:function(t,e,n){"use strict";n(2948)},3253:function(t,e,n){"use strict";n(2949)},3254:function(t,e,n){"use strict";n(2950)},3255:function(t,e,n){"use strict";n(2951)},3256:function(t,e,n){"use strict";n(2952)},3257:function(t,e,n){"use strict";n(2953)},3258:function(t,e,n){"use strict";n(2954)},3259:function(t,e,n){"use strict";n(2955)},3260:function(t,e,n){"use strict";n(2956)},3261:function(t,e,n){"use strict";n(2957)},3262:function(t,e,n){"use strict";n(2958)},3334:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s}));var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"animation-container margin-top-1"},[e("div",{staticClass:"ai-typing--wrap"},[e("fluent-icon",{staticClass:"ai-typing--icon",attrs:{icon:"wand",size:"14"}}),t._v(" "),e("label",[t._v("\n      "+t._s(t.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.AI_WRITING"))+"\n    ")])],1),t._v(" "),e("span",{staticClass:"loader"}),t._v(" "),e("span",{staticClass:"loader"}),t._v(" "),e("span",{staticClass:"loader"})])},s=[]},3346:function(t,e,n){"use strict";n.r(e);n(45),n(8),n(10),n(4),n(11),n(9),n(12),n(31),n(7),n(33),n(16),n(20),n(21),n(64),n(37),n(69);var i=n(25),s=(n(30),n(83),n(141),n(68),n(97),n(2727),n(22),n(354),n(79)),a=n(57),r=n(2675),o=n(1924),c=n(1920),l=n(2687),u=[{attributeKey:"status",attributeI18nKey:"STATUS",inputType:"multi_select",dataType:"text",filterOperators:l.a,attributeModel:"standard"},{attributeKey:"assignee_id",attributeI18nKey:"ASSIGNEE_NAME",inputType:"search_select",dataType:"text",filterOperators:l.b,attributeModel:"standard"},{attributeKey:"inbox_id",attributeI18nKey:"INBOX_NAME",inputType:"search_select",dataType:"text",filterOperators:l.b,attributeModel:"standard"},{attributeKey:"team_id",attributeI18nKey:"TEAM_NAME",inputType:"search_select",dataType:"number",filterOperators:l.b,attributeModel:"standard"},{attributeKey:"display_id",attributeI18nKey:"CONVERSATION_IDENTIFIER",inputType:"plain_text",dataType:"Number",filterOperators:l.c,attributeModel:"standard"},{attributeKey:"campaign_id",attributeI18nKey:"CAMPAIGN_NAME",inputType:"search_select",dataType:"Number",filterOperators:l.b,attributeModel:"standard"},{attributeKey:"labels",attributeI18nKey:"LABELS",inputType:"multi_select",dataType:"text",filterOperators:l.b,attributeModel:"standard"},{attributeKey:"browser_language",attributeI18nKey:"BROWSER_LANGUAGE",inputType:"search_select",dataType:"text",filterOperators:l.a,attributeModel:"additional"},{attributeKey:"country_code",attributeI18nKey:"COUNTRY_NAME",inputType:"search_select",dataType:"text",filterOperators:l.a,attributeModel:"additional"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:l.c,attributeModel:"additional"},{attributeKey:"created_at",attributeI18nKey:"CREATED_AT",inputType:"date",dataType:"text",filterOperators:l.e,attributeModel:"standard"},{attributeKey:"last_activity_at",attributeI18nKey:"LAST_ACTIVITY",inputType:"date",dataType:"text",filterOperators:l.e,attributeModel:"standard"},{attributeKey:"referer",attributeI18nKey:"REFERER_LINK",inputType:"plain_text",dataType:"text",filterOperators:l.e,attributeModel:"standard"}],d=[{name:"Standard Filters",i18nGroup:"STANDARD_FILTERS",attributes:[{key:"status",i18nKey:"STATUS"},{key:"assignee_id",i18nKey:"ASSIGNEE_NAME"},{key:"inbox_id",i18nKey:"INBOX_NAME"},{key:"team_id",i18nKey:"TEAM_NAME"},{key:"display_id",i18nKey:"CONVERSATION_IDENTIFIER"},{key:"campaign_id",i18nKey:"CAMPAIGN_NAME"},{key:"labels",i18nKey:"LABELS"},{key:"created_at",i18nKey:"CREATED_AT"},{key:"last_activity_at",i18nKey:"LAST_ACTIVITY"}]},{name:"Additional Filters",i18nGroup:"ADDITIONAL_FILTERS",attributes:[{key:"browser_language",i18nKey:"BROWSER_LANGUAGE"},{key:"country_code",i18nKey:"COUNTRY_NAME"},{key:"referer",i18nKey:"REFERER_LINK"}]}],p=u,h=n(2728),f=n(87);function m(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y={components:{FilterInputBox:r.a},mixins:[s.a,h.a],props:{onClose:{type:Function,default:function(){}},initialFilterTypes:{type:Array,default:function(){return[]}},initialAppliedFilters:{type:Array,default:function(){return[]}},activeFolderName:{type:String,default:""},isFolderView:{type:Boolean,default:!1}},validations:{appliedFilters:{required:a.required,$each:{values:{ensureBetween0to999:function(t,e){return"days_before"!==e.filter_operator||parseInt(t,10)>0&&parseInt(t,10)<999},required:Object(a.requiredIf)((function(t){return!("is_present"===t.filter_operator||"is_not_present"===t.filter_operator)}))}}}},data:function(){return{show:!0,appliedFilters:this.initialAppliedFilters,activeFolderNewName:this.activeFolderName,filterTypes:this.initialFilterTypes,filterAttributeGroups:d,filterGroups:[],allCustomAttributes:[],attributeModel:"conversation_attribute",filtersFori18n:"FILTER"}},computed:g(g({},Object(i.mapGetters)({getAppliedConversationFilters:"getAppliedConversationFilters"})),{},{filterModalHeaderTitle:function(){return this.isFolderView?this.$t("FILTER.EDIT_CUSTOM_FILTER"):this.$t("FILTER.TITLE")},filterModalSubTitle:function(){return this.isFolderView?this.$t("FILTER.CUSTOM_VIEWS_SUBTITLE"):this.$t("FILTER.SUBTITLE")}}),mounted:function(){this.setFilterAttributes(),this.$store.dispatch("campaigns/get"),this.getAppliedConversationFilters.length?(this.appliedFilters=[],this.appliedFilters=m(this.getAppliedConversationFilters)):this.isFolderView||this.appliedFilters.push({attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and",attribute_model:"standard"})},methods:{getOperatorTypes:function(t){switch(t){case"list":case"number":case"link":case"checkbox":default:return l.a;case"text":return l.c;case"date":return l.d}},customAttributeInputType:function(t){switch(t){case"date":return"date";case"text":default:return"plain_text";case"list":case"checkbox":return"search_select"}},getAttributeModel:function(t){return this.filterTypes.find((function(e){return e.attributeKey===t})).attributeModel},getInputType:function(t,e){if(("created_at"===t||"last_activity_at"===t)&&"days_before"===e)return"plain_text";var n=this.filterTypes.find((function(e){return e.attributeKey===t}));return null===n||void 0===n?void 0:n.inputType},getOperators:function(t){var e=this.filterTypes.find((function(e){return e.attributeKey===t}));return null===e||void 0===e?void 0:e.filterOperators},getDropdownValues:function(t){var e=this.$t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS"),n=this.$store.getters["attributes/getAttributesByModel"](this.attributeModel);if(n.find((function(e){return e.attribute_key===t&&"checkbox"===e.attribute_display_type})))return[{id:!0,name:this.$t("FILTER.ATTRIBUTE_LABELS.TRUE")},{id:!1,name:this.$t("FILTER.ATTRIBUTE_LABELS.FALSE")}];if(n.find((function(e){return e.attribute_key===t&&"list"===e.attribute_display_type})))return n.find((function(e){return e.attribute_key===t})).attribute_values.map((function(t){return{id:t,name:t}}));switch(t){case"status":return m(Object.keys(e).map((function(t){return{id:t,name:e[t].TEXT}})));case"assignee_id":return this.$store.getters["agents/getAgents"];case"contact":return this.$store.getters["contacts/getContacts"];case"inbox_id":return this.$store.getters["inboxes/getInboxes"];case"team_id":return this.$store.getters["teams/getTeams"];case"campaign_id":return this.$store.getters["campaigns/getAllCampaigns"].map((function(t){return{id:t.id,name:t.title}}));case"labels":return this.$store.getters["labels/getLabels"].map((function(t){return{id:t.title,name:t.title}}));case"browser_language":return o.a;case"country_code":return c.a;default:return}},appendNewFilter:function(){this.isFolderView?this.setQueryOperatorOnLastQuery():this.appliedFilters.push({attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and"})},setQueryOperatorOnLastQuery:function(){var t=this,e=this.appliedFilters.length-1;this.appliedFilters[e]=g(g({},this.appliedFilters[e]),{},{query_operator:"and"}),this.$nextTick((function(){t.appliedFilters.push({attribute_key:"status",filter_operator:"equal_to",values:"",query_operator:"and"})}))},removeFilter:function(t){this.appliedFilters.length<=1?this.showAlert(this.$t("FILTER.FILTER_DELETE_ERROR")):this.appliedFilters.splice(t,1)},submitFilterQuery:function(){this.$v.$touch(),this.$v.$invalid||(this.$store.dispatch("setConversationFilters",JSON.parse(JSON.stringify(this.appliedFilters))),this.$emit("applyFilter",this.appliedFilters),this.$track(f.d.APPLY_FILTER,{applied_filters:this.appliedFilters.map((function(t){return{key:t.attribute_key,operator:t.filter_operator,query_operator:t.query_operator}}))}))},updateSavedCustomViews:function(){this.$emit("updateFolder",this.appliedFilters,this.activeFolderNewName)},resetFilter:function(t,e){this.appliedFilters[t].filter_operator=this.filterTypes.find((function(t){return t.attributeKey===e.attribute_key})).filterOperators[0].value,this.appliedFilters[t].values=""},showUserInput:function(t){return"is_present"!==t&&"is_not_present"!==t}}},C=(n(3170),n(5)),O=Object(C.a)(y,(function(){var t=this,e=t._self._c;return e("div",[e("woot-modal-header",{attrs:{"header-title":t.filterModalHeaderTitle}},[e("p",{staticClass:"text-slate-600 dark:text-slate-200"},[t._v("\n      "+t._s(t.filterModalSubTitle)+"\n    ")])]),t._v(" "),e("div",{staticClass:"p-8"},[t.isFolderView?e("div",[e("label",{staticClass:"input-label",class:{error:!t.activeFolderNewName}},[t._v("\n        "+t._s(t.$t("FILTER.FOLDER_LABEL"))+"\n        "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeFolderNewName,expression:"activeFolderNewName"}],staticClass:"folder-input border-slate-75 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100",attrs:{type:"text"},domProps:{value:t.activeFolderNewName},on:{input:function(e){e.target.composing||(t.activeFolderNewName=e.target.value)}}}),t._v(" "),t.activeFolderNewName?t._e():e("span",{staticClass:"message"},[t._v("\n          "+t._s(t.$t("FILTER.EMPTY_VALUE_ERROR"))+"\n        ")])]),t._v(" "),e("label",{staticClass:"mb-1"},[t._v("\n        "+t._s(t.$t("FILTER.FOLDER_QUERY_LABEL"))+"\n      ")])]):t._e(),t._v(" "),e("div",{staticClass:"p-4 rounded-lg bg-slate-25 dark:bg-slate-900 border border-solid border-slate-50 dark:border-slate-700/50 mb-4"},[t._l(t.appliedFilters,(function(n,i){return e("filter-input-box",{key:i,attrs:{"filter-groups":t.filterGroups,"input-type":t.getInputType(t.appliedFilters[i].attribute_key,t.appliedFilters[i].filter_operator),operators:t.getOperators(t.appliedFilters[i].attribute_key),"dropdown-values":t.getDropdownValues(t.appliedFilters[i].attribute_key),"show-query-operator":i!==t.appliedFilters.length-1,"show-user-input":t.showUserInput(t.appliedFilters[i].filter_operator),"grouped-filters":!0,v:t.$v.appliedFilters.$each[i]},on:{resetFilter:function(e){return t.resetFilter(i,t.appliedFilters[i])},removeFilter:function(e){return t.removeFilter(i)}},model:{value:t.appliedFilters[i],callback:function(e){t.$set(t.appliedFilters,i,e)},expression:"appliedFilters[i]"}})})),t._v(" "),e("div",{staticClass:"mt-4"},[e("woot-button",{attrs:{icon:"add","color-scheme":"success",variant:"smooth",size:"small"},on:{click:t.appendNewFilter}},[t._v("\n          "+t._s(t.$t("FILTER.ADD_NEW_FILTER"))+"\n        ")])],1)],2),t._v(" "),e("div",{staticClass:"w-full"},[e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("woot-button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n          "+t._s(t.$t("FILTER.CANCEL_BUTTON_LABEL"))+"\n        ")]),t._v(" "),t.isFolderView?e("woot-button",{attrs:{disabled:!t.activeFolderNewName},on:{click:t.updateSavedCustomViews}},[t._v("\n          "+t._s(t.$t("FILTER.UPDATE_BUTTON_LABEL"))+"\n        ")]):e("woot-button",{on:{click:t.submitFilterQuery}},[t._v("\n          "+t._s(t.$t("FILTER.SUBMIT_BUTTON_LABEL"))+"\n        ")])],1)])])],1)}),[],!1,null,"7e44b8a7",null),A=O.exports,T=n(125),E=n(149),w={props:{selectedValue:{type:String,required:!0},items:{type:Object,required:!0},type:{type:String,required:!0},pathPrefix:{type:String,required:!0}},data:function(){return{activeValue:this.selectedValue}},methods:{onTabChange:function(){"status"===this.type?this.$store.dispatch("setChatStatusFilter",this.activeValue):this.$store.dispatch("setChatSortFilter",this.activeValue),this.$emit("onChangeFilter",this.activeValue,this.type)}}},S=Object(C.a)(w,(function(){var t=this,e=t._self._c;return e("select",{directives:[{name:"model",rawName:"v-model",value:t.activeValue,expression:"activeValue"}],staticClass:"bg-slate-25 dark:bg-slate-700 text-xs h-6 my-0 mx-1 py-0 pr-6 pl-2 w-32 border border-solid border-slate-75 dark:border-slate-600 text-slate-800 dark:text-slate-100",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.activeValue=e.target.multiple?n:n[0]},function(e){return t.onTabChange()}]}},t._l(t.items,(function(n,i){return e("option",{key:i,domProps:{value:i}},[t._v("\n    "+t._s(t.$t(`${t.pathPrefix}.${i}.TEXT`))+"\n  ")])})),0)}),[],!1,null,null,null).exports,I=n(267);function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function N(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var L={components:{FilterItem:S},mixins:[E.mixin,I.a],data:function(){return{showActionsDropdown:!1,chatStatusItems:this.$t("CHAT_LIST.CHAT_STATUS_FILTER_ITEMS"),chatSortItems:this.$t("CHAT_LIST.CHAT_SORT_FILTER_ITEMS")}},computed:N(N({},Object(i.mapGetters)({chatStatusFilter:"getChatStatusFilter",chatSortFilter:"getChatSortFilter"})),{},{chatStatus:function(){return this.chatStatusFilter||T.b.STATUS_TYPE.OPEN},sortFilter:function(){return this.chatSortFilter||T.b.SORT_BY_TYPE.LATEST}}),methods:{onTabChange:function(t){this.$emit("changeFilter",t),this.closeDropdown()},toggleDropdown:function(){this.showActionsDropdown=!this.showActionsDropdown},closeDropdown:function(){this.showActionsDropdown=!1},onChangeFilter:function(t,e){this.$emit("changeFilter",t,e),this.saveSelectedFilter(e,t)},saveSelectedFilter:function(t,e){this.updateUISettings({conversations_filter_by:{status:"status"===t?e:this.chatStatus,order_by:"sort"===t?e:this.sortFilter}})}}},P=(n(3171),Object(C.a)(L,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative flex"},[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:t.$t("CHAT_LIST.SORT_TOOLTIP_LABEL"),expression:"$t('CHAT_LIST.SORT_TOOLTIP_LABEL')",modifiers:{right:!0}}],staticClass:"selector-button",attrs:{variant:"smooth",size:"tiny","color-scheme":"secondary",icon:"sort-icon"},on:{click:t.toggleDropdown}}),t._v(" "),t.showActionsDropdown?e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.closeDropdown,expression:"closeDropdown"}],staticClass:"dropdown-pane dropdown-pane--open mt-1 right-0 basic-filter"},[e("div",{staticClass:"items-center flex justify-between last:mt-4"},[e("span",{staticClass:"text-slate-800 dark:text-slate-100 text-xs font-medium"},[t._v(t._s(t.$t("CHAT_LIST.CHAT_SORT.STATUS")))]),t._v(" "),e("filter-item",{attrs:{type:"status","selected-value":t.chatStatus,items:t.chatStatusItems,"path-prefix":"CHAT_LIST.CHAT_STATUS_FILTER_ITEMS"},on:{onChangeFilter:t.onChangeFilter}})],1),t._v(" "),e("div",{staticClass:"items-center flex justify-between last:mt-4"},[e("span",{staticClass:"text-slate-800 dark:text-slate-100 text-xs font-medium"},[t._v(t._s(t.$t("CHAT_LIST.CHAT_SORT.ORDER_BY")))]),t._v(" "),e("filter-item",{attrs:{type:"sort","selected-value":t.sortFilter,items:t.chatSortItems,"path-prefix":"CHAT_LIST.CHAT_SORT_FILTER_ITEMS"},on:{onChangeFilter:t.onChangeFilter}})],1)]):t._e()],1)}),[],!1,null,"a50b97a0",null).exports),M=(n(269),n(299)),k=n(108),$={mixins:[M.a],props:{items:{type:Array,default:function(){return[]}},activeTab:{type:String,default:T.b.ASSIGNEE_TYPE.ME}},computed:{activeTabIndex:function(){var t=this;return this.items.findIndex((function(e){return e.key===t.activeTab}))}},methods:{handleKeyEvents:function(t){Object(k.i)(t)&&(this.activeTab===T.b.ASSIGNEE_TYPE.ALL?this.onTabChange(0):this.onTabChange(this.activeTabIndex+1))},onTabChange:function(t){this.items[t].key!==this.activeTab&&this.$emit("chatTabChange",this.items[t].key)}}},j=Object(C.a)($,(function(){var t=this,e=t._self._c;return e("woot-tabs",{attrs:{index:t.activeTabIndex},on:{change:t.onTabChange}},t._l(t.items,(function(t){return e("woot-tabs-item",{key:t.key,attrs:{name:t.name,count:t.count}})})),1)}),[],!1,null,null,null).exports,D=n(2734),F=n(1914),U=n(2688),B=n(2680),V=n(2807),G=n(2808),W=(n(41),n(1776),n(261)),H=n(170);function z(t){return function(t){if(Array.isArray(t))return Y(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){X(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Q={components:{Thumbnail:W.a,Spinner:H.a},mixins:[E.mixin],props:{selectedInboxes:{type:Array,default:function(){return[]}},conversationCount:{type:Number,default:0}},data:function(){return{query:"",selectedAgent:null,goBackToAgentList:!1}},computed:K(K({},Object(i.mapGetters)({uiFlags:"bulkActions/getUIFlags",inboxes:"inboxes/getInboxes",assignableAgentsUiFlags:"inboxAssignableAgents/getUIFlags"})),{},{filteredAgents:function(){var t=this;return this.query?this.assignableAgents.filter((function(e){return e.name.toLowerCase().includes(t.query.toLowerCase())})):[{confirmed:!0,name:"None",id:null,role:"agent",account_id:0,email:"None"}].concat(z(this.assignableAgents))},assignableAgents:function(){return this.$store.getters["inboxAssignableAgents/getAssignableAgents"](this.selectedInboxes.join(","))},conversationLabel:function(){return this.conversationCount>1?"conversations":"conversation"}}),mounted:function(){this.$store.dispatch("inboxAssignableAgents/fetch",this.selectedInboxes)},methods:{submit:function(){this.$emit("select",this.selectedAgent)},goBack:function(){this.goBackToAgentList=!0,this.selectedAgent=null},assignAgent:function(t){this.selectedAgent=t},onClose:function(){this.$emit("close")},onCloseAgentList:function(){null!==this.selectedAgent||this.goBackToAgentList||this.onClose(),this.goBackToAgentList=!1}}},Z=(n(3172),Object(C.a)(Q,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.onCloseAgentList,expression:"onCloseAgentList"}],staticClass:"bulk-action__agents"},[e("div",{staticClass:"triangle"},[e("svg",{attrs:{height:"12",viewBox:"0 0 24 12",width:"24"}},[e("path",{attrs:{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"}})])]),t._v(" "),e("div",{staticClass:"header flex-between"},[e("span",[t._v(t._s(t.$t("BULK_ACTION.AGENT_SELECT_LABEL")))]),t._v(" "),e("woot-button",{attrs:{size:"tiny",variant:"clear","color-scheme":"secondary",icon:"dismiss"},on:{click:t.onClose}})],1),t._v(" "),e("div",{staticClass:"container"},[t.assignableAgentsUiFlags.isFetching?e("div",{staticClass:"agent__list-loading"},[e("spinner"),t._v(" "),e("p",[t._v(t._s(t.$t("BULK_ACTION.AGENT_LIST_LOADING")))])],1):e("div",{staticClass:"agent__list-container"},[t.selectedAgent?e("div",{staticClass:"agent-confirmation-container"},[t.selectedAgent.id?e("p",[t._v("\n          "+t._s(t.$t("BULK_ACTION.ASSIGN_CONFIRMATION_LABEL",{conversationCount:t.conversationCount,conversationLabel:t.conversationLabel}))+"\n          "),e("strong",[t._v("\n            "+t._s(t.selectedAgent.name)+"\n          ")]),t._v(" "),e("span",[t._v("?")])]):e("p",[t._v("\n          "+t._s(t.$t("BULK_ACTION.UNASSIGN_CONFIRMATION_LABEL",{conversationCount:t.conversationCount,conversationLabel:t.conversationLabel}))+"\n        ")]),t._v(" "),e("div",{staticClass:"agent-confirmation-actions"},[e("woot-button",{attrs:{"color-scheme":"primary",variant:"smooth"},on:{click:t.goBack}},[t._v("\n            "+t._s(t.$t("BULK_ACTION.GO_BACK_LABEL"))+"\n          ")]),t._v(" "),e("woot-button",{attrs:{"color-scheme":"primary",variant:"flat","is-loading":t.uiFlags.isUpdating},on:{click:t.submit}},[t._v("\n            "+t._s(t.$t("BULK_ACTION.YES"))+"\n          ")])],1)]):e("ul",[e("li",{staticClass:"search-container"},[e("div",{staticClass:"agent-list-search flex-between"},[e("fluent-icon",{staticClass:"search-icon",attrs:{icon:"search",size:"16"}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"search",staticClass:"agent--search_input",attrs:{type:"search",placeholder:"Search"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})],1)]),t._v(" "),t._l(t.filteredAgents,(function(n){return e("li",{key:n.id},[e("div",{staticClass:"agent-list-item",on:{click:function(e){return t.assignAgent(n)}}},[e("thumbnail",{attrs:{src:n.thumbnail,status:n.availability_status,username:n.name,size:"22px"}}),t._v(" "),e("span",{staticClass:"reports-option__title"},[t._v(t._s(n.name))])],1)])}))],2)])])])}),[],!1,null,"1dc4326e",null).exports),J=n(358),tt=n(359),et={components:{WootDropdownItem:J.a,WootDropdownMenu:tt.a},mixins:[E.mixin],props:{selectedInboxes:{type:Array,default:function(){return[]}},conversationCount:{type:Number,default:0},showResolve:{type:Boolean,default:!0},showReopen:{type:Boolean,default:!0},showSnooze:{type:Boolean,default:!0}},data:function(){return{query:"",selectedAction:null,actions:[{icon:"checkmark",key:"resolved"},{icon:"arrow-redo",key:"open"},{icon:"send-clock",key:"snoozed"}]}},methods:{updateConversations:function(t){this.$emit("update",t)},goBack:function(){this.selectedAgent=null},onClose:function(){this.$emit("close")},showAction:function(t){return{resolved:this.showResolve,open:this.showReopen,snoozed:this.showSnooze}[t]||!1},actionLabel:function(t){return{resolved:this.$t("CONVERSATION.HEADER.RESOLVE_ACTION"),open:this.$t("CONVERSATION.HEADER.REOPEN_ACTION"),snoozed:this.$t("BULK_ACTION.UPDATE.SNOOZE_UNTIL_NEXT_REPLY")}[t]||""}}},nt=(n(3173),Object(C.a)(et,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.onClose,expression:"onClose"}],staticClass:"actions-container"},[e("div",{staticClass:"triangle"},[e("svg",{attrs:{height:"12",viewBox:"0 0 24 12",width:"24"}},[e("path",{attrs:{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"}})])]),t._v(" "),e("div",{staticClass:"header flex-between"},[e("span",[t._v(t._s(t.$t("BULK_ACTION.UPDATE.CHANGE_STATUS")))]),t._v(" "),e("woot-button",{attrs:{size:"tiny",variant:"clear","color-scheme":"secondary",icon:"dismiss"},on:{click:t.onClose}})],1),t._v(" "),e("div",{staticClass:"container"},[e("woot-dropdown-menu",[t._l(t.actions,(function(n){return[t.showAction(n.key)?e("woot-dropdown-item",{key:n.key},[e("woot-button",{attrs:{variant:"clear","color-scheme":"secondary",size:"small",icon:n.icon},on:{click:function(e){return t.updateConversations(n.key)}}},[t._v("\n            "+t._s(t.actionLabel(n.key))+"\n          ")])],1):t._e()]}))],2)],1)])}),[],!1,null,"e15ebc9e",null).exports);function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){at(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function at(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rt={mixins:[E.mixin],data:function(){return{query:"",selectedLabels:[]}},computed:st(st({},Object(i.mapGetters)({labels:"labels/getLabels"})),{},{filteredLabels:function(){var t=this;return this.labels.filter((function(e){return e.title.toLowerCase().includes(t.query.toLowerCase())}))}}),methods:{isLabelSelected:function(t){return this.selectedLabels.includes(t)},assignLabels:function(t){this.$emit("update",t)},onClose:function(){this.$emit("close")}}},ot=(n(3174),Object(C.a)(rt,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.onClose,expression:"onClose"}],staticClass:"labels-container"},[e("div",{staticClass:"triangle"},[e("svg",{attrs:{height:"12",viewBox:"0 0 24 12",width:"24"}},[e("path",{attrs:{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"}})])]),t._v(" "),e("div",{staticClass:"header flex-between"},[e("span",[t._v(t._s(t.$t("BULK_ACTION.LABELS.ASSIGN_LABELS")))]),t._v(" "),e("woot-button",{attrs:{size:"tiny",variant:"clear","color-scheme":"secondary",icon:"dismiss"},on:{click:t.onClose}})],1),t._v(" "),e("div",{staticClass:"labels-list"},[e("header",{staticClass:"labels-list__header"},[e("div",{staticClass:"label-list-search flex-between"},[e("fluent-icon",{staticClass:"search-icon",attrs:{icon:"search",size:"16"}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"search",staticClass:"label--search_input",attrs:{type:"search",placeholder:"Search"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})],1)]),t._v(" "),e("ul",{staticClass:"labels-list__body"},t._l(t.filteredLabels,(function(n){return e("li",{key:n.id,staticClass:"label__list-item"},[e("label",{staticClass:"item",class:{"label-selected":t.isLabelSelected(n.title)}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedLabels,expression:"selectedLabels"}],staticClass:"label-checkbox",attrs:{type:"checkbox"},domProps:{value:n.title,checked:Array.isArray(t.selectedLabels)?t._i(t.selectedLabels,n.title)>-1:t.selectedLabels},on:{change:function(e){var i=t.selectedLabels,s=e.target,a=!!s.checked;if(Array.isArray(i)){var r=n.title,o=t._i(i,r);s.checked?o<0&&(t.selectedLabels=i.concat([r])):o>-1&&(t.selectedLabels=i.slice(0,o).concat(i.slice(o+1)))}else t.selectedLabels=a}}}),t._v(" "),e("span",{staticClass:"label-title overflow-hidden whitespace-nowrap text-ellipsis"},[t._v("\n            "+t._s(n.title)+"\n          ")]),t._v(" "),e("span",{staticClass:"label-pill",style:{backgroundColor:n.color}})])])})),0),t._v(" "),e("footer",{staticClass:"labels-list__footer"},[e("woot-button",{attrs:{size:"small","is-expanded":"","color-scheme":"primary",disabled:!t.selectedLabels.length},on:{click:function(e){return t.$emit("assign",t.selectedLabels)}}},[e("span",[t._v(t._s(t.$t("BULK_ACTION.LABELS.ASSIGN_SELECTED_LABELS")))])])],1)])])}),[],!1,null,"10b8f002",null).exports);function ct(t){return function(t){if(Array.isArray(t))return lt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ht={mixins:[E.mixin],data:function(){return{query:"",selectedteams:[]}},computed:dt(dt({},Object(i.mapGetters)({teams:"teams/getTeams"})),{},{filteredTeams:function(){var t=this;return[{name:"None",id:0}].concat(ct(this.teams.filter((function(e){return e.name.toLowerCase().includes(t.query.toLowerCase())}))))}}),methods:{assignTeam:function(t){this.$emit("assign-team",t)},onClose:function(){this.$emit("close")}}},ft=(n(3175),{components:{AgentSelector:Z,UpdateActions:nt,LabelActions:ot,TeamActions:Object(C.a)(ht,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.onClose,expression:"onClose"}],staticClass:"bulk-action__teams"},[e("div",{staticClass:"triangle"},[e("svg",{attrs:{height:"12",viewBox:"0 0 24 12",width:"24"}},[e("path",{attrs:{d:"M20 12l-8-8-12 12","fill-rule":"evenodd","stroke-width":"1px"}})])]),t._v(" "),e("div",{staticClass:"header flex-between"},[e("span",[t._v(t._s(t.$t("BULK_ACTION.TEAMS.TEAM_SELECT_LABEL")))]),t._v(" "),e("woot-button",{attrs:{size:"tiny",variant:"clear","color-scheme":"secondary",icon:"dismiss"},on:{click:t.onClose}})],1),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"team__list-container"},[e("ul",[e("li",{staticClass:"search-container"},[e("div",{staticClass:"agent-list-search flex-between"},[e("fluent-icon",{staticClass:"search-icon",attrs:{icon:"search",size:"16"}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"search",staticClass:"agent--search_input",attrs:{type:"search",placeholder:"Search"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})],1)]),t._v(" "),t.filteredTeams.length?t._l(t.filteredTeams,(function(n){return e("li",{key:n.id},[e("div",{staticClass:"team__list-item",on:{click:function(e){return t.assignTeam(n)}}},[e("span",{staticClass:"reports-option__title"},[t._v(t._s(n.name))])])])})):e("li",[e("div",{staticClass:"team__list-item"},[e("span",{staticClass:"reports-option__title"},[t._v(t._s(t.$t("BULK_ACTION.TEAMS.NO_TEAMS_AVAILABLE")))])])])],2)])])])}),[],!1,null,"26167e8b",null).exports},props:{conversations:{type:Array,default:function(){return[]}},allConversationsSelected:{type:Boolean,default:!1},selectedInboxes:{type:Array,default:function(){return[]}},showOpenAction:{type:Boolean,default:!1},showResolvedAction:{type:Boolean,default:!1},showSnoozedAction:{type:Boolean,default:!1}},data:function(){return{showAgentsList:!1,showUpdateActions:!1,showLabelActions:!1,showTeamsList:!1,popoverPositions:{}}},methods:{selectAll:function(t){this.$emit("select-all-conversations",t.target.checked)},submit:function(t){this.$emit("assign-agent",t)},updateConversations:function(t){this.$emit("update-conversations",t)},assignLabels:function(t){this.$emit("assign-labels",t)},assignTeam:function(t){this.$emit("assign-team",t)},resolveConversations:function(){this.$emit("resolve-conversations")},toggleUpdateActions:function(){this.showUpdateActions=!this.showUpdateActions},toggleLabelActions:function(){this.showLabelActions=!this.showLabelActions},toggleAgentList:function(){this.showAgentsList=!this.showAgentsList},toggleTeamsList:function(){this.showTeamsList=!this.showTeamsList}}}),mt=(n(3176),Object(C.a)(ft,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bulk-action__container"},[e("div",{staticClass:"flex-between"},[e("label",{staticClass:"bulk-action__panel flex-between"},[e("input",{ref:"selectAllCheck",staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:t.allConversationsSelected,indeterminate:!t.allConversationsSelected},on:{change:function(e){return t.selectAll(e)}}}),t._v(" "),e("span",[t._v("\n        "+t._s(t.$t("BULK_ACTION.CONVERSATIONS_SELECTED",{conversationCount:t.conversations.length}))+"\n      ")])]),t._v(" "),e("div",{staticClass:"bulk-action__actions flex-between"},[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("BULK_ACTION.LABELS.ASSIGN_LABELS"),expression:"$t('BULK_ACTION.LABELS.ASSIGN_LABELS')"}],staticClass:"margin-right-smaller",attrs:{size:"tiny",variant:"smooth","color-scheme":"secondary",icon:"tag"},on:{click:t.toggleLabelActions}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("BULK_ACTION.UPDATE.CHANGE_STATUS"),expression:"$t('BULK_ACTION.UPDATE.CHANGE_STATUS')"}],staticClass:"margin-right-smaller",attrs:{size:"tiny",variant:"smooth","color-scheme":"secondary",icon:"repeat"},on:{click:t.toggleUpdateActions}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("BULK_ACTION.ASSIGN_AGENT_TOOLTIP"),expression:"$t('BULK_ACTION.ASSIGN_AGENT_TOOLTIP')"}],staticClass:"margin-right-smaller",attrs:{size:"tiny",variant:"smooth","color-scheme":"secondary",icon:"person-assign"},on:{click:t.toggleAgentList}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("BULK_ACTION.ASSIGN_TEAM_TOOLTIP"),expression:"$t('BULK_ACTION.ASSIGN_TEAM_TOOLTIP')"}],attrs:{size:"tiny",variant:"smooth","color-scheme":"secondary",icon:"people-team-add"},on:{click:t.toggleTeamsList}})],1),t._v(" "),e("transition",{attrs:{name:"popover-animation"}},[t.showLabelActions?e("label-actions",{staticClass:"label-actions-box",on:{assign:t.assignLabels,close:function(e){t.showLabelActions=!1}}}):t._e()],1),t._v(" "),e("transition",{attrs:{name:"popover-animation"}},[t.showUpdateActions?e("update-actions",{staticClass:"update-actions-box",attrs:{"selected-inboxes":t.selectedInboxes,"conversation-count":t.conversations.length,"show-resolve":!t.showResolvedAction,"show-reopen":!t.showOpenAction,"show-snooze":!t.showSnoozedAction},on:{update:t.updateConversations,close:function(e){t.showUpdateActions=!1}}}):t._e()],1),t._v(" "),e("transition",{attrs:{name:"popover-animation"}},[t.showAgentsList?e("agent-selector",{staticClass:"agent-actions-box",attrs:{"selected-inboxes":t.selectedInboxes,"conversation-count":t.conversations.length},on:{select:t.submit,close:function(e){t.showAgentsList=!1}}}):t._e()],1),t._v(" "),e("transition",{attrs:{name:"popover-animation"}},[t.showTeamsList?e("team-actions",{staticClass:"team-actions-box",on:{"assign-team":t.assignTeam,close:function(e){t.showTeamsList=!1}}}):t._e()],1)],1),t._v(" "),t.allConversationsSelected?e("div",{staticClass:"bulk-action__alert"},[t._v("\n    "+t._s(t.$t("BULK_ACTION.ALL_CONVERSATIONS_SELECTED_ALERT"))+"\n  ")]):t._e()])}),[],!1,null,"b882a674",null).exports),vt=n(2762),bt=n(13),gt=n(265);function _t(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function yt(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){_t(a,i,s,r,o,"next",t)}function o(t){_t(a,i,s,r,o,"throw",t)}r(void 0)}))}}function Ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var i,s,a=[],r=!0,o=!1;try{for(n=n.call(t);!(r=(i=n.next()).done)&&(a.push(i.value),!e||a.length!==e);r=!0);}catch(c){o=!0,s=c}finally{try{r||null==n.return||n.return()}finally{if(o)throw s}}return a}(t,e)||At(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(t){return function(t){if(Array.isArray(t))return Tt(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||At(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(t,e){if(t){if("string"===typeof t)return Tt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tt(t,e):void 0}}function Tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){St(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function St(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var It={components:{AddCustomViews:V.a,ChatTypeTabs:j,ConversationCard:D.a,ConversationAdvancedFilter:A,DeleteCustomViews:G.a,ConversationBulkActions:mt,ConversationBasicFilter:P},mixins:[F.a,U.a,M.a,s.a,h.a,I.a],props:{conversationInbox:{type:[String,Number],default:0},teamId:{type:[String,Number],default:0},label:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0},showConversationList:{default:!0,type:Boolean},isOnExpandedLayout:{default:!1,type:Boolean}},data:function(){var t=this;return{activeAssigneeTab:T.b.ASSIGNEE_TYPE.ME,activeStatus:T.b.STATUS_TYPE.OPEN,activeSortBy:T.b.SORT_BY_TYPE.LATEST,showAdvancedFilters:!1,advancedFilterTypes:p.map((function(e){return wt(wt({},e),{},{attributeName:t.$t("FILTER.ATTRIBUTES.".concat(e.attributeI18nKey))})})),chatsOnView:[],foldersQuery:{},showAddFoldersModal:!1,showDeleteFoldersModal:!1,selectedConversations:[],selectedInboxes:[],isContextMenuOpen:!1,appliedFilter:[]}},computed:wt(wt({},Object(i.mapGetters)({currentChat:"getSelectedChat",currentUser:"getCurrentUser",chatLists:"getAllConversations",mineChatsList:"getMineChats",allChatList:"getAllStatusChats",unAssignedChatsList:"getUnAssignedChats",chatListLoading:"getChatListLoadingStatus",currentUserID:"getCurrentUserID",activeInbox:"getSelectedInbox",conversationStats:"conversationStats/getStats",appliedFilters:"getAppliedConversationFilters",folders:"customViews/getCustomViews",inboxes:"inboxes/getInboxes",agentList:"agents/getAgents",teamsList:"teams/getTeams",inboxesList:"inboxes/getInboxes",campaigns:"campaigns/getAllCampaigns",labels:"labels/getLabels"})),{},{hasAppliedFilters:function(){return 0!==this.appliedFilters.length},hasActiveFolders:function(){return this.activeFolder&&0!==this.foldersId},hasAppliedFiltersOrActiveFolders:function(){return this.hasAppliedFilters||this.hasActiveFolders},savedFoldersValue:function(){if(this.hasActiveFolders){var t=this.activeFolder.query;this.fetchSavedFilteredConversations(t)}return{}},showEndOfListMessage:function(){return this.conversationList.length&&this.hasCurrentPageEndReached&&!this.chatListLoading},currentUserDetails:function(){var t=this.currentUser;return{id:t.id,name:t.name}},assigneeTabItems:function(){var t=this,e={me:"mineCount",unassigned:"unAssignedCount",all:"allCount"};return Object.keys(e).map((function(n){var i=t.conversationStats[e[n]]||0;return{key:n,name:t.$t("CHAT_LIST.ASSIGNEE_TYPE_TABS.".concat(n)),count:i}}))},showAssigneeInConversationCard:function(){return this.hasAppliedFiltersOrActiveFolders||this.activeAssigneeTab===T.b.ASSIGNEE_TYPE.ALL},inbox:function(){return this.$store.getters["inboxes/getInbox"](this.activeInbox)},currentPage:function(){return this.$store.getters["conversationPage/getCurrentPageFilter"](this.activeAssigneeTab)},currentPageFilterKey:function(){return this.hasAppliedFiltersOrActiveFolders?"appliedFilters":this.activeAssigneeTab},currentFiltersPage:function(){return this.$store.getters["conversationPage/getCurrentPageFilter"](this.currentPageFilterKey)},hasCurrentPageEndReached:function(){return this.$store.getters["conversationPage/getHasEndReached"](this.currentPageFilterKey)},activeAssigneeTabCount:function(){var t=this.activeAssigneeTab;return this.assigneeTabItems.find((function(e){return e.key===t})).count},conversationFilters:function(){return{inboxId:this.conversationInbox?this.conversationInbox:void 0,assigneeType:this.activeAssigneeTab,status:this.activeStatus,sortBy:this.activeSortBy,page:this.conversationListPagination,labels:this.label?[this.label]:void 0,teamId:this.teamId||void 0,conversationType:this.conversationType||void 0,folders:this.hasActiveFolders?this.savedFoldersValue:void 0}},conversationListPagination:function(){var t=this.chatsOnView&&Array.isArray(this.chatsOnView)&&!this.chatsOnView.length,e=!this.hasAppliedFiltersOrActiveFolders&&t,n=this.chatsOnView.length<25&&this.activeAssigneeTabCount<25&&this.activeAssigneeTabCount>this.chatsOnView.length;return e&&n?1:this.currentPage+1},pageTitle:function(){return this.hasAppliedFilters?this.$t("CHAT_LIST.TAB_HEADING"):this.inbox.name?this.inbox.name:this.activeTeam.name?this.activeTeam.name:this.label?"#".concat(this.label):"mention"===this.conversationType?this.$t("CHAT_LIST.MENTION_HEADING"):"participating"===this.conversationType?this.$t("CONVERSATION_PARTICIPANTS.SIDEBAR_MENU_TITLE"):"unattended"===this.conversationType?this.$t("CHAT_LIST.UNATTENDED_HEADING"):this.hasActiveFolders?this.activeFolder.name:this.$t("CHAT_LIST.TAB_HEADING")},conversationList:function(){var t=[];if(this.hasAppliedFiltersOrActiveFolders)t=Ot(this.chatLists);else{var e=this.conversationFilters;t="me"===this.activeAssigneeTab?Ot(this.mineChatsList(e)):"unassigned"===this.activeAssigneeTab?Ot(this.unAssignedChatsList(e)):Ot(this.allChatList(e))}return t},activeFolder:function(){var t=this;if(this.foldersId)return Ct(this.folders.filter((function(e){return e.id===Number(t.foldersId)})),1)[0]},activeFolderName:function(){var t;return null===(t=this.activeFolder)||void 0===t?void 0:t.name},activeTeam:function(){return this.teamId?this.$store.getters["teams/getTeam"](this.teamId):{}},allConversationsSelected:function(){var t=this;return this.conversationList.length===this.selectedConversations.length&&this.conversationList.every((function(e){return t.selectedConversations.includes(e.id)}))},uniqueInboxes:function(){return Ot(new Set(this.selectedInboxes))}}),watch:{activeTeam:function(){this.resetAndFetchData()},conversationInbox:function(){this.resetAndFetchData()},label:function(){this.resetAndFetchData()},conversationType:function(){this.resetAndFetchData()},activeFolder:function(){this.resetAndFetchData()},chatLists:function(){this.chatsOnView=this.conversationList}},mounted:function(){var t=this;this.setFiltersFromUISettings(),this.$store.dispatch("setChatStatusFilter",this.activeStatus),this.$store.dispatch("setChatSortFilter",this.activeSortBy),this.resetAndFetchData(),this.hasActiveFolders&&this.$store.dispatch("campaigns/get"),bus.$on("fetch_conversation_stats",(function(){t.$store.dispatch("conversationStats/get",t.conversationFilters)}))},methods:{onApplyFilter:function(t){this.resetBulkActions(),this.foldersQuery=Object(B.a)(t),this.$store.dispatch("conversationPage/reset"),this.$store.dispatch("emptyAllConversations"),this.fetchFilteredConversations(t)},onUpdateSavedFilter:function(t,e){var n=wt(wt({},this.activeFolder),{},{name:e,query:Object(B.a)(t)});this.$store.dispatch("customViews/update",n),this.closeAdvanceFiltersModal()},setFiltersFromUISettings:function(){var t=this.uiSettings.conversations_filter_by,e=void 0===t?{}:t,n=e.status,i=e.order_by;this.activeStatus=n||T.b.STATUS_TYPE.OPEN,this.activeSortBy=i||T.b.SORT_BY_TYPE.LATEST},onClickOpenAddFoldersModal:function(){this.showAddFoldersModal=!0},onCloseAddFoldersModal:function(){this.showAddFoldersModal=!1},onClickOpenDeleteFoldersModal:function(){this.showDeleteFoldersModal=!0},onCloseDeleteFoldersModal:function(){this.showDeleteFoldersModal=!1},onToggleAdvanceFiltersModal:function(){this.hasAppliedFilters||this.hasActiveFolders||this.initializeExistingFilterToModal(),this.hasActiveFolders&&this.initializeFolderToFilterModal(this.activeFolder),this.showAdvancedFilters=!0},closeAdvanceFiltersModal:function(){this.showAdvancedFilters=!1,this.appliedFilter=[]},setParamsForEditFolderModal:function(){return{agents:this.agentList,teams:this.teamsList,inboxes:this.inboxesList,labels:this.labels,campaigns:this.campaigns,languages:o.a,countries:c.a,filterTypes:p,allCustomAttributes:this.$store.getters["attributes/getAttributesByModel"]("conversation_attribute")}},initializeFolderToFilterModal:function(t){var e,n,i=this,s=null===t||void 0===t||null===(e=t.query)||void 0===e?void 0:e.payload;Array.isArray(s)&&(n=this.appliedFilter).push.apply(n,Ot(s.map((function(t){return{attribute_key:t.attribute_key,attribute_model:t.attribute_model,filter_operator:t.filter_operator,values:Array.isArray(t.values)?Object(vt.a)(t,i.setParamsForEditFolderModal()):[],query_operator:t.query_operator,custom_attribute_type:t.custom_attribute_type}}))))},getKeyboardListenerParams:function(){var t=this.$refs.activeConversation.querySelectorAll("div.conversations-list div.conversation"),e=this.$refs.activeConversation.querySelector("div.conversations-list div.conversation.active");return{allConversations:t,activeConversation:e,activeConversationIndex:Ot(t).indexOf(e),lastConversationIndex:t.length-1}},handleKeyEvents:function(t){if(Object(k.e)(t)){var e=this.getKeyboardListenerParams(),n=e.allConversations,i=e.activeConversationIndex;-1===i&&n[0].click(),i>=1&&n[i-1].click()}if(Object(k.f)(t)){var s=this.getKeyboardListenerParams(),a=s.allConversations,r=s.activeConversationIndex,o=s.lastConversationIndex;-1===r?a[o].click():r<o&&a[r+1].click()}},resetAndFetchData:function(){if(this.appliedFilter=[],this.resetBulkActions(),this.$store.dispatch("conversationPage/reset"),this.$store.dispatch("emptyAllConversations"),this.$store.dispatch("clearConversationFilters"),this.hasActiveFolders){var t=this.activeFolder.query;this.fetchSavedFilteredConversations(t)}this.foldersId||this.fetchConversations()},fetchConversations:function(){var t=this;this.$store.dispatch("fetchAllConversations",this.conversationFilters).then((function(){return t.$emit("conversation-load")}))},loadMoreConversations:function(){if(this.hasAppliedFiltersOrActiveFolders||this.fetchConversations(),this.hasActiveFolders){var t=this.activeFolder.query;this.fetchSavedFilteredConversations(t)}this.hasAppliedFilters&&this.fetchFilteredConversations(this.appliedFilters)},fetchFilteredConversations:function(t){var e=this,n=this.currentFiltersPage+1;this.$store.dispatch("fetchFilteredConversations",{queryData:Object(B.a)(t),page:n}).then((function(){return e.$emit("conversation-load")})),this.showAdvancedFilters=!1},fetchSavedFilteredConversations:function(t){var e=this,n=this.currentFiltersPage+1;this.$store.dispatch("fetchFilteredConversations",{queryData:t,page:n}).then((function(){return e.$emit("conversation-load")}))},updateAssigneeTab:function(t){this.activeAssigneeTab!==t&&(this.resetBulkActions(),bus.$emit("clearSearchInput"),this.activeAssigneeTab=t,this.currentPage||this.fetchConversations())},resetBulkActions:function(){this.selectedConversations=[],this.selectedInboxes=[]},onBasicFilterChange:function(t,e){"status"===e?this.activeStatus=t:this.activeSortBy=t,this.resetAndFetchData()},openLastSavedItemInFolder:function(){var t=this.folders[this.folders.length-1].id;this.$router.push({name:"folder_conversations",params:{id:t}})},openLastItemAfterDeleteInFolder:function(){this.folders.length>0?this.openLastSavedItemInFolder():(this.$router.push({name:"home"}),this.fetchConversations())},isConversationSelected:function(t){return this.selectedConversations.includes(t)},selectConversation:function(t,e){this.selectedConversations.push(t),this.selectedInboxes.push(e)},deSelectConversation:function(t,e){this.selectedConversations=this.selectedConversations.filter((function(e){return e!==t})),this.selectedInboxes=this.selectedInboxes.filter((function(t){return t!==e}))},selectAllConversations:function(t){t?(this.selectedConversations=this.conversationList.map((function(t){return t.id})),this.selectedInboxes=this.conversationList.map((function(t){return t.inbox_id}))):this.resetBulkActions()},onAssignAgent:function(t){var e=arguments,n=this;return yt(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=e.length>1&&void 0!==e[1]?e[1]:null,i.prev=1,i.next=4,n.$store.dispatch("bulkActions/process",{type:"Conversation",ids:s||n.selectedConversations,fields:{assignee_id:t.id}});case 4:n.selectedConversations=[],s?n.showAlert(n.$t("CONVERSATION.CARD_CONTEXT_MENU.API.AGENT_ASSIGNMENT.SUCCESFUL",{agentName:t.name,conversationId:s})):n.showAlert(n.$t("BULK_ACTION.ASSIGN_SUCCESFUL")),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),n.showAlert(n.$t("BULK_ACTION.ASSIGN_FAILED"));case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},assignPriority:function(t){var e=arguments,n=this;return yt(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:s=e.length>1&&void 0!==e[1]?e[1]:null,n.$store.dispatch("setCurrentChatPriority",{priority:t,conversationId:s}),n.$store.dispatch("assignPriority",{conversationId:s,priority:t}).then((function(){n.$track(f.d.CHANGE_PRIORITY,{newValue:t,from:"Context menu"}),n.showAlert(n.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SUCCESSFUL",{priority:t,conversationId:s}))}));case 3:case"end":return i.stop()}}),i)})))()},markAsUnread:function(t){var e=this;return yt(regeneratorRuntime.mark((function n(){var i,s,a,r,o,c,l,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("markMessagesUnread",{id:t});case 3:i=e.$route,s=i.params,a=s.accountId,r=s.inbox_id,o=s.label,c=s.teamId,l=i.name,u="",Object(gt.b)({route:{name:l}})?u="mention":Object(gt.c)({route:{name:l}})&&(u="unattended"),e.$router.push(Object(bt.a)({accountId:a,conversationType:u,customViewId:e.foldersId,inboxId:r,label:o,teamId:c})),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])})))()},onAssignTeam:function(t){var e=arguments,n=this;return yt(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=e.length>1&&void 0!==e[1]?e[1]:null,i.prev=1,i.next=4,n.$store.dispatch("assignTeam",{conversationId:s,teamId:t.id});case 4:n.showAlert(n.$t("CONVERSATION.CARD_CONTEXT_MENU.API.TEAM_ASSIGNMENT.SUCCESFUL",{team:t.name,conversationId:s})),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(1),n.showAlert(n.$t("CONVERSATION.CARD_CONTEXT_MENU.API.TEAM_ASSIGNMENT.FAILED"));case 10:case"end":return i.stop()}}),i,null,[[1,7]])})))()},onAssignLabels:function(t){var e=arguments,n=this;return yt(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=e.length>1&&void 0!==e[1]?e[1]:null,i.prev=1,i.next=4,n.$store.dispatch("bulkActions/process",{type:"Conversation",ids:s||n.selectedConversations,labels:{add:t}});case 4:n.selectedConversations=[],s?n.showAlert(n.$t("CONVERSATION.CARD_CONTEXT_MENU.API.LABEL_ASSIGNMENT.SUCCESFUL",{labelName:t[0],conversationId:s})):n.showAlert(n.$t("BULK_ACTION.LABELS.ASSIGN_SUCCESFUL")),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),n.showAlert(n.$t("BULK_ACTION.LABELS.ASSIGN_FAILED"));case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},onAssignTeamsForBulk:function(t){var e=this;return yt(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("bulkActions/process",{type:"Conversation",ids:e.selectedConversations,fields:{team_id:t.id}});case 3:e.selectedConversations=[],e.showAlert(e.$t("BULK_ACTION.TEAMS.ASSIGN_SUCCESFUL")),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.showAlert(e.$t("BULK_ACTION.TEAMS.ASSIGN_FAILED"));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},onUpdateConversations:function(t){var e=this;return yt(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("bulkActions/process",{type:"Conversation",ids:e.selectedConversations,fields:{status:t}});case 3:e.selectedConversations=[],e.showAlert(e.$t("BULK_ACTION.UPDATE.UPDATE_SUCCESFUL")),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.showAlert(e.$t("BULK_ACTION.UPDATE.UPDATE_FAILED"));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},toggleConversationStatus:function(t,e,n){var i=this;this.$store.dispatch("toggleStatus",{conversationId:t,status:e,snoozedUntil:n}).then((function(){i.showAlert(i.$t("CONVERSATION.CHANGE_STATUS")),i.isLoading=!1}))},allSelectedConversationsStatus:function(t){var e=this;return!!this.selectedConversations.length&&this.selectedConversations.every((function(n){return e.$store.getters.getConversationById(n).status===t}))},onContextMenuToggle:function(t){this.isContextMenuOpen=t}}},xt=It,Nt=(n(3177),n(3178),Object(C.a)(xt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"conversations-list-wrap flex-basis-clamp flex-shrink-0 flex-basis-custom overflow-hidden flex flex-col border-r rtl:border-r-0 rtl:border-l border-slate-50 dark:border-slate-800/50",class:{hide:!t.showConversationList,"list--full-width":t.isOnExpandedLayout}},[t._t("default"),t._v(" "),e("div",{staticClass:"flex items-center justify-between py-0 px-4",class:{"pb-3 border-b border-slate-75 dark:border-slate-700":t.hasAppliedFiltersOrActiveFolders}},[e("div",{staticClass:"flex max-w-[85%] justify-center items-center"},[e("h1",{staticClass:"text-xl break-words overflow-hidden whitespace-nowrap text-ellipsis text-black-900 dark:text-slate-100 mb-0",attrs:{title:t.pageTitle}},[t._v("\n        "+t._s(t.pageTitle)+"\n      ")]),t._v(" "),t.hasAppliedFiltersOrActiveFolders?t._e():e("span",{staticClass:"p-1 my-0.5 mx-1 rounded-md capitalize bg-slate-50 dark:bg-slate-800 text-xxs text-slate-600 dark:text-slate-300"},[t._v("\n        "+t._s(t.$t(`CHAT_LIST.CHAT_STATUS_FILTER_ITEMS.${t.activeStatus}.TEXT`))+"\n      ")])]),t._v(" "),e("div",{staticClass:"flex items-center gap-1"},[t.hasAppliedFilters&&!t.hasActiveFolders?e("div",[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON"),expression:"$t('FILTER.CUSTOM_VIEWS.ADD.SAVE_BUTTON')",modifiers:{"top-end":!0}}],attrs:{size:"tiny",variant:"smooth","color-scheme":"secondary",icon:"save"},on:{click:t.onClickOpenAddFoldersModal}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("FILTER.CLEAR_BUTTON_LABEL"),expression:"$t('FILTER.CLEAR_BUTTON_LABEL')",modifiers:{"top-end":!0}}],attrs:{size:"tiny",variant:"smooth","color-scheme":"alert",icon:"dismiss-circle"},on:{click:t.resetAndFetchData}})],1):t._e(),t._v(" "),t.hasActiveFolders?e("div",[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("FILTER.CUSTOM_VIEWS.EDIT.EDIT_BUTTON"),expression:"$t('FILTER.CUSTOM_VIEWS.EDIT.EDIT_BUTTON')",modifiers:{"top-end":!0}}],attrs:{size:"tiny",variant:"smooth","color-scheme":"secondary",icon:"edit"},on:{click:t.onToggleAdvanceFiltersModal}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("FILTER.CUSTOM_VIEWS.DELETE.DELETE_BUTTON"),expression:"$t('FILTER.CUSTOM_VIEWS.DELETE.DELETE_BUTTON')",modifiers:{"top-end":!0}}],attrs:{size:"tiny",variant:"smooth","color-scheme":"alert",icon:"delete"},on:{click:t.onClickOpenDeleteFoldersModal}})],1):e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.right",value:t.$t("FILTER.TOOLTIP_LABEL"),expression:"$t('FILTER.TOOLTIP_LABEL')",modifiers:{right:!0}}],attrs:{variant:"smooth","color-scheme":"secondary",icon:"filter",size:"tiny"},on:{click:t.onToggleAdvanceFiltersModal}}),t._v(" "),t.hasAppliedFiltersOrActiveFolders?t._e():e("conversation-basic-filter",{on:{changeFilter:t.onBasicFilterChange}})],1)]),t._v(" "),t.showAddFoldersModal?e("add-custom-views",{attrs:{"custom-views-query":t.foldersQuery,"open-last-saved-item":t.openLastSavedItemInFolder},on:{close:t.onCloseAddFoldersModal}}):t._e(),t._v(" "),t.showDeleteFoldersModal?e("delete-custom-views",{attrs:{"show-delete-popup":t.showDeleteFoldersModal,"active-custom-view":t.activeFolder,"custom-views-id":t.foldersId,"open-last-item-after-delete":t.openLastItemAfterDeleteInFolder},on:{"update:showDeletePopup":function(e){t.showDeleteFoldersModal=e},"update:show-delete-popup":function(e){t.showDeleteFoldersModal=e},close:t.onCloseDeleteFoldersModal}}):t._e(),t._v(" "),t.hasAppliedFiltersOrActiveFolders?t._e():e("chat-type-tabs",{staticClass:"tab--chat-type",attrs:{items:t.assigneeTabItems,"active-tab":t.activeAssigneeTab},on:{chatTabChange:t.updateAssigneeTab}}),t._v(" "),t.chatListLoading||t.conversationList.length?t._e():e("p",{staticClass:"overflow-auto p-4 flex justify-center items-center"},[t._v("\n    "+t._s(t.$t("CHAT_LIST.LIST.404"))+"\n  ")]),t._v(" "),t.selectedConversations.length?e("conversation-bulk-actions",{attrs:{conversations:t.selectedConversations,"all-conversations-selected":t.allConversationsSelected,"selected-inboxes":t.uniqueInboxes,"show-open-action":t.allSelectedConversationsStatus("open"),"show-resolved-action":t.allSelectedConversationsStatus("resolved"),"show-snoozed-action":t.allSelectedConversationsStatus("snoozed")},on:{"select-all-conversations":t.selectAllConversations,"assign-agent":t.onAssignAgent,"update-conversations":t.onUpdateConversations,"assign-labels":t.onAssignLabels,"assign-team":t.onAssignTeamsForBulk}}):t._e(),t._v(" "),e("div",{ref:"activeConversation",staticClass:"conversations-list flex-1",class:{"overflow-hidden":t.isContextMenuOpen}},[e("div",t._l(t.conversationList,(function(n){return e("conversation-card",{key:n.id,attrs:{"active-label":t.label,"team-id":t.teamId,"folders-id":t.foldersId,chat:n,"conversation-type":t.conversationType,"show-assignee":t.showAssigneeInConversationCard,selected:t.isConversationSelected(n.id)},on:{"select-conversation":t.selectConversation,"de-select-conversation":t.deSelectConversation,"assign-agent":t.onAssignAgent,"assign-team":t.onAssignTeam,"assign-label":t.onAssignLabels,"update-conversation-status":t.toggleConversationStatus,"context-menu-toggle":t.onContextMenuToggle,"mark-as-unread":t.markAsUnread,"assign-priority":t.assignPriority}})})),1),t._v(" "),t.chatListLoading?e("div",{staticClass:"text-center"},[e("span",{staticClass:"spinner mt-4 mb-4"})]):t._e(),t._v(" "),t.hasCurrentPageEndReached||t.chatListLoading?t._e():e("woot-button",{staticClass:"load-more--button",attrs:{variant:"clear",size:"expanded"},on:{click:t.loadMoreConversations}},[t._v("\n      "+t._s(t.$t("CHAT_LIST.LOAD_MORE_CONVERSATIONS"))+"\n    ")]),t._v(" "),t.showEndOfListMessage?e("p",{staticClass:"text-center text-muted p-4"},[t._v("\n      "+t._s(t.$t("CHAT_LIST.EOF"))+"\n    ")]):t._e()],1),t._v(" "),e("woot-modal",{attrs:{show:t.showAdvancedFilters,"on-close":t.closeAdvanceFiltersModal,size:"medium"},on:{"update:show":function(e){t.showAdvancedFilters=e}}},[t.showAdvancedFilters?e("conversation-advanced-filter",{attrs:{"initial-filter-types":t.advancedFilterTypes,"initial-applied-filters":t.appliedFilter,"active-folder-name":t.activeFolderName,"on-close":t.closeAdvanceFiltersModal,"is-folder-view":t.hasActiveFolders},on:{applyFilter:t.onApplyFilter,updateFolder:t.onUpdateSavedFilter}}):t._e()],1)],2)}),[],!1,null,"33196bac",null).exports),Rt=n(2816),Lt=n(2817),Pt={props:{title:{type:String,required:!0},icon:{type:String,default:""},emoji:{type:String,default:""},value:{type:[String,Number],default:""},compact:{type:Boolean,default:!1}}},Mt=Object(C.a)(Pt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"overflow-auto",class:t.compact?"py-0 px-0":"py-3 px-4"},[e("div",{staticClass:"items-center flex justify-between mb-1.5"},[e("span",{staticClass:"text-slate-800 font-medium dark:text-slate-100 text-sm"},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),t._t("button")],2),t._v(" "),t.value?e("div",{staticClass:"break-words"},[t._t("default",(function(){return[t._v("\n      "+t._s(t.value)+"\n    ")]}))],2):t._e()])}),[],!1,null,null,null).exports,kt=n(2676),$t=n(2799),jt=n(2821),Dt=n(221),Ft=n(1940);function Ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Vt={components:{Spinner:H.a,LabelDropdown:$t.a,AddLabel:jt.a},mixins:[E.mixin,Ft.a,Dt.a,M.a],props:{conversationId:{type:Number,required:!0}},data:function(){return{selectedLabels:[],showSearchDropdownLabel:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(n),!0).forEach((function(e){Bt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(i.mapGetters)({conversationUiFlags:"conversationLabels/getUIFlags",labelUiFlags:"conversationLabels/getUIFlags"})),methods:{toggleLabels:function(){this.showSearchDropdownLabel=!this.showSearchDropdownLabel},closeDropdownLabel:function(){this.showSearchDropdownLabel=!1},handleKeyEvents:function(t){"l"!==Object(k.a)(t)||Object(k.x)(t)?Object(k.z)(t)&&this.showSearchDropdownLabel&&(this.closeDropdownLabel(),t.preventDefault()):(this.toggleLabels(),t.preventDefault())}}},Gt=Vt,Wt=(n(3179),Object(C.a)(Gt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"sidebar-labels-wrap"},[t.conversationUiFlags.isFetching?e("spinner"):e("div",{staticClass:"contact-conversation--list"},[e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.closeDropdownLabel,expression:"closeDropdownLabel"}],staticClass:"label-wrap",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.closeDropdownLabel.apply(null,arguments)}}},[e("add-label",{on:{add:t.toggleLabels}}),t._v(" "),t._l(t.activeLabels,(function(n){return e("woot-label",{key:n.id,attrs:{title:n.title,description:n.description,"show-close":!0,color:n.color,variant:"smooth"},on:{click:t.removeLabelFromConversation}})})),t._v(" "),e("div",{staticClass:"dropdown-wrap"},[e("div",{staticClass:"dropdown-pane",class:{"dropdown-pane--open":t.showSearchDropdownLabel}},[t.showSearchDropdownLabel?e("label-dropdown",{attrs:{"account-labels":t.accountLabels,"selected-labels":t.savedLabels,"allow-creation":t.isAdmin},on:{add:t.addLabelToConversation,remove:t.removeLabelFromConversation}}):t._e()],1)])],2)])],1)}),[],!1,null,"03237cda",null)),Ht=Wt.exports,zt=n(1925),Yt=n(2048),qt=n(90);function Kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kt(Object(n),!0).forEach((function(e){Qt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Zt={components:{ContactDetailsItem:Mt,MultiselectDropdown:kt.a,ConversationLabels:Ht},mixins:[zt.a,s.a,Yt.a],props:{conversationId:{type:[Number,String],required:!0},inboxId:{type:Number,default:void 0}},data:function(){return{priorityOptions:[{id:null,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.NONE"),thumbnail:"/assets/images/dashboard/priority/none.svg"},{id:qt.f.URGENT,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.URGENT"),thumbnail:"/assets/images/dashboard/priority/".concat(qt.f.URGENT,".svg")},{id:qt.f.HIGH,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.HIGH"),thumbnail:"/assets/images/dashboard/priority/".concat(qt.f.HIGH,".svg")},{id:qt.f.MEDIUM,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.MEDIUM"),thumbnail:"/assets/images/dashboard/priority/".concat(qt.f.MEDIUM,".svg")},{id:qt.f.LOW,name:this.$t("CONVERSATION.PRIORITY.OPTIONS.LOW"),thumbnail:"/assets/images/dashboard/priority/".concat(qt.f.LOW,".svg")}]}},computed:Xt(Xt({},Object(i.mapGetters)({currentChat:"getSelectedChat",currentUser:"getCurrentUser"})),{},{assignedAgent:{get:function(){return this.currentChat.meta.assignee},set:function(t){var e=this,n=t?t.id:0;this.$store.dispatch("setCurrentChatAssignee",t),this.$store.dispatch("assignAgent",{conversationId:this.currentChat.id,agentId:n}).then((function(){e.showAlert(e.$t("CONVERSATION.CHANGE_AGENT"))}))}},assignedTeam:{get:function(){return this.currentChat.meta.team},set:function(t){var e=this,n=this.currentChat.id,i=t?t.id:0;this.$store.dispatch("setCurrentChatTeam",{team:t,conversationId:n}),this.$store.dispatch("assignTeam",{conversationId:n,teamId:i}).then((function(){e.showAlert(e.$t("CONVERSATION.CHANGE_TEAM"))}))}},assignedPriority:{get:function(){var t=this;return this.priorityOptions.find((function(e){return e.id===t.currentChat.priority}))||this.priorityOptions[0]},set:function(t){var e,n=this,i=this.currentChat.id,s=null===(e=this.currentChat)||void 0===e?void 0:e.priority,a=t?t.id:null;this.$store.dispatch("setCurrentChatPriority",{priority:a,conversationId:i}),this.$store.dispatch("assignPriority",{conversationId:i,priority:a}).then((function(){n.$track(f.d.CHANGE_PRIORITY,{oldValue:s,newValue:a,from:"Conversation Sidebar"}),n.showAlert(n.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SUCCESSFUL",{priority:t.name,conversationId:i}))}))}},showSelfAssign:function(){return!this.assignedAgent||this.assignedAgent.id!==this.currentUser.id}}),methods:{onSelfAssign:function(){var t=this.currentUser,e={account_id:t.account_id,availability_status:t.availability_status,available_name:t.available_name,email:t.email,id:t.id,name:t.name,role:t.role,thumbnail:t.avatar_url};this.assignedAgent=e},onClickAssignAgent:function(t){this.assignedAgent&&this.assignedAgent.id===t.id?this.assignedAgent=null:this.assignedAgent=t},onClickAssignTeam:function(t){this.assignedTeam&&this.assignedTeam.id===t.id?this.assignedTeam=null:this.assignedTeam=t},onClickAssignPriority:function(t){var e=this.assignedPriority&&this.assignedPriority.id===t.id;this.assignedPriority=e?null:t}}},Jt=Object(C.a)(Zt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white dark:bg-slate-900"},[e("div",{staticClass:"multiselect-wrap--small"},[e("contact-details-item",{attrs:{compact:"",title:t.$t("CONVERSATION_SIDEBAR.ASSIGNEE_LABEL")},scopedSlots:t._u([{key:"button",fn:function(){return[t.showSelfAssign?e("woot-button",{attrs:{icon:"arrow-right",variant:"link",size:"small"},on:{click:t.onSelfAssign}},[t._v("\n          "+t._s(t.$t("CONVERSATION_SIDEBAR.SELF_ASSIGN"))+"\n        ")]):t._e()]},proxy:!0}])}),t._v(" "),e("multiselect-dropdown",{attrs:{options:t.agentsList,"selected-item":t.assignedAgent,"multiselector-title":t.$t("AGENT_MGMT.MULTI_SELECTOR.TITLE.AGENT"),"multiselector-placeholder":t.$t("AGENT_MGMT.MULTI_SELECTOR.PLACEHOLDER"),"no-search-result":t.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.NO_RESULTS.AGENT"),"input-placeholder":t.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.PLACEHOLDER.AGENT")},on:{click:t.onClickAssignAgent}})],1),t._v(" "),e("div",{staticClass:"multiselect-wrap--small"},[e("contact-details-item",{attrs:{compact:"",title:t.$t("CONVERSATION_SIDEBAR.TEAM_LABEL")}}),t._v(" "),e("multiselect-dropdown",{attrs:{options:t.teamsList,"selected-item":t.assignedTeam,"multiselector-title":t.$t("AGENT_MGMT.MULTI_SELECTOR.TITLE.TEAM"),"multiselector-placeholder":t.$t("AGENT_MGMT.MULTI_SELECTOR.PLACEHOLDER"),"no-search-result":t.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.NO_RESULTS.TEAM"),"input-placeholder":t.$t("AGENT_MGMT.MULTI_SELECTOR.SEARCH.PLACEHOLDER.INPUT")},on:{click:t.onClickAssignTeam}})],1),t._v(" "),e("div",{staticClass:"multiselect-wrap--small"},[e("contact-details-item",{attrs:{compact:"",title:t.$t("CONVERSATION.PRIORITY.TITLE")}}),t._v(" "),e("multiselect-dropdown",{attrs:{options:t.priorityOptions,"selected-item":t.assignedPriority,"multiselector-title":t.$t("CONVERSATION.PRIORITY.TITLE"),"multiselector-placeholder":t.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.SELECT_PLACEHOLDER"),"no-search-result":t.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.NO_RESULTS"),"input-placeholder":t.$t("CONVERSATION.PRIORITY.CHANGE_PRIORITY.INPUT_PLACEHOLDER")},on:{click:t.onClickAssignPriority}})],1),t._v(" "),e("contact-details-item",{attrs:{compact:"",title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_LABELS")}}),t._v(" "),e("conversation-labels",{attrs:{"conversation-id":t.conversationId}})],1)}),[],!1,null,null,null).exports,te={components:{Thumbnail:W.a},props:{usersList:{type:Array,default:function(){return[]}},size:{type:String,default:"24px"},showMoreThumbnailsCount:{type:Boolean,default:!1},moreThumbnailsText:{type:String,default:""},gap:{type:String,default:"normal",validator:function(t){return["normal","","tight"].includes(t)}}}},ee=(n(3180),Object(C.a)(te,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"overlapping-thumbnails"},[t._l(t.usersList,(function(n){return e("thumbnail",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.name,expression:"user.name"}],key:n.id,class:`overlapping-thumbnail gap-${t.gap}`,attrs:{title:n.name,src:n.thumbnail,username:n.name,"has-border":!0,size:t.size}})})),t._v(" "),t.showMoreThumbnailsCount?e("span",{staticClass:"thumbnail-more-text"},[t._v("\n    "+t._s(t.moreThumbnailsText)+"\n  ")]):t._e()],2)}),[],!1,null,"b76df1a2",null).exports),ne=n(2677);function ie(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function se(t){return function(t){if(Array.isArray(t))return ae(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return ae(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function re(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?re(Object(n),!0).forEach((function(e){ce(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ce(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var le={components:{Spinner:H.a,ThumbnailGroup:ee,MultiselectDropdownItems:ne.a},mixins:[s.a,zt.a,E.mixin],props:{conversationId:{type:[Number,String],required:!0},inboxId:{type:Number,default:void 0}},data:function(){return{selectedWatchers:[],showDropDown:!1}},computed:oe(oe({},Object(i.mapGetters)({watchersUiFlas:"conversationWatchers/getUIFlags",currentUser:"getCurrentUser"})),{},{watchersFromStore:function(){return this.$store.getters["conversationWatchers/getByConversationId"](this.conversationId)},watchersList:{get:function(){return this.selectedWatchers},set:function(t){this.selectedWatchers=se(t);var e=t.map((function(t){return t.id}));this.updateParticipant(e)}},isUserWatching:function(){var t=this;return this.selectedWatchers.some((function(e){return e.id===t.currentUser.id}))},thumbnailList:function(){return this.selectedWatchers.slice(0,4)},moreAgentCount:function(){return this.watchersList.length-4},moreThumbnailsText:function(){return this.moreAgentCount>1?this.$t("CONVERSATION_PARTICIPANTS.REMANING_PARTICIPANTS_TEXT",{count:this.moreAgentCount}):this.$t("CONVERSATION_PARTICIPANTS.REMANING_PARTICIPANT_TEXT",{count:1})},showMoreThumbs:function(){return this.moreAgentCount>0},totalWatchersText:function(){return this.selectedWatchers.length>1?this.$t("CONVERSATION_PARTICIPANTS.TOTAL_PARTICIPANTS_TEXT",{count:this.selectedWatchers.length}):this.$t("CONVERSATION_PARTICIPANTS.TOTAL_PARTICIPANT_TEXT",{count:1})}}),watch:{conversationId:function(){this.fetchParticipants()},watchersFromStore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.selectedWatchers=se(t)}},mounted:function(){this.fetchParticipants(),this.$store.dispatch("agents/get")},methods:{fetchParticipants:function(){var t=this.conversationId;this.$store.dispatch("conversationWatchers/show",{conversationId:t})},updateParticipant:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.conversationId,s=n.$t("CONVERSATION_PARTICIPANTS.API.SUCCESS_MESSAGE"),e.prev=2,e.next=5,n.$store.dispatch("conversationWatchers/update",{conversationId:i,userIds:t});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),s=(null===e.t0||void 0===e.t0?void 0:e.t0.message)||n.$t("CONVERSATION_PARTICIPANTS.API.ERROR_MESSAGE");case 10:return e.prev=10,n.showAlert(s),e.finish(10);case 13:n.fetchParticipants();case 14:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})),function(){var t=this,n=arguments;return new Promise((function(i,s){var a=e.apply(t,n);function r(t){ie(a,i,s,r,o,"next",t)}function o(t){ie(a,i,s,r,o,"throw",t)}r(void 0)}))})()},onOpenDropdown:function(){this.showDropDown=!0},onCloseDropdown:function(){this.showDropDown=!1},onClickItem:function(t){if(this.watchersList.some((function(e){return e.id===t.id}))){var e=this.watchersList.filter((function(e){return e.id!==t.id}));this.watchersList=se(e)}else this.watchersList=[].concat(se(this.watchersList),[t])},onSelfAssign:function(){this.watchersList=[].concat(se(this.selectedWatchers),[this.currentUser])}}},ue=le,de=(n(3181),Object(C.a)(ue,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative bg-white dark:bg-slate-900"},[e("div",{staticClass:"flex justify-between"},[e("div",{staticClass:"flex justify-between w-full mb-1"},[e("div",[t.watchersList.length?e("p",{staticClass:"total-watchers m-0 text-sm"},[t.watchersUiFlas.isFetching?e("spinner",{attrs:{size:"tiny"}}):t._e(),t._v("\n          "+t._s(t.totalWatchersText)+"\n        ")],1):e("p",{staticClass:"text-muted m-0 text-sm"},[t._v("\n          "+t._s(t.$t("CONVERSATION_PARTICIPANTS.NO_PARTICIPANTS_TEXT"))+"\n        ")])]),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:t.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"),expression:"$t('CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS')",modifiers:{left:!0}}],attrs:{title:t.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"),icon:"settings",size:"tiny",variant:"smooth","color-scheme":"secondary"},on:{click:t.onOpenDropdown}})],1)]),t._v(" "),e("div",{staticClass:"flex justify-between items-center"},[e("thumbnail-group",{attrs:{"more-thumbnails-text":t.moreThumbnailsText,"show-more-thumbnails-count":t.showMoreThumbs,"users-list":t.thumbnailList}}),t._v(" "),t.isUserWatching?e("p",{staticClass:"text-slate-300 dark:text-slate-300 m-0 text-sm"},[t._v("\n      "+t._s(t.$t("CONVERSATION_PARTICIPANTS.YOU_ARE_WATCHING"))+"\n    ")]):e("woot-button",{attrs:{icon:"arrow-right",variant:"link",size:"small"},on:{click:t.onSelfAssign}},[t._v("\n      "+t._s(t.$t("CONVERSATION_PARTICIPANTS.WATCH_CONVERSATION"))+"\n    ")])],1),t._v(" "),e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:()=>{t.onCloseDropdown()},expression:"\n      () => {\n        onCloseDropdown();\n      }\n    "}],staticClass:"dropdown-pane",class:{"dropdown-pane--open":t.showDropDown}},[e("div",{staticClass:"flex justify-between items-center mb-1"},[e("h4",{staticClass:"text-sm m-0 overflow-hidden whitespace-nowrap text-ellipsis text-slate-800 dark:text-slate-100"},[t._v("\n        "+t._s(t.$t("CONVERSATION_PARTICIPANTS.ADD_PARTICIPANTS"))+"\n      ")]),t._v(" "),e("woot-button",{attrs:{icon:"dismiss",size:"tiny","color-scheme":"secondary",variant:"clear"},on:{click:t.onCloseDropdown}})],1),t._v(" "),e("multiselect-dropdown-items",{attrs:{options:t.agentsList,"selected-items":t.selectedWatchers,"has-thumbnail":!0},on:{click:t.onClickItem}})],1)])}),[],!1,null,"b5fe0b06",null).exports),pe=n(2797),he=n(2737),fe=n(2735),me={components:{ContactDetailsItem:Mt,CustomAttributes:he.a,CustomAttributeSelector:fe.a},props:{conversationAttributes:{type:Object,default:function(){return{}}},contactAttributes:{type:Object,default:function(){return{}}}},STATIC_ATTRIBUTES:[{name:"initiated_at",label:"CONTACT_PANEL.INITIATED_AT"},{name:"referer",label:"CONTACT_PANEL.BROWSER"},{name:"browserName",label:"CONTACT_PANEL.BROWSER"},{name:"platformName",label:"CONTACT_PANEL.OS"},{name:"ipAddress",label:"CONTACT_PANEL.IP_ADDRESS"}],computed:{referer:function(){return this.conversationAttributes.referer},initiatedAt:function(){return this.conversationAttributes.initiated_at},browserName:function(){if(!this.conversationAttributes.browser)return"";var t=this.conversationAttributes.browser,e=t.browser_name,n=void 0===e?"":e,i=t.browser_version,s=void 0===i?"":i;return"".concat(n," ").concat(s)},browserLanguage:function(){return Object(o.c)(this.conversationAttributes.browser_language)},platformName:function(){if(!this.conversationAttributes.browser)return"";var t=this.conversationAttributes.browser,e=t.platform_name,n=t.platform_version;return"".concat(e||""," ").concat(n||"")},ipAddress:function(){return this.contactAttributes.created_at_ip},customAttributeRowClass:function(){var t=this;return["initiatedAt","referer","browserName","platformName","ipAddress"].filter((function(e){return!!t[e]})).length%2===0?"even":"odd"}}},ve=(n(3183),Object(C.a)(me,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"conversation--details"},[t.initiatedAt?e("contact-details-item",{staticClass:"conversation--attribute",attrs:{title:t.$t("CONTACT_PANEL.INITIATED_AT"),value:t.initiatedAt.timestamp}}):t._e(),t._v(" "),t.browserLanguage?e("contact-details-item",{staticClass:"conversation--attribute",attrs:{title:t.$t("CONTACT_PANEL.BROWSER_LANGUAGE"),value:t.browserLanguage}}):t._e(),t._v(" "),t.referer?e("contact-details-item",{staticClass:"conversation--attribute",attrs:{title:t.$t("CONTACT_PANEL.INITIATED_FROM"),value:t.referer}},[e("a",{attrs:{href:t.referer,rel:"noopener noreferrer nofollow",target:"_blank"}},[t._v("\n      "+t._s(t.referer)+"\n    ")])]):t._e(),t._v(" "),t.browserName?e("contact-details-item",{staticClass:"conversation--attribute",attrs:{title:t.$t("CONTACT_PANEL.BROWSER"),value:t.browserName}}):t._e(),t._v(" "),t.platformName?e("contact-details-item",{staticClass:"conversation--attribute",attrs:{title:t.$t("CONTACT_PANEL.OS"),value:t.platformName}}):t._e(),t._v(" "),t.ipAddress?e("contact-details-item",{staticClass:"conversation--attribute",attrs:{title:t.$t("CONTACT_PANEL.IP_ADDRESS"),value:t.ipAddress}}):t._e(),t._v(" "),e("custom-attributes",{class:t.customAttributeRowClass,attrs:{"attribute-type":"conversation_attribute","attribute-class":"conversation--attribute"}}),t._v(" "),e("custom-attribute-selector",{attrs:{"attribute-type":"conversation_attribute"}})],1)}),[],!1,null,"558cc601",null).exports),be=n(2683),ge=n.n(be),_e=n(2754);function ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ce(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Oe={props:{macro:{type:Object,required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(n),!0).forEach((function(e){Ce(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({resolvedMacro:function(){var t=this;return this.macro.actions.map((function(e){return{actionName:Object(_e.b)(e.action_name),actionValue:t.getActionValue(e.action_name,e.action_params)}}))}},Object(i.mapGetters)({labels:"labels/getLabels",teams:"teams/getTeams",agents:"agents/getAgents"})),methods:{getActionValue:function(t,e){return{assign_team:Object(_e.e)(this.teams,e),add_label:Object(_e.d)(this.labels,e),remove_label:Object(_e.d)(this.labels,e),assign_agent:Object(_e.c)(this.agents,e),mute_conversation:null,snooze_conversation:null,resolve_conversation:null,remove_assigned_team:null,send_webhook_event:e[0],send_message:e[0],send_email_transcript:e[0],add_private_note:e[0]}[t]||""}}},Ae=Oe;n(3184);function Te(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}var Ee={components:{MacroPreview:Object(C.a)(Ae,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"macro-preview absolute max-h-[22.5rem] w-64 rounded-md bg-white dark:bg-slate-800 shadow-lg bottom-8 right-8 overflow-y-auto p-4 text-left rtl:text-right"},[e("h6",{staticClass:"text-sm text-slate-800 dark:text-slate-100 mb-4"},[t._v("\n    "+t._s(t.macro.name)+"\n  ")]),t._v(" "),t._l(t.resolvedMacro,(function(n,i){return e("div",{key:i,staticClass:"relative pl-4 macro-block"},[i!==t.macro.actions.length-1?e("div",{staticClass:"top-[0.390625rem] absolute -bottom-1 left-0 w-px bg-slate-75 dark:bg-slate-600"}):t._e(),t._v(" "),e("div",{staticClass:"absolute -left-[0.21875rem] top-[0.2734375rem] w-2 h-2 rounded-full bg-white dark:bg-slate-200 border-2 border-solid border-slate-100 dark:border-slate-600"}),t._v(" "),e("p",{staticClass:"text-xs text-slate-500 dark:text-slate-400 mb-1"},[t._v("\n      "+t._s(n.actionName)+"\n    ")]),t._v(" "),e("p",{staticClass:"text-slate-800 dark:text-slate-100"},[t._v(t._s(n.actionValue))])])}))],2)}),[],!1,null,"68cc96ec",null).exports},mixins:[s.a,E.mixin],props:{macro:{type:Object,required:!0},conversationId:{type:[Number,String],required:!0}},data:function(){return{isExecuting:!1,showPreview:!1}},methods:{executeMacro:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.isExecuting=!0,e.next=4,n.$store.dispatch("macros/execute",{macroId:t.id,conversationIds:[n.conversationId]});case 4:n.$track(f.d.EXECUTED_A_MACRO),n.showAlert(n.$t("MACROS.EXECUTE.EXECUTED_SUCCESSFULLY")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n.showAlert(n.$t("MACROS.ERROR"));case 11:return e.prev=11,n.isExecuting=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})),function(){var t=this,n=arguments;return new Promise((function(i,s){var a=e.apply(t,n);function r(t){Te(a,i,s,r,o,"next",t)}function o(t){Te(a,i,s,r,o,"throw",t)}r(void 0)}))})()},toggleMacroPreview:function(){this.showPreview=!this.showPreview},closeMacroPreview:function(){this.showPreview=!1}}},we=Ee,Se=(n(3185),Object(C.a)(we,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"macro button secondary clear"},[e("span",{staticClass:"overflow-hidden whitespace-nowrap text-ellipsis"},[t._v(t._s(t.macro.name))]),t._v(" "),e("div",{staticClass:"macros-actions"},[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.left-start",value:t.$t("MACROS.EXECUTE.PREVIEW"),expression:"$t('MACROS.EXECUTE.PREVIEW')",modifiers:{"left-start":!0}}],staticClass:"margin-right-smaller",attrs:{size:"tiny",variant:"smooth","color-scheme":"secondary",icon:"info"},on:{click:function(e){return t.toggleMacroPreview(t.macro)}}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.left-start",value:t.$t("MACROS.EXECUTE.BUTTON_TOOLTIP"),expression:"$t('MACROS.EXECUTE.BUTTON_TOOLTIP')",modifiers:{"left-start":!0}}],attrs:{size:"tiny",variant:"smooth","color-scheme":"secondary",icon:"play-circle","is-loading":t.isExecuting},on:{click:function(e){return t.executeMacro(t.macro)}}})],1),t._v(" "),e("transition",{attrs:{name:"menu-slide"}},[t.showPreview?e("macro-preview",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.closeMacroPreview,expression:"closeMacroPreview"}],attrs:{macro:t.macro}}):t._e()],1)],1)}),[],!1,null,"e77b08d2",null).exports),Ie=n(353);function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Re={components:{MacroItem:Se},mixins:[Ie.a],props:{conversationId:{type:[Number,String],required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(n),!0).forEach((function(e){Ne(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(i.mapGetters)({macros:["macros/getMacros"],uiFlags:"macros/getUIFlags"})),mounted:function(){this.$store.dispatch("macros/get")}},Le=Re,Pe=(n(3186),Object(C.a)(Le,(function(){var t=this,e=t._self._c;return e("div",[t.uiFlags.isFetching||t.macros.length?t._e():e("div",{staticClass:"macros_list--empty-state"},[e("p",{staticClass:"flex h-full items-center flex-col justify-center"},[t._v("\n      "+t._s(t.$t("MACROS.LIST.404"))+"\n    ")]),t._v(" "),e("router-link",{attrs:{to:t.addAccountScoping("settings/macros")}},[e("woot-button",{staticClass:"macros_add-button",attrs:{variant:"smooth",icon:"add",size:"tiny"}},[t._v("\n        "+t._s(t.$t("MACROS.HEADER_BTN_TXT"))+"\n      ")])],1)],1),t._v(" "),t.uiFlags.isFetching?e("woot-loading-state",{attrs:{message:t.$t("MACROS.LOADING")}}):t._e(),t._v(" "),!t.uiFlags.isFetching&&t.macros.length?e("div",{staticClass:"macros-list"},t._l(t.macros,(function(n){return e("macro-item",{key:n.id,attrs:{macro:n,"conversation-id":t.conversationId}})})),1):t._e()],1)}),[],!1,null,"1863ef46",null).exports);function Me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Me(Object(n),!0).forEach((function(e){$e(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var je={components:{AccordionItem:Rt.a,ContactConversations:Lt.a,ContactInfo:pe.a,ConversationInfo:ve,CustomAttributes:he.a,CustomAttributeSelector:fe.a,ConversationAction:Jt,ConversationParticipant:de,draggable:ge.a,MacrosList:Pe},mixins:[s.a,I.a],props:{conversationId:{type:[Number,String],required:!0},inboxId:{type:Number,default:void 0},onToggle:{type:Function,default:function(){}}},data:function(){return{dragEnabled:!0,conversationSidebarItems:[],dragging:!1}},computed:ke(ke({},Object(i.mapGetters)({currentChat:"getSelectedChat",currentUser:"getCurrentUser",uiFlags:"inboxAssignableAgents/getUIFlags"})),{},{conversationAdditionalAttributes:function(){return this.currentConversationMetaData.additional_attributes||{}},channelType:function(){var t;return null===(t=this.currentChat.meta)||void 0===t?void 0:t.channel},contact:function(){return this.$store.getters["contacts/getContact"](this.contactId)},contactAdditionalAttributes:function(){return this.contact.additional_attributes||{}},contactId:function(){var t,e;return null===(t=this.currentChat.meta)||void 0===t||null===(e=t.sender)||void 0===e?void 0:e.id},currentConversationMetaData:function(){return this.$store.getters["conversationMetadata/getConversationMetadata"](this.conversationId)},hasContactAttributes:function(){var t=this.contact.custom_attributes;return t&&Object.keys(t).length}}),watch:{conversationId:function(t,e){t&&t!==e&&this.getContactDetails()},contactId:function(){this.getContactDetails()}},mounted:function(){this.conversationSidebarItems=this.conversationSidebarItemsOrder,this.getContactDetails(),this.$store.dispatch("attributes/get",0)},methods:{onPanelToggle:function(){this.onToggle()},getContactDetails:function(){this.contactId&&this.$store.dispatch("contacts/show",{id:this.contactId})},getAttributesByModel:function(){this.contactId&&this.$store.dispatch("contacts/show",{id:this.contactId})},openTranscriptModal:function(){this.showTranscriptModal=!0},onDragEnd:function(){this.dragging=!1,this.updateUISettings({conversation_sidebar_items_order:this.conversationSidebarItems})}}},De=(n(3187),Object(C.a)(je,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-300 border-slate-50 dark:border-slate-800/50 border-l rtl:border-l-0 rtl:border-r contact--panel overflow-y-auto"},[e("contact-info",{attrs:{contact:t.contact,"channel-type":t.channelType},on:{"toggle-panel":t.onPanelToggle}}),t._v(" "),e("draggable",{staticClass:"list-group",attrs:{list:t.conversationSidebarItems,disabled:!t.dragEnabled,animation:"200","ghost-class":"ghost",handle:".drag-handle"},on:{start:function(e){t.dragging=!0},end:t.onDragEnd}},[e("transition-group",t._l(t.conversationSidebarItems,(function(n){return e("div",{key:n.name,staticClass:"bg-white dark:bg-gray-800"},["conversation_actions"===n.name?e("div",{staticClass:"conversation--actions"},[e("accordion-item",{attrs:{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_ACTIONS"),"is-open":t.isContactSidebarItemOpen("is_conv_actions_open")},on:{click:e=>t.toggleSidebarUIState("is_conv_actions_open",e)}},[e("conversation-action",{attrs:{"conversation-id":t.conversationId,"inbox-id":t.inboxId}})],1)],1):"conversation_participants"===n.name?e("div",{staticClass:"conversation--actions"},[e("accordion-item",{attrs:{title:t.$t("CONVERSATION_PARTICIPANTS.SIDEBAR_TITLE"),"is-open":t.isContactSidebarItemOpen("is_conv_participants_open")},on:{click:e=>t.toggleSidebarUIState("is_conv_participants_open",e)}},[e("conversation-participant",{attrs:{"conversation-id":t.conversationId,"inbox-id":t.inboxId}})],1)],1):"conversation_info"===n.name?e("div",[e("accordion-item",{attrs:{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.CONVERSATION_INFO"),"is-open":t.isContactSidebarItemOpen("is_conv_details_open"),compact:""},on:{click:e=>t.toggleSidebarUIState("is_conv_details_open",e)}},[e("conversation-info",{attrs:{"conversation-attributes":t.conversationAdditionalAttributes,"contact-attributes":t.contactAdditionalAttributes}})],1)],1):"contact_attributes"===n.name?e("div",[e("accordion-item",{attrs:{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.CONTACT_ATTRIBUTES"),"is-open":t.isContactSidebarItemOpen("is_contact_attributes_open"),compact:""},on:{click:e=>t.toggleSidebarUIState("is_contact_attributes_open",e)}},[e("custom-attributes",{staticClass:"even",attrs:{"attribute-type":"contact_attribute","attribute-class":"conversation--attribute","contact-id":t.contact.id}}),t._v(" "),e("custom-attribute-selector",{attrs:{"attribute-type":"contact_attribute","contact-id":t.contact.id}})],1)],1):"previous_conversation"===n.name?e("div",[t.contact.id?e("accordion-item",{attrs:{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.PREVIOUS_CONVERSATION"),"is-open":t.isContactSidebarItemOpen("is_previous_conv_open")},on:{click:e=>t.toggleSidebarUIState("is_previous_conv_open",e)}},[e("contact-conversations",{attrs:{"contact-id":t.contact.id,"conversation-id":t.conversationId}})],1):t._e()],1):"macros"===n.name?e("woot-feature-toggle",{attrs:{"feature-key":"macros"}},[e("accordion-item",{attrs:{title:t.$t("CONVERSATION_SIDEBAR.ACCORDION.MACROS"),"is-open":t.isContactSidebarItemOpen("is_macro_open"),compact:""},on:{click:e=>t.toggleSidebarUIState("is_macro_open",e)}},[e("macros-list",{attrs:{"conversation-id":t.conversationId}})],1)],1):t._e()],1)})),0)],1)],1)}),[],!1,null,"ae90bd1e",null).exports),Fe=n(2657),Ue=n(92),Be=n(2663);function Ve(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}var Ge={mixins:[s.a],props:{show:{type:Boolean,default:!1},currentChat:{type:Object,default:function(){return{}}}},data:function(){return{email:"",selectedType:"",isSubmitting:!1}},validations:{email:{required:a.required,email:a.email,minLength:Object(a.minLength)(4)}},computed:{sentToOtherEmailAddress:function(){return"other_email_address"===this.selectedType},isFormValid:function(){return!!this.selectedType&&(!this.sentToOtherEmailAddress||!!this.email&&!this.$v.email.$error)},selectedEmailAddress:function(){var t=this.currentChat.meta;switch(this.selectedType){case"contact":return t.sender.email;case"assignee":return t.assignee.email;case"other_email_address":return this.email;default:return""}}},methods:{onCancel:function(){this.$emit("cancel")},onSubmit:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isSubmitting=!1,t.prev=1,t.next=4,e.$store.dispatch("sendEmailTranscript",{email:e.selectedEmailAddress,conversationId:e.currentChat.id});case 4:e.showAlert(e.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_SUCCESS")),e.onCancel(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.showAlert(e.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_ERROR"));case 11:return t.prev=11,e.isSubmitting=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})),function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){Ve(a,i,s,r,o,"next",t)}function o(t){Ve(a,i,s,r,o,"throw",t)}r(void 0)}))})()}}},We=Ge,He=Object(C.a)(We,(function(){var t=this,e=t._self._c;return e("woot-modal",{attrs:{show:t.show,"on-close":t.onCancel},on:{"update:show":function(e){t.show=e}}},[e("div",{staticClass:"h-auto overflow-auto flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":t.$t("EMAIL_TRANSCRIPT.TITLE"),"header-content":t.$t("EMAIL_TRANSCRIPT.DESC")}}),t._v(" "),e("form",{staticClass:"w-full",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"w-full"},[t.currentChat.meta.sender&&t.currentChat.meta.sender.email?e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedType,expression:"selectedType"}],attrs:{id:"contact",type:"radio",name:"selectedType",value:"contact"},domProps:{checked:t._q(t.selectedType,"contact")},on:{change:function(e){t.selectedType="contact"}}}),t._v(" "),e("label",{attrs:{for:"contact"}},[t._v(t._s(t.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_CONTACT")))])]):t._e(),t._v(" "),t.currentChat.meta.assignee?e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedType,expression:"selectedType"}],attrs:{id:"assignee",type:"radio",name:"selectedType",value:"assignee"},domProps:{checked:t._q(t.selectedType,"assignee")},on:{change:function(e){t.selectedType="assignee"}}}),t._v(" "),e("label",{attrs:{for:"assignee"}},[t._v(t._s(t.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_AGENT")))])]):t._e(),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedType,expression:"selectedType"}],attrs:{id:"other_email_address",type:"radio",name:"selectedType",value:"other_email_address"},domProps:{checked:t._q(t.selectedType,"other_email_address")},on:{change:function(e){t.selectedType="other_email_address"}}}),t._v(" "),e("label",{attrs:{for:"other_email_address"}},[t._v(t._s(t.$t("EMAIL_TRANSCRIPT.FORM.SEND_TO_OTHER_EMAIL_ADDRESS")))])]),t._v(" "),t.sentToOtherEmailAddress?e("div",{staticClass:"w-[50%] mt-1"},[e("label",{class:{error:t.$v.email.$error}},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email,expression:"email",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("EMAIL_TRANSCRIPT.FORM.EMAIL.PLACEHOLDER")},domProps:{value:t.email},on:{input:[function(e){e.target.composing||(t.email=e.target.value.trim())},t.$v.email.$touch],blur:function(e){return t.$forceUpdate()}}}),t._v(" "),t.$v.email.$error?e("span",{staticClass:"message"},[t._v("\n              "+t._s(t.$t("EMAIL_TRANSCRIPT.FORM.EMAIL.ERROR"))+"\n            ")]):t._e()])]):t._e()]),t._v(" "),e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("woot-submit-button",{attrs:{"button-text":t.$t("EMAIL_TRANSCRIPT.SUBMIT"),disabled:!t.isFormValid}}),t._v(" "),e("button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onCancel.apply(null,arguments)}}},[t._v("\n          "+t._s(t.$t("EMAIL_TRANSCRIPT.CANCEL"))+"\n        ")])],1)])],1)])}),[],!1,null,null,null),ze=He.exports,Ye=n(1904),qe={components:{DatePicker:n(2738).a},data:function(){return{snoozeTime:null,lang:{days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],yearFormat:"YYYY",monthFormat:"MMMM"}}},methods:{onClose:function(){this.$emit("close")},chooseTime:function(){this.$emit("choose-time",this.snoozeTime)},disabledDate:function(t){var e=new Date;return e.setDate(e.getDate()-1),t<e},disabledTime:function(t){var e=new Date;return e.setHours(e.getHours()+1),t<e}}},Ke=(n(3188),Object(C.a)(qe,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":t.$t("CONVERSATION.CUSTOM_SNOOZE.TITLE")}}),t._v(" "),e("form",{staticClass:"modal-content",on:{submit:function(e){return e.preventDefault(),t.chooseTime.apply(null,arguments)}}},[e("date-picker",{attrs:{type:"datetime",inline:"",lang:t.lang,"disabled-date":t.disabledDate,"disabled-time":t.disabledTime,"popup-style":{width:"100%"}},model:{value:t.snoozeTime,callback:function(e){t.snoozeTime=e},expression:"snoozeTime"}}),t._v(" "),e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("woot-button",{attrs:{variant:"clear"},on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n        "+t._s(t.$t("CONVERSATION.CUSTOM_SNOOZE.CANCEL"))+"\n      ")]),t._v(" "),e("woot-button",[t._v("\n        "+t._s(t.$t("CONVERSATION.CUSTOM_SNOOZE.APPLY"))+"\n      ")])],1)],1)],1)}),[],!1,null,"051fe420",null)),Xe=Ke.exports,Qe=n(3338),Ze=n(3339),Je=n(3340),tn=n(3427),en=n(3341),nn=n(3342),sn=n(3343),an=n(3344),rn=n(1942),on=n(286),cn=T.b.SNOOZE_OPTIONS,ln=function(t){var e=Object(Qe.a)(Object(Ze.a)(t,1));return Object(Je.a)(e)?e:Object(tn.a)(e,{days:(8-e.getDay())%7})},un=function(t){var e=Object(en.a)(Object(tn.a)(t,{months:1}));return Object(Je.a)(e)?e:Object(tn.a)(e,{days:(8-e.getDay())%7})},dn=function(t){return Object(tn.a)(t,{days:1})},pn=function(t){return Object(nn.a)(Object(sn.a)(Object(an.a)(t,9),0),0)},hn=n(207);function fn(t){return function(t){if(Array.isArray(t))return mn(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return mn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function vn(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function bn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function gn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bn(Object(n),!0).forEach((function(e){_n(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var yn={components:{WootDropdownItem:J.a,WootDropdownMenu:tt.a,CustomSnoozeModal:Xe},mixins:[E.mixin,s.a,M.a],props:{conversationId:{type:[String,Number],required:!0}},data:function(){return{isLoading:!1,showActionsDropdown:!1,STATUS_TYPE:T.b.STATUS_TYPE,showCustomSnoozeModal:!1}},computed:gn(gn({},Object(i.mapGetters)({currentChat:"getSelectedChat"})),{},{isOpen:function(){return this.currentChat.status===T.b.STATUS_TYPE.OPEN},isPending:function(){return this.currentChat.status===T.b.STATUS_TYPE.PENDING},isResolved:function(){return this.currentChat.status===T.b.STATUS_TYPE.RESOLVED},isSnoozed:function(){return this.currentChat.status===T.b.STATUS_TYPE.SNOOZED},buttonClass:function(){return this.isPending?"primary":this.isOpen?"success":this.isResolved?"warning":""},showAdditionalActions:function(){return!this.isPending&&!this.isSnoozed}}),mounted:function(){bus.$on(hn.f,this.onCmdSnoozeConversation),bus.$on(hn.c,this.onCmdOpenConversation),bus.$on(hn.d,this.onCmdResolveConversation)},destroyed:function(){bus.$off(hn.f,this.onCmdSnoozeConversation),bus.$off(hn.c,this.onCmdOpenConversation),bus.$off(hn.d,this.onCmdResolveConversation)},methods:{handleKeyEvents:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var i,s,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=document.querySelectorAll(".conversations-list .conversation"),Object(k.h)(t)&&n.$refs.arrowDownButton&&n.$refs.arrowDownButton.$el.click(),!Object(k.d)(t)){e.next=14;break}return s=document.querySelector("div.conversations-list div.conversation.active"),a=fn(i).indexOf(s),r=i.length-1,e.prev=6,e.next=9,n.toggleStatus(T.b.STATUS_TYPE.RESOLVED);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:Object(k.v)(t)&&(a<r?i[a+1].click():i.length>1&&(i[0].click(),document.querySelector(".conversations-list").scrollTop=0),t.preventDefault());case 14:case"end":return e.stop()}}),e,null,[[6,11]])})),function(){var t=this,n=arguments;return new Promise((function(i,s){var a=e.apply(t,n);function r(t){vn(a,i,s,r,o,"next",t)}function o(t){vn(a,i,s,r,o,"throw",t)}r(void 0)}))})()},onCmdSnoozeConversation:function(t){t===T.b.SNOOZE_OPTIONS.UNTIL_CUSTOM_TIME?this.showCustomSnoozeModal=!0:this.toggleStatus(this.STATUS_TYPE.SNOOZED,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=null;return t===cn.AN_HOUR_FROM_NOW?n=Object(tn.a)(e,{hours:1}):t===cn.UNTIL_TOMORROW?n=pn(dn(e)):t===cn.UNTIL_NEXT_WEEK?n=pn(ln(e)):t===cn.UNTIL_NEXT_MONTH&&(n=pn(un(e))),n?Object(Ye.a)(n):null}(t)||null)},chooseSnoozeTime:function(t){this.showCustomSnoozeModal=!1,t&&this.toggleStatus(this.STATUS_TYPE.SNOOZED,Object(Ye.a)(t))},hideCustomSnoozeModal:function(){this.showCustomSnoozeModal=!1},onCmdOpenConversation:function(){this.toggleStatus(this.STATUS_TYPE.OPEN)},onCmdResolveConversation:function(){this.toggleStatus(this.STATUS_TYPE.RESOLVED)},showOpenButton:function(){return this.isResolved||this.isSnoozed},closeDropdown:function(){this.showActionsDropdown=!1},openDropdown:function(){this.showActionsDropdown=!0},toggleStatus:function(t,e){var n=this;this.closeDropdown(),this.isLoading=!0,this.$store.dispatch("toggleStatus",{conversationId:this.currentChat.id,status:t,snoozedUntil:e}).then((function(){n.showAlert(n.$t("CONVERSATION.CHANGE_STATUS")),n.isLoading=!1}))},openSnoozeModal:function(){document.querySelector("ninja-keys").open({parent:"snooze_conversation"})}}},Cn=yn;n(3189);function On(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function An(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tn={components:{EmailTranscriptModal:ze,ResolveAction:Object(C.a)(Cn,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"resolve-actions relative flex items-center justify-end"},[e("div",{staticClass:"button-group"},[t.isOpen?e("woot-button",{attrs:{"class-names":"resolve","color-scheme":"success",icon:"checkmark",emoji:"\u2705","is-loading":t.isLoading},on:{click:t.onCmdResolveConversation}},[t._v("\n      "+t._s(t.$t("CONVERSATION.HEADER.RESOLVE_ACTION"))+"\n    ")]):t.isResolved?e("woot-button",{attrs:{"class-names":"resolve","color-scheme":"warning",icon:"arrow-redo",emoji:"\ud83d\udc40","is-loading":t.isLoading},on:{click:t.onCmdOpenConversation}},[t._v("\n      "+t._s(t.$t("CONVERSATION.HEADER.REOPEN_ACTION"))+"\n    ")]):t.showOpenButton?e("woot-button",{attrs:{"class-names":"resolve","color-scheme":"primary",icon:"person","is-loading":t.isLoading},on:{click:t.onCmdOpenConversation}},[t._v("\n      "+t._s(t.$t("CONVERSATION.HEADER.OPEN_ACTION"))+"\n    ")]):t._e(),t._v(" "),t.showAdditionalActions?e("woot-button",{ref:"arrowDownButton",attrs:{"color-scheme":t.buttonClass,disabled:t.isLoading,icon:"chevron-down",emoji:"\ud83d\udd3d"},on:{click:t.openDropdown}}):t._e()],1),t._v(" "),t.showActionsDropdown?e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.closeDropdown,expression:"closeDropdown"}],staticClass:"dropdown-pane dropdown-pane--open"},[e("woot-dropdown-menu",[t.isPending?t._e():e("woot-dropdown-item",[e("woot-button",{attrs:{variant:"clear","color-scheme":"secondary",size:"small",icon:"snooze"},on:{click:()=>t.openSnoozeModal()}},[t._v("\n          "+t._s(t.$t("CONVERSATION.RESOLVE_DROPDOWN.SNOOZE_UNTIL"))+"\n        ")])],1),t._v(" "),t.isPending?t._e():e("woot-dropdown-item",[e("woot-button",{attrs:{variant:"clear","color-scheme":"secondary",size:"small",icon:"book-clock"},on:{click:()=>t.toggleStatus(t.STATUS_TYPE.PENDING)}},[t._v("\n          "+t._s(t.$t("CONVERSATION.RESOLVE_DROPDOWN.MARK_PENDING"))+"\n        ")])],1)],1)],1):t._e(),t._v(" "),e("woot-modal",{attrs:{show:t.showCustomSnoozeModal,"on-close":t.hideCustomSnoozeModal},on:{"update:show":function(e){t.showCustomSnoozeModal=e}}},[e("custom-snooze-modal",{on:{close:t.hideCustomSnoozeModal,"choose-time":t.chooseSnoozeTime}})],1)],1)}),[],!1,null,"7b9fe08e",null).exports},mixins:[s.a,E.mixin],data:function(){return{showEmailActionsModal:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?On(Object(n),!0).forEach((function(e){An(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(i.mapGetters)({currentChat:"getSelectedChat"})),mounted:function(){bus.$on(hn.b,this.mute),bus.$on(hn.g,this.unmute),bus.$on(hn.e,this.toggleEmailActionsModal)},destroyed:function(){bus.$off(hn.b,this.mute),bus.$off(hn.g,this.unmute),bus.$off(hn.e,this.toggleEmailActionsModal)},methods:{mute:function(){this.$store.dispatch("muteConversation",this.currentChat.id),this.showAlert(this.$t("CONTACT_PANEL.MUTED_SUCCESS"))},unmute:function(){this.$store.dispatch("unmuteConversation",this.currentChat.id),this.showAlert(this.$t("CONTACT_PANEL.UNMUTED_SUCCESS"))},toggleEmailActionsModal:function(){this.showEmailActionsModal=!this.showEmailActionsModal}}},En=Tn,wn=(n(3190),Object(C.a)(En,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex actions--container relative items-center gap-2"},[t.currentChat.muted?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:t.$t("CONTACT_PANEL.UNMUTE_CONTACT"),expression:"$t('CONTACT_PANEL.UNMUTE_CONTACT')",modifiers:{left:!0}}],attrs:{variant:"clear","color-scheme":"secondary",icon:"speaker-1"},on:{click:t.unmute}}):e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("CONTACT_PANEL.MUTE_CONTACT"),expression:"$t('CONTACT_PANEL.MUTE_CONTACT')"}],attrs:{variant:"clear","color-scheme":"secondary",icon:"speaker-mute"},on:{click:t.mute}}),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("CONTACT_PANEL.SEND_TRANSCRIPT"),expression:"$t('CONTACT_PANEL.SEND_TRANSCRIPT')"}],attrs:{variant:"clear","color-scheme":"secondary",icon:"share"},on:{click:t.toggleEmailActionsModal}}),t._v(" "),e("resolve-action",{attrs:{"conversation-id":t.currentChat.id,status:t.currentChat.status}}),t._v(" "),t.showEmailActionsModal?e("email-transcript-modal",{attrs:{show:t.showEmailActionsModal,"current-chat":t.currentChat},on:{cancel:t.toggleEmailActionsModal}}):t._e()],1)}),[],!1,null,"23d30f24",null).exports);function Sn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function In(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sn(Object(n),!0).forEach((function(e){xn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Nn={components:{BackButton:Fe.a,InboxName:Be.a,MoreActions:wn,Thumbnail:W.a},mixins:[Ue.c,zt.a,M.a],props:{chat:{type:Object,default:function(){}},isContactPanelOpen:{type:Boolean,default:!1},showBackButton:{type:Boolean,default:!1}},computed:In(In({},Object(i.mapGetters)({uiFlags:"inboxAssignableAgents/getUIFlags",currentChat:"getSelectedChat"})),{},{chatMetadata:function(){return this.chat.meta},backButtonUrl:function(){var t=this.$route,e=t.params,n=e.accountId,i=e.inbox_id,s=e.label,a=e.teamId,r=t.name;return Object(bt.a)({accountId:n,inboxId:i,label:s,teamId:a,conversationType:"conversation_mentions"===r?"mention":""})},isHMACVerified:function(){return!this.isAWebWidgetInbox||this.chatMetadata.hmac_verified},currentContact:function(){return this.$store.getters["contacts/getContact"](this.chat.meta.sender.id)},isSnoozed:function(){return this.currentChat.status===T.b.STATUS_TYPE.SNOOZED},snoozedDisplayText:function(){var t=this.currentChat.snoozed_until;return t?"".concat(this.$t("CONVERSATION.HEADER.SNOOZED_UNTIL")," ").concat(function(t){if(!t)return null;var e=new Date(t);return Object(rn.a)(e)?Object(on.a)(e,"h.mmaaa"):t?Object(on.a)(e,"d MMM, h.mmaaa"):null}(t)):this.$t("CONVERSATION.HEADER.SNOOZED_UNTIL_NEXT_REPLY")},contactPanelToggleText:function(){return"".concat(this.isContactPanelOpen?this.$t("CONVERSATION.HEADER.CLOSE"):this.$t("CONVERSATION.HEADER.OPEN")," ").concat(this.$t("CONVERSATION.HEADER.DETAILS"))},inbox:function(){var t=this.chat.inbox_id;return this.$store.getters["inboxes/getInbox"](t)},hasMultipleInboxes:function(){return this.$store.getters["inboxes/getInboxes"].length>1}}),methods:{handleKeyEvents:function(t){Object(k.j)(t)&&this.$emit("contact-panel-toggle")}}},Rn=(n(3191),Object(C.a)(Nn,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white dark:bg-slate-900 flex justify-between items-center py-2 px-4 border-b border-slate-50 dark:border-slate-800/50 flex-col md:flex-row"},[e("div",{staticClass:"flex-1 w-full min-w-0 flex flex-col md:flex-row items-center justify-center"},[e("div",{staticClass:"flex justify-start items-center mr-4 rtl:mr-0 rtl:ml-4 min-w-0 w-[inherit]"},[t.showBackButton?e("back-button",{staticClass:"ltr:ml-0 rtl:mr-0 rtl:ml-4",attrs:{"back-url":t.backButtonUrl}}):t._e(),t._v(" "),e("Thumbnail",{attrs:{src:t.currentContact.thumbnail,badge:t.inboxBadge,username:t.currentContact.name,status:t.currentContact.availability_status}}),t._v(" "),e("div",{staticClass:"items-start flex flex-col ml-2 rtl:ml-0 rtl:mr-2 min-w-0 w-[inherit] overflow-hidden"},[e("div",{staticClass:"flex items-center flex-row gap-1 m-0 p-0 w-[inherit]"},[e("woot-button",{staticClass:"[&>span]:overflow-hidden [&>span]:whitespace-nowrap [&>span]:text-ellipsis min-w-0",attrs:{variant:"link","color-scheme":"secondary"},on:{click:function(e){return e.preventDefault(),t.$emit("contact-panel-toggle")}}},[e("span",{staticClass:"text-base leading-tight text-slate-900 dark:text-slate-100"},[t._v("\n              "+t._s(t.currentContact.name)+"\n            ")])]),t._v(" "),t.isHMACVerified?t._e():e("fluent-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("CONVERSATION.UNVERIFIED_SESSION"),expression:"$t('CONVERSATION.UNVERIFIED_SESSION')"}],staticClass:"text-yellow-600 dark:text-yellow-500 my-0 mx-0 min-w-[14px]",attrs:{size:"14",icon:"warning"}})],1),t._v(" "),e("div",{staticClass:"conversation--header--actions items-center flex text-xs gap-2 text-ellipsis overflow-hidden whitespace-nowrap"},[t.hasMultipleInboxes?e("inbox-name",{attrs:{inbox:t.inbox}}):t._e(),t._v(" "),t.isSnoozed?e("span",{staticClass:"font-medium text-yellow-600 dark:text-yellow-500"},[t._v("\n            "+t._s(t.snoozedDisplayText)+"\n          ")]):t._e(),t._v(" "),e("woot-button",{staticClass:"p-0",attrs:{size:"small",variant:"link"},on:{click:function(e){return t.$emit("contact-panel-toggle")}}},[t._v("\n            "+t._s(t.contactPanelToggleText)+"\n          ")])],1)])],1),t._v(" "),e("div",{staticClass:"header-actions-wrap items-center flex flex-row flex-grow justify-end mt-3 lg:mt-0",class:{"justify-end":t.isContactPanelOpen}},[e("more-actions",{attrs:{"conversation-id":t.currentChat.id}})],1)])])}),[],!1,null,"b1dbccf4",null).exports),Ln={components:{LoadingState:n(361).a},props:{config:{type:Array,default:function(){return[]}},currentChat:{type:Object,default:function(){return{}}},isVisible:{type:Boolean,default:!1},position:{type:Number,required:!0}},data:function(){return{hasOpenedAtleastOnce:!1,iframeLoading:!0}},computed:{dashboardAppContext:function(){return{conversation:this.currentChat,contact:this.$store.getters["contacts/getContact"](this.contactId),currentAgent:this.currentAgent}},contactId:function(){var t,e,n;return null===(t=this.currentChat)||void 0===t||null===(e=t.meta)||void 0===e||null===(n=e.sender)||void 0===n?void 0:n.id},currentAgent:function(){var t=this.$store.getters.getCurrentUser;return{id:t.id,name:t.name,email:t.email}}},watch:{isVisible:function(){this.isVisible&&(this.hasOpenedAtleastOnce=!0)}},mounted:function(){var t=this;window.onmessage=function(e){"string"===typeof e.data&&"chatwoot-dashboard-app:fetch-info"===e.data&&t.onIframeLoad(0)}},methods:{getFrameId:function(t){return"dashboard-app--frame-".concat(this.position,"-").concat(t)},onIframeLoad:function(t){var e=document.getElementById(this.getFrameId(t)),n={event:"appContext",data:this.dashboardAppContext};e.contentWindow.postMessage(JSON.stringify(n),"*"),this.iframeLoading=!1}}},Pn=(n(3192),Object(C.a)(Ln,(function(){var t=this,e=t._self._c;return t.hasOpenedAtleastOnce?e("div",{staticClass:"dashboard-app--container"},t._l(t.config,(function(n,i){return e("div",{key:i,staticClass:"dashboard-app--list"},[t.iframeLoading?e("loading-state",{staticClass:"dashboard-app_loading-container",attrs:{message:t.$t("DASHBOARD_APPS.LOADING_MESSAGE")}}):t._e(),t._v(" "),"frame"===n.type&&n.url?e("iframe",{attrs:{id:t.getFrameId(i),src:n.url},on:{load:()=>t.onIframeLoad(i)}}):t._e()],1)})),0):t._e()}),[],!1,null,"842ed448",null).exports);function Mn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function kn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mn(Object(n),!0).forEach((function(e){$n(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jn={mixins:[Ie.a],computed:kn(kn({},Object(i.mapGetters)({globalConfig:"globalConfig/get"})),{},{newInboxURL:function(){return this.addAccountScoping("settings/inboxes/new")},newAgentURL:function(){return this.addAccountScoping("settings/agents/list")},newLabelsURL:function(){return this.addAccountScoping("settings/labels/list")}})},Dn=(n(3193),Object(C.a)(jn,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"columns onboarding-wrap"},[e("div",{staticClass:"onboarding"},[e("div",{staticClass:"scroll-wrap"},[e("div",{staticClass:"features-item"},[e("h1",{staticClass:"page-title"},[e("span",[t._v(t._s(t.$t("ONBOARDING.TITLE",{installationName:t.globalConfig.installationName})))])]),t._v(" "),e("p",{staticClass:"intro-body"},[t._v("\n          "+t._s(t.$t("ONBOARDING.DESCRIPTION",{installationName:t.globalConfig.installationName}))+"\n        ")]),t._v(" "),"Ruutchat"===t.globalConfig.installationName?e("p",[e("a",{staticClass:"onboarding--link",attrs:{href:"https://www.chatwoot.com/changelog",target:"_blank",rel:"noopener nofollow noreferrer"}},[t._v("\n            "+t._s(t.$t("ONBOARDING.READ_LATEST_UPDATES"))+"\n          ")]),t._v(" "),e("span",[t._v("\ud83c\udf89")])]):t._e()]),t._v(" "),e("div",{staticClass:"features-item"},[e("h2",{staticClass:"block-title text-black-900 dark:text-slate-200"},[e("span",{staticClass:"emoji"},[t._v("\ud83d\udcac")]),t._v(" "),e("span",{staticClass:"conversation--title"},[t._v(t._s(t.$t("ONBOARDING.ALL_CONVERSATION.TITLE")))])]),t._v(" "),e("p",{staticClass:"intro-body"},[t._v("\n          "+t._s(t.$t("ONBOARDING.ALL_CONVERSATION.DESCRIPTION"))+"\n        ")])]),t._v(" "),e("div",{staticClass:"features-item"},[e("h2",{staticClass:"block-title text-black-900 dark:text-slate-200"},[e("span",{staticClass:"emoji"},[t._v("\ud83d\udc65")]),t._v("\n          "+t._s(t.$t("ONBOARDING.TEAM_MEMBERS.TITLE"))+"\n        ")]),t._v(" "),e("p",{staticClass:"intro-body"},[t._v("\n          "+t._s(t.$t("ONBOARDING.TEAM_MEMBERS.DESCRIPTION"))+"\n        ")]),t._v(" "),e("router-link",{staticClass:"onboarding--link",attrs:{to:t.newAgentURL}},[t._v("\n          "+t._s(t.$t("ONBOARDING.TEAM_MEMBERS.NEW_LINK"))+"\n        ")])],1),t._v(" "),e("div",{staticClass:"features-item"},[e("h2",{staticClass:"block-title text-black-900 dark:text-slate-200"},[e("span",{staticClass:"emoji"},[t._v("\ud83d\udce5")]),t._v(t._s(t.$t("ONBOARDING.INBOXES.TITLE"))+"\n        ")]),t._v(" "),e("p",{staticClass:"intro-body"},[t._v("\n          "+t._s(t.$t("ONBOARDING.INBOXES.DESCRIPTION"))+"\n        ")]),t._v(" "),e("router-link",{staticClass:"onboarding--link",attrs:{to:t.newInboxURL}},[t._v("\n          "+t._s(t.$t("ONBOARDING.INBOXES.NEW_LINK"))+"\n        ")])],1),t._v(" "),e("div",{staticClass:"features-item"},[e("h2",{staticClass:"block-title text-black-900 dark:text-slate-200"},[e("span",{staticClass:"emoji"},[t._v("\ud83d\udd16")]),t._v(t._s(t.$t("ONBOARDING.LABELS.TITLE"))+"\n        ")]),t._v(" "),e("p",{staticClass:"intro-body"},[t._v("\n          "+t._s(t.$t("ONBOARDING.LABELS.DESCRIPTION"))+"\n        ")]),t._v(" "),e("router-link",{staticClass:"onboarding--link",attrs:{to:t.newLabelsURL}},[t._v("\n          "+t._s(t.$t("ONBOARDING.LABELS.NEW_LINK"))+"\n        ")])],1)])])])}),[],!1,null,"69f6d218",null).exports),Fn={components:{Hotkey:n(1944).a},data:function(){return{keyShortcuts:[{key:"K",description:this.$t("CONVERSATION.EMPTY_STATE.CMD_BAR")},{key:"/",description:this.$t("CONVERSATION.EMPTY_STATE.KEYBOARD_SHORTCUTS")}]}}},Un={components:{FeaturePlaceholder:Object(C.a)(Fn,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col gap-2 mt-9"},t._l(t.keyShortcuts,(function(n){return e("div",{key:n.key,staticClass:"flex gap-2 items-center"},[e("div",{staticClass:"flex gap-2 items-center"},[e("hotkey",{attrs:{"custom-class":"h-6 w-8 text-sm font-medium text-slate-700 dark:text-slate-100 bg-slate-100 dark:bg-slate-700 border-b-2 border-slate-300 dark:border-slate-500"}},[t._v("\n        \u2318\n      ")]),t._v(" "),e("hotkey",{attrs:{"custom-class":"h-6 w-8 text-sm font-medium text-slate-700 dark:text-slate-100 bg-slate-100 dark:bg-slate-700 border-b-2 border-slate-300 dark:border-slate-500"}},[t._v("\n        "+t._s(n.key)+"\n      ")])],1),t._v(" "),e("span",{staticClass:"text-sm text-slate-700 dark:text-slate-300 font-medium text-center"},[t._v("\n      "+t._s(n.description)+"\n    ")])])})),0)}),[],!1,null,null,null).exports},props:{message:{type:String,required:!0}}};function Bn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Vn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bn(Object(n),!0).forEach((function(e){Gn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wn={components:{OnboardingView:Dn,EmptyStateMessage:Object(C.a)(Un,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col items-center justify-center h-full"},[e("img",{staticClass:"m-4 w-32 hidden dark:block",attrs:{src:n(3194),alt:"No Chat dark"}}),t._v(" "),e("img",{staticClass:"m-4 w-32 block dark:hidden",attrs:{src:n(3195),alt:"No Chat"}}),t._v(" "),e("span",{staticClass:"text-sm text-slate-800 dark:text-slate-200 font-medium text-center"},[t._v("\n    "+t._s(t.message)+"\n    "),e("br")]),t._v(" "),e("feature-placeholder")],1)}),[],!1,null,null,null).exports},mixins:[Ie.a,Dt.a],props:{isOnExpandedLayout:{type:Boolean,default:!1}},computed:Vn(Vn({},Object(i.mapGetters)({currentChat:"getSelectedChat",allConversations:"getAllConversations",inboxesList:"inboxes/getInboxes",uiFlags:"inboxes/getUIFlags",loadingChatList:"getChatListLoadingStatus"})),{},{loadingIndicatorMessage:function(){return this.uiFlags.isFetching?this.$t("CONVERSATION.LOADING_INBOXES"):this.$t("CONVERSATION.LOADING_CONVERSATIONS")},conversationMissingMessage:function(){return this.isOnExpandedLayout?this.$t("CONVERSATION.404"):this.$t("CONVERSATION.SELECT_A_CONVERSATION")},newInboxURL:function(){return this.addAccountScoping("settings/inboxes/new")},emptyClassName:function(){return this.inboxesList.length||this.uiFlags.isFetching||this.loadingChatList||!this.isAdmin?"flex-1 min-w-0 px-0 flex flex-col items-center justify-center h-full":"h-full overflow-auto"}})},Hn=Object(C.a)(Wn,(function(){var t=this,e=t._self._c;return e("div",{class:t.emptyClassName},[t.uiFlags.isFetching||t.loadingChatList?e("woot-loading-state",{attrs:{message:t.loadingIndicatorMessage}}):t._e(),t._v(" "),t.inboxesList.length||t.uiFlags.isFetching||t.loadingChatList?t.uiFlags.isFetching||t.loadingChatList?t._e():e("div",{staticClass:"flex flex-col items-center justify-center h-full"},[t.allConversations.length?t.allConversations.length&&!t.currentChat.id?e("empty-state-message",{attrs:{message:t.conversationMissingMessage}}):t._e():e("empty-state-message",{attrs:{message:t.$t("CONVERSATION.NO_MESSAGE_1")}})],1):e("div",{staticClass:"clearfix"},[t.isAdmin?e("onboarding-view"):e("empty-state-message",{attrs:{message:t.$t("CONVERSATION.NO_INBOX_AGENT")}})],1)],1)}),[],!1,null,null,null).exports,zn=(n(49),n(65),n(1775),n(308),n(266),n(1945)),Yn=n(2724),qn={components:{MessagePreview:Yn.a},props:{message:{type:Object,required:!0}}},Kn=(n(3197),Object(C.a)(qn,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"reply-editor bg-slate-50 dark:bg-slate-800 rounded-md py-1 pl-2 pr-1 text-xs tracking-wide mt-2 flex items-center gap-1.5 -mx-2"},[e("fluent-icon",{staticClass:"flex-shrink-0 icon",attrs:{icon:"arrow-reply",size:"14"}}),t._v(" "),e("div",{staticClass:"flex-grow gap-1 mt-px text-xs truncate"},[t._v("\n    "+t._s(t.$t("CONVERSATION.REPLYBOX.REPLYING_TO"))+"\n    "),e("message-preview",{staticClass:"inline",attrs:{message:t.message,"show-message-type":!1,"default-empty-message":t.$t("CONVERSATION.REPLY_MESSAGE_NOT_FOUND")}})],1),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("CONVERSATION.REPLYBOX.DISMISS_REPLY"),expression:"$t('CONVERSATION.REPLYBOX.DISMISS_REPLY')"}],staticClass:"flex-shrink-0",attrs:{"color-scheme":"secondary",icon:"dismiss",variant:"clear",size:"tiny"},on:{click:function(e){return e.stopPropagation(),t.$emit("dismiss")}}})],1)}),[],!1,null,null,null).exports),Xn=n(1928),Qn=n(2743),Zn=n(1786),Jn={name:"ReplyTopPanel",mixins:[M.a],props:{mode:{type:String,default:Zn.b.REPLY},setReplyMode:{type:Function,default:function(){}},isMessageLengthReachingThreshold:{type:Boolean,default:function(){return!1}},charactersRemaining:{type:Number,default:function(){return 0}},popoutReplyBox:{type:Boolean,default:!1}},computed:{replyButtonClass:function(){return{"is-active":this.mode===Zn.b.REPLY}},noteButtonClass:function(){return{"is-active":this.mode===Zn.b.NOTE}},charLengthClass:function(){return this.charactersRemaining<0?"text-red-600":"text-slate-600"},characterLengthWarning:function(){return this.charactersRemaining<0?"".concat(-this.charactersRemaining," ").concat(Zn.a.NEGATIVE):"".concat(this.charactersRemaining," ").concat(Zn.a.UNDER_50)}},methods:{handleKeyEvents:function(t){Object(k.k)(t)&&this.handleNoteClick(),Object(k.g)(t)&&this.handleReplyClick()},handleReplyClick:function(){this.setReplyMode(Zn.b.REPLY)},handleNoteClick:function(){this.setReplyMode(Zn.b.NOTE)}}},ti=(n(3198),Object(C.a)(Jn,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-black-50 flex justify-between dark:bg-slate-800"},[e("div",{staticClass:"button-group"},[e("woot-button",{staticClass:"button--reply",class:t.replyButtonClass,attrs:{variant:"clear"},on:{click:t.handleReplyClick}},[t._v("\n      "+t._s(t.$t("CONVERSATION.REPLYBOX.REPLY"))+"\n    ")]),t._v(" "),e("woot-button",{staticClass:"button--note",class:t.noteButtonClass,attrs:{variant:"clear","color-scheme":"warning"},on:{click:t.handleNoteClick}},[t._v("\n      "+t._s(t.$t("CONVERSATION.REPLYBOX.PRIVATE_NOTE"))+"\n    ")])],1),t._v(" "),e("div",{staticClass:"flex items-center my-0 mx-4"},[t.isMessageLengthReachingThreshold?e("div",{staticClass:"text-xs"},[e("span",{class:t.charLengthClass},[t._v("\n        "+t._s(t.characterLengthWarning)+"\n      ")])]):t._e()]),t._v(" "),t.popoutReplyBox?e("woot-button",{attrs:{variant:"clear",icon:"dismiss","color-scheme":"secondary","class-names":"popout-button"},on:{click:function(e){return t.$emit("click")}}}):e("woot-button",{attrs:{variant:"clear",icon:"resize-large","color-scheme":"secondary","class-names":"popout-button"},on:{click:function(e){return t.$emit("click")}}})],1)}),[],!1,null,"4578360a",null).exports),ei=n(2739),ni=n(2729),ii=n.n(ni),si=n(2731),ai=n(75);n(62),n(63);function ri(t){return ri="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ri(t)}function oi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ci(t,e){return ci=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ci(t,e)}function li(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=di(t);if(e){var s=di(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return ui(this,n)}}function ui(t,e){return!e||"object"!==ri(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function di(t){return di=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},di(t)}var pi=new(function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ci(t,e)}(a,t);var e,n,i,s=li(a);function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,"integrations/dyte",{accountScoped:!0})}return e=a,(n=[{key:"createAMeeting",value:function(t){return axios.post("".concat(this.url,"/create_a_meeting"),{conversation_id:t})}},{key:"addParticipantToMeeting",value:function(t){return axios.post("".concat(this.url,"/add_participant_to_meeting"),{message_id:t})}}])&&oi(e.prototype,n),i&&oi(e,i),a}(n(40).a));function hi(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function fi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function mi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fi(Object(n),!0).forEach((function(e){vi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bi={mixins:[s.a],props:{conversationId:{type:Number,default:0}},data:function(){return{isLoading:!1}},computed:mi(mi({},Object(i.mapGetters)({appIntegrations:"integrations/getAppIntegrations"})),{},{isVideoIntegrationEnabled:function(){return this.appIntegrations.find((function(t){return"dyte"===t.id&&!!t.hooks.length}))}}),mounted:function(){this.appIntegrations.length||this.$store.dispatch("integrations/get")},methods:{onClick:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,t.next=4,pi.createAMeeting(e.conversationId);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),e.showAlert(e.$t("INTEGRATION_SETTINGS.DYTE.CREATE_ERROR"));case 9:return t.prev=9,e.isLoading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[1,6,9,12]])})),function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){hi(a,i,s,r,o,"next",t)}function o(t){hi(a,i,s,r,o,"throw",t)}r(void 0)}))})()}}},gi=bi,_i=Object(C.a)(gi,(function(){var t=this,e=t._self._c;return t.isVideoIntegrationEnabled?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("INTEGRATION_SETTINGS.DYTE.START_VIDEO_CALL_HELP_TEXT"),expression:"\n    $t('INTEGRATION_SETTINGS.DYTE.START_VIDEO_CALL_HELP_TEXT')\n  ",modifiers:{"top-end":!0}}],attrs:{icon:"video","is-loading":t.isLoading,"color-scheme":"secondary",variant:"smooth",size:"small"},on:{click:t.onClick}}):t._e()}),[],!1,null,null,null).exports,yi=n(1929);function Ci(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Oi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ai(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ti={mixins:[yi.a,s.a,I.a],data:function(){return{value:""}},validations:{value:{required:a.required}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Oi(Object(n),!0).forEach((function(e){Ai(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(i.mapGetters)({appIntegrations:"integrations/getAppIntegrations"})),methods:{onClose:function(){this.$emit("close")},onDismiss:function(){this.showAlert(this.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.DISMISS_MESSAGE")),this.updateUISettings({is_open_ai_cta_modal_dismissed:!0}),this.onClose()},finishOpenAI:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,i,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={app_id:"openai",settings:{api_key:e.value}},t.prev=1,t.next=4,e.$store.dispatch("integrations/createHook",n);case 4:e.alertMessage=e.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.SUCCESS_MESSAGE"),e.recordAnalytics(f.g.ADDED_AI_INTEGRATION_VIA_CTA_BUTTON),e.onClose(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),a=null===t.t0||void 0===t.t0||null===(i=t.t0.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message,e.alertMessage=a||e.$t("INTEGRATION_APPS.ADD.API.ERROR_MESSAGE");case 13:return t.prev=13,e.showAlert(e.alertMessage),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,9,13,16]])})),function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){Ci(a,i,s,r,o,"next",t)}function o(t){Ci(a,i,s,r,o,"throw",t)}r(void 0)}))})()},openOpenAIDoc:function(){window.open("https://www.chatwoot.com/blog/v2-17","_blank")}}},Ei=Ti,wi=Object(C.a)(Ei,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"px-0 min-w-0 flex-1"},[e("woot-modal-header",{attrs:{"header-title":t.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.TITLE"),"header-content":t.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.DESC")}}),t._v(" "),e("form",{staticClass:"flex flex-wrap flex-col modal-content",on:{submit:function(e){return e.preventDefault(),t.finishOpenAI.apply(null,arguments)}}},[e("div",{staticClass:"mt-2 w-full"},[e("woot-input",{class:{error:t.$v.value.$error},attrs:{type:"text",placeholder:t.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.KEY_PLACEHOLDER")},on:{blur:t.$v.value.$touch},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),e("div",{staticClass:"flex flex-row justify-between gap-2 py-2 px-0 w-full"},[e("woot-button",{attrs:{variant:"link"},on:{click:function(e){return e.preventDefault(),t.openOpenAIDoc.apply(null,arguments)}}},[t._v("\n        "+t._s(t.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.NEED_HELP"))+"\n      ")]),t._v(" "),e("div",{staticClass:"flex items-center gap-1"},[e("woot-button",{attrs:{variant:"clear"},on:{click:function(e){return e.preventDefault(),t.onDismiss.apply(null,arguments)}}},[t._v("\n          "+t._s(t.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.DISMISS"))+"\n        ")]),t._v(" "),e("woot-button",{attrs:{"is-disabled":t.$v.value.$invalid}},[t._v("\n          "+t._s(t.$t("INTEGRATION_SETTINGS.OPEN_AI.CTA_MODAL.BUTTONS.FINISH"))+"\n        ")])],1)],1)])],1)}),[],!1,null,null,null),Si=wi.exports,Ii=n(1912);function xi(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Ni(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){xi(a,i,s,r,o,"next",t)}function o(t){xi(a,i,s,r,o,"throw",t)}r(void 0)}))}}function Ri(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Li(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ri(Object(n),!0).forEach((function(e){Pi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ri(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mi={components:{AILoader:n(3199).default},mixins:[yi.a,Ii.a],props:{aiOption:{type:String,required:!0}},data:function(){return{generatedContent:"",isGenerating:!0}},computed:Li(Li({},Object(i.mapGetters)({appIntegrations:"integrations/getAppIntegrations"})),{},{headerTitle:function(){var t,e=null===(t=this.aiOption)||void 0===t?void 0:t.toUpperCase();return e?this.$t("INTEGRATION_SETTINGS.OPEN_AI.WITH_AI",{option:this.$t("INTEGRATION_SETTINGS.OPEN_AI.OPTIONS.".concat(e))}):""}}),mounted:function(){this.generateAIContent(this.aiOption)},methods:{onClose:function(){this.$emit("close")},generateAIContent:function(){var t=arguments,e=this;return Ni(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:"rephrase",e.isGenerating=!0,n.next=4,e.processEvent(i);case 4:e.generatedContent=n.sent,e.isGenerating=!1;case 6:case"end":return n.stop()}}),n)})))()},applyText:function(){this.recordAnalytics(this.aiOption),this.$emit("apply-text",this.generatedContent),this.onClose()}}},ki=Mi,$i=(n(3201),Object(C.a)(ki,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col"},[e("woot-modal-header",{attrs:{"header-title":t.headerTitle}}),t._v(" "),e("form",{staticClass:"modal-content flex flex-col w-full",on:{submit:function(e){return e.preventDefault(),t.applyText.apply(null,arguments)}}},[t.draftMessage?e("div",{staticClass:"w-full"},[e("h4",{staticClass:"text-base mt-1 text-slate-700 dark:text-slate-100"},[t._v("\n        "+t._s(t.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.DRAFT_TITLE"))+"\n      ")]),t._v(" "),e("p",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.formatMessage(t.draftMessage,!1),expression:"formatMessage(draftMessage, false)"}]}),t._v(" "),e("h4",{staticClass:"text-base mt-1 text-slate-700 dark:text-slate-100"},[t._v("\n        "+t._s(t.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.GENERATED_TITLE"))+"\n      ")])]):t._e(),t._v(" "),e("div",[t.isGenerating?e("AILoader"):e("p",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.formatMessage(t.generatedContent,!1),expression:"formatMessage(generatedContent, false)"}]})],1),t._v(" "),e("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[e("woot-button",{attrs:{variant:"clear"},on:{click:function(e){return e.preventDefault(),t.onClose.apply(null,arguments)}}},[t._v("\n        "+t._s(t.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.BUTTONS.CANCEL"))+"\n      ")]),t._v(" "),e("woot-button",{attrs:{disabled:!t.generatedContent}},[t._v("\n        "+t._s(t.$t("INTEGRATION_SETTINGS.OPEN_AI.ASSISTANCE_MODAL.BUTTONS.APPLY"))+"\n      ")])],1)])],1)}),[],!1,null,"2a70b789",null)),ji=$i.exports,Di={methods:{onClick:function(){this.$emit("click")}}};n(3202);function Fi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ui(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fi(Object(n),!0).forEach((function(e){Bi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Bi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Vi={components:{AIAssistanceModal:ji,AICTAModal:Si,AIAssistanceCTAButton:Object(C.a)(Di,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative"},[e("woot-button",{attrs:{icon:"wand","color-scheme":"secondary",variant:"smooth",size:"small","class-names":"cta-btn cta-btn-light dark:cta-btn-dark hover:cta-btn-light-hover dark:hover:cta-btn-dark-hover"},on:{click:t.onClick}},[t._v("\n    "+t._s(t.$t("INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST"))+"\n  ")]),t._v(" "),e("div",{staticClass:"radar-ping-animation absolute top-0 right-0 -mt-1 -mr-1 rounded-full w-3 h-3 bg-woot-500 dark:bg-woot-500"}),t._v(" "),e("div",{staticClass:"absolute top-0 right-0 -mt-1 -mr-1 rounded-full w-3 h-3 bg-woot-500 dark:bg-woot-500 opacity-50"})],1)}),[],!1,null,"144769f1",null).exports},mixins:[Dt.a,M.a,yi.a,I.a],data:function(){return{showAIAssistanceModal:!1,showAICtaModal:!1,aiOption:"",initialMessage:""}},computed:Ui(Ui({},Object(i.mapGetters)({currentChat:"getSelectedChat",isAChatwootInstance:"globalConfig/isAChatwootInstance"})),{},{isAICTAModalDismissed:function(){return this.uiSettings.is_open_ai_cta_modal_dismissed},shouldShowAIAssistCTAButtonForAdmin:function(){return this.isAdmin&&!this.isAIIntegrationEnabled&&!this.isAICTAModalDismissed&&this.isAChatwootInstance},shouldShowAIAssistCTAButton:function(){return this.isAIIntegrationEnabled&&!this.isAICTAModalDismissed}}),mounted:function(){bus.$on(hn.a,this.onAIAssist),this.initialMessage=this.draftMessage},methods:{onKeyDownHandler:function(t){var e=Object(k.a)(t);["meta+z","ctrl+z"].includes(e)&&!!this.initialMessage&&(this.$emit("replace-text",this.initialMessage),this.initialMessage="")},hideAIAssistanceModal:function(){this.recordAnalytics("DISMISS_AI_SUGGESTION",{aiOption:this.aiOption}),this.showAIAssistanceModal=!1},openAIAssist:function(){this.isAICTAModalDismissed||this.updateUISettings({is_open_ai_cta_modal_dismissed:!0}),this.initialMessage=this.draftMessage,document.querySelector("ninja-keys").open({parent:"ai_assist"})},hideAICtaModal:function(){this.showAICtaModal=!1},openAICta:function(){this.showAICtaModal=!0},onAIAssist:function(t){this.aiOption=t,this.showAIAssistanceModal=!0},insertText:function(t){this.$emit("replace-text",t)}}},Gi=Object(C.a)(Vi,(function(){var t=this,e=t._self._c;return t.isFetchingAppIntegrations?t._e():e("div",[t.isAIIntegrationEnabled?e("div",{staticClass:"relative"},[t.shouldShowAIAssistCTAButton?e("AIAssistanceCTAButton",{on:{click:t.openAIAssist}}):e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST"),expression:"$t('INTEGRATION_SETTINGS.OPEN_AI.AI_ASSIST')",modifiers:{"top-end":!0}}],attrs:{icon:"wand","color-scheme":"secondary",variant:"smooth",size:"small"},on:{click:t.openAIAssist}}),t._v(" "),e("woot-modal",{attrs:{show:t.showAIAssistanceModal,"on-close":t.hideAIAssistanceModal},on:{"update:show":function(e){t.showAIAssistanceModal=e}}},[e("AIAssistanceModal",{attrs:{"ai-option":t.aiOption},on:{"apply-text":t.insertText,close:t.hideAIAssistanceModal}})],1)],1):t.shouldShowAIAssistCTAButtonForAdmin?e("div",{staticClass:"relative"},[e("AIAssistanceCTAButton",{on:{click:t.openAICta}}),t._v(" "),e("woot-modal",{attrs:{show:t.showAICtaModal,"on-close":t.hideAICtaModal},on:{"update:show":function(e){t.showAICtaModal=e}}},[e("AICTAModal",{on:{close:t.hideAICtaModal}})],1)],1):t._e()])}),[],!1,null,null,null).exports;function Wi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Hi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wi(Object(n),!0).forEach((function(e){zi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yi={name:"ReplyBottomPanel",components:{FileUpload:ii.a,VideoCallButton:_i,AIAssistanceButton:Gi},mixins:[M.a,I.a,Ue.c],props:{mode:{type:String,default:Zn.b.REPLY},onSend:{type:Function,default:function(){}},sendButtonText:{type:String,default:""},recordingAudioDurationText:{type:String,default:""},inbox:{type:Object,default:function(){return{}}},showFileUpload:{type:Boolean,default:!1},showAudioRecorder:{type:Boolean,default:!1},onFileUpload:{type:Function,default:function(){}},showEmojiPicker:{type:Boolean,default:!1},toggleEmojiPicker:{type:Function,default:function(){}},toggleAudioRecorder:{type:Function,default:function(){}},toggleAudioRecorderPlayPause:{type:Function,default:function(){}},isRecordingAudio:{type:Boolean,default:!1},recordingAudioState:{type:String,default:""},isSendDisabled:{type:Boolean,default:!1},showEditorToggle:{type:Boolean,default:!1},isOnPrivateNote:{type:Boolean,default:!1},enableMultipleFileUpload:{type:Boolean,default:!0},hasWhatsappTemplates:{type:Boolean,default:!1},conversationId:{type:Number,required:!0},message:{type:String,default:""},newConversationModalActive:{type:Boolean,default:!1},portalSlug:{type:String,required:!0}},computed:Hi(Hi({},Object(i.mapGetters)({accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"})),{},{isNote:function(){return this.mode===Zn.b.NOTE},wrapClass:function(){return{"is-note-mode":this.isNote}},buttonClass:function(){return{warning:this.isNote}},showAttachButton:function(){return this.showFileUpload||this.isNote},showAudioRecorderButton:function(){if(this.isALineChannel)return!1;var t=/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent);return this.isFeatureEnabledonAccount(this.accountId,ai.a.VOICE_RECORDER)&&this.showAudioRecorder&&!t},showAudioPlayStopButton:function(){return this.showAudioRecorder&&this.isRecordingAudio},allowedFileTypes:function(){return this.isATwilioWhatsAppChannel?qt.c:this.isALineChannel?qt.b:qt.a},enableDragAndDrop:function(){return!this.newConversationModalActive},audioRecorderPlayStopIcon:function(){switch(this.recordingAudioState){case"playing":return"microphone-pause";case"paused":case"stopped":return"microphone-play";default:return"microphone-stop"}},showMessageSignatureButton:function(){return!this.isOnPrivateNote},sendWithSignature:function(){return this.fetchSignatureFlagFromUiSettings(this.channelType)},signatureToggleTooltip:function(){return this.sendWithSignature?this.$t("CONVERSATION.FOOTER.DISABLE_SIGN_TOOLTIP"):this.$t("CONVERSATION.FOOTER.ENABLE_SIGN_TOOLTIP")},enableInsertArticleInReply:function(){return this.isFeatureEnabledonAccount(this.accountId,ai.a.INSERT_ARTICLE_IN_REPLY)&&this.portalSlug}}),mounted:function(){si.start()},methods:{handleKeyEvents:function(t){Object(k.b)(t)&&this.$refs.upload.$children[1].$el.click()},toggleMessageSignature:function(){this.setSignatureFlagForInbox(this.channelType,!this.sendWithSignature)},replaceText:function(t){this.$emit("replace-text",t)},toggleInsertArticle:function(){this.$emit("toggle-insert-article")}}},qi=(n(3203),Object(C.a)(Yi,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"bottom-box",class:t.wrapClass},[e("div",{staticClass:"left-wrap"},[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("CONVERSATION.REPLYBOX.TIP_EMOJI_ICON"),expression:"$t('CONVERSATION.REPLYBOX.TIP_EMOJI_ICON')",modifiers:{"top-end":!0}}],attrs:{title:t.$t("CONVERSATION.REPLYBOX.TIP_EMOJI_ICON"),icon:"emoji",emoji:"\ud83d\ude0a","color-scheme":"secondary",variant:"smooth",size:"small"},on:{click:t.toggleEmojiPicker}}),t._v(" "),e("file-upload",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("CONVERSATION.REPLYBOX.TIP_ATTACH_ICON"),expression:"$t('CONVERSATION.REPLYBOX.TIP_ATTACH_ICON')",modifiers:{"top-end":!0}}],ref:"upload",attrs:{"input-id":"conversationAttachment",size:16777216,accept:t.allowedFileTypes,multiple:t.enableMultipleFileUpload,drop:t.enableDragAndDrop,"drop-directory":!1,data:{direct_upload_url:"/rails/active_storage/direct_uploads",direct_upload:!0}},on:{"input-file":t.onFileUpload}},[t.showAttachButton?e("woot-button",{attrs:{"class-names":"button--upload",title:t.$t("CONVERSATION.REPLYBOX.TIP_ATTACH_ICON"),icon:"attach",emoji:"\ud83d\udcce","color-scheme":"secondary",variant:"smooth",size:"small"}}):t._e()],1),t._v(" "),t.showAudioRecorderButton?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("CONVERSATION.REPLYBOX.TIP_AUDIORECORDER_ICON"),expression:"$t('CONVERSATION.REPLYBOX.TIP_AUDIORECORDER_ICON')",modifiers:{"top-end":!0}}],attrs:{icon:t.isRecordingAudio?"microphone-off":"microphone",emoji:"\ud83c\udfa4","color-scheme":t.isRecordingAudio?"alert":"secondary",variant:"smooth",size:"small"},on:{click:t.toggleAudioRecorder}}):t._e(),t._v(" "),t.showEditorToggle?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("CONVERSATION.REPLYBOX.TIP_FORMAT_ICON"),expression:"$t('CONVERSATION.REPLYBOX.TIP_FORMAT_ICON')",modifiers:{"top-end":!0}}],attrs:{icon:"quote",emoji:"\ud83d\udd8a\ufe0f","color-scheme":"secondary",variant:"smooth",size:"small"},on:{click:function(e){return t.$emit("toggle-editor")}}}):t._e(),t._v(" "),t.showAudioPlayStopButton?e("woot-button",{attrs:{icon:t.audioRecorderPlayStopIcon,emoji:"\ud83c\udfa4","color-scheme":"secondary",variant:"smooth",size:"small"},on:{click:t.toggleAudioRecorderPlayPause}},[e("span",[t._v(t._s(t.recordingAudioDurationText))])]):t._e(),t._v(" "),t.showMessageSignatureButton?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.signatureToggleTooltip,expression:"signatureToggleTooltip",modifiers:{"top-end":!0}}],attrs:{icon:"signature","color-scheme":"secondary",variant:"smooth",size:"small",title:t.signatureToggleTooltip},on:{click:t.toggleMessageSignature}}):t._e(),t._v(" "),t.hasWhatsappTemplates?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:"Whatsapp Templates",expression:"'Whatsapp Templates'",modifiers:{"top-end":!0}}],attrs:{icon:"whatsapp","color-scheme":"secondary",variant:"smooth",size:"small",title:"Whatsapp Templates"},on:{click:function(e){return t.$emit("selectWhatsappTemplate")}}}):t._e(),t._v(" "),!t.isAWebWidgetInbox&&!t.isAPIInbox||t.isOnPrivateNote?t._e():e("video-call-button",{attrs:{"conversation-id":t.conversationId}}),t._v(" "),e("AIAssistanceButton",{attrs:{"conversation-id":t.conversationId,"is-private-note":t.isOnPrivateNote,message:t.message},on:{"replace-text":t.replaceText}}),t._v(" "),e("transition",{attrs:{name:"modal-fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.$refs.upload&&t.$refs.upload.dropActive,expression:"$refs.upload && $refs.upload.dropActive"}],staticClass:"fixed top-0 bottom-0 left-0 right-0 z-20 flex flex-col items-center justify-center w-full h-full gap-2 text-slate-600 dark:text-slate-200 bg-white_transparent dark:bg-black_transparent"},[e("fluent-icon",{attrs:{icon:"cloud-backup",size:"40"}}),t._v(" "),e("h4",{staticClass:"page-sub-title text-slate-600 dark:text-slate-200"},[t._v("\n          "+t._s(t.$t("CONVERSATION.REPLYBOX.DRAG_DROP"))+"\n        ")])],1)]),t._v(" "),t.enableInsertArticleInReply?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("HELP_CENTER.ARTICLE_SEARCH.OPEN_ARTICLE_SEARCH"),expression:"$t('HELP_CENTER.ARTICLE_SEARCH.OPEN_ARTICLE_SEARCH')",modifiers:{"top-end":!0}}],attrs:{icon:"document-text-link","color-scheme":"secondary",variant:"smooth",size:"small",title:t.$t("HELP_CENTER.ARTICLE_SEARCH.OPEN_ARTICLE_SEARCH")},on:{click:t.toggleInsertArticle}}):t._e()],1),t._v(" "),e("div",{staticClass:"right-wrap"},[e("woot-button",{attrs:{size:"small","class-names":t.buttonClass,"is-disabled":t.isSendDisabled},on:{click:t.onSend}},[t._v("\n      "+t._s(t.sendButtonText)+"\n    ")])],1)])}),[],!1,null,"3ff6b1ed",null).exports),Ki=(n(196),n(1774)),Xi={name:"ChatwootSearch",mixins:[M.a],props:{title:{type:String,default:"Chatwoot"}},data:function(){return{searchQuery:"",isInputFocused:!1}},mounted:function(){this.$refs.searchInput.focus()},methods:{onInput:function(t){this.$emit("search",t.target.value)},onClose:function(){this.$emit("close")},onFocus:function(){this.isInputFocused=!0},onBlur:function(){this.isInputFocused=!1},handleKeyEvents:function(t){"/"!==Object(k.a)(t)||Object(k.x)(t)||(t.preventDefault(),this.$refs.searchInput.focus())}}},Qi=Object(C.a)(Xi,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col py-1"},[e("div",{staticClass:"flex-container align-middle align-justify py-2"},[e("h3",{staticClass:"sub-block-title text-slate-900 dark:text-slate-25"},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),e("woot-button",{attrs:{variant:"clear",size:"tiny","color-scheme":"secondary",icon:"dismiss"},on:{click:t.onClose}})],1),t._v(" "),e("div",{staticClass:"relative"},[e("div",{staticClass:"absolute left-0 w-8 h-8 flex justify-center items-center"},[e("fluent-icon",{attrs:{icon:"search",size:"16"}})],1),t._v(" "),e("input",{ref:"searchInput",staticClass:"block w-full pl-8 h-8 text-sm dark:bg-slate-700 bg-slate-25 rounded-md leading-8 py-1 text-slate-700 shadow-sm ring-2 ring-transparent ring-slate-300 border border-solid border-slate-300 placeholder:text-slate-400 focus:border-woot-600 focus:ring-woot-200 mb-0 focus:bg-slate-25 dark:focus:bg-slate-700 dark:focus:ring-woot-700",attrs:{type:"text",placeholder:t.$t("HELP_CENTER.ARTICLE_SEARCH.PLACEHOLDER")},domProps:{value:t.searchQuery},on:{focus:t.onFocus,blur:t.onBlur,input:t.onInput}})])])}),[],!1,null,null,null).exports,Zi=n(1922);function Ji(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}var ts={name:"ArticleSearchResultItem",mixins:[s.a],props:{id:{type:Number,default:0},title:{type:String,default:"Untitled"},body:{type:String,default:""},url:{type:String,default:""},category:{type:String,default:""},locale:{type:String,default:""}},methods:{handleInsert:function(t){t.stopPropagation(),this.$emit("insert",this.id)},handlePreview:function(t){t.stopPropagation(),this.$emit("preview",this.id)},handleCopy:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.next=3,Object(Zi.a)(n.url);case 3:n.showAlert(n.$t("CONTACT_PANEL.COPY_SUCCESSFUL"));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,s){var a=e.apply(t,n);function r(t){Ji(a,i,s,r,o,"next",t)}function o(t){Ji(a,i,s,r,o,"throw",t)}r(void 0)}))})()}}},es=ts,ns={name:"SearchResults",components:{SearchResultItem:Object(C.a)(es,(function(){var t=this,e=t._self._c;return e("button",{staticClass:"flex flex-col gap-1 bg-white dark:bg-slate-900 hover:bg-slate-25 hover:dark:bg-slate-800 rounded-md py-1 px-2 w-full group border border-transparent border-solid focus:outline-none focus:bg-slate-25 focus:border-slate-500 dark:focus:border-slate-400 dark:focus:bg-slate-800 cursor-pointer",on:{click:t.handlePreview}},[e("h4",{staticClass:"text-block-title text-left mb-0 text-slate-900 dark:text-slate-25 px-1 -mx-1 rounded-sm width-auto hover:underline group-hover:underline"},[t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),e("div",{staticClass:"flex content-between items-center gap-0.5 w-full"},[e("p",{staticClass:"text-sm text-left text-slate-600 dark:text-slate-300 mb-0 w-full"},[t._v("\n      "+t._s(t.locale)+"\n      "+t._s(" / ")+"\n      "+t._s(t.category||t.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.UNCATEGORIZED"))+"\n    ")]),t._v(" "),e("div",{staticClass:"flex gap-0.5"},[e("woot-button",{staticClass:"invisible group-hover:visible",attrs:{title:t.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.COPY_LINK"),variant:"hollow","color-scheme":"secondary",size:"tiny",icon:"copy"},on:{click:t.handleCopy}}),t._v(" "),e("woot-button",{staticClass:"insert-button",attrs:{variant:"smooth","color-scheme":"secondary",size:"tiny"},on:{click:t.handleInsert}},[t._v("\n        "+t._s(t.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.INSERT_ARTICLE"))+"\n      ")])],1)])])}),[],!1,null,null,null).exports},props:{articles:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},searchQuery:{type:String,default:""},portalSlug:{type:String,required:!0}},computed:{showNoResults:function(){return this.searchQuery&&0===this.articles.length}},methods:{handlePreview:function(t){this.$emit("preview",t)},handleInsert:function(t){this.$emit("insert",t)}}},is=(n(3204),Object(C.a)(ns,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-end gap-1 py-4 bg-white dark:bg-slate-900 h-full overflow-y-auto"},[e("div",{staticClass:"flex flex-col gap-1 w-full"},[t.isLoading?e("div",{staticClass:"empty-state-message"},[t._v("\n      "+t._s(t.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.SEARCH_LOADER"))+"\n    ")]):t.showNoResults?e("div",{staticClass:"empty-state-message"},[t._v("\n      "+t._s(t.$t("HELP_CENTER.ARTICLE_SEARCH_RESULT.NO_RESULT"))+"\n    ")]):t._l(t.articles,(function(n){return e("search-result-item",{key:n.id,attrs:{id:n.id,title:n.title,body:n.content,url:n.url,category:n.category.name,locale:n.localeName},on:{preview:t.handlePreview,insert:t.handleInsert}})}))],2)])}),[],!1,null,"37805418",null).exports),ss={name:"ArticleView",components:{IframeLoader:n(2804).a},props:{url:{type:String,default:""}},methods:{onBack:function(t){t.stopPropagation(),this.$emit("back")},onInsert:function(t){t.stopPropagation(),this.$emit("insert")}}},as=Object(C.a)(ss,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-full w-full flex flex-col flex-1 overflow-hidden"},[e("div",{staticClass:"py-1"},[e("woot-button",{attrs:{variant:"link",size:"small",icon:"chevron-left"},on:{click:t.onBack}},[t._v("\n      "+t._s(t.$t("HELP_CENTER.ARTICLE_SEARCH.BACK_RESULTS"))+"\n    ")])],1),t._v(" "),e("div",{staticClass:"-ml-4 h-full overflow-y-auto"},[e("div",{staticClass:"w-full h-full min-h-0"},[e("iframe-loader",{attrs:{url:t.url}})],1)]),t._v(" "),e("div",{staticClass:"flex justify-end gap-2 py-2"},[e("woot-button",{attrs:{variant:"hollow",size:"small","is-expanded":"","color-scheme":"secondary",icon:"chevron-left"},on:{click:t.onBack}},[t._v("\n      "+t._s(t.$t("HELP_CENTER.ARTICLE_SEARCH.BACK"))+"\n    ")]),t._v(" "),e("woot-button",{attrs:{size:"small","is-expanded":"",icon:"arrow-download"},on:{click:t.onInsert}},[t._v("\n      "+t._s(t.$t("HELP_CENTER.ARTICLE_SEARCH.INSERT_ARTICLE"))+"\n    ")])],1)])}),[],!1,null,null,null).exports,rs=n(350),os=n(2654),cs=n(1778);function ls(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function us(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ds(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?us(Object(n),!0).forEach((function(e){ps(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):us(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ps(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hs={name:"ArticleSearchPopover",components:{SearchHeader:Qi,SearchResults:is,ArticleView:as},mixins:[E.mixin,cs.a,s.a],props:{selectedPortalSlug:{type:String,required:!0}},data:function(){return{searchQuery:"",isLoading:!1,searchResults:[],activeId:"",debounceSearch:function(){}}},computed:{articleViewerUrl:function(){var t=this.activeArticle(this.activeId);if(!t)return"";var e=document.body.classList.contains("dark"),n=new URL(t.url);return n.searchParams.set("show_plain_layout","true"),e&&n.searchParams.set("theme","dark"),"".concat(n)},searchResultsWithUrl:function(){var t=this;return this.searchResults.map((function(e){return ds(ds({},e),{},{localeName:t.localeName(e.category.locale||"en"),url:t.generateArticleUrl(e)})}))}},mounted:function(){this.fetchArticlesByQuery(this.searchQuery),this.debounceSearch=Object(Ki.a)(this.fetchArticlesByQuery,500,!1),document.body.addEventListener("keydown",this.closeOnEsc)},beforeDestroy:function(){document.body.removeEventListener("keydown",this.closeOnEsc)},methods:{generateArticleUrl:function(t){return Object(os.a)(this.selectedPortalSlug,"","",t.slug)},activeArticle:function(t){return this.searchResultsWithUrl.find((function(e){return e.id===t}))},onSearch:function(t){this.searchQuery=t,this.activeId="",this.debounceSearch(t)},onClose:function(){this.$emit("close"),this.searchQuery="",this.activeId="",this.searchResults=[]},fetchArticlesByQuery:function(t){var e,n=this;return(e=regeneratorRuntime.mark((function e(){var i,s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=t?"":"views",n.isLoading=!0,n.searchResults=[],e.next=6,rs.a.searchArticles({portalSlug:n.selectedPortalSlug,query:t,sort:i});case 6:s=e.sent,a=s.data,n.searchResults=a.payload,n.isLoading=!0,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:return e.prev=14,n.isLoading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,12,14,17]])})),function(){var t=this,n=arguments;return new Promise((function(i,s){var a=e.apply(t,n);function r(t){ls(a,i,s,r,o,"next",t)}function o(t){ls(a,i,s,r,o,"throw",t)}r(void 0)}))})()},handlePreview:function(t){this.activeId=t},onBack:function(){this.activeId=""},onInsert:function(t){var e=this.activeArticle(t||this.activeId);this.$emit("insert",e),this.showAlert(this.$t("HELP_CENTER.ARTICLE_SEARCH.SUCCESS_ARTICLE_INSERTED")),this.onClose()},closeOnEsc:function(t){Object(k.z)(t)&&!Object(k.x)(t)&&(t.preventDefault(),this.onClose())}}},fs=hs,ms=Object(C.a)(fs,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"fixed flex items-center justify-center w-screen h-screen bg-white/70 top-0 left-0 z-50"},[e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.onClose,expression:"onClose"}],staticClass:"flex flex-col px-4 pb-4 rounded-md shadow-md border border-solid border-slate-50 dark:border-slate-800 bg-white dark:bg-slate-900 z-[1000] max-w-[720px] md:w-[20rem] lg:w-[24rem] xl:w-[28rem] 2xl:w-[32rem] h-[calc(100vh-20rem)] max-h-[40rem]"},[e("search-header",{staticClass:"w-full sticky top-0 bg-[inherit]",attrs:{title:t.$t("HELP_CENTER.ARTICLE_SEARCH.TITLE")},on:{close:t.onClose,search:t.onSearch}}),t._v(" "),t.activeId?e("article-view",{attrs:{url:t.articleViewerUrl},on:{back:t.onBack,insert:t.onInsert}}):e("search-results",{attrs:{"search-query":t.searchQuery,"is-loading":t.isLoading,"portal-slug":t.selectedPortalSlug,articles:t.searchResultsWithUrl},on:{preview:t.handlePreview,insert:t.onInsert}})],1)])}),[],!1,null,null,null).exports,vs=n(2742),bs=n(367),gs=n(1916),_s=(n(3205),n(3206),n(2668)),ys=n(3234),Cs=n.n(ys),Os=n(3235),As=n(3236),Ts=n(2788),Es=n.n(Ts),ws=n(3237),Ss=n.n(ws),Is=(n(3238),n(3239),n(3240)),xs=n.n(Is),Ns=n(3345);function Rs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ls(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rs(Object(n),!0).forEach((function(e){Ps(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ps(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Es.a.microphone=Ss.a;var Ms={name:"WootAudioRecorder",mixins:[s.a],props:{audioRecordFormat:{type:String,default:qt.e.WAV}},data:function(){return{player:!1,recordingDateStarted:new Date(0),initialTimeDuration:"00:00",recorderOptions:{controls:!0,bigPlayButton:!1,fluid:!1,controlBar:{deviceButton:!1,fullscreenToggle:!1,cameraButton:!1,volumePanel:!1},plugins:{wavesurfer:{backend:"WebAudio",waveColor:"#1f93ff",progressColor:"rgb(25, 118, 204)",cursorColor:"rgba(43, 51, 63, 0.7)",backgroundColor:"none",barWidth:1,cursorWidth:1,hideScrollbar:!0,plugins:[Es.a.microphone.create({bufferSize:4096,numberOfInputChannels:1,numberOfOutputChannels:1,constraints:{video:!1,audio:!0}})]},record:Ls(Ls({audio:!0,video:!1,maxLength:900,timeSlice:1e3,maxFileSize:15728640,displayMilliseconds:!1,audioChannels:1,audioSampleRate:48e3,audioBitRate:128,audioEngine:"opus-recorder"},this.audioRecordFormat===qt.e.WAV&&{audioMimeType:"audio/wav",audioWorkerURL:As.a}),this.audioRecordFormat===qt.e.OGG&&{audioMimeType:"audio/ogg",audioWorkerURL:Os.a})}}}},computed:{isRecording:function(){return this.player&&this.player.record().isRecording()}},mounted:function(){var t=this;window.Recorder=Cs.a,this.fireProgressRecord(this.initialTimeDuration),this.player=Object(_s.default)("#audio-wave",this.recorderOptions,(function(){t.$nextTick((function(){t.player.record().getDevice()}))})),this.player.on("deviceReady",this.deviceReady),this.player.on("deviceError",this.deviceError),this.player.on("startRecord",this.startRecord),this.player.on("stopRecord",this.stopRecord),this.player.on("progressRecord",this.progressRecord),this.player.on("finishRecord",this.finishRecord),this.player.on("playbackFinish",this.playbackFinish)},beforeDestroy:function(){this.player&&this.player.dispose(),window.Recorder&&(window.Recorder=void 0)},methods:{deviceReady:function(){this.player.record().engine instanceof xs.a&&this.audioRecordFormat===qt.e.WAV&&(this.player.record().engine.audioType="audio/wav"),this.player.record().start()},startRecord:function(){this.fireStateRecorderChanged("recording")},stopRecord:function(){this.fireStateRecorderChanged("stopped")},finishRecord:function(){var t=new File([this.player.recordedData],this.player.recordedData.name,{type:this.player.recordedData.type});this.fireRecorderBlob(t)},progressRecord:function(){this.fireProgressRecord(this.formatTimeProgress())},stopAudioRecording:function(){this.player.record().stop()},deviceError:function(){var t=this.player.deviceErrorCode,e=null===t||void 0===t?void 0:t.name.toLowerCase();null!==e&&void 0!==e&&e.includes("notallowederror")||null!==e&&void 0!==e&&e.includes("permissiondeniederror")?(this.showAlert(this.$t("CONVERSATION.REPLYBOX.TIP_AUDIORECORDER_PERMISSION")),this.fireStateRecorderChanged("notallowederror")):this.showAlert(this.$t("CONVERSATION.REPLYBOX.TIP_AUDIORECORDER_ERROR"))},formatTimeProgress:function(){return Object(on.a)(Object(Ns.a)(new Date(1e3*this.recordingDateStarted.getTimezoneOffset()*60),this.player.record().getDuration()),"mm:ss")},playPause:function(){this.player.wavesurfer().surfer.isPlaying()?this.fireStateRecorderChanged("paused"):this.fireStateRecorderChanged("playing"),this.player.wavesurfer().surfer.playPause()},play:function(){this.fireStateRecorderChanged("playing"),this.player.wavesurfer().play()},pause:function(){this.fireStateRecorderChanged("paused"),this.player.wavesurfer().pause()},playbackFinish:function(){this.fireStateRecorderChanged("paused"),this.player.wavesurfer().pause()},fireRecorderBlob:function(t){this.$emit("finish-record",{name:t.name,type:t.type,size:t.size,file:t})},fireStateRecorderChanged:function(t){this.$emit("state-recorder-changed",t)},fireProgressRecord:function(t){this.$emit("state-recorder-progress-changed",t)}}},ks=(n(3241),Object(C.a)(Ms,(function(){this._self._c;return this._m(0)}),[function(){var t=this._self._c;return t("div",{staticClass:"audio-wave-wrapper"},[t("audio",{staticClass:"video-js vjs-fill vjs-default-skin",attrs:{id:"audio-wave"}})])}],!1,null,null,null).exports),$s=n(109),js=n(2744),Ds=n(2745),Fs={components:{TemplatesPicker:js.a,TemplateParser:Ds.a},props:{inboxId:{type:Number,default:void 0},show:{type:Boolean,default:!0}},data:function(){return{selectedWaTemplate:null}},computed:{modalHeaderContent:function(){return this.selectedWaTemplate?this.$t("WHATSAPP_TEMPLATES.MODAL.TEMPLATE_SELECTED_SUBTITLE",{templateName:this.selectedWaTemplate.name}):this.$t("WHATSAPP_TEMPLATES.MODAL.SUBTITLE")}},methods:{pickTemplate:function(t){this.selectedWaTemplate=t},onResetTemplate:function(){this.selectedWaTemplate=null},onSendMessage:function(t){this.$emit("on-send",t)},onClose:function(){this.$emit("cancel")}}},Us=(n(3242),Object(C.a)(Fs,(function(){var t=this,e=t._self._c;return e("woot-modal",{attrs:{show:t.show,"on-close":t.onClose,size:"modal-big"},on:{"update:show":function(e){t.show=e}}},[e("woot-modal-header",{attrs:{"header-title":t.$t("WHATSAPP_TEMPLATES.MODAL.TITLE"),"header-content":t.modalHeaderContent}}),t._v(" "),e("div",{staticClass:"row modal-content"},[t.selectedWaTemplate?e("template-parser",{attrs:{template:t.selectedWaTemplate},on:{resetTemplate:t.onResetTemplate,sendMessage:t.onSendMessage}}):e("templates-picker",{attrs:{"inbox-id":t.inboxId},on:{onSelect:t.pickTemplate}})],1)],1)}),[],!1,null,"75070bc2",null).exports),Bs=n(1867),Vs=n(1777),Gs=n(2730),Ws=n(217),Hs=n(161),zs=n(162);function Ys(t){return function(t){if(Array.isArray(t))return qs(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return qs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qs(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qs(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ks(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Xs(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){Ks(a,i,s,r,o,"next",t)}function o(t){Ks(a,i,s,r,o,"throw",t)}r(void 0)}))}}function Qs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Zs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qs(Object(n),!0).forEach((function(e){Js(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Js(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ta={components:{EmojiInput:function(){return Promise.all([n.e(9),n.e(18)]).then(n.bind(null,3422))},CannedResponse:zn.a,ReplyToMessage:Kn,ResizableTextArea:Xn.a,AttachmentPreview:Qn.a,ReplyTopPanel:ti,ReplyEmailHead:ei.a,ReplyBottomPanel:qi,WootMessageEditor:gs.a,WootAudioRecorder:ks,Banner:bs.a,WhatsappTemplates:Us,MessageSignatureMissingAlert:vs.a,ArticleSearchPopover:ms},mixins:[E.mixin,Ue.c,I.a,s.a,Ii.a,Vs.a,Gs.a],props:{popoutReplyBox:{type:Boolean,default:!1}},data:function(){return{message:"",inReplyTo:{},isFocused:!1,showEmojiPicker:!1,attachedFiles:[],isRecordingAudio:!1,recordingAudioState:"",recordingAudioDurationText:"",isUploading:!1,replyType:Zn.b.REPLY,mentionSearchKey:"",hasSlashCommand:!1,bccEmails:"",ccEmails:"",toEmails:"",doAutoSaveDraft:function(){},showWhatsAppTemplatesModal:!1,updateEditorSelectionWith:"",undefinedVariableMessage:"",showMentions:!1,showUserMentions:!1,showCannedMenu:!1,showVariablesMenu:!1,newConversationModalActive:!1,showArticleSearchPopover:!1}},computed:Zs(Zs({},Object(i.mapGetters)({currentChat:"getSelectedChat",messageSignature:"getMessageSignature",currentUser:"getCurrentUser",lastEmail:"getLastEmailInSelectedChat",globalConfig:"globalConfig/get",accountId:"getCurrentAccountId",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount"})),{},{shouldShowReplyToMessage:function(){var t;return(null===(t=this.inReplyTo)||void 0===t?void 0:t.id)&&!this.isPrivate&&this.inboxHasFeature(Ue.a.REPLY_TO)},showRichContentEditor:function(){if(this.isOnPrivateNote||this.isRichEditorEnabled)return!0;if(this.isAPIInbox){var t=this.uiSettings.display_rich_content_editor;return void 0!==t&&t}return!1},assignedAgent:{get:function(){return this.currentChat.meta.assignee},set:function(t){var e=this,n=t?t.id:0;this.$store.dispatch("setCurrentChatAssignee",t),this.$store.dispatch("assignAgent",{conversationId:this.currentChat.id,agentId:n}).then((function(){e.showAlert(e.$t("CONVERSATION.CHANGE_AGENT"))}))}},showSelfAssignBanner:function(){if(""!==this.message&&!this.isOnPrivateNote){if(!this.assignedAgent)return!0;if(this.assignedAgent.id!==this.currentUser.id)return!0}return!1},hasWhatsappTemplates:function(){return!!this.$store.getters["inboxes/getWhatsAppTemplates"](this.inboxId).length},isPrivate:function(){return!this.currentChat.can_reply&&!this.isAWhatsAppChannel||this.isOnPrivateNote},inboxId:function(){return this.currentChat.inbox_id},inbox:function(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},messagePlaceHolder:function(){return this.isPrivate?this.$t("CONVERSATION.FOOTER.PRIVATE_MSG_INPUT"):this.$t("CONVERSATION.FOOTER.MSG_INPUT")},isMessageLengthReachingThreshold:function(){return this.message.length>this.maxLength-50},charactersRemaining:function(){return this.maxLength-this.message.length},isReplyButtonDisabled:function(){return!!this.isATwitterInbox||!this.hasAttachments&&!this.hasRecordedAudio&&(this.isMessageEmpty||0===this.message.length||this.message.length>this.maxLength)},sender:function(){return{name:this.currentUser.name,thumbnail:this.currentUser.avatar_url}},conversationType:function(){var t=this.currentChat.additional_attributes;return(t?t.type:"")||""},maxLength:function(){return this.isPrivate?Bs.a.GENERAL:this.isAFacebookInbox?Bs.a.FACEBOOK:this.isAWhatsAppChannel?Bs.a.TWILIO_WHATSAPP:this.isASmsInbox?Bs.a.TWILIO_SMS:Bs.a.GENERAL},showFileUpload:function(){return this.isAWebWidgetInbox||this.isAFacebookInbox||this.isAWhatsAppChannel||this.isAPIInbox||this.isAnEmailChannel||this.isASmsInbox||this.isATelegramChannel||this.isALineChannel},replyButtonLabel:function(){var t=this.$t("CONVERSATION.REPLYBOX.SEND");this.isPrivate&&(t=this.$t("CONVERSATION.REPLYBOX.CREATE"));var e=Object(I.b)(this.uiSettings,"cmd_enter")?"(\u2318 + \u21b5)":"(\u21b5)";return"".concat(t," ").concat(e)},replyBoxClass:function(){return{"is-private":this.isPrivate,"is-focused":this.isFocused||this.hasAttachments}},hasAttachments:function(){return this.attachedFiles.length},hasRecordedAudio:function(){return this.$refs.audioRecorderInput&&this.$refs.audioRecorderInput.hasAudio()},isRichEditorEnabled:function(){return this.isAWebWidgetInbox||this.isAnEmailChannel},showAudioRecorder:function(){return!this.isOnPrivateNote&&this.showFileUpload},showAudioRecorderEditor:function(){return this.showAudioRecorder&&this.isRecordingAudio},isOnPrivateNote:function(){return this.replyType===Zn.b.NOTE},isOnExpandedLayout:function(){var t=T.b.LAYOUT_TYPES.CONDENSED,e=this.uiSettings.conversation_display_type;return(void 0===e?t:e)!==t},emojiDialogClassOnExpandedLayoutAndRTLView:function(){return this.isOnExpandedLayout||this.popoutReplyBox?"emoji-dialog--expanded":this.isRTLView?"emoji-dialog--rtl":""},isMessageEmpty:function(){return!this.message||!this.message.trim().replace(/\n/g,"").length},showReplyHead:function(){return!this.isOnPrivateNote&&this.isAnEmailChannel},enableMultipleFileUpload:function(){return this.isAnEmailChannel||this.isAWebWidgetInbox||this.isAPIInbox||this.isAWhatsAppChannel},isSignatureEnabledForInbox:function(){return!this.isPrivate&&this.sendWithSignature},isSignatureAvailable:function(){return!!this.signatureToApply},sendWithSignature:function(){return this.fetchSignatureFlagFromUiSettings(this.channelType)},editorMessageKey:function(){return this.uiSettings.editor_message_key},commandPlusEnterToSendEnabled:function(){return"cmd_enter"===this.editorMessageKey},enterToSendEnabled:function(){return"enter"===this.editorMessageKey},conversationId:function(){return this.currentChat.id},conversationIdByRoute:function(){return this.conversationId},editorStateId:function(){return"draft-".concat(this.conversationIdByRoute,"-").concat(this.replyType)},audioRecordFormat:function(){return this.isAWhatsAppChannel||this.isAPIInbox?qt.e.OGG:qt.e.WAV},messageVariables:function(){return Object(Ki.d)({conversation:this.currentChat})},signatureToApply:function(){return this.showRichContentEditor?this.messageSignature:Object(Ws.b)(this.messageSignature)},connectedPortalSlug:function(){var t=this.inbox.help_center,e=(void 0===t?{}:t).slug;return void 0===e?"":e}}),watch:{currentChat:function(t){var e=t.can_reply;this.setCCAndToEmailsFromLastChat(),this.isOnPrivateNote||(e||this.isAWhatsAppChannel?this.replyType=Zn.b.REPLY:this.replyType=Zn.b.NOTE,this.fetchAndSetReplyTo())},conversationIdByRoute:function(t,e){t!==e&&(this.setToDraft(e,this.replyType),this.getFromDraft())},message:function(t){var e=Object(Ws.e)(t,this.signatureToApply),n=e.startsWith("/");this.hasSlashCommand=n&&!this.showRichContentEditor,this.showMentions=this.hasSlashCommand,this.mentionSearchKey=this.hasSlashCommand?e.substring(1):"",this.doAutoSaveDraft()},replyType:function(t,e){this.setToDraft(this.conversationIdByRoute,e),this.getFromDraft()}},mounted:function(){var t=this;this.getFromDraft(),document.addEventListener("paste",this.onPaste),document.addEventListener("keydown",this.handleKeyEvents),this.setCCAndToEmailsFromLastChat(),this.doAutoSaveDraft=Object(Ki.a)((function(){t.saveDraft(t.conversationIdByRoute,t.replyType)}),500,!0),this.fetchAndSetReplyTo(),bus.$on($s.a.TOGGLE_REPLY_TO_MESSAGE,this.fetchAndSetReplyTo),bus.$on($s.a.NEW_CONVERSATION_MODAL,this.onNewConversationModalActive)},destroyed:function(){document.removeEventListener("paste",this.onPaste),document.removeEventListener("keydown",this.handleKeyEvents),bus.$off($s.a.TOGGLE_REPLY_TO_MESSAGE,this.fetchAndSetReplyTo)},beforeDestroy:function(){bus.$off($s.a.NEW_CONVERSATION_MODAL,this.onNewConversationModalActive)},methods:{handleInsert:function(t){var e=t.url,n=t.title;if(this.isRichEditorEnabled){var i=n.split("\n").filter((function(t){return""!==t.trim()})).join(" ");bus.$emit($s.a.INSERT_INTO_RICH_EDITOR,"[".concat(i,"](").concat(e,")"))}else this.addIntoEditor("".concat(this.$t("CONVERSATION.REPLYBOX.INSERT_READ_MORE")," ").concat(e));this.$track(f.d.INSERT_ARTICLE_LINK)},toggleRichContentEditor:function(){this.updateUISettings({display_rich_content_editor:!this.showRichContentEditor});var t=Object(Ws.b)(this.messageSignature);if(!this.showRichContentEditor&&this.messageSignature){var e=Object(Ws.e)(this.message,this.messageSignature);e=Object(Ws.b)(e),e=Object(Ws.a)(e,t),this.message=e}else this.message=Object(Ws.f)(this.message,t,this.messageSignature)},saveDraft:function(t,e){if(this.message||""===this.message){var n="draft-".concat(t,"-").concat(e),i=Object(Ki.i)(this.message||"");this.$store.dispatch("draftMessages/set",{key:n,message:i})}},setToDraft:function(t,e){this.saveDraft(t,e),this.message=""},getFromDraft:function(){if(this.conversationIdByRoute){var t="draft-".concat(this.conversationIdByRoute,"-").concat(this.replyType),e=this.$store.getters["draftMessages/get"](t)||"";this.message=this.toggleSignatureForDraft(e)}},toggleSignatureForDraft:function(t){return this.isPrivate?t:this.sendWithSignature?Object(Ws.a)(t,this.signatureToApply):Object(Ws.e)(t,this.signatureToApply)},removeFromDraft:function(){if(this.conversationIdByRoute){var t="draft-".concat(this.conversationIdByRoute,"-").concat(this.replyType);this.$store.dispatch("draftMessages/delete",{key:t})}},handleKeyEvents:function(t){var e=Object(k.a)(t);if("escape"===e)this.hideEmojiPicker(),this.hideMentions();else if("meta+k"===e){document.querySelector("ninja-keys").open(),t.preventDefault()}else"enter"===e&&this.isAValidEvent("enter")?(this.onSendReply(),t.preventDefault()):["meta+enter","ctrl+enter"].includes(e)&&this.isAValidEvent("cmd_enter")&&this.onSendReply()},isAValidEvent:function(t){return!this.showUserMentions&&!this.showMentions&&!this.showCannedMenu&&!this.showVariablesMenu&&this.isFocused&&Object(I.b)(this.uiSettings,t)},onPaste:function(t){var e=this,n=t.clipboardData.files;this.showRichContentEditor||0===n.length||this.$refs.messageInput.$el.blur(),n.length&&n[0]&&n.forEach((function(t){var n=t.name,i=t.type,s=t.size;e.onFileUpload({name:n,type:i,size:s,file:t})}))},toggleUserMention:function(t){this.showUserMentions=t},toggleCannedMenu:function(t){this.showCannedMenu=t},toggleVariablesMenu:function(t){this.showVariablesMenu=t},openWhatsappTemplateModal:function(){this.showWhatsAppTemplatesModal=!0},hideWhatsappTemplatesModal:function(){this.showWhatsAppTemplatesModal=!1},onClickSelfAssign:function(){var t=this.currentUser,e={account_id:t.account_id,availability_status:t.availability_status,available_name:t.available_name,email:t.email,id:t.id,name:t.name,role:t.role,thumbnail:t.avatar_url};this.assignedAgent=e},confirmOnSendReply:function(){if(!this.isReplyButtonDisabled&&!this.showMentions){if((this.isATwilioWhatsAppChannel||this.isAWhatsAppCloudChannel||this.is360DialogWhatsAppChannel)&&!this.isPrivate)this.sendMessageAsMultipleMessages(this.message);else{var t=this.getMessagePayload(this.message);this.sendMessage(t)}this.isPrivate||this.clearEmailField(),this.clearMessage(),this.hideEmojiPicker(),this.$emit("update:popoutReplyBox",!1)}},sendMessageAsMultipleMessages:function(t){var e=this;this.getMessagePayloadForWhatsapp(t).forEach((function(t){e.sendMessage(t)}))},sendMessageAnalyticsData:function(t){var e;return t?this.$track(f.d.SENT_PRIVATE_NOTE):this.$track(f.d.SENT_MESSAGE,{channelType:this.channelType,signatureEnabled:this.sendWithSignature,hasReplyTo:!(null===(e=this.inReplyTo)||void 0===e||!e.id)})},onSendReply:function(){var t=this;return Xs(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=Object(Ki.f)({message:t.message,variables:t.messageVariables})).length>0)){e.next=10;break}return i=n.length>1?n.length:1,t.undefinedVariableMessage=t.$t("CONVERSATION.REPLYBOX.UNDEFINED_VARIABLES.MESSAGE",{undefinedVariablesCount:i,undefinedVariables:n.join(", ")}),e.next=6,t.$refs.confirmDialog.showConfirmation();case 6:e.sent&&t.confirmOnSendReply(),e.next=11;break;case 10:t.confirmOnSendReply();case 11:case"end":return e.stop()}}),e)})))()},sendMessage:function(t){var e=this;return Xs(regeneratorRuntime.mark((function n(){var i,s,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$store.dispatch("createPendingMessageAndSend",t);case 3:bus.$emit($s.a.SCROLL_TO_MESSAGE),bus.$emit($s.a.MESSAGE_SENT),e.removeFromDraft(),e.sendMessageAnalyticsData(t.private),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),a=(null===n.t0||void 0===n.t0||null===(i=n.t0.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.error)||e.$t("CONVERSATION.MESSAGE_ERROR"),e.showAlert(a);case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},onSendWhatsAppReply:function(t){var e=this;return Xs(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.sendMessage(Zs({conversationId:e.currentChat.id},t)),e.hideWhatsappTemplatesModal();case 2:case"end":return n.stop()}}),n)})))()},replaceText:function(t){var e=this;this.sendWithSignature&&!this.private&&(t=Object(Ws.a)(t,this.signatureToApply));var n=Object(Ki.h)({message:t,variables:this.messageVariables});setTimeout((function(){e.$track(f.d.INSERTED_A_CANNED_RESPONSE),e.message=n}),100)},setReplyMode:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn.b.REPLY,n=this.currentChat.can_reply;this.$store.dispatch("draftMessages/setReplyEditorMode",{mode:e}),(n||this.isAWhatsAppChannel)&&(this.replyType=e),this.showRichContentEditor?this.isRecordingAudio&&this.toggleAudioRecorder():this.$nextTick((function(){return t.$refs.messageInput.focus()}))},clearEditorSelection:function(){this.updateEditorSelectionWith=""},insertIntoTextEditor:function(t,e,n){var i=this.message,s=i.slice(0,e)+t+i.slice(n,i.length);this.message=s},addIntoEditor:function(t){if(this.showRichContentEditor&&(this.updateEditorSelectionWith=t,this.onFocus()),!this.showRichContentEditor){var e=this.$refs.messageInput.$el,n=e.selectionStart,i=e.selectionEnd;this.insertIntoTextEditor(t,n,i)}},clearMessage:function(){this.message="",this.sendWithSignature&&!this.isPrivate&&(this.message=Object(Ws.a)(this.message,this.signatureToApply)),this.attachedFiles=[],this.isRecordingAudio=!1,this.resetReplyToMessage()},clearEmailField:function(){this.ccEmails="",this.bccEmails="",this.toEmails=""},toggleEmojiPicker:function(){this.showEmojiPicker=!this.showEmojiPicker},toggleAudioRecorder:function(){this.isRecordingAudio=!this.isRecordingAudio,this.isRecorderAudioStopped=!this.isRecordingAudio,this.isRecordingAudio||(this.clearMessage(),this.clearEmailField())},toggleAudioRecorderPlayPause:function(){this.isRecordingAudio&&(this.isRecorderAudioStopped?this.isRecorderAudioStopped&&this.$refs.audioRecorderInput.playPause():(this.isRecorderAudioStopped=!0,this.$refs.audioRecorderInput.stopAudioRecording()))},hideEmojiPicker:function(){this.showEmojiPicker&&this.toggleEmojiPicker()},hideMentions:function(){this.showMentions=!1},onTypingOn:function(){this.toggleTyping("on")},onTypingOff:function(){this.toggleTyping("off")},onBlur:function(){this.isFocused=!1,this.saveDraft(this.conversationIdByRoute,this.replyType)},onFocus:function(){this.isFocused=!0},onStateProgressRecorderChanged:function(t){this.recordingAudioDurationText=t},onStateRecorderChanged:function(t){this.recordingAudioState=t,t&&"notallowederror".includes(t)&&this.toggleAudioRecorder()},onFinishRecorder:function(t){return t&&this.onFileUpload(t)},toggleTyping:function(t){var e=this.currentChat.id,n=this.isPrivate;e&&this.$store.dispatch("conversationTypingStatus/toggleTyping",{status:t,conversationId:e,isPrivate:n})},attachFile:function(t){var e=this,n=t.blob,i=t.file,s=new FileReader;s.readAsDataURL(i.file),s.onloadend=function(){e.attachedFiles.push({currentChatId:e.currentChat.id,resource:n||i,isPrivate:e.isPrivate,thumb:s.result,blobSignedId:n?n.signed_id:void 0})}},removeAttachment:function(t){this.attachedFiles=this.attachedFiles.filter((function(e,n){return t!==n}))},setReplyToInPayload:function(t){var e;return null!==(e=this.inReplyTo)&&void 0!==e&&e.id?Zs(Zs({},t),{},{contentAttributes:Zs(Zs({},t.contentAttributes),{},{in_reply_to:this.inReplyTo.id})}):t},getMessagePayloadForWhatsapp:function(t){var e=this,n=[];if(this.attachedFiles&&this.attachedFiles.length){var i=t;this.attachedFiles.forEach((function(t){var s=e.globalConfig.directUploadsEnabled?t.blobSignedId:t.resource.file,a={conversationId:e.currentChat.id,files:[s],private:!1,message:i,sender:e.sender};a=e.setReplyToInPayload(a),n.push(a),i=""}))}else{var s={conversationId:this.currentChat.id,message:t,private:!1,sender:this.sender};s=this.setReplyToInPayload(s),n.push(s)}return n},getMessagePayload:function(t){var e=this,n={conversationId:this.currentChat.id,message:t,private:this.isPrivate,sender:this.sender};return n=this.setReplyToInPayload(n),this.attachedFiles&&this.attachedFiles.length&&(n.files=[],this.attachedFiles.forEach((function(t){e.globalConfig.directUploadsEnabled?n.files.push(t.blobSignedId):n.files.push(t.resource.file)}))),this.ccEmails&&!this.isOnPrivateNote&&(n.ccEmails=this.ccEmails),this.bccEmails&&!this.isOnPrivateNote&&(n.bccEmails=this.bccEmails),this.toEmails&&!this.isOnPrivateNote&&(n.toEmails=this.toEmails),n},setCcEmails:function(t){this.bccEmails=t.bccEmails,this.ccEmails=t.ccEmails},setCCAndToEmailsFromLastChat:function(){var t,e,n;if(this.lastEmail){var i,s=this.lastEmail.content_attributes.email,a=void 0===s?{}:s,r=(null===(t=this.currentChat)||void 0===t||null===(e=t.meta)||void 0===e||null===(n=e.sender)||void 0===n?void 0:n.email)||"",o=a.cc?Ys(a.cc):[],c=[];if(o.includes(r)&&(o=o.filter((function(t){return t!==r}))),!a.from.includes(r))(i=c).push.apply(i,Ys(a.from)),o.push(r);var l=(a.bcc||[]).filter((function(t){return t!==r}));l=Ys(new Set(l)),o=Ys(new Set(o)),c=Ys(new Set(c)),this.ccEmails=o.join(", "),this.bccEmails=l.join(", "),this.toEmails=c.join(", ")}},fetchAndSetReplyTo:function(){var t,e,n=Hs.a.MESSAGE_REPLY_TO,i=zs.a.getFromJsonStore(n,this.conversationId);this.inReplyTo=null===(t=this.currentChat)||void 0===t||null===(e=t.messages)||void 0===e?void 0:e.find((function(t){return t.id===i}))},resetReplyToMessage:function(){var t=Hs.a.MESSAGE_REPLY_TO;zs.a.deleteFromJsonStore(t,this.conversationId),bus.$emit($s.a.TOGGLE_REPLY_TO_MESSAGE)},onNewConversationModalActive:function(t){this.newConversationModalActive=t},onSearchPopoverClose:function(){this.showArticleSearchPopover=!1},toggleInsertArticle:function(){this.showArticleSearchPopover=!this.showArticleSearchPopover}}},ea=ta,na=(n(3243),Object(C.a)(ea,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"reply-box",class:t.replyBoxClass},[t.showSelfAssignBanner?e("banner",{staticClass:"banner--self-assign",attrs:{"action-button-variant":"clear","color-scheme":"secondary","banner-message":t.$t("CONVERSATION.NOT_ASSIGNED_TO_YOU"),"has-action-button":!0,"action-button-label":t.$t("CONVERSATION.ASSIGN_TO_ME")},on:{click:t.onClickSelfAssign}}):t._e(),t._v(" "),e("reply-top-panel",{attrs:{mode:t.replyType,"set-reply-mode":t.setReplyMode,"is-message-length-reaching-threshold":t.isMessageLengthReachingThreshold,"characters-remaining":t.charactersRemaining,"popout-reply-box":t.popoutReplyBox},on:{click:function(e){return t.$emit("click")}}}),t._v(" "),t.showArticleSearchPopover&&t.connectedPortalSlug?e("article-search-popover",{attrs:{"selected-portal-slug":t.connectedPortalSlug},on:{insert:t.handleInsert,close:t.onSearchPopoverClose}}):t._e(),t._v(" "),e("div",{staticClass:"reply-box__top"},[t.shouldShowReplyToMessage?e("reply-to-message",{attrs:{message:t.inReplyTo},on:{dismiss:t.resetReplyToMessage}}):t._e(),t._v(" "),t.showMentions&&t.hasSlashCommand?e("canned-response",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.hideMentions,expression:"hideMentions"}],staticClass:"normal-editor__canned-box",attrs:{"search-key":t.mentionSearchKey},on:{click:t.replaceText}}):t._e(),t._v(" "),t.showEmojiPicker?e("emoji-input",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.hideEmojiPicker,expression:"hideEmojiPicker"}],class:t.emojiDialogClassOnExpandedLayoutAndRTLView,attrs:{"on-click":t.addIntoEditor}}):t._e(),t._v(" "),t.showReplyHead?e("reply-email-head",{attrs:{"cc-emails":t.ccEmails,"bcc-emails":t.bccEmails,"to-emails":t.toEmails},on:{"update:ccEmails":function(e){t.ccEmails=e},"update:cc-emails":function(e){t.ccEmails=e},"update:bccEmails":function(e){t.bccEmails=e},"update:bcc-emails":function(e){t.bccEmails=e},"update:toEmails":function(e){t.toEmails=e},"update:to-emails":function(e){t.toEmails=e}}}):t._e(),t._v(" "),t.showAudioRecorderEditor?e("woot-audio-recorder",{ref:"audioRecorderInput",attrs:{"audio-record-format":t.audioRecordFormat},on:{"state-recorder-progress-changed":t.onStateProgressRecorderChanged,"state-recorder-changed":t.onStateRecorderChanged,"finish-record":t.onFinishRecorder}}):t.showRichContentEditor?e("woot-message-editor",{staticClass:"input",attrs:{"editor-id":t.editorStateId,"is-private":t.isOnPrivateNote,placeholder:t.messagePlaceHolder,"update-selection-with":t.updateEditorSelectionWith,"min-height":4,"enable-variables":!0,variables:t.messageVariables,signature:t.signatureToApply,"allow-signature":!0,"channel-type":t.channelType},on:{"typing-off":t.onTypingOff,"typing-on":t.onTypingOn,focus:t.onFocus,blur:t.onBlur,"toggle-user-mention":t.toggleUserMention,"toggle-canned-menu":t.toggleCannedMenu,"toggle-variables-menu":t.toggleVariablesMenu,"clear-selection":t.clearEditorSelection},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}):e("resizable-text-area",{ref:"messageInput",staticClass:"input",attrs:{placeholder:t.messagePlaceHolder,"min-height":4,signature:t.signatureToApply,"allow-signature":!0,"send-with-signature":t.sendWithSignature},on:{"typing-off":t.onTypingOff,"typing-on":t.onTypingOn,focus:t.onFocus,blur:t.onBlur},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),t._v(" "),t.hasAttachments?e("div",{staticClass:"attachment-preview-box",on:{paste:t.onPaste}},[e("attachment-preview",{staticClass:"flex-col mt-4",attrs:{attachments:t.attachedFiles,"remove-attachment":t.removeAttachment}})],1):t._e(),t._v(" "),t.isSignatureEnabledForInbox&&!t.isSignatureAvailable?e("message-signature-missing-alert"):t._e(),t._v(" "),e("reply-bottom-panel",{attrs:{"conversation-id":t.conversationId,"enable-multiple-file-upload":t.enableMultipleFileUpload,"has-whatsapp-templates":t.hasWhatsappTemplates,inbox:t.inbox,"is-on-private-note":t.isOnPrivateNote,"is-recording-audio":t.isRecordingAudio,"is-send-disabled":t.isReplyButtonDisabled,mode:t.replyType,"on-file-upload":t.onFileUpload,"on-send":t.onSendReply,"recording-audio-duration-text":t.recordingAudioDurationText,"recording-audio-state":t.recordingAudioState,"send-button-text":t.replyButtonLabel,"show-audio-recorder":t.showAudioRecorder,"show-editor-toggle":t.isAPIInbox&&!t.isOnPrivateNote,"show-emoji-picker":t.showEmojiPicker,"show-file-upload":t.showFileUpload,"toggle-audio-recorder-play-pause":t.toggleAudioRecorderPlayPause,"toggle-audio-recorder":t.toggleAudioRecorder,"toggle-emoji-picker":t.toggleEmojiPicker,message:t.message,"portal-slug":t.connectedPortalSlug,"new-conversation-modal-active":t.newConversationModalActive},on:{selectWhatsappTemplate:t.openWhatsappTemplateModal,"toggle-editor":t.toggleRichContentEditor,"replace-text":t.replaceText,"toggle-insert-article":t.toggleInsertArticle}}),t._v(" "),e("whatsapp-templates",{attrs:{"inbox-id":t.inbox.id,show:t.showWhatsAppTemplatesModal},on:{close:t.hideWhatsappTemplatesModal,"on-send":t.onSendWhatsAppReply,cancel:t.hideWhatsappTemplatesModal}}),t._v(" "),e("woot-confirm-modal",{ref:"confirmDialog",attrs:{title:t.$t("CONVERSATION.REPLYBOX.UNDEFINED_VARIABLES.TITLE"),description:t.undefinedVariableMessage}})],1)}),[],!1,null,"a011633c",null).exports);n(136);function ia(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function sa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ia(Object(n),!0).forEach((function(e){aa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function aa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ra={mixins:[Ue.c,F.a],props:{sender:{type:Object,default:function(){return{}}},createdAt:{type:Number,default:0},storySender:{type:String,default:""},externalError:{type:String,default:""},storyId:{type:String,default:""},isEmail:{type:Boolean,default:!0},isPrivate:{type:Boolean,default:!0},isATweet:{type:Boolean,default:!0},messageType:{type:Number,default:1},messageStatus:{type:String,default:""},sourceId:{type:String,default:""},id:{type:[String,Number],default:""},inboxId:{type:[String,Number],default:0}},computed:sa(sa({},Object(i.mapGetters)({currentChat:"getSelectedChat"})),{},{inbox:function(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},isIncoming:function(){return qt.m.INCOMING===this.messageType},isOutgoing:function(){return qt.m.OUTGOING===this.messageType},isTemplate:function(){return qt.m.TEMPLATE===this.messageType},isDelivered:function(){return qt.l.DELIVERED===this.messageStatus},isRead:function(){return qt.l.READ===this.messageStatus},isSent:function(){return qt.l.SENT===this.messageStatus},readableTime:function(){return this.messageTimestamp(this.createdAt,"LLL d, h:mm a")},screenName:function(){var t=(this.sender||{}).additional_attributes,e=void 0===t?{}:t;return(null===e||void 0===e?void 0:e.screen_name)||""},linkToTweet:function(){if(!this.sourceId||!this.inbox.name)return"";var t=this.screenName,e=this.sourceId;return"https://twitter.com/".concat(t||this.inbox.name,"/status/").concat(e)},linkToStory:function(){if(!this.storyId||!this.storySender)return"";var t=this.storySender,e=this.storyId;return"https://www.instagram.com/stories/direct/".concat(t,"_").concat(e)},showStatusIndicators:function(){return!(!this.isOutgoing&&!this.isTemplate||this.isPrivate)},showSentIndicator:function(){return!!this.showStatusIndicators&&(this.isAnEmailChannel?!!this.sourceId:this.isAWhatsAppChannel||this.isATwilioChannel||this.isAFacebookInbox||this.isASmsInbox||this.isATelegramChannel?this.sourceId&&this.isSent:!!this.isALineChannel)},showDeliveredIndicator:function(){return!!this.showStatusIndicators&&(this.isAWhatsAppChannel||this.isATwilioChannel||this.isASmsInbox||this.isAFacebookInbox?this.sourceId&&this.isDelivered:this.isAWebWidgetInbox||this.isAPIInbox?this.isSent:!!this.isALineChannel&&this.isDelivered)},showReadIndicator:function(){return!!this.showStatusIndicators&&(this.isAWhatsAppChannel||this.isATwilioChannel||this.isAFacebookInbox?this.sourceId&&this.isRead:!(!this.isAWebWidgetInbox&&!this.isAPIInbox)&&this.isRead)}})},oa=(n(3244),Object(C.a)(ra,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-text--metadata"},[e("span",{staticClass:"time",class:{"has-status-icon":t.showSentIndicator||t.showDeliveredIndicator||t.showReadIndicator}},[t._v("\n    "+t._s(t.readableTime)+"\n  ")]),t._v(" "),t.externalError?e("span",{staticClass:"read-indicator-wrap"},[e("fluent-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top-start",value:t.externalError,expression:"externalError",modifiers:{"top-start":!0}}],staticClass:"action--icon",attrs:{icon:"error-circle",size:"14"}})],1):t._e(),t._v(" "),t.showReadIndicator?e("span",{staticClass:"read-indicator-wrap"},[e("fluent-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top-start",value:t.$t("CHAT_LIST.MESSAGE_READ"),expression:"$t('CHAT_LIST.MESSAGE_READ')",modifiers:{"top-start":!0}}],staticClass:"action--icon read-tick read-indicator",attrs:{icon:"checkmark-double",size:"14"}})],1):t.showDeliveredIndicator?e("span",{staticClass:"read-indicator-wrap"},[e("fluent-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top-start",value:t.$t("CHAT_LIST.DELIVERED"),expression:"$t('CHAT_LIST.DELIVERED')",modifiers:{"top-start":!0}}],staticClass:"action--icon read-tick",attrs:{icon:"checkmark-double",size:"14"}})],1):t.showSentIndicator?e("span",{staticClass:"read-indicator-wrap"},[e("fluent-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top-start",value:t.$t("CHAT_LIST.SENT"),expression:"$t('CHAT_LIST.SENT')",modifiers:{"top-start":!0}}],staticClass:"action--icon read-tick",attrs:{icon:"checkmark",size:"14"}})],1):t._e(),t._v(" "),t.isEmail?e("fluent-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top-start",value:t.$t("CHAT_LIST.RECEIVED_VIA_EMAIL"),expression:"$t('CHAT_LIST.RECEIVED_VIA_EMAIL')",modifiers:{"top-start":!0}}],staticClass:"action--icon",attrs:{icon:"mail",size:"16"}}):t._e(),t._v(" "),t.isPrivate?e("fluent-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top-start",value:t.$t("CONVERSATION.VISIBLE_TO_AGENTS"),expression:"$t('CONVERSATION.VISIBLE_TO_AGENTS')",modifiers:{"top-start":!0}}],staticClass:"action--icon lock--icon--private",attrs:{icon:"lock-closed",size:"16"},on:{mouseenter:function(e){t.isHovered=!0},mouseleave:function(e){t.isHovered=!1}}}):t._e(),t._v(" "),t.isATweet&&(t.isOutgoing||t.isIncoming)&&t.linkToTweet?e("a",{attrs:{href:t.linkToTweet,target:"_blank",rel:"noopener noreferrer nofollow"}},[e("fluent-icon",{directives:[{name:"tooltip",rawName:"v-tooltip.top-start",value:t.$t("CHAT_LIST.VIEW_TWEET_IN_TWITTER"),expression:"$t('CHAT_LIST.VIEW_TWEET_IN_TWITTER')",modifiers:{"top-start":!0}}],staticClass:"cursor-pointer action--icon",attrs:{icon:"open",size:"16"}})],1):t._e()],1)}),[],!1,null,"b23640f0",null).exports),ca=n(364);function la(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function ua(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){la(a,i,s,r,o,"next",t)}function o(t){la(a,i,s,r,o,"throw",t)}r(void 0)}))}}var da={mixins:[s.a],props:{name:{type:String,default:""},phoneNumber:{type:String,default:""}},computed:{formattedPhoneNumber:function(){return this.phoneNumber.replace(/\s|-|[A-Za-z]/g,"")},rawPhoneNumber:function(){return this.phoneNumber.replace(/\D/g,"")}},methods:{addContact:function(){var t=this;return ua(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.filterContactByNumber(t.rawPhoneNumber);case 3:if(n=e.sent){e.next=9;break}return e.next=7,t.$store.dispatch("contacts/create",t.getContactObject());case 7:n=e.sent,t.showAlert(t.$t("CONTACT_FORM.SUCCESS_MESSAGE"));case 9:t.openContactNewTab(n.id),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof ca.a?e.t0.data.includes("phone_number")&&t.showAlert(t.$t("CONTACT_FORM.FORM.PHONE_NUMBER.DUPLICATE")):e.t0 instanceof ca.b?t.showAlert(e.t0.data):t.showAlert(t.$t("CONTACT_FORM.ERROR_MESSAGE"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},getContactObject:function(){return{name:this.name,phone_number:"+".concat(this.rawPhoneNumber)}},filterContactByNumber:function(t){var e=this;return ua(regeneratorRuntime.mark((function n(){var i,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={payload:[{attribute_key:"phone_number",filter_operator:"equal_to",values:[t],attribute_model:"standard",custom_attribute_type:""}]},n.next=4,e.$store.dispatch("contacts/filter",{queryPayload:i,resetState:!1});case 4:return s=n.sent,n.abrupt("return",s.shift());case 6:case"end":return n.stop()}}),n)})))()},openContactNewTab:function(t){var e=window.location.pathname.split("/")[3],n="/app/accounts/".concat(e,"/contacts/").concat(t);window.open(n,"_blank")}}},pa=(n(3245),Object(C.a)(da,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"contact--group"},[e("fluent-icon",{staticClass:"file--icon",attrs:{icon:"call",size:"18"}}),t._v(" "),e("div",{staticClass:"meta"},[e("p",{staticClass:"overflow-hidden whitespace-nowrap text-ellipsis margin-bottom-0"},[t._v("\n      "+t._s(t.phoneNumber)+"\n    ")])]),t._v(" "),t.formattedPhoneNumber?e("div",{staticClass:"link-wrap"},[e("woot-button",{attrs:{variant:"clear",size:"small"},on:{click:function(e){return e.preventDefault(),t.addContact.apply(null,arguments)}}},[t._v("\n      "+t._s(t.$t("CONVERSATION.SAVE_CONTACT"))+"\n    ")])],1):t._e()],1)}),[],!1,null,"32d0887e",null)),ha=pa.exports,fa={props:{url:{type:String,required:!0}},computed:{fileName:function(){return this.url&&this.url.substring(this.url.lastIndexOf("/")+1)||this.$t("CONVERSATION.UNKNOWN_FILE_TYPE")}},methods:{openLink:function(){var t=window.open(this.url,"_blank","noopener");t&&t.focus()}}},ma=(n(3246),Object(C.a)(fa,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"file message-text__wrap"},[e("div",{staticClass:"icon-wrap"},[e("fluent-icon",{staticClass:"file--icon",attrs:{icon:"document",size:"32"}})],1),t._v(" "),e("div",{staticClass:"meta"},[e("h5",{staticClass:"text-block-title"},[t._v("\n      "+t._s(decodeURI(t.fileName))+"\n    ")]),t._v(" "),e("a",{staticClass:"download clear link button small",attrs:{rel:"noreferrer noopener nofollow",target:"_blank",href:t.url}},[t._v("\n      "+t._s(t.$t("CONVERSATION.DOWNLOAD"))+"\n    ")])])])}),[],!1,null,"ba9e2600",null).exports);n(273);function va(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ba(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?va(Object(n),!0).forEach((function(e){ga(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ga(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _a={IMAGE:"image",VIDEO:"video",AUDIO:"audio"},ya={components:{Thumbnail:W.a},mixins:[M.a,E.mixin,F.a],props:{show:{type:Boolean,required:!0},attachment:{type:Object,required:!0},allAttachments:{type:Array,required:!0}},data:function(){var t=this;return{activeAttachment:{},activeFileType:"",activeImageIndex:this.allAttachments.findIndex((function(e){return e.message_id===t.attachment.message_id}))||0}},computed:ba(ba({},Object(i.mapGetters)({currentUser:"getCurrentUser"})),{},{hasMoreThanOneAttachment:function(){return this.allAttachments.length>1},readableTime:function(){return this.activeAttachment.created_at&&this.messageTimestamp(this.activeAttachment.created_at,"LLL d yyyy, h:mm a")||""},isImage:function(){return this.activeFileType===_a.IMAGE},isVideo:function(){return this.activeFileType===_a.VIDEO},isAudio:function(){return this.activeFileType===_a.AUDIO},senderDetails:function(){var t,e,n,i=(null===(t=this.activeAttachment)||void 0===t?void 0:t.sender)||(null===(e=this.attachment)||void 0===e?void 0:e.sender)||{},s=i.name,a=i.available_name,r=i.avatar_url,o=i.thumbnail,c=i.id;return{name:(null===(n=this.currentUser)||void 0===n?void 0:n.id)===c?"You":s||a||"",avatar:o||r||""}},fileNameFromDataUrl:function(){var t=this.activeAttachment.data_url;return t&&(null===t||void 0===t?void 0:t.split("/").pop())||""}}),mounted:function(){this.setImageAndVideoSrc(this.attachment)},methods:{onClose:function(){this.$emit("close")},onClickChangeAttachment:function(t,e){t&&(this.activeImageIndex=e,this.setImageAndVideoSrc(t))},setImageAndVideoSrc:function(t){var e=t.file_type;Object.values(_a).includes(e)&&(this.activeAttachment=t,this.activeFileType=e)},onKeyDownHandler:function(t){Object(k.z)(t)?this.onClose():Object(k.p)(t)?this.onClickChangeAttachment(this.allAttachments[this.activeImageIndex-1],this.activeImageIndex-1):Object(k.q)(t)&&this.onClickChangeAttachment(this.allAttachments[this.activeImageIndex+1],this.activeImageIndex+1)},onClickDownload:function(){var t=this.activeAttachment,e=t.file_type,n=t.data_url;if(Object.values(_a).includes(e)){var i=document.createElement("a");i.href=n,i.download="attachment.".concat(e),i.click()}}}},Ca=Object(C.a)(ya,(function(){var t=this,e=t._self._c;return e("woot-modal",{attrs:{"full-width":"",show:t.show,"show-close-button":!1,"on-close":t.onClose},on:{"update:show":function(e){t.show=e}}},[e("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.onClose,expression:"onClose"}],staticClass:"bg-white dark:bg-slate-900 flex flex-col h-[inherit] w-[inherit]",on:{click:t.onClose}},[e("div",{staticClass:"items-center flex h-16 justify-between py-2 px-6 w-full"},[e("div",{staticClass:"items-center flex justify-start min-w-[15rem]",on:{click:function(t){t.stopPropagation()}}},[e("thumbnail",{attrs:{username:t.senderDetails.name,src:t.senderDetails.avatar}}),t._v(" "),e("div",{staticClass:"flex items-start flex-col justify-center ml-2 rtl:ml-0 rtl:mr-2"},[e("h3",{staticClass:"sub-block-title inline-block leading-[1.4] m-0 p-0 capitalize"},[e("span",{staticClass:"text-slate-800 dark:text-slate-100 overflow-hidden whitespace-nowrap text-ellipsis"},[t._v("\n              "+t._s(t.senderDetails.name)+"\n            ")])]),t._v(" "),e("span",{staticClass:"text-xs m-0 p-0 text-slate-400 dark:text-slate-200 overflow-hidden whitespace-nowrap text-ellipsis"},[t._v("\n            "+t._s(t.readableTime)+"\n          ")])])],1),t._v(" "),e("div",{staticClass:"items-center text-slate-700 dark:text-slate-100 flex font-semibold justify-start min-w-0 p-1 w-auto text-block-title"},[e("span",{staticClass:"text-slate-700 dark:text-slate-100 overflow-hidden whitespace-nowrap text-ellipsis"},[t._v("\n          "+t._s(t.fileNameFromDataUrl)+"\n        ")])]),t._v(" "),e("div",{staticClass:"items-center flex gap-2 justify-end min-w-[15rem]",on:{click:function(t){t.stopPropagation()}}},[e("woot-button",{attrs:{size:"large","color-scheme":"secondary",variant:"clear",icon:"arrow-download"},on:{click:t.onClickDownload}}),t._v(" "),e("woot-button",{attrs:{size:"large","color-scheme":"secondary",variant:"clear",icon:"dismiss"},on:{click:t.onClose}})],1)]),t._v(" "),e("div",{staticClass:"items-center flex h-full justify-center w-full"},[e("div",{staticClass:"flex justify-center min-w-[6.25rem] w-[6.25rem]"},[t.hasMoreThanOneAttachment?e("woot-button",{attrs:{size:"large",variant:"smooth","color-scheme":"primary",icon:"chevron-left",disabled:0===t.activeImageIndex},on:{click:function(e){return e.stopPropagation(),t.onClickChangeAttachment(t.allAttachments[t.activeImageIndex-1],t.activeImageIndex-1)}}}):t._e()],1),t._v(" "),e("div",{staticClass:"flex items-center flex-col justify-center w-full h-full"},[e("div",[t.isImage?e("img",{key:t.activeAttachment.message_id,staticClass:"modal-image skip-context-menu my-0 mx-auto",attrs:{src:t.activeAttachment.data_url},on:{click:function(t){t.stopPropagation()}}}):t._e(),t._v(" "),t.isVideo?e("video",{key:t.activeAttachment.message_id,staticClass:"modal-video skip-context-menu my-0 mx-auto",attrs:{src:t.activeAttachment.data_url,controls:"",playsInline:""},on:{click:function(t){t.stopPropagation()}}}):t._e(),t._v(" "),t.isAudio?e("audio",{key:t.activeAttachment.message_id,staticClass:"skip-context-menu",attrs:{controls:""},on:{click:function(t){t.stopPropagation()}}},[e("source",{attrs:{src:`${t.activeAttachment.data_url}?t=${Date.now()}`}})]):t._e()])]),t._v(" "),e("div",{staticClass:"flex justify-center min-w-[6.25rem] w-[6.25rem]"},[t.hasMoreThanOneAttachment?e("woot-button",{attrs:{size:"large",variant:"smooth","color-scheme":"primary",disabled:t.activeImageIndex===t.allAttachments.length-1,icon:"chevron-right"},on:{click:function(e){return e.stopPropagation(),t.onClickChangeAttachment(t.allAttachments[t.activeImageIndex+1],t.activeImageIndex+1)}}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"items-center flex h-16 justify-center w-full py-2 px-6"},[e("div",{staticClass:"items-center rounded-sm flex font-semibold justify-center min-w-[5rem] p-1 bg-slate-25 dark:bg-slate-800 text-slate-600 dark:text-slate-200 text-block-title"},[e("span",{staticClass:"count"},[t._v("\n          "+t._s(`${t.activeImageIndex+1} / ${t.allAttachments.length}`)+"\n        ")])])])])])}),[],!1,null,null,null).exports;function Oa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Aa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Oa(Object(n),!0).forEach((function(e){Ta(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ta(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ea="image",wa="video",Sa="audio",Ia={components:{GalleryView:Ca},props:{attachment:{type:Object,required:!0}},data:function(){return{show:!1,isImageError:!1}},computed:Aa(Aa({},Object(i.mapGetters)({currentChatAttachments:"getSelectedChatAttachments"})),{},{isImage:function(){return this.attachment.file_type===Ea},isVideo:function(){return this.attachment.file_type===wa},isAudio:function(){return this.attachment.file_type===Sa},attachmentTypeClasses:function(){return{image:this.isImage,video:this.isVideo}},filteredCurrentChatAttachments:function(){return this.currentChatAttachments.filter((function(t){return["image","video","audio"].includes(t.file_type)}))}}),watch:{attachment:function(){this.isImageError=!1}},methods:{onClose:function(){this.show=!1},onClick:function(t){Object(k.s)(t)?window.open(this.attachment.data_url,"_blank"):this.show=!0},onImgError:function(){this.isImageError=!0,this.$emit("error")}}},xa=Object(C.a)(Ia,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-text__wrap",class:t.attachmentTypeClasses},[t.isImage&&!t.isImageError?e("img",{attrs:{src:t.attachment.data_url},on:{click:t.onClick,error:t.onImgError}}):t._e(),t._v(" "),t.isVideo?e("video",{attrs:{src:t.attachment.data_url,muted:"",playsInline:""},domProps:{muted:!0},on:{error:t.onImgError,click:t.onClick}}):t.isAudio?e("audio",{staticClass:"skip-context-menu",attrs:{controls:""}},[e("source",{attrs:{src:`${t.attachment.data_url}?t=${Date.now()}`}})]):t._e(),t._v(" "),t.show?e("gallery-view",{attrs:{show:t.show,attachment:t.attachment,"all-attachments":t.filteredCurrentChatAttachments},on:{"update:show":function(e){t.show=e},error:t.onImgError,close:t.onClose}}):t._e()],1)}),[],!1,null,null,null).exports,Na=n(2789);function Ra(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}var La={mixins:[s.a],props:{messageId:{type:Number,required:!0},meetingData:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1,dyteAuthToken:"",isSDKMounted:!1}},computed:{meetingLink:function(){return Object(Na.a)(this.meetingData.room_name,this.dyteAuthToken)}},methods:{joinTheCall:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var n,i,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,t.next=4,pi.addParticipantToMeeting(e.messageId);case 4:n=t.sent,i=n.data,s=(i=void 0===i?{}:i).authResponse,a=(s=void 0===s?{}:s).authToken,e.dyteAuthToken=a,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),e.showAlert(e.$t("INTEGRATION_SETTINGS.DYTE.JOIN_ERROR"));case 16:return t.prev=16,e.isLoading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,13,16,19]])})),function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){Ra(a,i,s,r,o,"next",t)}function o(t){Ra(a,i,s,r,o,"throw",t)}r(void 0)}))})()},leaveTheRoom:function(){this.dyteAuthToken=""}}},Pa=La,Ma=(n(3247),{components:{DyteVideoCall:Object(C.a)(Pa,(function(){var t=this,e=t._self._c;return e("div",[e("woot-button",{staticClass:"join-call-button",attrs:{size:"small",variant:"smooth","color-scheme":"secondary",icon:"video-add","is-loading":t.isLoading},on:{click:t.joinTheCall}},[t._v("\n    "+t._s(t.$t("INTEGRATION_SETTINGS.DYTE.CLICK_HERE_TO_JOIN"))+"\n  ")]),t._v(" "),t.dyteAuthToken?e("div",{staticClass:"video-call--container"},[e("iframe",{attrs:{src:t.meetingLink,allow:"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;"}}),t._v(" "),e("woot-button",{staticClass:"join-call-button",attrs:{size:"small",variant:"smooth","color-scheme":"secondary"},on:{click:t.leaveTheRoom}},[t._v("\n      "+t._s(t.$t("INTEGRATION_SETTINGS.DYTE.LEAVE_THE_ROOM"))+"\n    ")])],1):t._e()],1)}),[],!1,null,null,null).exports},mixins:[Ue.c],props:{messageId:{type:[String,Number],default:0},contentAttributes:{type:Object,default:function(){return{}}},inboxId:{type:[String,Number],default:0}},computed:{showDyteIntegration:function(){return(this.isAPIInbox||this.isAWebWidgetInbox)&&"dyte"===this.contentAttributes.type},inbox:function(){return this.$store.getters["inboxes/getInbox"](this.inboxId)}}}),ka=Object(C.a)(Ma,(function(){var t=this,e=t._self._c;return t.showDyteIntegration?e("dyte-video-call",{attrs:{"message-id":t.messageId,"meeting-data":t.contentAttributes.data}}):t._e()}),[],!1,null,null,null).exports,$a={props:{latitude:{type:Number,default:void 0},longitude:{type:Number,default:void 0},name:{type:String,default:""}},computed:{mapUrl:function(){return"https://maps.google.com/?q=".concat(this.latitude,",").concat(this.longitude)}}},ja=(n(3248),Object(C.a)($a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"location message-text__wrap"},[e("div",{staticClass:"icon-wrap"},[e("fluent-icon",{staticClass:"file--icon",attrs:{icon:"location",size:"32"}})],1),t._v(" "),e("div",{staticClass:"meta"},[e("h5",{staticClass:"text-block-title overflow-hidden whitespace-nowrap text-ellipsis"},[t._v("\n      "+t._s(t.name)+"\n    ")]),t._v(" "),e("div",{staticClass:"link-wrap"},[e("a",{staticClass:"download clear link button small",attrs:{rel:"noreferrer noopener nofollow",target:"_blank",href:t.mapUrl}},[t._v("\n        "+t._s(t.$t("COMPONENTS.LOCATION_BUBBLE.SEE_ON_MAP"))+"\n      ")])])])])}),[],!1,null,"b5e3407c",null).exports),Da={props:{emailAttributes:{type:Object,default:function(){return{}}},isIncoming:{type:Boolean,default:!0},cc:{type:Array,default:function(){return[]}},bcc:{type:Array,default:function(){return[]}}},computed:{fromMail:function(){return(this.emailAttributes.from||[]).join(", ")},toMails:function(){return(this.emailAttributes.to||[]).join(", ")},ccMails:function(){return(this.emailAttributes.cc||this.cc||[]).join(", ")},bccMails:function(){return(this.emailAttributes.bcc||this.bcc||[]).join(", ")},subject:function(){return this.emailAttributes.subject||""},showHead:function(){return this.toMails||this.ccMails||this.bccMails||this.fromMail}}},Fa=(n(3249),Object(C.a)(Da,(function(){var t=this,e=t._self._c;return t.showHead?e("div",{staticClass:"message__mail-head",class:{"is-incoming":t.isIncoming}},[t.fromMail?e("div",{staticClass:"meta-wrap"},[e("span",{staticClass:"message__content--type"},[t._v(t._s(t.$t("EMAIL_HEADER.FROM"))+":")]),t._v(" "),e("span",[t._v(t._s(t.fromMail))])]):t._e(),t._v(" "),t.toMails?e("div",{staticClass:"meta-wrap"},[e("span",{staticClass:"message__content--type"},[t._v(t._s(t.$t("EMAIL_HEADER.TO"))+":")]),t._v(" "),e("span",[t._v(t._s(t.toMails))])]):t._e(),t._v(" "),t.ccMails?e("div",{staticClass:"meta-wrap"},[e("span",{staticClass:"message__content--type"},[t._v(t._s(t.$t("EMAIL_HEADER.CC"))+":")]),t._v(" "),e("span",[t._v(t._s(t.ccMails))])]):t._e(),t._v(" "),t.bccMails?e("div",{staticClass:"meta-wrap"},[e("span",{staticClass:"message__content--type"},[t._v(t._s(t.$t("EMAIL_HEADER.BCC"))+":")]),t._v(" "),e("span",[t._v(t._s(t.bccMails))])]):t._e(),t._v(" "),t.subject?e("div",{staticClass:"meta-wrap"},[e("span",{staticClass:"message__content--type"},[t._v("\n      "+t._s(t.$t("EMAIL_HEADER.SUBJECT"))+":\n    ")]),t._v(" "),e("span",[t._v(t._s(t.subject))])]):t._e()]):t._e()}),[],!1,null,"04b9e66a",null).exports),Ua={name:"ReplyTo",components:{MessagePreview:Yn.a},props:{message:{type:Object,required:!0},messageType:{type:Number,required:!0},parentHasAttachments:{type:Boolean,required:!0}},data:function(){return{MESSAGE_TYPE:qt.m}}},Ba=Object(C.a)(Ua,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"px-2 py-1.5 rounded-sm min-w-[10rem] mb-2",class:{"bg-slate-50 dark:bg-slate-600 dark:text-slate-50":t.messageType===t.MESSAGE_TYPE.INCOMING,"bg-woot-600 text-woot-50":t.messageType===t.MESSAGE_TYPE.OUTGOING,"-mx-2":!t.parentHasAttachments}},[e("message-preview",{attrs:{message:t.message,"show-message-type":!1,"default-empty-message":t.$t("CONVERSATION.REPLY_MESSAGE_NOT_FOUND")}})],1)}),[],!1,null,null,null).exports,Va={components:{Letter:n(3250).a},props:{message:{type:String,default:""},isEmail:{type:Boolean,default:!0},displayQuotedButton:{type:Boolean,default:!1}},data:function(){return{showQuotedContent:!1}},computed:{isQuotedContentPresent:function(){return this.isEmail?this.showQuotedContent:this.message.includes("<blockquote")},showQuoteToggle:function(){return!!this.isEmail&&this.displayQuotedButton}},methods:{toggleQuotedContent:function(){this.showQuotedContent=!this.showQuotedContent}}},Ga=(n(3253),Object(C.a)(Va,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-text__wrap",class:{"show--quoted":t.isQuotedContentPresent,"hide--quoted":!t.isQuotedContentPresent}},[t.isEmail?e("letter",{staticClass:"text-content bg-white dark:bg-white text-slate-900 dark:text-slate-900 p-2 rounded-[4px]",attrs:{html:t.message}}):e("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.message,expression:"message"}],staticClass:"text-content"}),t._v(" "),t.showQuoteToggle?e("button",{staticClass:"text-slate-300 dark:text-slate-300 cursor-pointer text-xs py-1",on:{click:t.toggleQuotedContent}},[t.showQuotedContent?e("span",{staticClass:"flex items-center gap-0.5"},[e("fluent-icon",{attrs:{icon:"chevron-up",size:"16"}}),t._v("\n      "+t._s(t.$t("CHAT_LIST.HIDE_QUOTED_TEXT"))+"\n    ")],1):e("span",{staticClass:"flex items-center gap-0.5"},[e("fluent-icon",{attrs:{icon:"chevron-down",size:"16"}}),t._v("\n      "+t._s(t.$t("CHAT_LIST.SHOW_QUOTED_TEXT"))+"\n    ")],1)]):t._e()],1)}),[],!1,null,null,null).exports),Wa=n(2813),Ha={props:{contentAttributes:{type:Object,default:function(){return{}}},content:{type:String,default:""}},computed:{translationsAvailable:function(){return!!Object.keys(this.translations).length},translations:function(){return this.contentAttributes.translations||{}}},methods:{onClose:function(){this.$emit("close")}}},za=Object(C.a)(Ha,(function(){var t=this,e=t._self._c;return e("woot-modal",{staticClass:"text-left",attrs:{"modal-type":"right-aligned",show:"","on-close":t.onClose}},[e("div",{staticClass:"column content"},[e("p",[e("b",[t._v(t._s(t.$t("TRANSLATE_MODAL.ORIGINAL_CONTENT")))])]),t._v(" "),e("p",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:t.content,expression:"content"}]}),t._v(" "),e("br"),t._v(" "),e("hr"),t._v(" "),t.translationsAvailable?e("div",[e("p",[e("b",[t._v(t._s(t.$t("TRANSLATE_MODAL.TRANSLATED_CONTENT")))])]),t._v(" "),t._l(t.translations,(function(n,i){return e("div",{key:i},[e("p",[e("strong",[t._v(t._s(i)+":")])]),t._v(" "),e("p",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:n,expression:"translation"}]}),t._v(" "),e("br")])}))],2):e("p",[t._v("\n      "+t._s(t.$t("TRANSLATE_MODAL.NO_TRANSLATIONS_AVAILABLE"))+"\n    ")])])])}),[],!1,null,null,null).exports,Ya=n(2741);function qa(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Ka(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){qa(a,i,s,r,o,"next",t)}function o(t){qa(a,i,s,r,o,"throw",t)}r(void 0)}))}}function Xa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Qa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xa(Object(n),!0).forEach((function(e){Za(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Za(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ja={components:{AddCannedModal:Wa.a,TranslateModal:za,MenuItem:Ya.a},mixins:[s.a,E.mixin,Ii.a],props:{message:{type:Object,required:!0},isOpen:{type:Boolean,default:!1},enabledOptions:{type:Object,default:function(){return{}}},contextMenuPosition:{type:Object,default:function(){return{}}}},data:function(){return{isCannedResponseModalOpen:!1,showTranslateModal:!1,showDeleteModal:!1}},computed:Qa(Qa({},Object(i.mapGetters)({getAccount:"accounts/getAccount",currentAccountId:"getCurrentAccountId"})),{},{plainTextContent:function(){return this.getPlainText(this.messageContent)},conversationId:function(){return this.message.conversation_id},messageId:function(){return this.message.id},messageContent:function(){return this.message.content},contentAttributes:function(){return this.message.content_attributes}}),methods:{copyLinkToMessage:function(){var t=this;return Ka(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.chatwootConfig.hostURL+Object(bt.c)(Object(bt.b)({id:t.conversationId,accountId:t.currentAccountId})),e.next=3,Object(Zi.a)("".concat(n,"?messageId=").concat(t.messageId));case 3:t.showAlert(t.$t("CONVERSATION.CONTEXT_MENU.LINK_COPIED")),t.handleClose();case 5:case"end":return e.stop()}}),e)})))()},handleCopy:function(){var t=this;return Ka(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Zi.a)(t.plainTextContent);case 2:t.showAlert(t.$t("CONTACT_PANEL.COPY_SUCCESSFUL")),t.handleClose();case 4:case"end":return e.stop()}}),e)})))()},showCannedResponseModal:function(){this.$track(f.a.ADDED_TO_CANNED_RESPONSE),this.isCannedResponseModalOpen=!0},hideCannedResponseModal:function(){this.isCannedResponseModalOpen=!1,this.handleClose()},handleOpen:function(t){this.$emit("open",t)},handleClose:function(t){this.$emit("close",t)},handleTranslate:function(){var t=this.getAccount(this.currentAccountId).locale;this.$store.dispatch("translateMessage",{conversationId:this.conversationId,messageId:this.messageId,targetLanguage:t||"en"}),this.$track(f.d.TRANSLATE_A_MESSAGE),this.handleClose(),this.showTranslateModal=!0},handleReplyTo:function(){this.$emit("replyTo",this.message),this.handleClose()},onCloseTranslateModal:function(){this.showTranslateModal=!1},openDeleteModal:function(){this.handleClose(),this.showDeleteModal=!0},confirmDeletion:function(){var t=this;return Ka(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("deleteMessage",{conversationId:t.conversationId,messageId:t.messageId});case 3:t.showAlert(t.$t("CONVERSATION.SUCCESS_DELETE_MESSAGE")),t.handleClose(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.showAlert(t.$t("CONVERSATION.FAIL_DELETE_MESSSAGE"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},closeDeleteModal:function(){this.showDeleteModal=!1}}},tr=(n(3254),Object(C.a)(Ja,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"context-menu"},[t.isCannedResponseModalOpen&&t.enabledOptions.cannedResponse?e("woot-modal",{attrs:{show:t.isCannedResponseModalOpen,"on-close":t.hideCannedResponseModal},on:{"update:show":function(e){t.isCannedResponseModalOpen=e}}},[e("add-canned-modal",{attrs:{"response-content":t.plainTextContent,"on-close":t.hideCannedResponseModal}})],1):t._e(),t._v(" "),t.showTranslateModal?e("translate-modal",{attrs:{content:t.messageContent,"content-attributes":t.contentAttributes},on:{close:t.onCloseTranslateModal}}):t._e(),t._v(" "),t.showDeleteModal?e("woot-delete-modal",{staticClass:"context-menu--delete-modal",attrs:{show:t.showDeleteModal,"on-close":t.closeDeleteModal,"on-confirm":t.confirmDeletion,title:t.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.TITLE"),message:t.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.MESSAGE"),"confirm-text":t.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.DELETE"),"reject-text":t.$t("CONVERSATION.CONTEXT_MENU.DELETE_CONFIRMATION.CANCEL")},on:{"update:show":function(e){t.showDeleteModal=e}}}):t._e(),t._v(" "),e("woot-button",{attrs:{icon:"more-vertical","color-scheme":"secondary",variant:"clear",size:"small"},on:{click:t.handleOpen}}),t._v(" "),t.isOpen&&!t.isCannedResponseModalOpen?e("woot-context-menu",{attrs:{x:t.contextMenuPosition.x,y:t.contextMenuPosition.y},on:{close:t.handleClose}},[e("div",{staticClass:"menu-container"},[t.enabledOptions.replyTo?e("menu-item",{attrs:{option:{icon:"arrow-reply",label:t.$t("CONVERSATION.CONTEXT_MENU.REPLY_TO")},variant:"icon"},on:{click:t.handleReplyTo}}):t._e(),t._v(" "),t.enabledOptions.copy?e("menu-item",{attrs:{option:{icon:"clipboard",label:t.$t("CONVERSATION.CONTEXT_MENU.COPY")},variant:"icon"},on:{click:t.handleCopy}}):t._e(),t._v(" "),t.enabledOptions.copy?e("menu-item",{attrs:{option:{icon:"translate",label:t.$t("CONVERSATION.CONTEXT_MENU.TRANSLATE")},variant:"icon"},on:{click:t.handleTranslate}}):t._e(),t._v(" "),e("hr"),t._v(" "),e("menu-item",{attrs:{option:{icon:"link",label:t.$t("CONVERSATION.CONTEXT_MENU.COPY_PERMALINK")},variant:"icon"},on:{click:t.copyLinkToMessage}}),t._v(" "),t.enabledOptions.cannedResponse?e("menu-item",{attrs:{option:{icon:"comment-add",label:t.$t("CONVERSATION.CONTEXT_MENU.CREATE_A_CANNED_RESPONSE")},variant:"icon"},on:{click:t.showCannedResponseModal}}):t._e(),t._v(" "),t.enabledOptions.delete?e("hr"):t._e(),t._v(" "),t.enabledOptions.delete?e("menu-item",{attrs:{option:{icon:"delete",label:t.$t("CONVERSATION.CONTEXT_MENU.DELETE")},variant:"icon"},on:{click:t.openDeleteModal}}):t._e()],1)]):t._e()],1)}),[],!1,null,"eb813b70",null).exports),er={components:{},props:{url:{type:String,required:!0}},data:function(){return{show:!1}},methods:{onClose:function(){this.show=!1},onClick:function(){this.show=!0}}},nr=Object(C.a)(er,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"image message-text__wrap"},[e("img",{attrs:{src:t.url},on:{click:t.onClick,error:function(e){return t.$emit("error")}}}),t._v(" "),e("woot-modal",{attrs:{"full-width":!0,show:t.show,"on-close":t.onClose},on:{"update:show":function(e){t.show=e}}},[e("img",{staticClass:"modal-image skip-context-menu",attrs:{src:t.url}})])],1)}),[],!1,null,null,null).exports,ir={props:{url:{type:String,required:!0}},data:function(){return{show:!1}},mounted:function(){var t=this;this.$refs.videoElement.onerror=function(){t.$emit("error")}},methods:{onClose:function(){this.show=!1},onClick:function(){this.show=!0}}},sr={},ar={components:{BubbleImage:nr,BubbleVideo:Object(C.a)(ir,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"video message-text__wrap"},[e("video",{ref:"videoElement",attrs:{src:t.url,muted:"",playsInline:""},domProps:{muted:!0},on:{click:t.onClick}}),t._v(" "),e("woot-modal",{attrs:{show:t.show,"on-close":t.onClose},on:{"update:show":function(e){t.show=e}}},[e("video",{staticClass:"modal-video skip-context-menu mx-auto",attrs:{src:t.url,controls:"",playsInline:""}})])],1)}),[],!1,null,null,null).exports,InstagramStoryErrorPlaceHolder:Object(C.a)(sr,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center justify-center px-8 h-28 w-full bg-slate-100 text-slate-700 dark:bg-slate-500 dark:text-slate-75"},[e("fluent-icon",{attrs:{icon:"document-error",size:"32"}}),t._v(" "),e("p",{staticClass:"mb-0 text-slate-700 dark:text-slate-75"},[t._v("\n    "+t._s(t.$t("COMPONENTS.FILE_BUBBLE.INSTAGRAM_STORY_UNAVAILABLE"))+"\n  ")])],1)}),[],!1,null,null,null).exports},props:{storyUrl:{type:String,default:""}},data:function(){return{hasImgStoryError:!1,hasVideoStoryError:!1}},methods:{onImageLoadError:function(){this.hasImgStoryError=!0,this.emitError()},onVideoLoadError:function(){this.hasVideoStoryError=!0,this.emitError()},emitError:function(){this.$emit("error")}}},rr=Object(C.a)(ar,(function(){var t=this,e=t._self._c;return t.hasImgStoryError?t.hasVideoStoryError?e("instagram-story-error-place-holder"):e("bubble-video",{attrs:{url:t.storyUrl},on:{error:t.onVideoLoadError}}):e("bubble-image",{attrs:{url:t.storyUrl},on:{error:t.onImageLoadError}})}),[],!1,null,null,null).exports,or={components:{InstagramStory:rr},props:{storyUrl:{type:String,default:""}},data:function(){return{hasImgStoryError:!1,hasVideoStoryError:!1}},methods:{onImageLoadError:function(){this.hasImgStoryError=!0},onVideoLoadError:function(){this.hasVideoStoryError=!0}}},cr=Object(C.a)(or,(function(){var t=this,e=t._self._c;return e("blockquote",{staticClass:"my-0 px-2 pb-0 pt-0 border-l-4 border-solid border-slate-75 dark:border-slate-600 text-slate-600 dark:text-slate-200"},[e("span",[t._v(t._s(t.$t("CONVERSATION.REPLIED_TO_STORY")))]),t._v(" "),e("instagram-story",{staticClass:"mt-3 rounded-md",attrs:{"story-url":t.storyUrl}})],1)}),[],!1,null,null,null).exports,lr="incoming_email",ur={computed:{isEmailContentType:function(){return this.contentType===lr}}};function dr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var i,s,a=[],r=!0,o=!1;try{for(n=n.call(t);!(r=(i=n.next()).done)&&(a.push(i.value),!e||a.length!==e);r=!0);}catch(c){o=!0,s=c}finally{try{r||null==n.return||n.return()}finally{if(o)throw s}}return a}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return pr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var hr=function(t){var e=t.submitted_values,n=dr(void 0===e?[]:e,1)[0];return n&&n.title?"<strong>".concat(n.title,"</strong>"):""},fr=function(t){var e=t.submitted_email,n=void 0===e?"":e;return n?"<strong>".concat(n,"</strong>"):""},mr=function(t,e){var n=e.noResponseText,i=t.items,s=t.submitted_values,a=void 0===s?[]:s;if(a.length){var r=a.reduce((function(t,e){return t[e.name]=e.value,t}),{}),o="";return i.forEach((function(t){o+="<div>".concat(t.label,"</div>");var e=r[t.name]||n;o+="<strong>".concat(e,"</strong><br/><br/>")})),o}return""},vr=function(t,e){var n=e.ratingTitle,i=e.feedbackTitle,s=t.submitted_values,a=(s=void 0===s?{}:s).csat_survey_response,r=(void 0===a?{}:a)||{},o=r.rating,c=r.feedback_message,l="";if(o){var u=dr(qt.i.filter((function(t){return t.value===o})),1)[0],d=void 0===u?{}:u;l+="<div><strong>".concat(n,"</strong></div>"),l+="<p>".concat(d.emoji,"</p>")}return c&&(l+="<div><strong>".concat(i,"</strong></div>"),l+="<p>".concat(c,"</p>")),l};function br(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function gr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gr(Object(n),!0).forEach((function(e){yr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Cr={components:{BubbleActions:oa,BubbleContact:ha,BubbleFile:ma,BubbleImageAudioVideo:xa,BubbleIntegration:ka,BubbleLocation:ja,BubbleMailHead:Fa,BubbleReplyTo:Ba,BubbleText:Ga,ContextMenu:tr,InstagramStory:rr,InstagramStoryReply:cr,Spinner:H.a},mixins:[s.a,Ii.a,ur],props:{data:{type:Object,required:!0},isATweet:{type:Boolean,default:!1},isAWhatsAppChannel:{type:Boolean,default:!1},isWebWidgetInbox:{type:Boolean,default:!1},inboxSupportsReplyTo:{type:Object,default:function(){return{}}},inReplyTo:{type:Object,default:function(){return{}}}},data:function(){return{showContextMenu:!1,hasMediaLoadError:!1,contextMenuPosition:{},showBackgroundHighlight:!1}},computed:{attachments:function(){var t,e=this;return null===(t=this.data)||void 0===t?void 0:t.attachments.map((function(t){return _r(_r({},t),{},{sender:e.data.sender||{},created_at:e.data.created_at||""})}))},shouldRenderMessage:function(){return this.hasAttachments||this.data.content||this.isEmailContentType||this.isAnIntegrationMessage},emailMessageContent:function(){var t=this.contentAttributes.email||{},e=t.html_content,n=(e=void 0===e?{}:e).full,i=t.text_content,s=(i=void 0===i?{}:i).full;return n||s||""},displayQuotedButton:function(){return!!this.emailMessageContent.includes("<blockquote")||(this.isIncoming,!1)},message:function(){if(this.emailMessageContent&&this.isIncoming)return this.emailMessageContent;var t=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.noResponseText,s=void 0===i?"No response":i,a=n.csat,r=(a=void 0===a?{}:a).ratingTitle,o=void 0===r?"Rating":r,c=a.feedbackTitle,l=void 0===c?"Feedback":c,u={input_select:hr,input_email:fr,form:mr,input_csat:vr}[t];return u&&"function"===typeof u?u(e,{noResponseText:s,ratingTitle:o,feedbackTitle:l}):""}(this.contentType,this.contentAttributes,{noResponseText:this.$t("CONVERSATION.NO_RESPONSE"),csat:{ratingTitle:this.$t("CONVERSATION.RATING_TITLE"),feedbackTitle:this.$t("CONVERSATION.FEEDBACK_TITLE")}});return"input_csat"===this.contentType?this.$t("CONVERSATION.CSAT_REPLY_MESSAGE")+t:this.formatMessage(this.data.content,this.isATweet,this.data.private)+t},inReplyToMessageId:function(){var t;return null===(t=this.data.content_attributes)||void 0===t?void 0:t.in_reply_to},isAnInstagramStory:function(){return"story_mention"===this.contentAttributes.image_type},contextMenuEnabledOptions:function(){return{copy:this.hasText,delete:this.hasText||this.hasAttachments,cannedResponse:this.isOutgoing&&this.hasText,replyTo:!this.data.private&&this.inboxSupportsReplyTo.outgoing}},contentAttributes:function(){return this.data.content_attributes||{}},externalError:function(){return this.contentAttributes.external_error||""},sender:function(){return this.data.sender||{}},status:function(){return this.data.status},storySender:function(){return this.contentAttributes.story_sender||null},storyId:function(){return this.contentAttributes.story_id||null},storyUrl:function(){return this.contentAttributes.story_url||null},contentType:function(){var t=this.data.content_type;return t},twitterProfileLink:function(){var t=(this.sender.additional_attributes||{}).screen_name;return"https://twitter.com/".concat(t)},alignBubble:function(){var t=this.data.message_type;return{center:t===qt.m.ACTIVITY,left:t===qt.m.INCOMING,right:t===qt.m.OUTGOING||t===qt.m.TEMPLATE,"has-context-menu":this.showContextMenu,"has-tweet-menu":this.isATweet,"has-bg":this.showBackgroundHighlight}},createdAt:function(){return this.contentAttributes.external_created_at||this.data.created_at},isBubble:function(){return[0,1,3].includes(this.data.message_type)},isIncoming:function(){return this.data.message_type===qt.m.INCOMING},isOutgoing:function(){return this.data.message_type===qt.m.OUTGOING},isTemplate:function(){return this.data.message_type===qt.m.TEMPLATE},isAnIntegrationMessage:function(){return"integrations"===this.contentType},emailHeadAttributes:function(){return{email:this.contentAttributes.email,cc:this.contentAttributes.cc_emails,bcc:this.contentAttributes.bcc_emails}},hasAttachments:function(){return!!(this.data.attachments&&this.data.attachments.length>0)},isMessageDeleted:function(){return this.contentAttributes.deleted},hasText:function(){return!!this.data.content},tooltipForSender:function(){var t=this.senderNameForAvatar,e=this.data.message_type;return!!(e===qt.m.OUTGOING||e===qt.m.TEMPLATE)&&{content:"".concat(this.$t("CONVERSATION.SENT_BY")," ").concat(t)}},messageToolTip:function(){return!this.isMessageDeleted&&(!!this.isFailed&&(this.externalError||this.$t("CONVERSATION.SEND_FAILED")))},wrapClass:function(){return{wrap:this.isBubble,"activity-wrap":!this.isBubble,"is-pending":this.isPending,"is-failed":this.isFailed,"is-email":this.isEmailContentType}},bubbleClass:function(){return{bubble:this.isBubble,"is-private":this.data.private,"is-image":this.hasMediaAttachment("image"),"is-video":this.hasMediaAttachment("video"),"is-text":this.hasText,"is-from-bot":this.isSentByBot,"is-failed":this.isFailed,"is-email":this.isEmailContentType}},isPending:function(){return this.data.status===qt.l.PROGRESS},isFailed:function(){return this.data.status===qt.l.FAILED},isSentByBot:function(){return!this.isPending&&!this.isFailed&&(!this.sender.type||"agent_bot"===this.sender.type)},shouldShowContextMenu:function(){return!(this.isFailed||this.isPending)},errorMessage:function(){var t=this.data.meta;return t?t.error:""},showAvatar:function(){return!(!this.isOutgoing&&!this.isTemplate)||this.isATweet&&this.isIncoming&&this.sender},senderNameForAvatar:function(){if(this.isOutgoing||this.isTemplate){var t=(this.sender||{}).name;return void 0===t?this.$t("CONVERSATION.BOT"):t}return""}},watch:{data:function(){this.hasMediaLoadError=!1}},mounted:function(){this.hasMediaLoadError=!1,bus.$on($s.a.ON_MESSAGE_LIST_SCROLL,this.closeContextMenu),this.setupHighlightTimer()},beforeDestroy:function(){bus.$off($s.a.ON_MESSAGE_LIST_SCROLL,this.closeContextMenu),clearTimeout(this.higlightTimeout)},methods:{isAttachmentImageVideoAudio:function(t){return["image","audio","video","story_mention"].includes(t)},hasMediaAttachment:function(t){if(this.hasAttachments&&this.data.attachments.length>0){var e=this.data.attachments;return(void 0===e?[{}]:e)[0].file_type===t&&!this.hasMediaLoadError}return!!this.storyReply},handleContextMenuClick:function(){this.showContextMenu=!this.showContextMenu},retrySendMessage:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("sendMessageWithData",e.data);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){br(a,i,s,r,o,"next",t)}function o(t){br(a,i,s,r,o,"throw",t)}r(void 0)}))})()},onMediaLoadError:function(){this.hasMediaLoadError=!0},openContextMenu:function(t){var e,n;(null===(e=t.target)||void 0===e?void 0:e.classList.contains("skip-context-menu"))||"a"===(null===(n=t.target)||void 0===n?void 0:n.tagName.toLowerCase())||getSelection().toString()||(t.preventDefault(),"contextmenu"===t.type&&this.$track(f.a.OPEN_MESSAGE_CONTEXT_MENU),this.contextMenuPosition={x:t.pageX||t.clientX,y:t.pageY||t.clientY},this.showContextMenu=!0)},closeContextMenu:function(){this.showContextMenu=!1,this.contextMenuPosition={x:null,y:null}},handleReplyTo:function(){var t=Hs.a.MESSAGE_REPLY_TO,e=this.data,n=e.conversation_id,i=e.id;zs.a.updateJsonStore(t,n,i),bus.$emit($s.a.TOGGLE_REPLY_TO_MESSAGE,this.data)},setupHighlightTimer:function(){var t=this;if(Number(this.$route.query.messageId)===Number(this.data.id)){this.showBackgroundHighlight=!0;this.higlightTimeout=setTimeout((function(){t.showBackgroundHighlight=!1}),1e3)}}}},Or=Cr,Ar=(n(3255),Object(C.a)(Or,(function(){var t=this,e=t._self._c;return t.shouldRenderMessage?e("li",{class:t.alignBubble,attrs:{id:`message${t.data.id}`}},[e("div",{class:t.wrapClass},[t.isFailed?e("div",{staticClass:"message-failed--alert"},[e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("CONVERSATION.TRY_AGAIN"),expression:"$t('CONVERSATION.TRY_AGAIN')",modifiers:{"top-end":!0}}],attrs:{size:"tiny","color-scheme":"alert",variant:"clear",icon:"arrow-clockwise"},on:{click:t.retrySendMessage}})],1):t._e(),t._v(" "),e("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top-start",value:t.messageToolTip,expression:"messageToolTip",modifiers:{"top-start":!0}}],class:t.bubbleClass,on:{contextmenu:function(e){return t.openContextMenu(e)}}},[e("bubble-mail-head",{attrs:{"email-attributes":t.contentAttributes.email,cc:t.emailHeadAttributes.cc,bcc:t.emailHeadAttributes.bcc,"is-incoming":t.isIncoming}}),t._v(" "),t.storyUrl?e("instagram-story-reply",{attrs:{"story-url":t.storyUrl}}):t._e(),t._v(" "),t.inReplyToMessageId&&t.inboxSupportsReplyTo.incoming?e("bubble-reply-to",{attrs:{message:t.inReplyTo,"message-type":t.data.message_type,"parent-has-attachments":t.hasAttachments}}):t._e(),t._v(" "),t.data.content?e("bubble-text",{attrs:{message:t.message,"is-email":t.isEmailContentType,"display-quoted-button":t.displayQuotedButton}}):t._e(),t._v(" "),e("bubble-integration",{attrs:{"message-id":t.data.id,"content-attributes":t.contentAttributes,"inbox-id":t.data.inbox_id}}),t._v(" "),t.isPending&&t.hasAttachments?e("span",{staticClass:"chat-bubble has-attachment agent"},[t._v("\n        "+t._s(t.$t("CONVERSATION.UPLOADING_ATTACHMENTS"))+"\n      ")]):t._e(),t._v(" "),!t.isPending&&t.hasAttachments?e("div",t._l(t.attachments,(function(n){return e("div",{key:n.id},[t.isAnInstagramStory?e("instagram-story",{attrs:{"story-url":n.data_url},on:{error:t.onMediaLoadError}}):t.isAttachmentImageVideoAudio(n.file_type)?e("bubble-image-audio-video",{attrs:{attachment:n},on:{error:t.onMediaLoadError}}):"location"===n.file_type?e("bubble-location",{attrs:{latitude:n.coordinates_lat,longitude:n.coordinates_long,name:n.fallback_title}}):"contact"===n.file_type?e("bubble-contact",{attrs:{name:t.data.content,"phone-number":n.fallback_title}}):e("bubble-file",{attrs:{url:n.data_url}})],1)})),0):t._e(),t._v(" "),e("bubble-actions",{attrs:{id:t.data.id,sender:t.data.sender,"story-sender":t.storySender,"external-error":t.externalError,"story-id":`${t.storyId}`,"is-a-tweet":t.isATweet,"is-a-whatsapp-channel":t.isAWhatsAppChannel,"is-email":t.isEmailContentType,"is-private":t.data.private,"message-type":t.data.message_type,"message-status":t.status,"source-id":t.data.source_id,"inbox-id":t.data.inbox_id,"created-at":t.createdAt}})],1),t._v(" "),t.isPending?e("spinner",{attrs:{size:"tiny"}}):t._e(),t._v(" "),t.showAvatar?e("div",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:t.tooltipForSender,expression:"tooltipForSender",modifiers:{left:!0}}],staticClass:"sender--info"},[e("woot-thumbnail",{attrs:{src:t.sender.thumbnail,username:t.senderNameForAvatar,size:"16px"}}),t._v(" "),t.isATweet&&t.isIncoming?e("a",{staticClass:"sender--available-name",attrs:{href:t.twitterProfileLink,target:"_blank",rel:"noopener noreferrer nofollow"}},[t._v("\n        "+t._s(t.sender.name)+"\n      ")]):t._e()],1):t._e()],1),t._v(" "),t.shouldShowContextMenu?e("div",{staticClass:"context-menu-wrap"},[t.isBubble&&!t.isMessageDeleted?e("context-menu",{attrs:{"context-menu-position":t.contextMenuPosition,"is-open":t.showContextMenu,"enabled-options":t.contextMenuEnabledOptions,message:t.data},on:{open:t.openContextMenu,close:t.closeContextMenu,replyTo:t.handleReplyTo}}):t._e()],1):t._e()]):t._e()}),[],!1,null,null,null).exports),Tr=n(2069);function Er(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Er(Object(n),!0).forEach((function(e){Sr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Sr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ir={name:"LabelSuggestion",components:{Avatar:n(1943).a,WootButton:Tr.a},mixins:[yi.a],props:{suggestedLabels:{type:Array,required:!0},chatLabels:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{isDismissed:!1,isHovered:!1,selectedLabels:[]}},computed:wr(wr({},Object(i.mapGetters)({allLabels:"labels/getLabels",currentAccountId:"getCurrentAccountId"})),{},{labelTooltip:function(){return this.preparedLabels.length>1?this.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.MULTIPLE_SUGGESTION"):this.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.SINGLE_SUGGESTION")},addButtonText:function(){return 1===this.selectedLabels.length?this.$t("LABEL_MGMT.SUGGESTIONS.ADD_SELECTED_LABEL"):this.selectedLabels.length>1?this.$t("LABEL_MGMT.SUGGESTIONS.ADD_SELECTED_LABELS"):this.$t("LABEL_MGMT.SUGGESTIONS.ADD_ALL_LABELS")},preparedLabels:function(){var t=this;return this.allLabels.filter((function(e){return t.suggestedLabels.includes(e.title)}))},shouldShowSuggestions:function(){return!this.isDismissed&&(!!this.isAIIntegrationEnabled&&(this.preparedLabels.length&&0===this.chatLabels.length))}}),watch:{conversationId:{immediate:!0,handler:function(){this.selectedLabels=[],this.isDismissed=this.isConversationDismissed()}}},methods:{pushOrAddLabel:function(t){1!==this.preparedLabels.length?this.selectedLabels.includes(t)?this.selectedLabels=this.selectedLabels.filter((function(e){return e!==t})):this.selectedLabels.push(t):this.addAllLabels()},dismissSuggestions:function(){zs.a.setFlag(Hs.a.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.conversationId),this.isDismissed=!0,this.trackLabelEvent(f.g.DISMISS_LABEL_SUGGESTION)},isConversationDismissed:function(){return zs.a.getFlag(Hs.a.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.conversationId)},addAllLabels:function(){var t=this.selectedLabels;t.length||(t=this.preparedLabels.map((function(t){return t.title}))),this.$store.dispatch("conversationLabels/update",{conversationId:this.conversationId,labels:t}),this.trackLabelEvent(f.g.APPLY_LABEL_SUGGESTION)},trackLabelEvent:function(t){var e={conversationId:this.conversationId,account:this.currentAccountId,suggestions:this.suggestedLabels,labelsApplied:this.selectedLabels.length?this.selectedLabels:this.suggestedLabels};this.$track(t,e)}}},xr=(n(3256),Object(C.a)(Ir,(function(){var t=this,e=t._self._c;return t.shouldShowSuggestions?e("li",{staticClass:"label-suggestion right",on:{mouseover:function(e){t.isHovered=!0},mouseleave:function(e){t.isHovered=!1}}},[e("div",{staticClass:"wrap"},[e("div",{staticClass:"label-suggestion--container"},[e("h6",{staticClass:"label-suggestion--title"},[t._v("Suggested labels")]),t._v(" "),e("div",{staticClass:"label-suggestion--options"},[t._l(t.preparedLabels,(function(n){return e("button",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:{content:t.selectedLabels.includes(n.title)?t.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DESELECT"):t.labelTooltip,delay:{show:600,hide:0},hideOnClick:!0},expression:"{\n            content: selectedLabels.includes(label.title)\n              ? $t('LABEL_MGMT.SUGGESTIONS.TOOLTIP.DESELECT')\n              : labelTooltip,\n            delay: { show: 600, hide: 0 },\n            hideOnClick: true,\n          }",modifiers:{top:!0}}],key:n.title,staticClass:"label-suggestion--option",on:{click:function(e){return t.pushOrAddLabel(n.title)}}},[e("woot-label",t._b({attrs:{variant:"dashed","bg-color":t.selectedLabels.includes(n.title)?"var(--w-100)":""}},"woot-label",n,!1))],1)})),t._v(" "),1===t.preparedLabels.length?e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:{content:t.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS"),delay:{show:600,hide:0},hideOnClick:!0},expression:"{\n            content: $t('LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS'),\n            delay: { show: 600, hide: 0 },\n            hideOnClick: true,\n          }",modifiers:{top:!0}}],staticClass:"label--add",attrs:{variant:"smooth","color-scheme":t.isHovered?"alert":"primary",icon:"dismiss",size:"tiny"},on:{click:t.dismissSuggestions}}):t._e()],2),t._v(" "),t.preparedLabels.length>1?e("div",[e("woot-button",{staticClass:"label--add",attrs:{variant:0===t.selectedLabels.length?"smooth":"",icon:"add",size:"tiny"},on:{click:t.addAllLabels}},[t._v("\n          "+t._s(t.addButtonText)+"\n        ")]),t._v(" "),e("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:{content:t.$t("LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS"),delay:{show:600,hide:0},hideOnClick:!0},expression:"{\n            content: $t('LABEL_MGMT.SUGGESTIONS.TOOLTIP.DISMISS'),\n            delay: { show: 600, hide: 0 },\n            hideOnClick: true,\n          }",modifiers:{top:!0}}],staticClass:"label--add",attrs:{"color-scheme":t.isHovered?"alert":"primary",variant:"smooth",icon:"dismiss",size:"tiny"},on:{click:t.dismissSuggestions}})],1):t._e()]),t._v(" "),e("div",{staticClass:"sender--info has-tooltip",attrs:{"data-original-title":"null"}},[e("woot-thumbnail",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:{content:t.$t("LABEL_MGMT.SUGGESTIONS.POWERED_BY"),delay:{show:600,hide:0},hideOnClick:!0},expression:"{\n          content: $t('LABEL_MGMT.SUGGESTIONS.POWERED_BY'),\n          delay: { show: 600, hide: 0 },\n          hideOnClick: true,\n        }",modifiers:{top:!0}}],attrs:{size:"16px"}},[e("avatar",{staticClass:"user-thumbnail thumbnail-rounded"},[e("fluent-icon",{staticClass:"chatwoot-ai-icon",attrs:{icon:"chatwoot-ai"}})],1)],1)],1)])]):t._e()}),[],!1,null,"269f3c8f",null).exports),Nr=n(1917),Rr=n(310);function Lr(t){return function(t){if(Array.isArray(t))return Pr(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Pr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Mr=function(t,e){return t+e.scrollHeight},kr="https://developers.facebook.com/docs/messenger-platform/policy/policy-overview/",$r="https://www.twilio.com/docs/whatsapp/tutorial/send-whatsapp-notification-messages-templates#sending-non-template-messages-within-a-24-hour-session";function jr(t,e,n,i,s,a,r){try{var o=t[a](r),c=o.value}catch(l){return void n(l)}o.done?e(c):Promise.resolve(c).then(i,s)}function Dr(t){return function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){jr(a,i,s,r,o,"next",t)}function o(t){jr(a,i,s,r,o,"throw",t)}r(void 0)}))}}function Fr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ur(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fr(Object(n),!0).forEach((function(e){Br(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Br(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Vr={components:{Message:Ar,ReplyBox:na,Banner:bs.a,ConversationLabelSuggestion:xr},mixins:[U.a,Ue.c,M.a,Nr.a,yi.a],props:{isContactPanelOpen:{type:Boolean,default:!1}},data:function(){return{isLoadingPrevious:!0,heightBeforeLoad:null,conversationPanel:null,hasUserScrolled:!1,isProgrammaticScroll:!1,isPopoutReplyBox:!1,messageSentSinceOpened:!1,labelSuggestions:[]}},computed:Ur(Ur({},Object(i.mapGetters)({accountId:"getCurrentAccountId",currentChat:"getSelectedChat",allConversations:"getAllConversations",inboxesList:"inboxes/getInboxes",listLoadingStatus:"getAllMessagesLoaded",loadingChatList:"getChatListLoadingStatus",appIntegrations:"integrations/getAppIntegrations",isFeatureEnabledonAccount:"accounts/isFeatureEnabledonAccount",currentAccountId:"getCurrentAccountId"})),{},{isOpen:function(){var t;return(null===(t=this.currentChat)||void 0===t?void 0:t.status)===T.b.STATUS_TYPE.OPEN},shouldShowLabelSuggestions:function(){return this.isOpen&&this.isEnterprise&&this.isAIIntegrationEnabled&&!this.messageSentSinceOpened},inboxId:function(){return this.currentChat.inbox_id},inbox:function(){return this.$store.getters["inboxes/getInbox"](this.inboxId)},typingUsersList:function(){return this.$store.getters["conversationTypingStatus/getUserList"](this.currentChat.id)},isAnyoneTyping:function(){return 0!==this.typingUsersList.length},typingUserNames:function(){var t=this.typingUsersList;return this.isAnyoneTyping?Object(Rr.e)(t):""},getMessages:function(){var t=this.currentChat.messages||[];return this.isAWhatsAppChannel?Object(U.b)(t):t},getReadMessages:function(){return this.readMessages(this.getMessages,this.currentChat.agent_last_seen_at)},getUnReadMessages:function(){return this.unReadMessages(this.getMessages,this.currentChat.agent_last_seen_at)},shouldShowSpinner:function(){return this.currentChat&&void 0===this.currentChat.dataFetched||!this.listLoadingStatus&&this.isLoadingPrevious},conversationType:function(){var t=this.currentChat.additional_attributes;return(t?t.type:"")||""},isATweet:function(){return"tweet"===this.conversationType},isRightOrLeftIcon:function(){return this.isContactPanelOpen?"arrow-chevron-right":"arrow-chevron-left"},getLastSeenAt:function(){return this.currentChat.contact_last_seen_at},replyWindowBannerMessage:function(){if(this.isAWhatsAppChannel)return this.$t("CONVERSATION.TWILIO_WHATSAPP_CAN_REPLY");if(this.isAPIInbox){var t=this.inbox.additional_attributes,e=void 0===t?{}:t;return e?e.agent_reply_time_window_message:""}return this.$t("CONVERSATION.CANNOT_REPLY")},replyWindowLink:function(){return this.isAWhatsAppChannel?kr:this.isAPIInbox?"":$r},replyWindowLinkText:function(){return this.isAWhatsAppChannel?this.$t("CONVERSATION.24_HOURS_WINDOW"):this.isAPIInbox?"":this.$t("CONVERSATION.TWILIO_WHATSAPP_24_HOURS_WINDOW")},unreadMessageCount:function(){return this.currentChat.unread_count||0},inboxSupportsReplyTo:function(){return{incoming:this.inboxHasFeature(Ue.a.REPLY_TO),outgoing:this.inboxHasFeature(Ue.a.REPLY_TO_OUTGOING)}}}),watch:{currentChat:function(t,e){t.id!==e.id&&(this.fetchAllAttachmentsFromCurrentChat(),this.fetchSuggestions(),this.messageSentSinceOpened=!1)}},created:function(){var t=this;bus.$on($s.a.SCROLL_TO_MESSAGE,this.onScrollToMessage),bus.$on($s.a.FETCH_LABEL_SUGGESTIONS,this.fetchSuggestions),bus.$on($s.a.MESSAGE_SENT,(function(){t.messageSentSinceOpened=!0}))},mounted:function(){this.addScrollListener(),this.fetchAllAttachmentsFromCurrentChat(),this.fetchSuggestions()},beforeDestroy:function(){this.removeBusListeners(),this.removeScrollListener()},methods:{fetchSuggestions:function(){var t=this;return Dr(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.labelSuggestions=[],!t.isLabelSuggestionDismissed()){e.next=3;break}return e.abrupt("return");case 3:if(t.isEnterprise){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.fetchIntegrationsIfRequired();case 7:if(t.isLabelSuggestionFeatureEnabled){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,t.fetchLabelSuggestions({conversationId:t.currentChat.id});case 11:t.labelSuggestions=e.sent,t.$nextTick((function(){t.$route.query.messageId||t.hasUserScrolled||t.scrollToBottom()}));case 13:case"end":return e.stop()}}),e)})))()},isLabelSuggestionDismissed:function(){return zs.a.getFlag(Hs.a.DISMISSED_LABEL_SUGGESTIONS,this.currentAccountId,this.currentChat.id)},fetchAllAttachmentsFromCurrentChat:function(){this.$store.dispatch("fetchAllAttachments",this.currentChat.id)},removeBusListeners:function(){bus.$off($s.a.SCROLL_TO_MESSAGE,this.onScrollToMessage)},onScrollToMessage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.messageId,i=void 0===n?"":n;this.$nextTick((function(){var e=document.getElementById("message"+i);e?(t.isProgrammaticScroll=!0,e.scrollIntoView({behavior:"smooth"}),t.fetchPreviousMessages()):t.scrollToBottom()})),this.makeMessagesRead()},showPopoutReplyBox:function(){this.isPopoutReplyBox=!this.isPopoutReplyBox},closePopoutReplyBox:function(){this.isPopoutReplyBox=!1},handleKeyEvents:function(t){Object(k.z)(t)&&this.closePopoutReplyBox()},addScrollListener:function(){var t=this;this.conversationPanel=this.$el.querySelector(".conversation-panel"),this.setScrollParams(),this.conversationPanel.addEventListener("scroll",this.handleScroll),this.$nextTick((function(){return t.scrollToBottom()})),this.isLoadingPrevious=!1},removeScrollListener:function(){this.conversationPanel.removeEventListener("scroll",this.handleScroll)},scrollToBottom:function(){this.isProgrammaticScroll=!0;var t=[],e=this.conversationPanel.querySelector(".label-suggestion");t=this.unreadMessageCount>0?this.conversationPanel.querySelectorAll(".message--unread"):e?[e]:Array.from(this.conversationPanel.querySelectorAll(".message--read")).slice(-1),this.conversationPanel.scrollTop=function(t,e,n){return t-Lr(n).reduce(Mr,0)-e/2}(this.conversationPanel.scrollHeight,this.$el.scrollHeight,t)},onToggleContactPanel:function(){this.$emit("contact-panel-toggle")},setScrollParams:function(){this.heightBeforeLoad=this.conversationPanel.scrollHeight,this.scrollTopBeforeLoad=this.conversationPanel.scrollTop},fetchPreviousMessages:function(){var t=arguments,e=this;return Dr(regeneratorRuntime.mark((function n(){var i,s,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:0,e.setScrollParams(),s=!0===e.currentChat.dataFetched&&!e.listLoadingStatus&&!e.isLoadingPrevious,!(i<100&&!e.isLoadingPrevious&&s)){n.next=18;break}return e.isLoadingPrevious=!0,n.prev=5,n.next=8,e.$store.dispatch("fetchPreviousMessages",{conversationId:e.currentChat.id,before:e.currentChat.messages[0].id});case 8:a=e.conversationPanel.scrollHeight-e.heightBeforeLoad,e.conversationPanel.scrollTop=e.scrollTopBeforeLoad+a,e.setScrollParams(),n.next=15;break;case 13:n.prev=13,n.t0=n.catch(5);case 15:return n.prev=15,e.isLoadingPrevious=!1,n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[5,13,15,18]])})))()},handleScroll:function(t){this.isProgrammaticScroll?(this.isProgrammaticScroll=!1,this.hasUserScrolled=!1):this.hasUserScrolled=!0,bus.$emit($s.a.ON_MESSAGE_LIST_SCROLL),this.fetchPreviousMessages(t.target.scrollTop)},makeMessagesRead:function(){this.$store.dispatch("markMessagesRead",{id:this.currentChat.id})},getInReplyToMessage:function(t){var e,n;if(!t)return{};var i=null===(e=t.content_attributes)||void 0===e?void 0:e.in_reply_to;return i?null===(n=this.currentChat)||void 0===n?void 0:n.messages.find((function(t){return t.id===i})):{}}}},Gr=Vr;n(3257),n(3258);function Wr(t){return function(t){if(Array.isArray(t))return Hr(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return Hr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function zr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Yr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zr(Object(n),!0).forEach((function(e){qr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kr={components:{ContactPanel:De,ConversationHeader:Rn,DashboardAppFrame:Pn,EmptyState:Hn,MessagesView:Object(C.a)(Gr,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col justify-between flex-grow h-full min-w-0 m-0"},[t.currentChat.can_reply?t._e():e("banner",{attrs:{"color-scheme":"alert","banner-message":t.replyWindowBannerMessage,"href-link":t.replyWindowLink,"href-link-text":t.replyWindowLinkText}}),t._v(" "),e("div",{staticClass:"flex justify-end"},[e("woot-button",{staticClass:"rounded-bl-calc rtl:rotate-180 rounded-tl-calc fixed top-[9.5rem] md:top-[6.25rem] z-10 bg-white dark:bg-slate-700 border-slate-50 dark:border-slate-600 border-solid border border-r-0 box-border",attrs:{variant:"smooth",size:"tiny","color-scheme":"secondary",icon:t.isRightOrLeftIcon},on:{click:t.onToggleContactPanel}})],1),t._v(" "),e("ul",{staticClass:"conversation-panel"},[e("transition",{attrs:{name:"slide-up"}},[e("li",{staticClass:"min-h-[4rem]"},[t.shouldShowSpinner?e("span",{staticClass:"spinner message"}):t._e()])]),t._v(" "),t._l(t.getReadMessages,(function(n){return e("message",{key:n.id,staticClass:"message--read ph-no-capture",attrs:{"data-clarity-mask":"True",data:n,"is-a-tweet":t.isATweet,"is-a-whatsapp-channel":t.isAWhatsAppChannel,"is-web-widget-inbox":t.isAWebWidgetInbox,"inbox-supports-reply-to":t.inboxSupportsReplyTo,"in-reply-to":t.getInReplyToMessage(n)}})})),t._v(" "),e("li",{directives:[{name:"show",rawName:"v-show",value:0!=t.unreadMessageCount,expression:"unreadMessageCount != 0"}],staticClass:"unread--toast"},[e("span",[t._v("\n        "+t._s(t.unreadMessageCount>9?"9+":t.unreadMessageCount)+"\n        "+t._s(t.unreadMessageCount>1?t.$t("CONVERSATION.UNREAD_MESSAGES"):t.$t("CONVERSATION.UNREAD_MESSAGE"))+"\n      ")])]),t._v(" "),t._l(t.getUnReadMessages,(function(n){return e("message",{key:n.id,staticClass:"message--unread ph-no-capture",attrs:{"data-clarity-mask":"True",data:n,"is-a-tweet":t.isATweet,"is-a-whatsapp-channel":t.isAWhatsAppChannel,"is-web-widget-inbox":t.isAWebWidgetInbox,"inbox-supports-reply-to":t.inboxSupportsReplyTo,"in-reply-to":t.getInReplyToMessage(n)}})})),t._v(" "),t.shouldShowLabelSuggestions?e("conversation-label-suggestion",{attrs:{"suggested-labels":t.labelSuggestions,"chat-labels":t.currentChat.labels,"conversation-id":t.currentChat.id}}):t._e()],2),t._v(" "),e("div",{staticClass:"conversation-footer",class:{"modal-mask":t.isPopoutReplyBox}},[t.isAnyoneTyping?e("div",{staticClass:"typing-indicator-wrap"},[e("div",{staticClass:"typing-indicator"},[t._v("\n        "+t._s(t.typingUserNames)+"\n        "),e("img",{staticClass:"gif",attrs:{src:n(3196),alt:"Someone is typing"}})])]):t._e(),t._v(" "),e("reply-box",{attrs:{"conversation-id":t.currentChat.id,"popout-reply-box":t.isPopoutReplyBox},on:{"update:popoutReplyBox":function(e){t.isPopoutReplyBox=e},"update:popout-reply-box":function(e){t.isPopoutReplyBox=e},click:t.showPopoutReplyBox}})],1)],1)}),[],!1,null,"2cc93747",null).exports},props:{inboxId:{type:[Number,String],default:"",required:!1},isContactPanelOpen:{type:Boolean,default:!0},isOnExpandedLayout:{type:Boolean,default:!0}},data:function(){return{activeIndex:0}},computed:Yr(Yr({},Object(i.mapGetters)({currentChat:"getSelectedChat",dashboardApps:"dashboardApps/getRecords"})),{},{dashboardAppTabs:function(){return[{key:"messages",name:this.$t("CONVERSATION.DASHBOARD_APP_TAB_MESSAGES")}].concat(Wr(this.dashboardApps.map((function(t){return{key:"dashboard-".concat(t.id),name:t.title}}))))},showContactPanel:function(){return this.isContactPanelOpen&&this.currentChat.id}}),watch:{"currentChat.inbox_id":function(t){t&&this.$store.dispatch("inboxAssignableAgents/fetch",[t])},"currentChat.id":function(){this.fetchLabels(),this.activeIndex=0}},mounted:function(){this.fetchLabels(),this.$store.dispatch("dashboardApps/get")},methods:{fetchLabels:function(){this.currentChat.id&&this.$store.dispatch("conversationLabels/get",this.currentChat.id)},onToggleContactPanel:function(){this.$emit("contact-panel-toggle")},onDashboardAppTabChange:function(t){this.activeIndex=t}}},Xr=(n(3259),Object(C.a)(Kr,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"conversation-details-wrap bg-slate-25 dark:bg-slate-800",class:{"with-border-right":!t.isOnExpandedLayout}},[t.currentChat.id?e("conversation-header",{attrs:{chat:t.currentChat,"is-contact-panel-open":t.isContactPanelOpen,"show-back-button":t.isOnExpandedLayout},on:{"contact-panel-toggle":t.onToggleContactPanel}}):t._e(),t._v(" "),t.dashboardApps.length&&t.currentChat.id?e("woot-tabs",{staticClass:"dashboard-app--tabs bg-white dark:bg-slate-900 -mt-px",attrs:{index:t.activeIndex},on:{change:t.onDashboardAppTabChange}},t._l(t.dashboardAppTabs,(function(t){return e("woot-tabs-item",{key:t.key,attrs:{name:t.name,"show-badge":!1}})})),1):t._e(),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.activeIndex,expression:"!activeIndex"}],staticClass:"flex bg-slate-25 dark:bg-slate-800 m-0 h-full min-h-0"},[t.currentChat.id?e("messages-view",{attrs:{"inbox-id":t.inboxId,"is-contact-panel-open":t.isContactPanelOpen},on:{"contact-panel-toggle":t.onToggleContactPanel}}):e("empty-state",{attrs:{"is-on-expanded-layout":t.isOnExpandedLayout}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showContactPanel,expression:"showContactPanel"}],staticClass:"conversation-sidebar-wrap basis-full sm:basis-[17.5rem] md:basis-[18.75rem] lg:basis-[19.375rem] xl:basis-[20.625rem] 2xl:basis-[25rem] rtl:border-r border-slate-50 dark:border-slate-700 h-auto overflow-auto z-10 flex-shrink-0 flex-grow-0"},[t.showContactPanel?e("contact-panel",{attrs:{"conversation-id":t.currentChat.id,"inbox-id":t.currentChat.inbox_id,"on-toggle":t.onToggleContactPanel}}):t._e()],1)],1),t._v(" "),t._l(t.dashboardApps,(function(n,i){return e("dashboard-app-frame",{directives:[{name:"show",rawName:"v-show",value:t.activeIndex-1===i,expression:"activeIndex - 1 === index"}],key:t.currentChat.id+"-"+n.id,attrs:{"is-visible":t.activeIndex-1===i,config:t.dashboardApps[i].content,position:i,"current-chat":t.currentChat}})}))],2)}),[],!1,null,"31f3a2cc",null).exports),Qr={props:{isOnExpandedLayout:{type:Boolean,default:!1}},methods:{toggle:function(){this.$emit("toggle")}}};n(3260);function Zr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Jr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zr(Object(n),!0).forEach((function(e){to(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function to(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var eo={components:{SwitchLayout:Object(C.a)(Qr,(function(){var t=this;return(0,t._self._c)("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:t.$t("CONVERSATION.SWITCH_VIEW_LAYOUT"),expression:"$t('CONVERSATION.SWITCH_VIEW_LAYOUT')",modifiers:{left:!0}}],staticClass:"layout-switch__container",class:{expanded:t.isOnExpandedLayout},attrs:{icon:"arrow-right-import",size:"tiny",variant:"smooth","color-scheme":"secondary"},on:{click:t.toggle}})}),[],!1,null,null,null).exports},directives:{focus:{inserted:function(t){t.focus()}}},mixins:[F.a,Ii.a,E.mixin],props:{isOnExpandedLayout:{type:Boolean,required:!0}},computed:Jr(Jr({},Object(i.mapGetters)({accountId:"getCurrentAccountId"})),{},{searchUrl:function(){return Object(bt.c)("accounts/".concat(this.accountId,"/search"))}})};n(3261);function no(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var i,s,a=[],r=!0,o=!1;try{for(n=n.call(t);!(r=(i=n.next()).done)&&(a.push(i.value),!e||a.length!==e);r=!0);}catch(c){o=!0,s=c}finally{try{r||null==n.return||n.return()}finally{if(o)throw s}}return a}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return io(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return io(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function io(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function so(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ao(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?so(Object(n),!0).forEach((function(e){ro(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):so(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ro(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var oo={components:{ChatList:Nt,ConversationBox:Xr,PopOverSearch:Object(C.a)(eo,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"relative"},[e("div",{staticClass:"flex px-4 pb-1 flex-row gap-1 pt-2.5 border-b border-transparent"},[e("woot-sidemenu-icon",{staticClass:"relative top-0 ltr:-ml-1.5 rtl:-mr-1.5",attrs:{size:"tiny"}}),t._v(" "),e("router-link",{staticClass:"search-link flex-1 items-center gap-1 text-left h-6 rtl:mr-3 rtl:text-right rounded-md px-2 py-0 bg-slate-25 dark:bg-slate-800 inline-flex",attrs:{to:t.searchUrl}},[e("div",{staticClass:"flex"},[e("fluent-icon",{staticClass:"search--icon text-slate-800 dark:text-slate-200",attrs:{icon:"search",size:"16"}})],1),t._v(" "),e("p",{staticClass:"search--label mb-0 overflow-hidden whitespace-nowrap text-ellipsis text-sm text-slate-800 dark:text-slate-200"},[t._v("\n        "+t._s(t.$t("CONVERSATION.SEARCH_MESSAGES"))+"\n      ")])]),t._v(" "),e("switch-layout",{attrs:{"is-on-expanded-layout":t.isOnExpandedLayout},on:{toggle:function(e){return t.$emit("toggle-conversation-layout")}}})],1)])}),[],!1,null,"820585e6",null).exports},mixins:[I.a],props:{inboxId:{type:[String,Number],default:0},conversationId:{type:[String,Number],default:0},label:{type:String,default:""},teamId:{type:String,default:""},conversationType:{type:String,default:""},foldersId:{type:[String,Number],default:0}},data:function(){return{showSearchModal:!1}},computed:ao(ao({},Object(i.mapGetters)({chatList:"getAllConversations",currentChat:"getSelectedChat"})),{},{showConversationList:function(){return!this.isOnExpandedLayout||!this.conversationId},showMessageView:function(){return!!this.conversationId||!this.isOnExpandedLayout},isOnExpandedLayout:function(){var t=T.b.LAYOUT_TYPES.CONDENSED,e=this.uiSettings.conversation_display_type;return(void 0===e?t:e)!==t},isContactPanelOpen:function(){return!!this.currentChat.id&&this.uiSettings.is_contact_sidebar_open}}),watch:{conversationId:function(){this.fetchConversationIfUnavailable()}},mounted:function(){var t=this;this.$store.dispatch("agents/get"),this.initialize(),this.$watch("$store.state.route",(function(){return t.initialize()})),this.$watch("chatList.length",(function(){t.setActiveChat()}))},methods:{onConversationLoad:function(){this.fetchConversationIfUnavailable()},initialize:function(){this.$store.dispatch("setActiveInbox",this.inboxId),this.setActiveChat()},toggleConversationLayout:function(){var t=T.b.LAYOUT_TYPES,e=this.uiSettings.conversation_display_type,n=(void 0===e?t.CONDENSED:e)===t.CONDENSED?t.EXPANDED:t.CONDENSED;this.updateUISettings({conversation_display_type:n,previously_used_conversation_display_type:n})},fetchConversationIfUnavailable:function(){this.conversationId&&(this.findConversation()||this.$store.dispatch("getConversation",this.conversationId))},findConversation:function(){var t=parseInt(this.conversationId,10);return no(this.chatList.filter((function(e){return e.id===t})),1)[0]},setActiveChat:function(){if(this.conversationId){var t=this.findConversation();if(!t||t.id===this.currentChat.id)return;var e=this.$route.query.messageId;this.$store.dispatch("setActiveChat",{data:t,after:e}).then((function(){bus.$emit($s.a.SCROLL_TO_MESSAGE,{messageId:e})}))}else this.$store.dispatch("clearSelectedState")},onToggleContactPanel:function(){this.updateUISettings({is_contact_sidebar_open:!this.isContactPanelOpen})},onSearch:function(){this.showSearchModal=!0},closeSearch:function(){this.showSearchModal=!1}}},co=(n(3262),Object(C.a)(oo,(function(){var t=this,e=t._self._c;return e("section",{staticClass:"conversation-page bg-white dark:bg-slate-900"},[e("chat-list",{attrs:{"show-conversation-list":t.showConversationList,"conversation-inbox":t.inboxId,label:t.label,"team-id":t.teamId,"conversation-type":t.conversationType,"folders-id":t.foldersId,"is-on-expanded-layout":t.isOnExpandedLayout},on:{"conversation-load":t.onConversationLoad}},[e("pop-over-search",{attrs:{"is-on-expanded-layout":t.isOnExpandedLayout},on:{"toggle-conversation-layout":t.toggleConversationLayout}})],1),t._v(" "),t.showMessageView?e("conversation-box",{attrs:{"inbox-id":t.inboxId,"is-contact-panel-open":t.isContactPanelOpen,"is-on-expanded-layout":t.isOnExpandedLayout},on:{"contact-panel-toggle":t.onToggleContactPanel}}):t._e()],1)}),[],!1,null,"24dbb376",null));e.default=co.exports}}]);
//# sourceMappingURL=34-2bd08d72e5b38e9fac94.chunk.js.map