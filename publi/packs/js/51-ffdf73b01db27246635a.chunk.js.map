{"version":3,"sources":["webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/constants.js","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/AgentTable.vue?70ac","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/MetricCard.vue?2def","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/Heatmap.vue?d5d1","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/LiveReports.vue?df51","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/AgentTable.vue?267c","webpack:///app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/AgentTable.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/AgentTable.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/AgentTable.vue?7bc5","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/MetricCard.vue?9e37","webpack:///app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/MetricCard.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/MetricCard.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/overview/MetricCard.vue?62b2","webpack:///app/javascript/dashboard/routes/dashboard/settings/reports/components/Heatmap.vue","webpack:///./node_modules/date-fns/esm/getDay/index.js","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/Heatmap.vue?e68c","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/Heatmap.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/components/Heatmap.vue?cb1a","webpack:///app/javascript/dashboard/routes/dashboard/settings/reports/LiveReports.vue","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/LiveReports.vue?44cc","webpack:///./app/javascript/dashboard/routes/dashboard/settings/reports/LiveReports.vue"],"names":["GROUP_BY_FILTER","id","period","GROUP_BY_OPTIONS","DAY","translationKey","WEEK","MONTH","YEAR","DATE_RANGE_OPTIONS","LAST_7_DAYS","offset","groupByOptions","LAST_30_DAYS","LAST_3_MONTHS","LAST_6_MONTHS","LAST_YEAR","CUSTOM_DATE_RANGE","CHART_FONT_FAMILY","DEFAULT_BAR_CHART","type","backgroundColor","DEFAULT_CHART","datasets","scales","xAxes","ticks","fontFamily","gridLines","drawOnChartArea","yAxes","position","beginAtZero","stepSize","callback","value","index","values","length","TIME_CHART_CONFIG","timeInSeconds","minutes","Math","floor","hours","days","formatTime","METRIC_CHART","conversations_count","incoming_messages_count","outgoing_messages_count","avg_first_response_time","reply_time","avg_resolution_time","resolutions_count","OVERVIEW_METRICS","open","unattended","unassigned","online","busy","offline","_vm","this","_c","_self","staticClass","attrs","columns","tableData","_v","_s","$t","isLoading","agentMetrics","_e","agents","pageIndex","on","onPageNumberChange","_t","header","loadingMessage","dirtyDate","requiredArgs","arguments","toDate","getDay","_l","ii","key","jj","processedData","keys","dateKey","getDayOfTheWeek","Date","formatDate","get","data","directives","name","rawName","getCountTooltip","expression","modifiers","timestamp","class","getHeatmapLevelClass","uiFlags","isFetchingAccountConversationMetric","metric","scopedSlots","_u","fn","downloadHeatmapData","proxy","accountConversationHeatmap","isFetchingAccountConversationsHeatmap","agentConversationMetric","isFetchingAgentConversationMetric"],"mappings":"4FAAA,0KAAO,IAuBMA,EAAkB,CAC7B,EAAG,CAAEC,GAAI,EAAGC,OAAQ,OACpB,EAAG,CAAED,GAAI,EAAGC,OAAQ,QACpB,EAAG,CAAED,GAAI,EAAGC,OAAQ,SACpB,EAAG,CAAED,GAAI,EAAGC,OAAQ,SAGTC,EAAmB,CAC9BC,IAAK,CACHH,GAAI,MACJC,OAAQ,MACRG,eAAgB,+BAElBC,KAAM,CACJL,GAAI,OACJC,OAAQ,OACRG,eAAgB,gCAElBE,MAAO,CACLN,GAAI,QACJC,OAAQ,QACRG,eAAgB,iCAElBG,KAAM,CACJP,GAAI,OACJC,OAAQ,OACRG,eAAgB,iCAIPI,EAAqB,CAChCC,YAAa,CACXT,GAAI,cACJI,eAAgB,wCAChBM,OAAQ,EACRC,eAAgB,CAACT,EAAiBC,MAEpCS,aAAc,CACZZ,GAAI,eACJI,eAAgB,yCAChBM,OAAQ,GACRC,eAAgB,CAACT,EAAiBC,IAAKD,EAAiBG,OAE1DQ,cAAe,CACbb,GAAI,gBACJI,eAAgB,0CAChBM,OAAQ,GACRC,eAAgB,CACdT,EAAiBC,IACjBD,EAAiBG,KACjBH,EAAiBI,QAGrBQ,cAAe,CACbd,GAAI,gBACJI,eAAgB,0CAChBM,OAAQ,IACRC,eAAgB,CAACT,EAAiBG,KAAMH,EAAiBI,QAE3DS,UAAW,CACTf,GAAI,YACJI,eAAgB,sCAChBM,OAAQ,IACRC,eAAgB,CAACT,EAAiBG,KAAMH,EAAiBI,QAE3DU,kBAAmB,CACjBhB,GAAI,oBACJI,eAAgB,8CAChBM,OAAQ,KACRC,eAAgB,CACdT,EAAiBC,IACjBD,EAAiBG,KACjBH,EAAiBI,MACjBJ,EAAiBK,QAKVU,EACX,uGASWC,EAAoB,CAC/BC,KAAM,MACNC,gBAAiB,qBAGNC,EAAgB,CAC3BC,SAAU,CAACJ,GACXK,OAAQ,CACNC,MAAO,CACL,CACEC,MAAO,CACLC,WAAYT,GAEdU,UAAW,CACTC,iBAAiB,KAIvBC,MAAO,CACL,CACE7B,GAAI,SACJmB,KAAM,SACNW,SAAU,OACVL,MAAO,CACLC,WAAYT,EACZc,aAAa,EACbC,SAAU,EACVC,SAAU,SAACC,EAAOC,EAAOC,GACvB,OAAKD,GAASA,IAAUC,EAAOC,OAAS,EAGjC,GAFEH,IAKbP,UAAW,CACTC,iBAAiB,OAOrBU,EAAoB,CACxBhB,SAAU,CAACJ,GACXK,OAAQ,CACNC,MAAO,CACL,CACEC,MAAO,CACLC,WAAYT,GAEdU,UAAW,CACTC,iBAAiB,KAIvBC,MAAO,CACL,CACE7B,GAAI,SACJmB,KAAM,SACNW,SAAU,OACVL,MAAO,CACLC,WAAYT,EACZgB,SAAU,SAACC,EAAOC,EAAOC,GACvB,OAAKD,GAASA,IAAUC,EAAOC,OAAS,EAGjC,GAjLO,SAAAE,GACxB,IAAKA,EACH,MAAO,GAGT,GAAIA,EAAgB,GAClB,MAAM,GAAN,OAAUA,EAAV,KAGF,GAAIA,EAAgB,KAAM,CACxB,IAAMC,EAAUC,KAAKC,MAAMH,EAAgB,IAC3C,MAAM,GAAN,OAAUC,EAAV,KAGF,GAAID,EAAgB,MAAO,CACzB,IAAMI,EAAQF,KAAKC,MAAMH,EAAgB,MACzC,MAAM,GAAN,OAAUI,EAAV,KAGF,IAAMC,EAAOH,KAAKC,MAAMH,EAAgB,OACxC,MAAM,GAAN,OAAUK,EAAV,KA2JmBC,CAAWX,KAKxBP,UAAW,CACTC,iBAAiB,OAOdkB,EAAe,CAC1BC,oBAAqB1B,EACrB2B,wBAAyB3B,EACzB4B,wBAAyB5B,EACzB6B,wBAAyBZ,EACzBa,WAAYb,EACZc,oBAAqBd,EACrBe,kBAAmBhC,GAGRiC,EAAmB,CAC9BC,KAAM,OACNC,WAAY,aACZC,WAAY,aACZC,OAAQ,SACRC,KAAM,OACNC,QAAS,Y,uGC5MX,S,kCCAA,S,kCCAA,S,0ECAA,I,mFCA8O,ECqC9O,CACA,kBACA,YACA,eACA,YACA,kBACA,6BAEA,aACA,OACA,QACA,WACA,8BAEA,cACA,WACA,8BAEA,WACA,aACA,YAEA,WACA,YACA,YAGA,UACA,UADA,WACA,WACA,0CACA,kCACA,OACA,aACA,cACA,sBACA,sBACA,kCACA,kCAIA,QAdA,WAcA,0BACA,OACA,CACA,cACA,YACA,cACA,2DAEA,aACA,oCACA,SACA,8CACC,EAAD,gCACA,cACA,gBACA,YACA,iBACA,mBAEA,8BACA,wEACA,UAEA,8CAKA,CACA,aACA,WACA,cACA,0DAEA,oCACA,UAEA,CACA,mBACA,iBACA,cACA,gEAEA,oCACA,aAKA,SACA,mBADA,SACA,GACA,6BAEA,oBAJA,SAIA,GACA,mE,iBCjHe,EAXC,YACd,GCTW,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,WAAW,CAACG,MAAM,CAAC,aAAa,0BAA0B,gBAAe,EAAK,QAAUL,EAAIM,QAAQ,aAAaN,EAAIO,aAAaP,EAAIQ,GAAG,KAAMR,EAAa,UAAEE,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,WAAWF,EAAIQ,GAAG,KAAKN,EAAG,OAAO,CAACF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,GAAG,6DAA6D,GAAKV,EAAIW,WAAcX,EAAIY,aAAapC,OAAqGwB,EAAIa,KAAjGX,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQL,EAAIU,GAAG,qDAA8DV,EAAIQ,GAAG,KAAMR,EAAIY,aAAapC,OAAS,EAAG0B,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,gBAAgB,CAACG,MAAM,CAAC,MAAQL,EAAIc,OAAOtC,OAAO,aAAawB,EAAIe,UAAU,YAAY,GAAG,mBAAmB,CAAC,KAAKC,GAAG,CAAC,wBAAwBhB,EAAIiB,uBAAuB,GAAGjB,EAAIa,MAAM,KAEp0B,IDUpB,EACA,KACA,WACA,M,QEf4O,EC6B9O,CACA,kBACA,YACA,aAEA,OACA,QACA,YACA,YAEA,WACA,aACA,YAEA,gBACA,YACA,cC1Be,G,QAXC,YACd,GCTW,WAAkB,IAAIb,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACJ,EAAIkB,GAAG,UAAS,WAAW,MAAO,CAAChB,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,KAAK,CAACF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAImB,WAAWnB,EAAIQ,GAAG,KAAKN,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACF,EAAG,OAAO,CAACE,YAAY,YAAYF,EAAG,OAAO,CAACF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIU,GAAG,iCAAiCV,EAAIQ,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,6BAA6B,CAACJ,EAAIkB,GAAG,YAAY,QAAO,GAAGlB,EAAIQ,GAAG,KAAOR,EAAIW,UAA0EX,EAAa,UAAEE,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACF,EAAG,WAAWF,EAAIQ,GAAG,KAAKN,EAAG,OAAO,CAACF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAIoB,oBAAoB,GAAGpB,EAAIa,KAArNX,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACJ,EAAIkB,GAAG,YAAY,OAEljB,IDUpB,EACA,KACA,WACA,M,i4BEiDF,OACA,eACA,OACA,UACA,WACA,8BAEA,WACA,aACA,aAGA,UACA,cADA,WAEA,mCAEA,cAJA,WAKA,uDACA,mBACA,EACA,wBAIA,SACA,gBADA,SACA,GACA,SAMA,MACA,8DACA,UAIA,+DACA,UAZA,QACA,2DAcA,WAlBA,SAkBA,GACA,+CAEA,gBArBA,SAqBA,GACA,MCtFe,SAAgBG,GAI7B,OAHA,OAAAC,EAAA,GAAa,EAAGC,WACL,OAAAC,EAAA,GAAOH,GACHI,SDmFjB,IAUA,MATA,CACA,+BACA,+BACA,gCACA,kCACA,iCACA,+BACA,kCAEA,IAEA,qBAlCA,SAkCA,GACA,eAEA,wDACA,gCAGA,WACA,KAGA,iBErIqO,ICmBtN,G,QAXC,YACd,GCTW,WAAkB,IAAIzB,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAAEJ,EAAa,UAAE,CAACE,EAAG,MAAM,CAACE,YAAY,kBAAkBJ,EAAI0B,GAAG,GAAI,SAASC,GAAI,OAAOzB,EAAG,MAAM,CAAC0B,IAAID,EAAGvB,YAAY,uCAAsC,GAAGJ,EAAIQ,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,gBAAgBJ,EAAI0B,GAAG,GAAI,SAASC,GAAI,OAAOzB,EAAG,MAAM,CAAC0B,IAAID,EAAGvB,YAAY,oBAAoBJ,EAAI0B,GAAG,IAAK,SAASG,GAAI,OAAO3B,EAAG,MAAM,CAAC0B,IAAIC,EAAGzB,YAAY,6BAA6B,CAACF,EAAG,MAAM,CAACE,YAAY,0CAAyC,MAAK,GAAGJ,EAAIQ,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,qBAAqBJ,EAAIQ,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,mBAAmBJ,EAAI0B,GAAG,IAAK,SAASC,GAAI,OAAOzB,EAAG,MAAM,CAAC0B,IAAID,GAAI,CAAC3B,EAAIQ,GAAGR,EAAIS,GAAGkB,EAAK,GAAG,WAAM3B,EAAIS,GAAGkB,SAAS,IAAI,CAACzB,EAAG,MAAM,CAACE,YAAY,kBAAkBJ,EAAI0B,GAAI1B,EAAI8B,cAAcC,QAAQ,SAASC,GAAS,OAAO9B,EAAG,MAAM,CAAC0B,IAAII,EAAQ5B,YAAY,sBAAsB,CAACJ,EAAIQ,GAAG,aAAaR,EAAIS,GAAGT,EAAIiC,gBAAgB,IAAIC,KAAKF,KAAW,cAAc9B,EAAG,OAAO,CAACF,EAAIQ,GAAGR,EAAIS,GAAGT,EAAImC,WAAWH,YAAiB,GAAGhC,EAAIQ,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,gBAAgBJ,EAAI0B,GAAI1B,EAAI8B,cAAcC,QAAQ,SAASC,GAAS,OAAO9B,EAAG,MAAM,CAAC0B,IAAII,EAAQ5B,YAAY,oBAAoBJ,EAAI0B,GAAI1B,EAAI8B,cAAcM,IAAIJ,IAAU,SAASK,GAAM,OAAOnC,EAAG,MAAM,CAACoC,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,gBAAgBnE,MAAO2B,EAAIyC,gBAAgBJ,EAAKhE,OAAQqE,WAAW,8BAA8BC,UAAU,CAAC,KAAM,KAAQf,IAAIS,EAAKO,UAAUxC,YAAY,eAAeyC,MAAM7C,EAAI8C,qBAAqBT,EAAKhE,QAAQ,CAAC6B,EAAG,MAAM,CAACE,YAAY,6BAA4B,MAAK,GAAGJ,EAAIQ,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,qBAAqBJ,EAAIQ,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,mBAAmBJ,EAAI0B,GAAG,IAAK,SAASC,GAAI,OAAOzB,EAAG,MAAM,CAAC0B,IAAID,GAAI,CAAC3B,EAAIQ,GAAGR,EAAIS,GAAGkB,EAAK,GAAG,WAAM3B,EAAIS,GAAGkB,SAAS,KAAK,KAElwD,IDUpB,EACA,KACA,WACA,M,uuBEmEF,IClFmO,EDkFnO,CACA,mBACA,YACA,aACA,aACA,iBAEA,KAPA,WAQA,OACA,cAGA,gBACA,sBACA,oCACA,0BACA,yDACA,qDACA,+DACA,gCAPA,IASA,mBATA,WASA,WACA,KAOA,OANA,mDACA,mDACA,SAEA,yBAEA,GAEA,oBAnBA,WAmBA,WACA,KAOA,OANA,iEACA,4DACA,SAEA,uCAEA,KAGA,QA1CA,WA0CA,WACA,mCACA,oBAEA,6CACA,qBAGA,SACA,aADA,WAEA,sCACA,oCACA,yBAEA,oBANA,WAOA,4BAEA,2DACA,qBAGA,iBAbA,WAcA,wDAUA,4BACA,gCAEA,yCACA,wBACA,kBAGA,wDACA,6BACA,oBACA,kBACA,eACA,qBAGA,+BAxCA,WAyCA,uDACA,kBAGA,6BA7CA,WA8CA,qDACA,aACA,uBAGA,mBAnDA,SAmDA,GACA,iBACA,uCElLI,EAAY,YACd,GhBRW,WAAkB,IAAI3B,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,4BAA4B,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,gDAAgD,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,OAASL,EAAIU,GAAG,iDAAiD,aAAaV,EAAI+C,QAAQC,oCAAoC,kBAAkBhD,EAAIU,GAAG,4DAA4DV,EAAI0B,GAAI1B,EAAuB,qBAAE,SAASiD,EAAOV,EAAKjE,GAAO,OAAO4B,EAAG,MAAM,CAAC0B,IAAItD,EAAM8B,YAAY,yBAAyB,CAACF,EAAG,KAAK,CAACE,YAAY,WAAW,CAACJ,EAAIQ,GAAG,iBAAiBR,EAAIS,GAAG8B,GAAM,kBAAkBvC,EAAIQ,GAAG,KAAKN,EAAG,IAAI,CAACE,YAAY,UAAU,CAACJ,EAAIQ,GAAGR,EAAIS,GAAGwC,WAAe,IAAI,GAAGjD,EAAIQ,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,4BAA4B,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,OAASL,EAAIU,GAAG,0CAA0CV,EAAI0B,GAAI1B,EAAsB,oBAAE,SAASiD,EAAOV,EAAKjE,GAAO,OAAO4B,EAAG,MAAM,CAAC0B,IAAItD,EAAM8B,YAAY,yBAAyB,CAACF,EAAG,KAAK,CAACE,YAAY,WAAW,CAACJ,EAAIQ,GAAG,iBAAiBR,EAAIS,GAAG8B,GAAM,kBAAkBvC,EAAIQ,GAAG,KAAKN,EAAG,IAAI,CAACE,YAAY,UAAU,CAACJ,EAAIQ,GAAGR,EAAIS,GAAGwC,WAAe,IAAI,KAAKjD,EAAIQ,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,OAASL,EAAIU,GAAG,iDAAiDwC,YAAYlD,EAAImD,GAAG,CAAC,CAACvB,IAAI,UAAUwB,GAAG,WAAW,MAAO,CAAClD,EAAG,cAAc,CAACG,MAAM,CAAC,KAAO,iBAAiB,KAAO,QAAQ,QAAU,SAAS,eAAe,aAAaW,GAAG,CAAC,MAAQhB,EAAIqD,sBAAsB,CAACrD,EAAIQ,GAAG,6CAA6C8C,OAAM,MAAS,CAACtD,EAAIQ,GAAG,KAAKN,EAAG,iBAAiB,CAACG,MAAM,CAAC,YAAYL,EAAIuD,2BAA2B,aAAavD,EAAI+C,QAAQS,0CAA0C,IAAI,GAAGxD,EAAIQ,GAAG,KAAKN,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,OAASL,EAAIU,GAAG,iDAAiD,CAACR,EAAG,cAAc,CAACG,MAAM,CAAC,OAASL,EAAIc,OAAO,gBAAgBd,EAAIyD,wBAAwB,aAAazD,EAAIe,UAAU,aAAaf,EAAI+C,QAAQW,mCAAmC1C,GAAG,CAAC,cAAchB,EAAIiB,uBAAuB,IAAI,OAExiE,IgBSpB,EACA,KACA,KACA,MAIa,Y","file":"js/51-ffdf73b01db27246635a.chunk.js","sourcesContent":["export const formatTime = timeInSeconds => {\n  if (!timeInSeconds) {\n    return '';\n  }\n\n  if (timeInSeconds < 60) {\n    return `${timeInSeconds}s`;\n  }\n\n  if (timeInSeconds < 3600) {\n    const minutes = Math.floor(timeInSeconds / 60);\n    return `${minutes}m`;\n  }\n\n  if (timeInSeconds < 86400) {\n    const hours = Math.floor(timeInSeconds / 3600);\n    return `${hours}h`;\n  }\n\n  const days = Math.floor(timeInSeconds / 86400);\n  return `${days}d`;\n};\n\nexport const GROUP_BY_FILTER = {\n  1: { id: 1, period: 'day' },\n  2: { id: 2, period: 'week' },\n  3: { id: 3, period: 'month' },\n  4: { id: 4, period: 'year' },\n};\n\nexport const GROUP_BY_OPTIONS = {\n  DAY: {\n    id: 'DAY',\n    period: 'day',\n    translationKey: 'REPORT.GROUPING_OPTIONS.DAY',\n  },\n  WEEK: {\n    id: 'WEEK',\n    period: 'week',\n    translationKey: 'REPORT.GROUPING_OPTIONS.WEEK',\n  },\n  MONTH: {\n    id: 'MONTH',\n    period: 'month',\n    translationKey: 'REPORT.GROUPING_OPTIONS.MONTH',\n  },\n  YEAR: {\n    id: 'YEAR',\n    period: 'year',\n    translationKey: 'REPORT.GROUPING_OPTIONS.YEAR',\n  },\n};\n\nexport const DATE_RANGE_OPTIONS = {\n  LAST_7_DAYS: {\n    id: 'LAST_7_DAYS',\n    translationKey: 'REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS',\n    offset: 6,\n    groupByOptions: [GROUP_BY_OPTIONS.DAY],\n  },\n  LAST_30_DAYS: {\n    id: 'LAST_30_DAYS',\n    translationKey: 'REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS',\n    offset: 29,\n    groupByOptions: [GROUP_BY_OPTIONS.DAY, GROUP_BY_OPTIONS.WEEK],\n  },\n  LAST_3_MONTHS: {\n    id: 'LAST_3_MONTHS',\n    translationKey: 'REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS',\n    offset: 89,\n    groupByOptions: [\n      GROUP_BY_OPTIONS.DAY,\n      GROUP_BY_OPTIONS.WEEK,\n      GROUP_BY_OPTIONS.MONTH,\n    ],\n  },\n  LAST_6_MONTHS: {\n    id: 'LAST_6_MONTHS',\n    translationKey: 'REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS',\n    offset: 179,\n    groupByOptions: [GROUP_BY_OPTIONS.WEEK, GROUP_BY_OPTIONS.MONTH],\n  },\n  LAST_YEAR: {\n    id: 'LAST_YEAR',\n    translationKey: 'REPORT.DATE_RANGE_OPTIONS.LAST_YEAR',\n    offset: 364,\n    groupByOptions: [GROUP_BY_OPTIONS.WEEK, GROUP_BY_OPTIONS.MONTH],\n  },\n  CUSTOM_DATE_RANGE: {\n    id: 'CUSTOM_DATE_RANGE',\n    translationKey: 'REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE',\n    offset: null,\n    groupByOptions: [\n      GROUP_BY_OPTIONS.DAY,\n      GROUP_BY_OPTIONS.WEEK,\n      GROUP_BY_OPTIONS.MONTH,\n      GROUP_BY_OPTIONS.YEAR,\n    ],\n  },\n};\n\nexport const CHART_FONT_FAMILY =\n  'Inter,-apple-system,system-ui,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif';\n\nexport const DEFAULT_LINE_CHART = {\n  type: 'line',\n  fill: false,\n  borderColor: '#779BBB',\n  pointBackgroundColor: '#779BBB',\n};\n\nexport const DEFAULT_BAR_CHART = {\n  type: 'bar',\n  backgroundColor: 'rgb(31, 147, 255)',\n};\n\nexport const DEFAULT_CHART = {\n  datasets: [DEFAULT_BAR_CHART],\n  scales: {\n    xAxes: [\n      {\n        ticks: {\n          fontFamily: CHART_FONT_FAMILY,\n        },\n        gridLines: {\n          drawOnChartArea: false,\n        },\n      },\n    ],\n    yAxes: [\n      {\n        id: 'y-left',\n        type: 'linear',\n        position: 'left',\n        ticks: {\n          fontFamily: CHART_FONT_FAMILY,\n          beginAtZero: true,\n          stepSize: 1,\n          callback: (value, index, values) => {\n            if (!index || index === values.length - 1) {\n              return value;\n            }\n            return '';\n          },\n        },\n        gridLines: {\n          drawOnChartArea: false,\n        },\n      },\n    ],\n  },\n};\n\nconst TIME_CHART_CONFIG = {\n  datasets: [DEFAULT_BAR_CHART],\n  scales: {\n    xAxes: [\n      {\n        ticks: {\n          fontFamily: CHART_FONT_FAMILY,\n        },\n        gridLines: {\n          drawOnChartArea: false,\n        },\n      },\n    ],\n    yAxes: [\n      {\n        id: 'y-left',\n        type: 'linear',\n        position: 'left',\n        ticks: {\n          fontFamily: CHART_FONT_FAMILY,\n          callback: (value, index, values) => {\n            if (!index || index === values.length - 1) {\n              return formatTime(value);\n            }\n            return '';\n          },\n        },\n        gridLines: {\n          drawOnChartArea: false,\n        },\n      },\n    ],\n  },\n};\n\nexport const METRIC_CHART = {\n  conversations_count: DEFAULT_CHART,\n  incoming_messages_count: DEFAULT_CHART,\n  outgoing_messages_count: DEFAULT_CHART,\n  avg_first_response_time: TIME_CHART_CONFIG,\n  reply_time: TIME_CHART_CONFIG,\n  avg_resolution_time: TIME_CHART_CONFIG,\n  resolutions_count: DEFAULT_CHART,\n};\n\nexport const OVERVIEW_METRICS = {\n  open: 'OPEN',\n  unattended: 'UNATTENDED',\n  unassigned: 'UNASSIGNED',\n  online: 'ONLINE',\n  busy: 'BUSY',\n  offline: 'OFFLINE',\n};\n","export * from \"-!../../../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentTable.vue?vue&type=style&index=0&id=06e319f8&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetricCard.vue?vue&type=style&index=0&id=cfb995ec&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Heatmap.vue?vue&type=style&index=0&id=7dcfa47b&prod&scoped=true&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex-1 overflow-auto p-4\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"column small-12 medium-8 conversation-metric\"},[_c('metric-card',{attrs:{\"header\":_vm.$t('OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.HEADER'),\"is-loading\":_vm.uiFlags.isFetchingAccountConversationMetric,\"loading-message\":_vm.$t('OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.LOADING_MESSAGE')}},_vm._l((_vm.conversationMetrics),function(metric,name,index){return _c('div',{key:index,staticClass:\"metric-content column\"},[_c('h3',{staticClass:\"heading\"},[_vm._v(\"\\n            \"+_vm._s(name)+\"\\n          \")]),_vm._v(\" \"),_c('p',{staticClass:\"metric\"},[_vm._v(_vm._s(metric))])])}),0)],1),_vm._v(\" \"),_c('div',{staticClass:\"column small-12 medium-4\"},[_c('metric-card',{attrs:{\"header\":_vm.$t('OVERVIEW_REPORTS.AGENT_STATUS.HEADER')}},_vm._l((_vm.agentStatusMetrics),function(metric,name,index){return _c('div',{key:index,staticClass:\"metric-content column\"},[_c('h3',{staticClass:\"heading\"},[_vm._v(\"\\n            \"+_vm._s(name)+\"\\n          \")]),_vm._v(\" \"),_c('p',{staticClass:\"metric\"},[_vm._v(_vm._s(metric))])])}),0)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('metric-card',{attrs:{\"header\":_vm.$t('OVERVIEW_REPORTS.CONVERSATION_HEATMAP.HEADER')},scopedSlots:_vm._u([{key:\"control\",fn:function(){return [_c('woot-button',{attrs:{\"icon\":\"arrow-download\",\"size\":\"small\",\"variant\":\"smooth\",\"color-scheme\":\"secondary\"},on:{\"click\":_vm.downloadHeatmapData}},[_vm._v(\"\\n          Download Report\\n        \")])]},proxy:true}])},[_vm._v(\" \"),_c('report-heatmap',{attrs:{\"heat-data\":_vm.accountConversationHeatmap,\"is-loading\":_vm.uiFlags.isFetchingAccountConversationsHeatmap}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('metric-card',{attrs:{\"header\":_vm.$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.HEADER')}},[_c('agent-table',{attrs:{\"agents\":_vm.agents,\"agent-metrics\":_vm.agentConversationMetric,\"page-index\":_vm.pageIndex,\"is-loading\":_vm.uiFlags.isFetchingAgentConversationMetric},on:{\"page-change\":_vm.onPageNumberChange}})],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AgentTable.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"agent-table-container\">\n    <ve-table\n      max-height=\"calc(100vh - 21.875rem)\"\n      :fixed-header=\"true\"\n      :columns=\"columns\"\n      :table-data=\"tableData\"\n    />\n    <div v-if=\"isLoading\" class=\"agents-loader\">\n      <spinner />\n      <span>{{\n        $t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.LOADING_MESSAGE')\n      }}</span>\n    </div>\n    <empty-state\n      v-else-if=\"!isLoading && !agentMetrics.length\"\n      :title=\"$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.NO_AGENTS')\"\n    />\n    <div v-if=\"agentMetrics.length > 0\" class=\"table-pagination\">\n      <ve-pagination\n        :total=\"agents.length\"\n        :page-index=\"pageIndex\"\n        :page-size=\"25\"\n        :page-size-option=\"[25]\"\n        @on-page-number-change=\"onPageNumberChange\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { VeTable, VePagination } from 'vue-easytable';\nimport Spinner from 'shared/components/Spinner.vue';\nimport EmptyState from 'dashboard/components/widgets/EmptyState.vue';\nimport rtlMixin from 'shared/mixins/rtlMixin';\nimport Thumbnail from 'dashboard/components/widgets/Thumbnail.vue';\n\nexport default {\n  name: 'AgentTable',\n  components: {\n    EmptyState,\n    Spinner,\n    VeTable,\n    VePagination,\n  },\n  mixins: [rtlMixin],\n  props: {\n    agents: {\n      type: Array,\n      default: () => [],\n    },\n    agentMetrics: {\n      type: Array,\n      default: () => [],\n    },\n    isLoading: {\n      type: Boolean,\n      default: false,\n    },\n    pageIndex: {\n      type: Number,\n      default: 1,\n    },\n  },\n  computed: {\n    tableData() {\n      return this.agentMetrics.map(agent => {\n        const agentInformation = this.getAgentInformation(agent.id);\n        return {\n          agent: agentInformation.name,\n          email: agentInformation.email,\n          thumbnail: agentInformation.thumbnail,\n          open: agent.metric.open || 0,\n          unattended: agent.metric.unattended || 0,\n          status: agentInformation.availability_status,\n        };\n      });\n    },\n    columns() {\n      return [\n        {\n          field: 'agent',\n          key: 'agent',\n          title: this.$t(\n            'OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.AGENT'\n          ),\n          fixed: 'left',\n          align: this.isRTLView ? 'right' : 'left',\n          width: 25,\n          renderBodyCell: ({ row }) => (\n            <div class=\"row-user-block\">\n              <Thumbnail\n                src={row.thumbnail}\n                size=\"32px\"\n                username={row.agent}\n                status={row.status}\n              />\n              <div class=\"user-block\">\n                <h6 class=\"title overflow-hidden whitespace-nowrap text-ellipsis\">\n                  {row.agent}\n                </h6>\n                <span class=\"sub-title\">{row.email}</span>\n              </div>\n            </div>\n          ),\n        },\n        {\n          field: 'open',\n          key: 'open',\n          title: this.$t(\n            'OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.OPEN'\n          ),\n          align: this.isRTLView ? 'right' : 'left',\n          width: 10,\n        },\n        {\n          field: 'unattended',\n          key: 'unattended',\n          title: this.$t(\n            'OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.UNATTENDED'\n          ),\n          align: this.isRTLView ? 'right' : 'left',\n          width: 10,\n        },\n      ];\n    },\n  },\n  methods: {\n    onPageNumberChange(pageIndex) {\n      this.$emit('page-change', pageIndex);\n    },\n    getAgentInformation(id) {\n      return this.agents.find(agent => agent.id === Number(id));\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.agent-table-container {\n  @apply flex flex-col flex-1;\n\n  .ve-table {\n    &::v-deep {\n      th.ve-table-header-th {\n        font-size: var(--font-size-mini) !important;\n        padding: var(--space-small) var(--space-two) !important;\n      }\n\n      td.ve-table-body-td {\n        padding: var(--space-one) var(--space-two) !important;\n      }\n    }\n  }\n\n  &::v-deep .ve-pagination {\n    @apply bg-transparent dark:bg-transparent;\n  }\n\n  &::v-deep .ve-pagination-select {\n    @apply hidden;\n  }\n\n  .row-user-block {\n    @apply items-center flex text-left;\n\n    .user-block {\n      @apply items-start flex flex-col min-w-0 my-0 mx-2;\n\n      .title {\n        @apply text-sm m-0 leading-[1.2] text-slate-800 dark:text-slate-100;\n      }\n      .sub-title {\n        @apply text-xs text-slate-600 dark:text-slate-200;\n      }\n    }\n  }\n\n  .table-pagination {\n    @apply mt-4 text-right;\n  }\n}\n\n.agents-loader {\n  @apply items-center flex text-base justify-center p-8;\n}\n</style>\n","import { render, staticRenderFns } from \"./AgentTable.vue?vue&type=template&id=06e319f8&scoped=true&\"\nimport script from \"./AgentTable.vue?vue&type=script&lang=js&\"\nexport * from \"./AgentTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AgentTable.vue?vue&type=style&index=0&id=06e319f8&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06e319f8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"agent-table-container\"},[_c('ve-table',{attrs:{\"max-height\":\"calc(100vh - 21.875rem)\",\"fixed-header\":true,\"columns\":_vm.columns,\"table-data\":_vm.tableData}}),_vm._v(\" \"),(_vm.isLoading)?_c('div',{staticClass:\"agents-loader\"},[_c('spinner'),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.LOADING_MESSAGE')))])],1):(!_vm.isLoading && !_vm.agentMetrics.length)?_c('empty-state',{attrs:{\"title\":_vm.$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.NO_AGENTS')}}):_vm._e(),_vm._v(\" \"),(_vm.agentMetrics.length > 0)?_c('div',{staticClass:\"table-pagination\"},[_c('ve-pagination',{attrs:{\"total\":_vm.agents.length,\"page-index\":_vm.pageIndex,\"page-size\":25,\"page-size-option\":[25]},on:{\"on-page-number-change\":_vm.onPageNumberChange}})],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetricCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetricCard.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"card\">\n    <div class=\"card-header\">\n      <slot name=\"header\">\n        <div class=\"card-header--title-area\">\n          <h5>{{ header }}</h5>\n          <span class=\"live\">\n            <span class=\"ellipse\" /><span>{{\n              $t('OVERVIEW_REPORTS.LIVE')\n            }}</span>\n          </span>\n        </div>\n        <div class=\"card-header--control-area\">\n          <slot name=\"control\" />\n        </div>\n      </slot>\n    </div>\n    <div v-if=\"!isLoading\" class=\"card-body row\">\n      <slot />\n    </div>\n    <div v-else-if=\"isLoading\" class=\"conversation-metric-loader\">\n      <spinner />\n      <span>{{ loadingMessage }}</span>\n    </div>\n  </div>\n</template>\n<script>\nimport Spinner from 'shared/components/Spinner.vue';\n\nexport default {\n  name: 'MetricCard',\n  components: {\n    Spinner,\n  },\n  props: {\n    header: {\n      type: String,\n      default: '',\n    },\n    isLoading: {\n      type: Boolean,\n      default: false,\n    },\n    loadingMessage: {\n      type: String,\n      default: '',\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.card {\n  @apply bg-white dark:bg-slate-800 border-slate-75 dark:border-slate-700;\n  margin: var(--space-small) !important;\n\n  .card-header--control-area {\n    transition: opacity 0.2s ease-in-out;\n    @apply opacity-20;\n  }\n\n  &:hover {\n    .card-header--control-area {\n      @apply opacity-100;\n    }\n  }\n}\n\n.card-header {\n  grid-template-columns: repeat(auto-fit, minmax(max-content, 50%));\n  gap: var(--space-small) 0px;\n  @apply grid flex-grow w-full mb-6;\n\n  .card-header--title-area {\n    @apply flex items-center flex-row;\n\n    h5 {\n      @apply mb-0 text-slate-800 dark:text-slate-100;\n    }\n\n    .live {\n      background: rgba(37, 211, 102, 0.1);\n      @apply flex flex-row items-center pr-2 pl-2 m-1 text-green-400 dark:text-green-400 text-xs;\n\n      .ellipse {\n        @apply bg-green-400 dark:bg-green-400 h-1 w-1 rounded-full mr-1 rtl:mr-0 rtl:ml-0;\n      }\n    }\n  }\n\n  .card-header--control-area {\n    @apply flex flex-row items-center justify-end gap-2;\n  }\n}\n\n.card-body {\n  .metric-content {\n    @apply pb-2;\n    .heading {\n      @apply text-base text-slate-700 dark:text-slate-100;\n    }\n    .metric {\n      @apply text-woot-800 dark:text-woot-300 text-3xl mb-0 mt-1;\n    }\n  }\n}\n\n.conversation-metric-loader {\n  @apply items-center flex text-base justify-center p-12;\n}\n</style>\n","import { render, staticRenderFns } from \"./MetricCard.vue?vue&type=template&id=cfb995ec&scoped=true&\"\nimport script from \"./MetricCard.vue?vue&type=script&lang=js&\"\nexport * from \"./MetricCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MetricCard.vue?vue&type=style&index=0&id=cfb995ec&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cfb995ec\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_vm._t(\"header\",function(){return [_c('div',{staticClass:\"card-header--title-area\"},[_c('h5',[_vm._v(_vm._s(_vm.header))]),_vm._v(\" \"),_c('span',{staticClass:\"live\"},[_c('span',{staticClass:\"ellipse\"}),_c('span',[_vm._v(_vm._s(_vm.$t('OVERVIEW_REPORTS.LIVE')))])])]),_vm._v(\" \"),_c('div',{staticClass:\"card-header--control-area\"},[_vm._t(\"control\")],2)]})],2),_vm._v(\" \"),(!_vm.isLoading)?_c('div',{staticClass:\"card-body row\"},[_vm._t(\"default\")],2):(_vm.isLoading)?_c('div',{staticClass:\"conversation-metric-loader\"},[_c('spinner'),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.loadingMessage))])],1):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"heatmap-container\">\n    <template v-if=\"isLoading\">\n      <div class=\"heatmap-labels\">\n        <div\n          v-for=\"ii in 7\"\n          :key=\"ii\"\n          class=\"loading-cell heatmap-axis-label\"\n        />\n      </div>\n      <div class=\"heatmap-grid\">\n        <div v-for=\"ii in 7\" :key=\"ii\" class=\"heatmap-grid-row\">\n          <div v-for=\"jj in 24\" :key=\"jj\" class=\"heatmap-tile loading-cell\">\n            <div class=\"heatmap-tile__label loading-cell\" />\n          </div>\n        </div>\n      </div>\n      <div class=\"heatmap-timeline\" />\n      <div class=\"heatmap-markers\">\n        <div v-for=\"ii in 24\" :key=\"ii\">{{ ii - 1 }} – {{ ii }}</div>\n      </div>\n    </template>\n    <template v-else>\n      <div class=\"heatmap-labels\">\n        <div\n          v-for=\"dateKey in processedData.keys()\"\n          :key=\"dateKey\"\n          class=\"heatmap-axis-label\"\n        >\n          {{ getDayOfTheWeek(new Date(dateKey)) }}\n          <time>{{ formatDate(dateKey) }}</time>\n        </div>\n      </div>\n      <div class=\"heatmap-grid\">\n        <div\n          v-for=\"dateKey in processedData.keys()\"\n          :key=\"dateKey\"\n          class=\"heatmap-grid-row\"\n        >\n          <div\n            v-for=\"data in processedData.get(dateKey)\"\n            :key=\"data.timestamp\"\n            v-tooltip.top=\"getCountTooltip(data.value)\"\n            class=\"heatmap-tile\"\n            :class=\"getHeatmapLevelClass(data.value)\"\n          >\n            <div class=\"heatmap-tile__label\" />\n          </div>\n        </div>\n      </div>\n      <div class=\"heatmap-timeline\" />\n      <div class=\"heatmap-markers\">\n        <div v-for=\"ii in 24\" :key=\"ii\">{{ ii - 1 }} – {{ ii }}</div>\n      </div>\n    </template>\n  </div>\n</template>\n<script>\nimport { getQuantileIntervals } from '@chatwoot/utils';\nimport format from 'date-fns/format';\nimport getDay from 'date-fns/getDay';\n\nimport { groupHeatmapByDay } from 'helpers/ReportsDataHelper';\n\nexport default {\n  name: 'Heatmap',\n  props: {\n    heatData: {\n      type: Array,\n      default: () => [],\n    },\n    isLoading: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    processedData() {\n      return groupHeatmapByDay(this.heatData);\n    },\n    quantileRange() {\n      const flattendedData = this.heatData.map(data => data.value);\n      return getQuantileIntervals(\n        flattendedData,\n        [0.2, 0.4, 0.6, 0.8, 0.9, 0.99]\n      );\n    },\n  },\n  methods: {\n    getCountTooltip(value) {\n      if (!value) {\n        return this.$t(\n          'OVERVIEW_REPORTS.CONVERSATION_HEATMAP.NO_CONVERSATIONS'\n        );\n      }\n\n      if (value === 1) {\n        return this.$t('OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATION', {\n          count: value,\n        });\n      }\n\n      return this.$t('OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATIONS', {\n        count: value,\n      });\n    },\n    formatDate(dateString) {\n      return format(new Date(dateString), 'MMM d, yyyy');\n    },\n    getDayOfTheWeek(date) {\n      const dayIndex = getDay(date);\n      const days = [\n        this.$t('DAYS_OF_WEEK.SUNDAY'),\n        this.$t('DAYS_OF_WEEK.MONDAY'),\n        this.$t('DAYS_OF_WEEK.TUESDAY'),\n        this.$t('DAYS_OF_WEEK.WEDNESDAY'),\n        this.$t('DAYS_OF_WEEK.THURSDAY'),\n        this.$t('DAYS_OF_WEEK.FRIDAY'),\n        this.$t('DAYS_OF_WEEK.SATURDAY'),\n      ];\n      return days[dayIndex];\n    },\n    getHeatmapLevelClass(value) {\n      if (!value) return '';\n\n      const level = [...this.quantileRange, Infinity].findIndex(\n        range => value <= range && value > 0\n      );\n\n      if (level > 6) {\n        return 'l6';\n      }\n\n      return `l${level}`;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n$heatmap-colors: (\n  level-1: var(--w-50),\n  level-2: var(--w-100),\n  level-3: var(--w-300),\n  level-4: var(--w-500),\n  level-5: var(--w-700),\n  level-6: var(--w-900),\n);\n\n$heatmap-hover-border-color: (\n  level-1: var(--w-25),\n  level-2: var(--w-50),\n  level-3: var(--w-100),\n  level-4: var(--w-300),\n  level-5: var(--w-500),\n  level-6: var(--w-700),\n);\n\n$tile-height: 1.875rem;\n$tile-gap: var(--space-smaller);\n$container-gap-row: var(--space-one);\n$container-gap-column: var(--space-two);\n$marker-height: var(--space-two);\n\n@mixin heatmap-level($level) {\n  $color: map-get($heatmap-colors, 'level-#{$level}');\n  background-color: $color;\n  &:hover {\n    border: 1px solid map-get($heatmap-hover-border-color, 'level-#{$level}');\n  }\n}\n\n@media screen and (max-width: 768px) {\n  .heatmap-container {\n    overflow-y: auto;\n  }\n}\n\n.loading-cell {\n  background-color: var(--color-background-light);\n  border: 0px;\n\n  animation: loading-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n}\n\n@keyframes loading-pulse {\n  0%,\n  100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0;\n  }\n}\n\n.heatmap-container {\n  display: grid;\n  position: relative;\n  width: 100%;\n  gap: $container-gap-row $container-gap-column;\n  grid-template-columns: 80px 1fr;\n  min-height: calc(\n    7 * #{$tile-height} + 6 * #{$tile-gap} + #{$container-gap-row} + #{$marker-height}\n  );\n}\n\n.heatmap-labels {\n  display: grid;\n  grid-template-rows: 1fr;\n  gap: $tile-gap;\n  flex-shrink: 0;\n\n  .heatmap-axis-label {\n    height: $tile-height;\n    min-width: 70px;\n    font-size: var(--font-size-micro);\n    font-weight: var(--font-weight-bold);\n    display: flex;\n    flex-direction: column;\n    align-items: end;\n    justify-content: center;\n    @apply text-slate-800 dark:text-slate-200;\n\n    time {\n      font-size: var(--font-size-micro);\n      font-weight: var(--font-weight-normal);\n      @apply text-slate-700 dark:text-slate-200;\n    }\n  }\n}\n\n.heatmap-grid {\n  display: grid;\n  grid-template-rows: 1fr;\n  gap: $tile-gap;\n  min-width: 700px;\n  width: 100%;\n\n  .heatmap-grid-row {\n    display: grid;\n    gap: $tile-gap;\n    grid-template-columns: repeat(24, 1fr);\n  }\n\n  .heatmap-tile {\n    width: auto;\n    height: $tile-height;\n    border-radius: var(--border-radius-normal);\n\n    &:hover {\n      box-shadow: var(--shadow-large);\n\n      transform: translateY(-2px);\n      transition:\n        transform 0.2s ease-in-out,\n        box-shadow 0.2s ease-in-out;\n    }\n\n    &:not(.l1):not(.l2):not(.l3):not(.l4):not(.l5):not(.l6) {\n      background-color: var(--color-background-light);\n      border: 1px solid var(--color-border-light);\n\n      &:hover {\n        transform: translateY(0);\n        box-shadow: none;\n        border: 1px solid var(--color-border-light);\n      }\n    }\n\n    &.l1 {\n      @include heatmap-level(1);\n    }\n    &.l2 {\n      @include heatmap-level(2);\n    }\n    &.l3 {\n      @include heatmap-level(3);\n    }\n    &.l4 {\n      @include heatmap-level(4);\n    }\n    &.l5 {\n      @include heatmap-level(5);\n    }\n    &.l6 {\n      @include heatmap-level(6);\n    }\n  }\n}\n\n.heatmap-markers {\n  display: grid;\n  grid-template-columns: repeat(24, 1fr);\n  gap: $tile-gap;\n  width: 100%;\n  font-size: var(--font-size-nano);\n  font-weight: var(--font-weight-bold);\n  height: $marker-height;\n  color: var(--color-body);\n  @apply text-slate-800 dark:text-slate-200;\n\n  div {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n}\n</style>\n","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name getDay\n * @category Weekday Helpers\n * @summary Get the day of the week of the given date.\n *\n * @description\n * Get the day of the week of the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the given date\n * @returns {0|1|2|3|4|5|6} the day of week, 0 represents Sunday\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Which day of the week is 29 February 2012?\n * const result = getDay(new Date(2012, 1, 29))\n * //=> 3\n */\n\nexport default function getDay(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  var day = date.getDay();\n  return day;\n}","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Heatmap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Heatmap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Heatmap.vue?vue&type=template&id=7dcfa47b&scoped=true&\"\nimport script from \"./Heatmap.vue?vue&type=script&lang=js&\"\nexport * from \"./Heatmap.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Heatmap.vue?vue&type=style&index=0&id=7dcfa47b&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7dcfa47b\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"heatmap-container\"},[(_vm.isLoading)?[_c('div',{staticClass:\"heatmap-labels\"},_vm._l((7),function(ii){return _c('div',{key:ii,staticClass:\"loading-cell heatmap-axis-label\"})}),0),_vm._v(\" \"),_c('div',{staticClass:\"heatmap-grid\"},_vm._l((7),function(ii){return _c('div',{key:ii,staticClass:\"heatmap-grid-row\"},_vm._l((24),function(jj){return _c('div',{key:jj,staticClass:\"heatmap-tile loading-cell\"},[_c('div',{staticClass:\"heatmap-tile__label loading-cell\"})])}),0)}),0),_vm._v(\" \"),_c('div',{staticClass:\"heatmap-timeline\"}),_vm._v(\" \"),_c('div',{staticClass:\"heatmap-markers\"},_vm._l((24),function(ii){return _c('div',{key:ii},[_vm._v(_vm._s(ii - 1)+\" – \"+_vm._s(ii))])}),0)]:[_c('div',{staticClass:\"heatmap-labels\"},_vm._l((_vm.processedData.keys()),function(dateKey){return _c('div',{key:dateKey,staticClass:\"heatmap-axis-label\"},[_vm._v(\"\\n        \"+_vm._s(_vm.getDayOfTheWeek(new Date(dateKey)))+\"\\n        \"),_c('time',[_vm._v(_vm._s(_vm.formatDate(dateKey)))])])}),0),_vm._v(\" \"),_c('div',{staticClass:\"heatmap-grid\"},_vm._l((_vm.processedData.keys()),function(dateKey){return _c('div',{key:dateKey,staticClass:\"heatmap-grid-row\"},_vm._l((_vm.processedData.get(dateKey)),function(data){return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip.top\",value:(_vm.getCountTooltip(data.value)),expression:\"getCountTooltip(data.value)\",modifiers:{\"top\":true}}],key:data.timestamp,staticClass:\"heatmap-tile\",class:_vm.getHeatmapLevelClass(data.value)},[_c('div',{staticClass:\"heatmap-tile__label\"})])}),0)}),0),_vm._v(\" \"),_c('div',{staticClass:\"heatmap-timeline\"}),_vm._v(\" \"),_c('div',{staticClass:\"heatmap-markers\"},_vm._l((24),function(ii){return _c('div',{key:ii},[_vm._v(_vm._s(ii - 1)+\" – \"+_vm._s(ii))])}),0)]],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"flex-1 overflow-auto p-4\">\n    <div class=\"row\">\n      <div class=\"column small-12 medium-8 conversation-metric\">\n        <metric-card\n          :header=\"$t('OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.HEADER')\"\n          :is-loading=\"uiFlags.isFetchingAccountConversationMetric\"\n          :loading-message=\"\n            $t('OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.LOADING_MESSAGE')\n          \"\n        >\n          <div\n            v-for=\"(metric, name, index) in conversationMetrics\"\n            :key=\"index\"\n            class=\"metric-content column\"\n          >\n            <h3 class=\"heading\">\n              {{ name }}\n            </h3>\n            <p class=\"metric\">{{ metric }}</p>\n          </div>\n        </metric-card>\n      </div>\n      <div class=\"column small-12 medium-4\">\n        <metric-card :header=\"$t('OVERVIEW_REPORTS.AGENT_STATUS.HEADER')\">\n          <div\n            v-for=\"(metric, name, index) in agentStatusMetrics\"\n            :key=\"index\"\n            class=\"metric-content column\"\n          >\n            <h3 class=\"heading\">\n              {{ name }}\n            </h3>\n            <p class=\"metric\">{{ metric }}</p>\n          </div>\n        </metric-card>\n      </div>\n    </div>\n    <div class=\"row\">\n      <metric-card :header=\"$t('OVERVIEW_REPORTS.CONVERSATION_HEATMAP.HEADER')\">\n        <template #control>\n          <woot-button\n            icon=\"arrow-download\"\n            size=\"small\"\n            variant=\"smooth\"\n            color-scheme=\"secondary\"\n            @click=\"downloadHeatmapData\"\n          >\n            Download Report\n          </woot-button>\n        </template>\n        <report-heatmap\n          :heat-data=\"accountConversationHeatmap\"\n          :is-loading=\"uiFlags.isFetchingAccountConversationsHeatmap\"\n        />\n      </metric-card>\n    </div>\n    <div class=\"row\">\n      <metric-card :header=\"$t('OVERVIEW_REPORTS.AGENT_CONVERSATIONS.HEADER')\">\n        <agent-table\n          :agents=\"agents\"\n          :agent-metrics=\"agentConversationMetric\"\n          :page-index=\"pageIndex\"\n          :is-loading=\"uiFlags.isFetchingAgentConversationMetric\"\n          @page-change=\"onPageNumberChange\"\n        />\n      </metric-card>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex';\nimport AgentTable from './components/overview/AgentTable.vue';\nimport MetricCard from './components/overview/MetricCard.vue';\nimport { OVERVIEW_METRICS } from './constants';\nimport ReportHeatmap from './components/Heatmap.vue';\n\nimport endOfDay from 'date-fns/endOfDay';\nimport getUnixTime from 'date-fns/getUnixTime';\nimport startOfDay from 'date-fns/startOfDay';\nimport subDays from 'date-fns/subDays';\n\nexport default {\n  name: 'LiveReports',\n  components: {\n    AgentTable,\n    MetricCard,\n    ReportHeatmap,\n  },\n  data() {\n    return {\n      pageIndex: 1,\n    };\n  },\n  computed: {\n    ...mapGetters({\n      agentStatus: 'agents/getAgentStatus',\n      agents: 'agents/getAgents',\n      accountConversationMetric: 'getAccountConversationMetric',\n      agentConversationMetric: 'getAgentConversationMetric',\n      accountConversationHeatmap: 'getAccountConversationHeatmapData',\n      uiFlags: 'getOverviewUIFlags',\n    }),\n    agentStatusMetrics() {\n      let metric = {};\n      Object.keys(this.agentStatus).forEach(key => {\n        const metricName = this.$t(\n          `OVERVIEW_REPORTS.AGENT_STATUS.${OVERVIEW_METRICS[key]}`\n        );\n        metric[metricName] = this.agentStatus[key];\n      });\n      return metric;\n    },\n    conversationMetrics() {\n      let metric = {};\n      Object.keys(this.accountConversationMetric).forEach(key => {\n        const metricName = this.$t(\n          `OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.${OVERVIEW_METRICS[key]}`\n        );\n        metric[metricName] = this.accountConversationMetric[key];\n      });\n      return metric;\n    },\n  },\n  mounted() {\n    this.$store.dispatch('agents/get');\n    this.fetchAllData();\n\n    bus.$on('fetch_overview_reports', () => {\n      this.fetchAllData();\n    });\n  },\n  methods: {\n    fetchAllData() {\n      this.fetchAccountConversationMetric();\n      this.fetchAgentConversationMetric();\n      this.fetchHeatmapData();\n    },\n    downloadHeatmapData() {\n      let to = endOfDay(new Date());\n\n      this.$store.dispatch('downloadAccountConversationHeatmap', {\n        to: getUnixTime(to),\n      });\n    },\n    fetchHeatmapData() {\n      if (this.uiFlags.isFetchingAccountConversationsHeatmap) {\n        return;\n      }\n\n      // the data for the last 6 days won't ever change,\n      // so there's no need to fetch it again\n      // but we can write some logic to check if the data is already there\n      // if it is there, we can refetch data only for today all over again\n      // and reconcile it with the rest of the data\n      // this will reduce the load on the server doing number crunching\n      let to = endOfDay(new Date());\n      let from = startOfDay(subDays(to, 6));\n\n      if (this.accountConversationHeatmap.length) {\n        to = endOfDay(new Date());\n        from = startOfDay(to);\n      }\n\n      this.$store.dispatch('fetchAccountConversationHeatmap', {\n        metric: 'conversations_count',\n        from: getUnixTime(from),\n        to: getUnixTime(to),\n        groupBy: 'hour',\n        businessHours: false,\n      });\n    },\n    fetchAccountConversationMetric() {\n      this.$store.dispatch('fetchAccountConversationMetric', {\n        type: 'account',\n      });\n    },\n    fetchAgentConversationMetric() {\n      this.$store.dispatch('fetchAgentConversationMetric', {\n        type: 'agent',\n        page: this.pageIndex,\n      });\n    },\n    onPageNumberChange(pageIndex) {\n      this.pageIndex = pageIndex;\n      this.fetchAgentConversationMetric();\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LiveReports.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LiveReports.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LiveReports.vue?vue&type=template&id=c5f081ea&\"\nimport script from \"./LiveReports.vue?vue&type=script&lang=js&\"\nexport * from \"./LiveReports.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}