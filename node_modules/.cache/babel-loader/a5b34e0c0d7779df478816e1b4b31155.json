{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar surrogate_pairs_1 = require(\"./surrogate-pairs\");\n\nvar ALPHA_INDEX = {\n  '&lt': '<',\n  '&gt': '>',\n  '&quot': '\"',\n  '&apos': '\\'',\n  '&amp': '&',\n  '&lt;': '<',\n  '&gt;': '>',\n  '&quot;': '\"',\n  '&apos;': '\\'',\n  '&amp;': '&'\n};\nvar CHAR_INDEX = {\n  60: 'lt',\n  62: 'gt',\n  34: 'quot',\n  39: 'apos',\n  38: 'amp'\n};\nvar CHAR_S_INDEX = {\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  '\\'': '&apos;',\n  '&': '&amp;'\n};\n\nvar XmlEntities =\n/** @class */\nfunction () {\n  function XmlEntities() {}\n\n  XmlEntities.prototype.encode = function (str) {\n    if (!str || !str.length) {\n      return '';\n    }\n\n    return str.replace(/[<>\"'&]/g, function (s) {\n      return CHAR_S_INDEX[s];\n    });\n  };\n\n  XmlEntities.encode = function (str) {\n    return new XmlEntities().encode(str);\n  };\n\n  XmlEntities.prototype.decode = function (str) {\n    if (!str || !str.length) {\n      return '';\n    }\n\n    return str.replace(/&#?[0-9a-zA-Z]+;?/g, function (s) {\n      if (s.charAt(1) === '#') {\n        var code = s.charAt(2).toLowerCase() === 'x' ? parseInt(s.substr(3), 16) : parseInt(s.substr(2));\n\n        if (!isNaN(code) || code >= -32768) {\n          if (code <= 65535) {\n            return String.fromCharCode(code);\n          } else {\n            return surrogate_pairs_1.fromCodePoint(code);\n          }\n        }\n\n        return '';\n      }\n\n      return ALPHA_INDEX[s] || s;\n    });\n  };\n\n  XmlEntities.decode = function (str) {\n    return new XmlEntities().decode(str);\n  };\n\n  XmlEntities.prototype.encodeNonUTF = function (str) {\n    if (!str || !str.length) {\n      return '';\n    }\n\n    var strLength = str.length;\n    var result = '';\n    var i = 0;\n\n    while (i < strLength) {\n      var c = str.charCodeAt(i);\n      var alpha = CHAR_INDEX[c];\n\n      if (alpha) {\n        result += \"&\" + alpha + \";\";\n        i++;\n        continue;\n      }\n\n      if (c < 32 || c > 126) {\n        if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {\n          result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';\n          i++;\n        } else {\n          result += '&#' + c + ';';\n        }\n      } else {\n        result += str.charAt(i);\n      }\n\n      i++;\n    }\n\n    return result;\n  };\n\n  XmlEntities.encodeNonUTF = function (str) {\n    return new XmlEntities().encodeNonUTF(str);\n  };\n\n  XmlEntities.prototype.encodeNonASCII = function (str) {\n    if (!str || !str.length) {\n      return '';\n    }\n\n    var strLength = str.length;\n    var result = '';\n    var i = 0;\n\n    while (i < strLength) {\n      var c = str.charCodeAt(i);\n\n      if (c <= 255) {\n        result += str[i++];\n        continue;\n      }\n\n      if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {\n        result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';\n        i++;\n      } else {\n        result += '&#' + c + ';';\n      }\n\n      i++;\n    }\n\n    return result;\n  };\n\n  XmlEntities.encodeNonASCII = function (str) {\n    return new XmlEntities().encodeNonASCII(str);\n  };\n\n  return XmlEntities;\n}();\n\nexports.XmlEntities = XmlEntities;","map":null,"metadata":{},"sourceType":"module"}