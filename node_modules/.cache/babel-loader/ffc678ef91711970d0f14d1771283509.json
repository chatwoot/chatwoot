{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { createTransport } from '@sentry/core';\nimport { getNativeFetchImplementation } from './utils';\n/**\n * Creates a Transport that uses the Fetch API to send events to Sentry.\n */\n\nexport function makeNewFetchTransport(options, nativeFetch) {\n  if (nativeFetch === void 0) {\n    nativeFetch = getNativeFetchImplementation();\n  }\n\n  function makeRequest(request) {\n    var requestOptions = __assign({\n      body: request.body,\n      method: 'POST',\n      referrerPolicy: 'origin'\n    }, options.requestOptions);\n\n    return nativeFetch(options.url, requestOptions).then(function (response) {\n      return response.text().then(function (body) {\n        return {\n          body: body,\n          headers: {\n            'x-sentry-rate-limits': response.headers.get('X-Sentry-Rate-Limits'),\n            'retry-after': response.headers.get('Retry-After')\n          },\n          reason: response.statusText,\n          statusCode: response.status\n        };\n      });\n    });\n  }\n\n  return createTransport({\n    bufferSize: options.bufferSize\n  }, makeRequest);\n}","map":null,"metadata":{},"sourceType":"module"}